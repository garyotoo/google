window.game = "DQoNCjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IA0KPCEtLSBGb3IgdGhlIHJlZ3VsYXJseSB1cGRhdGluZyBkb2MgZ28gdG8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xX0ZtSDNCbFNCUUk3RkdnQVFMNTktWlBlOGVDeHMzNXdlbDZKVXlWYUc4US8gLS0+DQoNCg0KDQoNCjxodG1sPjxoZWFkPjxzY3JpcHQgc3JjPSIvL3d3dy5nb29nbGUuY29tL2pzYXBpIj48L3NjcmlwdD48c2NyaXB0PndpbmRvdy5wYXJlbnQubWFlRXhwb3J0QXBpc18oKTs8L3NjcmlwdD4NCg0KICAgIA0KICAgICAgICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+DQogICAgICAgIDxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iSUU9ZWRnZSI+DQogICAgICAgIDx0aXRsZT5HYW1lPC90aXRsZT4NCiAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xIj4NCiAgICA8c3R5bGUgdHlwZT0idGV4dC9jc3MiPiNidXR0b24gew0KICBkaXNwbGF5Om5vbmU7DQp9DQouaW1nYl92aXMgew0KICBhbmltYXRpb246IGltZ2ItYW5pbWF0aW9uIDdzIGxpbmVhcjsNCn0NCkBrZXlmcmFtZXMgaW1nYi1hbmltYXRpb24gew0KICAxMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsNCiAgfQ0KICAyMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDBweCk7DQogIH0NCiAgOTAlIHsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwcHgpOw0KICB9DQogIDEwMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsNCiAgfQ0KfTwvc3R5bGU+PC9oZWFkPg0KICAgIDxib2R5IHN0eWxlPSJvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsiPg0KICAgICAgICA8c2NyaXB0Pg0KICAgICAgICAgICAgY29uc3QgZGEgPSAoYSxiPSEwKT0+ew0KICAgICAgICAgICAgICAgIGxldCBjID0gbnVsbDsNCiAgICAgICAgICAgICAgICBiICYmIChjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksDQogICAgICAgICAgICAgICAgYy5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB6LWluZGV4OiAtMTsiKSk7DQogICAgICAgICAgICAgICAgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGIuc2V0QXR0cmlidXRlKCJzdHlsZSIsICJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgei1pbmRleDogLTE7aW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZVNwZWVkO2ltYWdlLXJlbmRlcmluZzogcGl4ZWxhdGVkO2ltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsiKTsNCiAgICAgICAgICAgICAgICBiLndpZHRoID0gMTYwOw0KICAgICAgICAgICAgICAgIGIuaGVpZ2h0ID0gYTsNCiAgICAgICAgICAgICAgICBudWxsICE9IGMgJiYgKGMuYXBwZW5kQ2hpbGQoYiksDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjKSk7DQogICAgICAgICAgICAgICAgYSA9IGIuZ2V0Q29udGV4dCgiMmQiKTsNCiAgICAgICAgICAgICAgICBhLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICExOw0KICAgICAgICAgICAgICAgIHJldHVybiBbYiwgYV0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCBlYSA9IChhLGIsYyxkPTEpPT4icmdiYSgiICsgU3RyaW5nKGEgfCAwKSArICIsIiArIFN0cmluZyhiIHwgMCkgKyAiLCIgKyBTdHJpbmcoYyB8IDApICsgIiwiICsgU3RyaW5nKE1hdGgubWluKDEsIE1hdGgubWF4KGQsIDApKSkgKyAiKSI7DQogICAgICAgICAgICBmdW5jdGlvbiBmYShhKSB7DQogICAgICAgICAgICAgICAgdmFyIGIgPSB3aW5kb3cuaW5uZXJXaWR0aA0KICAgICAgICAgICAgICAgICAgLCBjID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICAgICAgICAgIGxldCBkID0gTWF0aC5taW4oYiAvIGEud2lkdGgsIGMgLyBhLmhlaWdodCk7DQogICAgICAgICAgICAgICAgMSA8PSBkICYmIChkID0gTWF0aC5mbG9vcihkKSk7DQogICAgICAgICAgICAgICAgbGV0IGUgPSBhLmcuc3R5bGU7DQogICAgICAgICAgICAgICAgZS53aWR0aCA9IFN0cmluZyhkICogYS53aWR0aCB8IDApICsgInB4IjsNCiAgICAgICAgICAgICAgICBlLmhlaWdodCA9IFN0cmluZyhkICogYS5oZWlnaHQgfCAwKSArICJweCI7DQogICAgICAgICAgICAgICAgZS5sZWZ0ID0gU3RyaW5nKGIgLyAyIC0gZCAqIGEud2lkdGggLyAyIHwgMCkgKyAicHgiOw0KICAgICAgICAgICAgICAgIGUudG9wID0gU3RyaW5nKGMgLyAyIC0gZCAqIGEuaGVpZ2h0IC8gMiB8IDApICsgInB4Ig0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gcShhLCBiLCBjLCBkLCBlLCBmLCBoLCBnLCBrPTApIHsNCiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09IGIgfHwgMCA+PSBlIHx8IDAgPj0gZikNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICAgICAgbGV0IGwgPSBhLlQ7DQogICAgICAgICAgICAgICAgYyB8PSAwOw0KICAgICAgICAgICAgICAgIGQgfD0gMDsNCiAgICAgICAgICAgICAgICBlIHw9IDA7DQogICAgICAgICAgICAgICAgZiB8PSAwOw0KICAgICAgICAgICAgICAgIGggfD0gMDsNCiAgICAgICAgICAgICAgICBnIHw9IDA7DQogICAgICAgICAgICAgICAgayB8PSAwOw0KICAgICAgICAgICAgICAgIDAgIT0gayAmJiBsLnNhdmUoKTsNCiAgICAgICAgICAgICAgICAwICE9IChrICYgMSkgJiYgKGwudHJhbnNsYXRlKGUsIDApLA0KICAgICAgICAgICAgICAgIGwuc2NhbGUoLTEsIDEpLA0KICAgICAgICAgICAgICAgIGggKj0gLTEpOw0KICAgICAgICAgICAgICAgIDAgIT0gKGsgJiAyKSAmJiAobC50cmFuc2xhdGUoMCwgZiksDQogICAgICAgICAgICAgICAgbC5zY2FsZSgxLCAtMSksDQogICAgICAgICAgICAgICAgZyAqPSAtMSk7DQogICAgICAgICAgICAgICAgbC5kcmF3SW1hZ2UoYiwgYywgZCwgZSwgZiwgaCwgZywgZSwgZik7DQogICAgICAgICAgICAgICAgMCAhPSBrICYmIGwucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBhDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiB0KGEsIGIsIGMsIGQsIGUsIGY9MCwgaD0wLCBnPTApIHsNCiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09IGIpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgICAgIGxldCBrID0gYi53aWR0aCAvIDE2IHwgMA0KICAgICAgICAgICAgICAgICAgLCBsID0gZDsNCiAgICAgICAgICAgICAgICAxID09IGcgPyBsID0gZCAtPSBjLmxlbmd0aCAqIChrICsgZikgLyAyIDogMiA9PSBnICYmIChsID0gZCAtPSBjLmxlbmd0aCAqIChrICsgZikpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IG0gPSAwOyBtIDwgYy5sZW5ndGg7ICsrbSkNCiAgICAgICAgICAgICAgICAgICAgZyA9IGMuY2hhckNvZGVBdChtKSwNCiAgICAgICAgICAgICAgICAgICAgMTAgPT0gZyA/IChsID0gZCwNCiAgICAgICAgICAgICAgICAgICAgZSArPSBrICsgaCkgOiAocShhLCBiLCBnICUgMTYgKiBrLCAoZyAvIDE2IHwgMCkgKiBrLCBrLCBrLCBsLCBlKSwNCiAgICAgICAgICAgICAgICAgICAgbCArPSBrICsgZik7DQogICAgICAgICAgICAgICAgcmV0dXJuIGENCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIHUoYSwgYiwgYywgZCwgZSkgew0KICAgICAgICAgICAgICAgIGlmICgyID4gZCB8fCAyID4gZSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICAgICAgYiB8PSAwOw0KICAgICAgICAgICAgICAgIGMgfD0gMDsNCiAgICAgICAgICAgICAgICBkIC89IDI7DQogICAgICAgICAgICAgICAgZSAvPSAyOw0KICAgICAgICAgICAgICAgIGxldCBmID0gTWF0aC5yb3VuZChlKSwgaDsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBnID0gYyAtIGY7IGcgPD0gYyArIGY7ICsrZykNCiAgICAgICAgICAgICAgICAgICAgaCA9IE1hdGgucm91bmQoZCAqIE1hdGguc3FydCgxIC0gKGcgLSBjKSAqIChnIC0gYykgLyAoZSAqIGUpKSksDQogICAgICAgICAgICAgICAgICAgIGEuZmlsbFJlY3QoYiAtIGgsIGcsIDIgKiBoLCAxKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gaGEoYSwgYiwgYz1hLndpZHRoIC8gMiwgZD1hLmhlaWdodCAvIDIpIHsNCiAgICAgICAgICAgICAgICB2YXIgZSA9IE1hdGgubWF4KDAsIGQgLSBiKSB8IDA7DQogICAgICAgICAgICAgICAgbGV0IGYgPSBNYXRoLm1pbihhLmhlaWdodCwgZCArIGIpIHwgMDsNCiAgICAgICAgICAgICAgICAwIDwgZSAmJiBhLmZpbGxSZWN0KDAsIDAsIGEud2lkdGgsIGUpOw0KICAgICAgICAgICAgICAgIGYgPCBhLmhlaWdodCAmJiBhLmZpbGxSZWN0KDAsIGYsIGEud2lkdGgsIGEuaGVpZ2h0IC0gZik7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgZyA9IGU7IGcgPCBmOyArK2cpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBnIC0gZDsNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoaCkgPj0gYiA/IGEuZmlsbFJlY3QoMCwgZywgYS53aWR0aCwgMSkgOiAoZSA9IE1hdGgucm91bmQoYyAtIE1hdGguc3FydChiICogYiAtIGggKiBoKSksDQogICAgICAgICAgICAgICAgICAgIGggPSBNYXRoLnJvdW5kKGMgKyBNYXRoLnNxcnQoYiAqIGIgLSBoICogaCkpLA0KICAgICAgICAgICAgICAgICAgICAwIDwgZSAmJiBhLmZpbGxSZWN0KDAsIGcsIGUsIDEpLA0KICAgICAgICAgICAgICAgICAgICBoIDwgYS53aWR0aCAmJiBhLmZpbGxSZWN0KGgsIGcsIGEud2lkdGggLSBlLCAxKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBpYSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyID0gKGQ9MjU1LGU9ZCxmPWUpPT50aGlzLnNldEZpbGxDb2xvcihkLCBlLCBmKS5maWxsUmVjdCgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmggPSAoKT0+dGhpcy5nOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnUgPSBkPT50aGlzLm0udShkKTsNCiAgICAgICAgICAgICAgICAgICAgW3RoaXMuZyx0aGlzLlRdID0gZGEoYSwgYik7DQogICAgICAgICAgICAgICAgICAgIGIgJiYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCAoKT0+ZmEodGhpcykpLA0KICAgICAgICAgICAgICAgICAgICBmYSh0aGlzKSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubSA9IGMNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZ2V0IHdpZHRoKCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nLndpZHRoDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGdldCBoZWlnaHQoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmcuaGVpZ2h0DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNldEZpbGxDb2xvcihhPTI1NSwgYj1hLCBjPWIsIGQ9MSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLlQuZmlsbFN0eWxlID0gZWEoYSwgYiwgYywgZCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZpbGxSZWN0KGE9MCwgYj0wLCBjPXRoaXMud2lkdGgsIGQ9dGhpcy5oZWlnaHQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ULmZpbGxSZWN0KGEgfCAwLCBiIHwgMCwgYyB8IDAsIGQgfCAwKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICA7Y29uc3QgamEgPSAoYSxiLGM9YS5oZWlnaHQpPT57DQogICAgICAgICAgICAgICAgbGV0IGQgPSBhLmdldENvbnRleHQoIjJkIiksIGUgPSBkLmdldEltYWdlRGF0YSgwLCAwLCBhLndpZHRoLCBhLmhlaWdodCksIGYgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKGUuZGF0YSksIGg7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgZyA9IGIgKyAxOyBnIDwgYyAtIDE7ICsrZykgew0KICAgICAgICAgICAgICAgICAgICBiID0gZyAqIGEud2lkdGggKyAxOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMTsgayA8IGEud2lkdGggLSAxOyArK2ssDQogICAgICAgICAgICAgICAgICAgICsrYikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgyNTUgPT0gZls0ICogYiArIDNdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGwgPSBnIC0gMTsgbCA8PSBnICsgMTsgKytsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBtID0gayAtIDE7IG0gPD0gayArIDE7ICsrbSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBsICogYS53aWR0aCArIG0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09IGZbNCAqIGggKyAzXSAmJiAoZS5kYXRhWzQgKiBoXSA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFbNCAqIGggKyAxXSA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFbNCAqIGggKyAyXSA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGFbNCAqIGggKyAzXSA9IDI1NSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZC5wdXRJbWFnZURhdGEoZSwgMCwgMCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCBrYSA9IChhLGIsYyxkKT0+ew0KICAgICAgICAgICAgICAgIGxldCBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikNCiAgICAgICAgICAgICAgICAgICwgZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGUub25sb2FkID0gKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgZi53aWR0aCA9IGUud2lkdGg7DQogICAgICAgICAgICAgICAgICAgIGYuaGVpZ2h0ID0gZS5oZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgIGxldCBoID0gZi5nZXRDb250ZXh0KCIyZCIpOw0KICAgICAgICAgICAgICAgICAgICBoLmRyYXdJbWFnZShlLCAwLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBmLndpZHRoDQogICAgICAgICAgICAgICAgICAgICAgLCBrID0gZi5oZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgIGxldCBsID0gaC5nZXRJbWFnZURhdGEoMCwgMCwgZywgaykNCiAgICAgICAgICAgICAgICAgICAgICAsIG0gPSBnIC8gOCB8IDA7DQogICAgICAgICAgICAgICAgICAgIGsgPSBrIC8gOCB8IDA7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IEkgPSAwOyBJIDwgazsgKytJKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgSiA9IDA7IEogPCBtOyArK0opIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHZvaWQgMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCByID0gdm9pZCAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHYgPSBsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHAgPSBnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIEcgPSA4ICogSjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gOCAqIEk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEggPSA4ICogKEogKyAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBMYSA9IDggKiAoSSArIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIFogPSBiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIE1hID0gY1tJICogbSArIEpdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGFhID0gcjsgYWEgPCBMYTsgKythYSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYmEgPSBHOyBiYSA8IEg7ICsrYmEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhYSAqIHAgKyBiYTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB2LmRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2EgPSA0ICogcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBbMCwgMSwgMiwgM11bKChuW2NhXSAvIDg1IHwgMCkgKyAobltjYSArIDFdIC8gODUgfCAwKSArIChuW2NhICsgMl0gLyA4NSB8IDApKSAvIDMgfCAwXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBNYVtuXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPiBuID8gdi5kYXRhWzQgKiByICsgM10gPSAwIDogKHYuZGF0YVs0ICogcl0gPSBaWzMgKiBuXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuZGF0YVs0ICogciArIDFdID0gWlszICogbiArIDFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5kYXRhWzQgKiByICsgMl0gPSBaWzMgKiBuICsgMl0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LmRhdGFbNCAqIHIgKyAzXSA9IDI1NSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBoLnB1dEltYWdlRGF0YShsLCAwLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgZCgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIDsNCiAgICAgICAgICAgICAgICBlLnNyYyA9IGE7DQogICAgICAgICAgICAgICAgcmV0dXJuIGYNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCBsYSA9IChhLGIpPT57DQogICAgICAgICAgICAgICAgYSA9IG5ldyBpYSgxNjAsITEsYSk7DQogICAgICAgICAgICAgICAgYihhKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYS5oKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDsNCiAgICAgICAgICAgIGZ1bmN0aW9uIG1hKGEsIGIsIGMpIHsNCiAgICAgICAgICAgICAgICBhLmcuc2V0KGIsIGMpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBuYShhLCBiLCBjLCBkLCBlKSB7DQogICAgICAgICAgICAgICAgKythLmk7DQogICAgICAgICAgICAgICAgbWEoYSwgYiwga2EoYywgZCwgZSwgKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgKythLmxvYWRlZA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICApKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gdyhhLCBiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGEuRC5nZXQoYikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIG9hIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pID0gdGhpcy5sb2FkZWQgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmggPSAoKT0+dGhpcy5sb2FkZWQgPj0gdGhpcy5pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSBuZXcgTWFwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkQgPSBuZXcgTWFwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHUoYSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nLmdldChhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDtjbGFzcyBwYSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYiwgYz0xLCBkPSJzcXVhcmUiLCBlPTIsIGY9LjUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWluID0gYS5jcmVhdGVHYWluKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IGIubWFwKGg9PkFycmF5LmZyb20oaCkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmkgPSBjOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBkOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmwgPSBlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSBmDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBsYXkoYSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IHRoaXMuZy5jdXJyZW50VGltZQ0KICAgICAgICAgICAgICAgICAgICAgICwgYyA9IDANCiAgICAgICAgICAgICAgICAgICAgICAsIGQgPSB0aGlzLmcuY3JlYXRlT3NjaWxsYXRvcigpOw0KICAgICAgICAgICAgICAgICAgICBkLnR5cGUgPSB0aGlzLnR5cGU7DQogICAgICAgICAgICAgICAgICAgIGEgKj0gdGhpcy5pOw0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdGhpcy5nYWluLmdhaW4uY2FuY2VsQW5kSG9sZEF0VGltZSAmJiB0aGlzLmdhaW4uZ2Fpbi5jYW5jZWxBbmRIb2xkQXRUaW1lKGIpDQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9DQogICAgICAgICAgICAgICAgICAgIGQuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHRoaXMuaFswXVswXSwgYik7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKE1hdGgubWluKDEsIE1hdGgubWF4KGEsIC4wMSkpLCBiKTsNCiAgICAgICAgICAgICAgICAgICAgYyA9IDA7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGUgb2YgdGhpcy5oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMubCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKGVbMF0sIGIgKyBjKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLmZyZXF1ZW5jeS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShlWzBdLCBiICsgYyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShlWzBdLCBiICsgYykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGMgKz0gMSAvIDYwICogZVsxXQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoYSAqIHRoaXMuaiwgYiArIGMpOw0KICAgICAgICAgICAgICAgICAgICBkLmNvbm5lY3QodGhpcy5nYWluKS5jb25uZWN0KHRoaXMuZy5kZXN0aW5hdGlvbik7DQogICAgICAgICAgICAgICAgICAgIGQuc3RhcnQoYik7DQogICAgICAgICAgICAgICAgICAgIGQuc3RvcChiICsgYyk7DQogICAgICAgICAgICAgICAgICAgIGQub25lbmRlZCA9ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICBkLmRpc2Nvbm5lY3QoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgO2Z1bmN0aW9uIHgoYSwgYiwgYz0xKSB7DQogICAgICAgICAgICAgICAgaWYgKGEuZyAmJiB2b2lkIDAgIT0gYikNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGIucGxheShjICogYS5lYSkNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYS5oIHx8IChjb25zb2xlLmxvZygiQXVkaW8gZXJyb3I6ICIgKyBkKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuaCA9ICEwKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBxYSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9ICExOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkcgPSAoYSxiPTEsYz0ic3F1YXJlIixkPTIsZT0uNSk9Pm5ldyBwYSh0aGlzLmksYSxiLGMsZCxlKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5VID0gKCk9PiJBVURJTzogIiArIFsiT0ZGIiwgIk9OICJdW051bWJlcih0aGlzLmcpXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pID0gbmV3IEF1ZGlvQ29udGV4dDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gITE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWEgPSAxDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRvZ2dsZShhPSF0aGlzLmcpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZyA9IGENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICA7Y29uc3QgcmEgPSBbWzgsIDE2XSwgWzY4LCAyOF0sIFs4NCwgOF0sIFsxNiwgNTZdLCBbNTYsIDcyXSwgWzExMiwgMTZdLCBbMzIsIDZdXQ0KICAgICAgICAgICAgICAsIHNhID0gW1s4NCwgNTZdLCBbNDIsIDM2XSwgWzEzNiwgNzJdXQ0KICAgICAgICAgICAgICAsIHRhID0gKGEsYixjLGQ9MSk9PnsNCiAgICAgICAgICAgICAgICBjb25zdCBlID0gWzI1NV0NCiAgICAgICAgICAgICAgICAgICwgZiA9IFsyNTUsIDE3MCwgMjU1XTsNCiAgICAgICAgICAgICAgICBsZXQgaCwgZzsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gYyAtIGQ7IGsgPD0gYyArIGQ7ICsraykNCiAgICAgICAgICAgICAgICAgICAgZyA9IGQgLSBNYXRoLmFicyhrIC0gYyksDQogICAgICAgICAgICAgICAgICAgIGggPSBiIC0gTWF0aC5jZWlsKGcgLyAyKSwNCiAgICAgICAgICAgICAgICAgICAgMSA8IGQgJiYgayA9PSBjICYmIC0taCwNCiAgICAgICAgICAgICAgICAgICAgYS5zZXRGaWxsQ29sb3IoLi4uZikuZmlsbFJlY3QoaCwgaywgMiAqIGcgKyAxLCAxKSwNCiAgICAgICAgICAgICAgICAgICAgMCA8IGcgJiYgYS5zZXRGaWxsQ29sb3IoLi4uZSkuZmlsbFJlY3QoaCArIDEsIGssIDIgKiBnIC0gMSwgMSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCB1YSA9IGE9PmxhKGEsIGI9PnsNCiAgICAgICAgICAgICAgICB1KHUodShiLmNsZWFyKDE3MCwgODUsIDI1NSkuc2V0RmlsbENvbG9yKDI1NSwgMTcwLCA4NSksIDEyOCwgNDAsIDQ0LCA0NCkuc2V0RmlsbENvbG9yKDI1NSwgMjU1LCAxNzApLCAxMjYsIDM4LCA0MiwgNDIpLnNldEZpbGxDb2xvcigxNzAsIDg1LCAyNTUpLCAxMTgsIDMwLCA0MCwgNDApOw0KICAgICAgICAgICAgICAgIGIuc2V0RmlsbENvbG9yKDg1LCAwLCAxNzApOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyAxNjAgPiBkOyArK2QpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBNYXRoOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IGQgLyAxNjA7DQogICAgICAgICAgICAgICAgICAgIGMgPSA5MiArIGMucm91bmQuY2FsbChjLCAxMiAqICgxIC0gKE1hdGguYWJzKE1hdGguY29zKGUgKiBNYXRoLlBJICogNikpIC0gOCAqIE1hdGguYWJzKGUgJSAuNCAtIC4yKSkpKTsNCiAgICAgICAgICAgICAgICAgICAgYi5maWxsUmVjdChkLCAtOCArIGMsIDEsIDE2MCAtIGMgKyAxKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKGxldCBkIG9mIHJhKQ0KICAgICAgICAgICAgICAgICAgICB0YShiLCBkWzBdLCA4ICsgZFsxXSwgMSk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBzYSkNCiAgICAgICAgICAgICAgICAgICAgdGEoYiwgZFswXSwgOCArIGRbMV0sIDIpDQogICAgICAgICAgICB9DQogICAgICAgICAgICApOw0KICAgICAgICAgICAgZnVuY3Rpb24gdmEoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgIGIgPyAxICE9PSBhLmcuZ2V0KGMpICYmIChhLmcuc2V0KGMsIDMpLA0KICAgICAgICAgICAgICAgIGEuaSA9ICEwKSA6IDAgIT09IGEuZy5nZXQoYykgJiYgYS5nLnNldChjLCAyKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24geShhLCBiLCBjLCBkKSB7DQogICAgICAgICAgICAgICAgYS5hY3Rpb25zLnNldChiLCBbYywgZF0pOw0KICAgICAgICAgICAgICAgIGEuaC5wdXNoKGMpOw0KICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZCAmJiBhLmgucHVzaChkKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gd2EoYSwgYikgew0KICAgICAgICAgICAgICAgIGEgPSBhLmcuZ2V0KGIpOw0KICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT0gYSA/IDAgOiBhDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiB6KGEsIGIpIHsNCiAgICAgICAgICAgICAgICBiID0gYS5hY3Rpb25zLmdldChiKTsNCiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBiKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgICAgICBsZXQgYyA9IHdhKGEsIGJbMF0pOw0KICAgICAgICAgICAgICAgIHJldHVybiAwID09IGMgJiYgdm9pZCAwICE9PSBiWzFdID8gd2EoYSwgYlsxXSkgOiBjDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyB4YSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9ICExOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFhID0gKCk9PnRoaXMuaTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gbmV3IE1hcDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oID0gW107DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9ucyA9IG5ldyBNYXA7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgYT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgdmEodGhpcywgITAsIGEuY29kZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmguaW5jbHVkZXMoYS5jb2RlKSAmJiBhLnByZXZlbnREZWZhdWx0KCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCBhPT57DQogICAgICAgICAgICAgICAgICAgICAgICB2YSh0aGlzLCAhMSwgYS5jb2RlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaC5pbmNsdWRlcyhhLmNvZGUpICYmIGEucHJldmVudERlZmF1bHQoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsIGE9PmEucHJldmVudERlZmF1bHQoKSk7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCAoKT0+d2luZG93LmZvY3VzKCkpOw0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIiwgKCk9PndpbmRvdy5mb2N1cygpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB1cGRhdGUoKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgb2YgdGhpcy5nLmtleXMoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIDMgPT09IHRoaXMuZy5nZXQoYSkgPyB0aGlzLmcuc2V0KGEsIDEpIDogMiA9PT0gdGhpcy5nLmdldChhKSAmJiB0aGlzLmcuc2V0KGEsIDApOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmkgPSAhMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDtjbGFzcyB5YSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IDE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9ICExOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9ICExOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWVkID0gMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gKCk9Pnt9DQogICAgICAgICAgICAgICAgICAgIDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9ICgpPT50aGlzLmFjdGl2ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBBKGEsIGIsIGMsIGQsIGU9MCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmggPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWVkID0gYzsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gZDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gYjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pID0gZTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAhMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB1cGRhdGUoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSAmJiAwID49ICh0aGlzLmcgLT0gdGhpcy5zcGVlZCAqIGEuc3RlcCkgJiYgKCh0aGlzLmggPSAhdGhpcy5oKSA/ICh0aGlzLmFjdGl2ZSA9ICExLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSAwKSA6ICh0aGlzLmcgKz0gMSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sKGEpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcyhhKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZSAmJiAwICE9IHRoaXMuaikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmc7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmggJiYgKGIgPSAxIC0gYik7DQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPCB0aGlzLmkgJiYgKGIgPSBNYXRoLnJvdW5kKGIgKiB0aGlzLmkpIC8gdGhpcy5pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnNldEZpbGxDb2xvcigwLCAwLCAwLCBiKS5maWxsUmVjdCgwLCAwLCBhLndpZHRoLCBhLmhlaWdodCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBNYXRoLm1heChNYXRoLmh5cG90KGEud2lkdGggLyAyLCBhLmhlaWdodCAvIDIpLCBNYXRoLmh5cG90KGEud2lkdGggLSBhLndpZHRoIC8gMiwgYS5oZWlnaHQgLyAyKSwgTWF0aC5oeXBvdChhLndpZHRoIC0gYS53aWR0aCAvIDIsIGEuaGVpZ2h0IC0gYS5oZWlnaHQgLyAyKSwgTWF0aC5oeXBvdChhLndpZHRoIC8gMiwgYS5oZWlnaHQgLSBhLmhlaWdodCAvIDIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gKDEgLSBiKSAqIGM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGEoYS5zZXRGaWxsQ29sb3IoMCksIGIpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgSCgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAhMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDtjbGFzcyB6YSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYiwgYywgZCwgZSwgZikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSAxOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmtleWJvYXJkID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpbyA9IGI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IGM7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IGQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubSA9IGU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IGYNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZ2V0IGZhKCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nLndpZHRoDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGdldCBiYSgpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZy5oZWlnaHQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgRihhLCBiPTApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLkYoYSwgYikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBBYShhLCBiKSB7DQogICAgICAgICAgICAgICAgY29uc3QgYyA9IDE2LjY2NjY3ICogYS5pLnN0ZXA7DQogICAgICAgICAgICAgICAgYS5oICs9IGIgLSBhLm87DQogICAgICAgICAgICAgICAgYS5oID0gTWF0aC5taW4oNSAqIGMsIGEuaCk7DQogICAgICAgICAgICAgICAgYS5vID0gYjsNCiAgICAgICAgICAgICAgICBmb3IgKGIgPSBhLmggLyBjIHwgMDsgMCA8IGItLTsgKQ0KICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT0gYS5nICYmIGEubS5oKCkgJiYgYS5nLnVwZGF0ZShhLmkpLA0KICAgICAgICAgICAgICAgICAgICBhLmtleWJvYXJkLnVwZGF0ZSgpLA0KICAgICAgICAgICAgICAgICAgICBhLnRyYW5zaXRpb24udXBkYXRlKGEuaSksDQogICAgICAgICAgICAgICAgICAgIGEuaCAtPSBjOw0KICAgICAgICAgICAgICAgIGEubS5oKCkgPyAodm9pZCAwICE9IGEuZyAmJiBhLmcuTChhLmopLA0KICAgICAgICAgICAgICAgIGEudHJhbnNpdGlvbi5zKGEuaikpIDogYS5qLmNsZWFyKDApOw0KICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZD0+QWEoYSwgZCkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBCYShhPSgpPT57fQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdmFyIGIgPSBBKEEoQShBKEEobmV3IENhLCAiZ2FtZSIsIG5ldyBEYSksICJ0aXRsZXNjcmVlbiIsIG5ldyBFYSksICJzdG9yeSIsIG5ldyBGYSksICJpbnRybyIsIG5ldyBHYSksICJzdGFydCIsIG5ldyBIYSk7DQogICAgICAgICAgICAgICAgYi5nID0gYi5sLmdldCgic3RhcnQiKTsNCiAgICAgICAgICAgICAgICB2b2lkIDAgIT0gYi5nICYmIGIuZy5JKG51bGwsIGIuaSk7DQogICAgICAgICAgICAgICAgYShiLmkpOw0KICAgICAgICAgICAgICAgIEFhKGIsIDApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBBKGEsIGIsIGMpIHsNCiAgICAgICAgICAgICAgICBhLmwuc2V0KGIsIGMpOw0KICAgICAgICAgICAgICAgIHJldHVybiBhDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBDYSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IHZvaWQgMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vID0gdGhpcy5oID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tID0gbmV3IG9hOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSBuZXcgaWEoMTQ0LCEwLHRoaXMubSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmQgPSBuZXcgeGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW8gPSBuZXcgcWE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IG5ldyB5YTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pID0gbmV3IHphKHRoaXMua2V5Ym9hcmQsdGhpcy5hdWRpbyx0aGlzLmosdGhpcy50cmFuc2l0aW9uLHRoaXMubSx0aGlzKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gbmV3IE1hcA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBGKGEsIGI9MCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IHRoaXMubC5nZXQoYSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT0gYykNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJObyBzY2VuZSB3aXRoIG5hbWU6ICIgKyBhOw0KICAgICAgICAgICAgICAgICAgICBjLkkoYiwgdGhpcy5pKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gYw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDtjb25zdCBCID0gW1swLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAwLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAxLCAxLCAzLCAzLCAxLCA2LCA2LCAwLCA3LCAxLCAxLCAxLCA3LCA3LCAxLCAxLCAxLCA3XSwgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDAsIDEsIDUsIDAsIDAsIDQsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDMsIDMsIDEsIDEsIDMsIDMsIDEsIDEsIDEsIDEsIDcsIDcsIDEsIDEsIDcsIDcsIDEsIDFdLCBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgNCwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMTMsIDAsIDAsIDEwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAxLCA2LCAwLCAxMiwgNCwgMiwgMCwgNSwgMCwgMTEsIDEsIDEsIDMsIDMsIDEsIDEsIDEsIDEsIDMsIDEsIDEsIDEsIDcsIDcsIDEsIDEsIDEsIDEsIDcsIDFdLCBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgNiwgMCwgMCwgMTAsIDAsIDQsIDEsIDAsIDAsIDAsIDEsIDEyLCAxLCAxLCAyLCAxLCAxLCAxMSwgMCwgMCwgMCwgMCwgMCwgMCwgMiwgMCwgMCwgMSwgMSwgMCwgMCwgMTAsIDAsIDAsIDIsIDQsIDAsIDEsIDEsIDMsIDMsIDMsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDcsIDcsIDEsIDEsIDEsIDEsIDFdLCBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMTAsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDIsIDAsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDExLCAyLCAxMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMTMsIDEzLCAwLCAwLCAwLCAwLCAwLCA2LCAxLCAxLCAxLCAxLCA3LCA3LCA3LCAxLCAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxXSwgWzAsIDAsIDAsIDAsIDAsIDEzLCAwLCAwLCAwLCAwLCAwLCA0LCAwLCAwLCAwLCAxMywgMCwgMCwgMCwgMCwgMCwgNCwgMCwgMCwgMCwgMTMsIDAsIDAsIDAsIDAsIDAsIDQsIDAsIDAsIDAsIDEzLCAwLCAwLCAwLCAwLCAxLCAxLCA5LCA5LCA5LCAxLCAwLCAxMCwgMCwgMCwgMSwgMSwgMCwgMCwgMCwgMCwgMiwgMSwgMCwgMCwgMSwgNSwgMTMsIDAsIDAsIDAsIDIsIDAsIDAsIDAsIDEsIDEsIDEyLCAxMiwgMCwgMCwgMiwgMCwgMTEsIDAsIDEsIDEsIDcsIDcsIDEsIDEsIDEsIDMsIDEsIDNdLCBbMCwgNSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgNSwgMCwgMCwgNSwgMCwgNCwgNCwgNCwgNCwgMiwgMSwgOSwgOSwgMSwgMiwgMSwgMSwgMSwgMSwgMiwgMTMsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDIsIDEsIDEsIDksIDksIDksIDEsIDExLCAwLCAwLCAyLCAwLCAwLCAxMCwgMCwgMCwgMCwgMSwgMywgMywgMSwgMSwgMSwgMSwgMSwgNywgMV0sIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA0LCAxLCAwLCAwLCAwLCAwLCAwLCA0LCAxLCAwLCAxMywgMSwgMCwgMSwgMSwgMCwgMSwgMSwgMSwgMCwgMCwgMSwgMTEsIDAsIDAsIDAsIDEsIDEsIDAsIDAsIDEyLCAxLCAxLCAwLCAwLCAyLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAyLCA0LCAxMCwgMTEsIDEsIDEzLCAxLCA5LCA5LCAxLCAxLCAxLCA5LCAxLCAxLCA3LCAxLCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3XSwgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDQsIDExLCAxLCAwLCAwLCAwLCA1LCAwLCAwLCA2LCAxLCAxLCAxLCAwLCA0LCAxLCAxLCAwLCAwLCAxLCAxLCAwLCAxLCAxMywgOSwgMSwgMCwgMCwgMSwgNCwgMCwgMCwgMCwgNiwgMCwgMCwgMCwgMiwgMSwgNCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMiwgMCwgMSwgMSwgMTIsIDAsIDAsIDAsIDAsIDAsIDIsIDAsIDEsIDEsIDAsIDEsIDAsIDAsIDIsIDEsIDEsIDEyLCAxLCAxLCA3LCAxLCAxLCAxLCAxLCAxLCAxLCA3XSwgWzAsIDAsIDAsIDAsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDAsIDAsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDQsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMywgMCwgMCwgNCwgMCwgMCwgMSwgMTMsIDIsIDAsIDEzLCAwLCAwLCA0LCAwLCAwLCAwLCAwLCAyLCAwLCAxMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMiwgMCwgMTMsIDAsIDAsIDQsIDAsIDAsIDAsIDAsIDEsIDAsIDEzLCAwLCAwLCA0LCAwLCAxMSwgMCwgMCwgMCwgNiwgMSwgNywgMSwgMSwgNywgMSwgNywgMSwgN10sIFs0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA0LCAxLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCA0LCAxLCAwLCAxLCA0LCAwLCAwLCAwLCAwLCA0LCAxLCAwLCAwLCAwLCAxLCA0LCAwLCAwLCA0LCAxLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCAxLCA3LCAxLCA5LCA5LCA5LCA5LCAxLCA3LCAxLCAxLCAxLCAxLCA3LCA3LCA3LCA3LCAxLCAxLCAxXSwgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEzLCA0LCAwLCAwLCA0LCAwLCAwLCAwLCA0LCAwLCAxMywgMTMsIDAsIDAsIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEwLCAwLCAwLCAwLCAwLCA2LCAxLCAxLCAwLCAxLCAzLCAxLCAyLCAxLCA5LCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAxMSwgNSwgMCwgMTEsIDUsIDIsIDAsIDExLCAxLCAxLCAxLCAxLCAzLCAxLCAxLCAxLCAxLCAxLCAxXSwgWzAsIDAsIDAsIDAsIDEwLCAwLCAwLCA1LCAwLCAwLCA1LCA1LCAwLCAwLCAxMCwgMCwgMCwgMSwgMSwgMiwgMSwgMSwgMiwgMCwgMTAsIDAsIDAsIDAsIDAsIDIsIDAsIDEsIDIsIDksIDEsIDEsIDAsIDEsIDEsIDEsIDAsIDAsIDIsIDEwLCAxMiwgMCwgMCwgMCwgMCwgMSwgMTEsIDEsIDEsIDEsIDEsIDcsIDcsIDEsIDIsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDIsIDEsIDAsIDAsIDQsIDQsIDQsIDQsIDQsIDQsIDIsIDEsIDcsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDFdXTsNCiAgICAgICAgICAgIGNsYXNzIEMgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYSA9ICgpPT50aGlzLnRleHQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaWEgPSBjPT57DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcoYykNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IGINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2xvbmUoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQyh0aGlzLnRleHQsdGhpcy5nKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIElhIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiPSExKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gITE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSAoKT0+dGhpcy5hY3RpdmU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9ucyA9IGEubWFwKChjLGQpPT5hW2RdLmNsb25lKCkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmggPSBNYXRoLm1heCguLi50aGlzLmJ1dHRvbnMubWFwKGM9PmMuZGEoKS5sZW5ndGgpKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEEoYT10aGlzLmcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gYSAlIHRoaXMuYnV0dG9ucy5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gITANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdXBkYXRlKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHRoaXMuZzsNCiAgICAgICAgICAgICAgICAgICAgICAgIDMgPT0geihhLmtleWJvYXJkLCAidXAiKSA/IC0tdGhpcy5nIDogMyA9PSB6KGEua2V5Ym9hcmQsICJkb3duIikgJiYgKyt0aGlzLmc7DQogICAgICAgICAgICAgICAgICAgICAgICBiICE9IHRoaXMuZyAmJiAoYiA9IHRoaXMuYnV0dG9ucy5sZW5ndGgsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSAodGhpcy5nICUgYiArIGIpICUgYiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHgoYS5hdWRpbywgdyhhLm0sICJjaG9vc2UiKSwgLjYpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSB0aGlzLmJ1dHRvbnNbdGhpcy5nXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gYiB8fCAzICE9IHooYS5rZXlib2FyZCwgInNlbGVjdCIpICYmIDMgIT0geihhLmtleWJvYXJkLCAic3RhcnQiKSB8fCAoYi5pYShhKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHgoYS5hdWRpbywgdyhhLm0sICJzZWxlY3QiKSwgLjYpKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHMoYSwgYj0wLCBjPTAsIGQ9ITApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IDggKiB0aGlzLmgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBmID0gMTAgKiB0aGlzLmJ1dHRvbnMubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGIgKyBhLndpZHRoIC8gMiAtIGUgLyAyOw0KICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGMgKyBhLmhlaWdodCAvIDIgLSBmIC8gMjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGQgJiYgKGEuc2V0RmlsbENvbG9yKDAsIDAsIDAsIC42NyksDQogICAgICAgICAgICAgICAgICAgICAgICBhLmZpbGxSZWN0KGIgLSA0LCBjIC0gNCwgZSArIDgsIGYgKyA4KSk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAwOyBlIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgKytlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBhLnUoZSA9PSB0aGlzLmcgPyAiZm9udFllbGxvdyIgOiAiZm9udCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoYSwgZCwgdGhpcy5idXR0b25zW2VdLmRhKCksIGIsIGMgKyAxMCAqIGUsIDAsIDApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgSCgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAhMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDtjbGFzcyBEIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhPTAsIGI9MCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb25lID0gKCk9Pm5ldyBEKHRoaXMueCx0aGlzLnkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnggPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSBiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgRSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYT0yNTUsIGI9YSwgYz1iLCBkPTEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9uZSA9ICgpPT5uZXcgRSh0aGlzLmcsdGhpcy5oLHRoaXMuYix0aGlzLmEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmggPSBiOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmIgPSBjOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmEgPSBkDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgO2Z1bmN0aW9uIEphKGEsIGIsIGMsIGQsIGUpIHsNCiAgICAgICAgICAgICAgICBhLmcgPSBuZXcgRChiLGMpOw0KICAgICAgICAgICAgICAgIGEuc3BlZWQgPSBuZXcgRChkLGUpOw0KICAgICAgICAgICAgICAgIGEudGFyZ2V0LnggPSBhLnNwZWVkLng7DQogICAgICAgICAgICAgICAgYS50YXJnZXQueSA9IDQ7DQogICAgICAgICAgICAgICAgYS5CID0gITANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIEYgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmkgPSA4Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLnYgPSB0aGlzLkIgPSAhMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYSA9ICgpPT50aGlzLkI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IG5ldyBEOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWVkID0gbmV3IEQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbmV3IEQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IG5ldyBEKDEsMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbCgpIHt9DQogICAgICAgICAgICAgICAgdXBkYXRlKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuQikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLnNwZWVkLngNCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjID0gdGhpcy50YXJnZXQueA0KICAgICAgICAgICAgICAgICAgICAgICAgICAsIGQgPSB0aGlzLmgueCAqIGEuc3RlcDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BlZWQueCA9IGIgPCBjID8gTWF0aC5taW4oYywgYiArIGQpIDogTWF0aC5tYXgoYywgYiAtIGQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHRoaXMuc3BlZWQueTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0aGlzLnRhcmdldC55Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHRoaXMuaC55ICogYS5zdGVwOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVlZC55ID0gYiA8IGMgPyBNYXRoLm1pbihjLCBiICsgZCkgOiBNYXRoLm1heChjLCBiIC0gZCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcueCArPSB0aGlzLnNwZWVkLnggKiBhLnN0ZXA7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcueSArPSB0aGlzLnNwZWVkLnkgKiBhLnN0ZXA7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmwoYSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZy55IC0gdGhpcy5pID49IGEuYmEgJiYgKHRoaXMuZy55IC09IGEuYmEgKyB0aGlzLmkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoMCA+IHRoaXMuZy54ICsgdGhpcy5pIHx8IHRoaXMuZy54IC0gdGhpcy5pID49IGEuZmEgfHwgMCA+IHRoaXMuZy55ICsgdGhpcy5pIHx8IHRoaXMuZy55IC0gdGhpcy5pID49IGEuYmEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5CID0gITENCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzKCkge30NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIEthIGV4dGVuZHMgRiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubyA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaC54ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLnkgPSAuMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pID0gMTY7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaiA9IG5ldyBFDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGwoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm8gPSAodGhpcy5vICsgMiAqIE1hdGguUEkgLyAzMCAqIGEuc3RlcCkgJSAoMiAqIE1hdGguUEkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHMoYSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5CKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IE1hdGgucm91bmQodGhpcy5nLngpDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgYyA9IE1hdGgucm91bmQodGhpcy5nLnkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgZCA9IE1hdGgucm91bmQoNyArIDIgKiBNYXRoLnNpbih0aGlzLm8pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBhLnNldEZpbGxDb2xvcih0aGlzLmouZywgdGhpcy5qLmgsIHRoaXMuai5iLCB0aGlzLmouYSk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IC1NYXRoLnJvdW5kKE1hdGguY29zKDIgKiAtTWF0aC5QSSAvIDMpICogZCksIGYgPSAwLCBoID0gZSAvIE1hdGguYWJzKE1hdGgucm91bmQoTWF0aC5zaW4oMiAqIC1NYXRoLlBJIC8gMykgKiBkKSksIGc7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gLWQ7IGsgPD0gZTsgKytrLA0KICAgICAgICAgICAgICAgICAgICAgICAgZiArPSBoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBNYXRoLnJvdW5kKGYpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZmlsbFJlY3QoYiAtIGcsIGMgKyBrLCAyICogZywgMSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5maWxsUmVjdChiIC0gZywgYyArIGQgLSAyICogZSAtIGssIDIgKiBnLCAxKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIE0oYSwgYiwgYywgZCwgZSkgew0KICAgICAgICAgICAgICAgICAgICBKYSh0aGlzLCBhLCBiLCBjLCBkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gZS5jbG9uZSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgTmEgZXh0ZW5kcyBGIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VwZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLnggPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmgueSA9IC4xOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmkgPSA4DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHMoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkIgJiYgcShhLCBiLCA4MCArIHRoaXMuaiAlIDIgKiA4LCA4ICogTWF0aC5mbG9vcih0aGlzLmogLyAyKSwgOCwgOCwgTWF0aC5yb3VuZCh0aGlzLmcueCkgLSA0LCBNYXRoLnJvdW5kKHRoaXMuZy55KSAtIDQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIE0oYSwgYiwgYywgZCwgZSkgew0KICAgICAgICAgICAgICAgICAgICBKYSh0aGlzLCBhLCBiLCBjLCBkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIE9hIGV4dGVuZHMgRiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubyA9IHRoaXMuaiA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaC54ID0gLjE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaC55ID0gLjE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IDgNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbChhKSB7DQogICAgICAgICAgICAgICAgICAgIDYgPD0gKHRoaXMuaiArPSBhLnN0ZXApICYmICh0aGlzLmogJT0gNiwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vID0gKHRoaXMubyArIDEpICUgMikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcyhhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQiAmJiBxKGEsIGIsIDk2LCAzMiArIDggKiB0aGlzLm8sIDE2LCA4LCBNYXRoLnJvdW5kKHRoaXMuZy54KSAtIDQsIE1hdGgucm91bmQodGhpcy5nLnkpIC0gNCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgTShhLCBiLCBjLCBkKSB7DQogICAgICAgICAgICAgICAgICAgIEphKHRoaXMsIGEsIGIsIGMsIGQpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWVkLnggPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC55ICo9IC0xDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgUGEgPSAoYSxiKT0+ew0KICAgICAgICAgICAgICAgIGxldCBjID0gbnVsbDsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBkIG9mIGEpDQogICAgICAgICAgICAgICAgICAgIGlmICghZC5oYSgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjID0gZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBudWxsID09IGMgJiYgKGMgPSBuZXcgYi5wcm90b3R5cGUuY29uc3RydWN0b3IsDQogICAgICAgICAgICAgICAgYS5wdXNoKGMpKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgOw0KICAgICAgICAgICAgZnVuY3Rpb24gSyhhLCBiLCBjLCBkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIDAgPiBjIHx8IDAgPiBkIHx8IGMgPj0gYS53aWR0aCB8fCBkID49IGEuaGVpZ2h0ID8gMSA6IGEuZ1tiXVtkICogYS53aWR0aCArIGNdDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBMKGEsIGIsIGMsIGQsIGUpIHsNCiAgICAgICAgICAgICAgICAwID4gYyB8fCAwID4gZCB8fCBjID49IGEud2lkdGggfHwgZCA+PSBhLmhlaWdodCB8fCAoYS5nW2JdW2QgKiBhLndpZHRoICsgY10gPSBlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gTShhLCBiLCBjKSB7DQogICAgICAgICAgICAgICAgbGV0IGQgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYS5oZWlnaHQ7ICsrZSkNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZiA9IDA7IGYgPCBhLndpZHRoOyArK2YpDQogICAgICAgICAgICAgICAgICAgICAgICBjKGYsIGUsIGEuZ1tiXVtkKytdKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgTiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYiwgYywgZCwgZSwgZj0hMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSAoKT0+dGhpcy5oOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmwgPSAoKT0+dGhpcy5pOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb25lID0gKCk9Pm5ldyBOKHRoaXMuZ1swXSx0aGlzLmdbMV0sdGhpcy53aWR0aCx0aGlzLmhlaWdodCx0aGlzLmgsdGhpcy5pKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gQXJyYXkoMik7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ1swXSA9IEFycmF5LmZyb20oYSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ1sxXSA9IEFycmF5LmZyb20oYik7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IGU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IGY7DQogICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSBjOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IGQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICA7ZnVuY3Rpb24gTyhhLCBiLCBjPTAsIGQ9MCkgew0KICAgICAgICAgICAgICAgIGMgPSBNYXRoLnJvdW5kKGEuZy54IC0gYS5zaXplIC8gMikgKyBjOw0KICAgICAgICAgICAgICAgIGQgPSBNYXRoLnJvdW5kKGEuZy55IC0gYS5zaXplIC8gMikgKyBkOw0KICAgICAgICAgICAgICAgIGIuc2V0RmlsbENvbG9yKDI1NSwgMjU1LCAyNTUsIC42NykuZmlsbFJlY3QoYywgZCwgYS5zaXplLCBhLnNpemUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBRYSBleHRlbmRzIEYgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAuMjUgPiBNYXRoLnJhbmRvbSgpID8gMiA6IDE7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZy54ID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nLnkgPSBiOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmgueCA9IC4xOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmgueSA9IC4xOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm8gPSBuZXcgRCguMiArIDEuMDUgKiBNYXRoLnJhbmRvbSgpLC4yICsgMS4zICogTWF0aC5yYW5kb20oKSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQiA9IHRoaXMudiA9ICEwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSBjOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbChhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaiA9ICh0aGlzLmogKyAuMDUgKiBhLnN0ZXApICUgKDQgKiBNYXRoLlBJKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQueCA9IE1hdGguc2luKC41ICogdGhpcy5qKSAqIHRoaXMuby54Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC55ID0gLjUgKiB0aGlzLm8ueSAqIChNYXRoLnNpbih0aGlzLmopICsgMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcyhhKSB7DQogICAgICAgICAgICAgICAgICAgIE8odGhpcywgYSk7DQogICAgICAgICAgICAgICAgICAgIDAgPiB0aGlzLmcueCA/IE8odGhpcywgYSwgYS53aWR0aCkgOiB0aGlzLmcueCA+PSBhLndpZHRoICYmIE8odGhpcywgYSwgLWEud2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICAwID4gdGhpcy5nLnkgPyBPKHRoaXMsIGEsIDAsIGEuaGVpZ2h0KSA6IHRoaXMuZy55ID49IGEuaGVpZ2h0ICYmIE8odGhpcywgYSwgMCwgLWEuaGVpZ2h0KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFJhKGEpIHsNCiAgICAgICAgICAgICAgICBsZXQgYiwgYzsNCiAgICAgICAgICAgICAgICBhLmcgPSBbXTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgNiA+IGQ7ICsrZCkNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IDUgPiBlOyArK2UpDQogICAgICAgICAgICAgICAgICAgICAgICBiID0gMzIgKiBlICsgMzIgKiAoMiAqIE1hdGgucmFuZG9tKCkgLSAxKSAvIDIsDQogICAgICAgICAgICAgICAgICAgICAgICBjID0gMjQgKiBkICsgMzIgKiAoMiAqIE1hdGgucmFuZG9tKCkgLSAxKSAvIDIsDQogICAgICAgICAgICAgICAgICAgICAgICBhLmcucHVzaChuZXcgUWEoYixjKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIFNhIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gW107DQogICAgICAgICAgICAgICAgICAgIFJhKHRoaXMpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHVwZGF0ZShhKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgb2YgdGhpcy5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi51cGRhdGUoYSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcyhhKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgb2YgdGhpcy5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi5zKGEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgO2NvbnN0IFRhID0gKGEsYixjKT0+ew0KICAgICAgICAgICAgICAgIGxldCBkID0gQXJyYXkoYiAqIGMgKiA0KS5maWxsKC0xKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGM7ICsrcikNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCBiOyArK3YpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gYVtyICogYiArIHZdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT0gZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gYTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gYjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IGMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZyA9IGQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgayA9IHYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbCA9IHI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHAgPSBBcnJheSg5KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBHID0gLTE7IDEgPj0gRzsgKytHKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBIID0gLTE7IDEgPj0gSDsgKytIKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IGsgKyBIDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IGwgKyBHOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFszICogKEcgKyAxKSArIChIICsgMSldID0gMSA9PSAoMCA+IG0gfHwgMCA+IG4gfHwgbSA+PSBlIHx8IG4gPj0gaCA/IDEgOiBmW24gKiBlICsgbV0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gMiAqIGwgKiBlICogMiArIDIgKiBrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZl0gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbMV0gJiYgcFszXSA/IHBbMF0gfHwgKGdbZl0gPSA1KSA6IHBbMV0gPyBnW2ZdID0gNCA6IHBbM10gPyBnW2ZdID0gMSA6IChnW2ZdID0gMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwIDwgayAmJiAoZ1tmIC0gMV0gPSAxNCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbKytmXSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcFsxXSAmJiBwWzVdID8gcFsyXSB8fCAoZ1tmXSA9IDYpIDogcFsxXSA/IGdbZl0gPSAxMSA6IHBbNV0gPyBnW2ZdID0gMSA6IChnW2ZdID0gMywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrIDwgZSAtIDEgJiYgKGdbZiArIDFdID0gNykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgKz0gMiAqIGUgLSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZl0gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbN10gJiYgcFszXSA/IHBbNl0gfHwgKGdbZl0gPSAxMikgOiBnW2ZdID0gcFs3XSA/IDQgOiBwWzNdID8gOCA6IDk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1srK2ZdID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwWzddICYmIHBbNV0gPyBwWzhdIHx8IChnW2ZdID0gMTMpIDogZ1tmXSA9IHBbN10gPyAxMSA6IHBbNV0gPyA4IDogMTANCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBkDQogICAgICAgICAgICB9DQogICAgICAgICAgICA7DQogICAgICAgICAgICBjb25zdCBVYSA9IFsxLCAzLCA4LCA5LCAxM10NCiAgICAgICAgICAgICAgLCBWYSA9IFs0LCAxMF07DQogICAgICAgICAgICBmdW5jdGlvbiBXYShhLCBiLCBjKSB7DQogICAgICAgICAgICAgICAgbGV0IGQgPSBLKGEuZywgMSwgYiwgYyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIFVhLmluY2x1ZGVzKEsoYS5nLCAwLCBiLCBjKSkgfHwgNCA9PSBkIHx8IDEwID09IGQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFhhKGEsIGIsIGMsIGQsIGU9ITEpIHsNCiAgICAgICAgICAgICAgICBpZiAoMyA9PSBkIHx8IDEgPT0gZCkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOw0KICAgICAgICAgICAgICAgIGxldCBmID0gSyhhLmcsIDAsIGIsIGMpDQogICAgICAgICAgICAgICAgICAsIGggPSAyID09IGY7DQogICAgICAgICAgICAgICAgaWYgKCFoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICg0ID09IGQpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMiA9PSBLKGEuZywgMCwgYiwgYyArIDEpIHx8ICFlICYmIGMgPCBhLmhlaWdodCAtIDEgJiYgNCA9PSBLKGEuZywgMSwgYiwgYyArIDIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PSBmKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjICs9IDE7IGMgPCBhLmhlaWdodCAmJiA0ID09IEsoYS5sLCAxLCBiLCBjKTsgKytjKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgyID09IEsoYS5sLCAwLCBiLCBjKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBoDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBZYShhLCBiLCBjLCBkLCBlLCBmLCBoPSExKSB7DQogICAgICAgICAgICAgICAgaWYgKDAgIT0gYS5qW2MgKiBhLndpZHRoICsgYl0gfHwgMTMgPT0gSyhhLmcsIDAsIGIsIGMpIHx8IFdhKGEsIGIgKyBkLCBjICsgZSkgfHwgWGEoYSwgYiwgYywgZiwgaCkgPT0gaCkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExOw0KICAgICAgICAgICAgICAgIEwoYS5nLCAxLCBiLCBjLCAwKTsNCiAgICAgICAgICAgICAgICBMKGEuZywgMSwgYiArIGQsIGMgKyBlLCA0KTsNCiAgICAgICAgICAgICAgICBpZiAoIWggJiYgYyA8IGEuaGVpZ2h0IC0gMSAmJiA5ID09IEsoYS5nLCAwLCBiLCBjICsgMSkpIHsNCiAgICAgICAgICAgICAgICAgICAgTChhLmcsIDAsIGIsIGMgKyAxLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgaCA9IDE2ICogYjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSAxNiAqIChjICsgMSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBbLjUsIDEuNSwgMi41LCAzLjVdOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsID0gMDsgMiA+IGw7ICsrbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG0gPSAwOyAyID4gbTsgKyttKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhKGEuUCwgTmEpLk0oaCArIDggKiBtICsgNCwgZyArIDggKiBsICsgNCwgMCwga1syICogbCArIG1dLCAyICogbCArIG0pOw0KICAgICAgICAgICAgICAgICAgICBhLlkgPSAhMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhLmpbKGMgKyBlKSAqIGEud2lkdGggKyAoYiArIGQpXSA9IGY7DQogICAgICAgICAgICAgICAgMyA9PSBmID8gYS5nLmggPSAxIDogMSA9PSBmICYmIChhLmcuaCA9IDApOw0KICAgICAgICAgICAgICAgIHJldHVybiAhMA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gWmEoYSwgYiwgYywgZCwgZSwgZiwgaD0hMSkgew0KICAgICAgICAgICAgICAgIGlmICghaCAmJiAoMiA9PSBmIHx8IDQgPT0gZikgfHwgMCAhPSBhLmpbYyAqIGEud2lkdGggKyBiXSB8fCBXYShhLCBiICsgZCwgYyArIGUpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7DQogICAgICAgICAgICAgICAgbGV0IGc7DQogICAgICAgICAgICAgICAgaWYgKCFoKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSBjOyBrIDwgYS5oZWlnaHQ7ICsraykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZyA9IEsoYS5sLCAxLCBiIC0gZCwgayk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMTAgIT0gSyhhLmwsIDEsIGIsIGspIHx8IDQgIT0gZyAmJiBVYS5pbmNsdWRlcyhLKGEubCwgMCwgYiArIGQsIGspKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoNCA9PSBnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9ICEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEwoYS5nLCAxLCBiLCBjLCAwKTsNCiAgICAgICAgICAgICAgICBMKGEuZywgMSwgYiArIGQsIGMgKyBlLCAxMCk7DQogICAgICAgICAgICAgICAgYS5qWyhjICsgZSkgKiBhLndpZHRoICsgKGIgKyBkKV0gPSBmOw0KICAgICAgICAgICAgICAgIHJldHVybiAhMA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gJGEoYSwgYiwgYz0hMSkgew0KICAgICAgICAgICAgICAgIGlmICgwID09IGIpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsNCiAgICAgICAgICAgICAgICBsZXQgZCA9IFsxLCAwLCAtMSwgMF1bTnVtYmVyKGIpIC0gMV0NCiAgICAgICAgICAgICAgICAgICwgZSA9IFswLCAtMSwgMCwgMV1bTnVtYmVyKGIpIC0gMV0NCiAgICAgICAgICAgICAgICAgICwgZiA9ICExDQogICAgICAgICAgICAgICAgICAsIGggPSAhMTsNCiAgICAgICAgICAgICAgICBjIHx8IChhLmwgPSBhLmcuY2xvbmUoKSk7DQogICAgICAgICAgICAgICAgZG8NCiAgICAgICAgICAgICAgICAgICAgaCA9ICExLA0KICAgICAgICAgICAgICAgICAgICBNKGEuZywgMSwgKGcsayxsKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWWEoYSwgZywgaywgZCwgZSwgYiwgYykgJiYgKGggPSBmID0gITApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBaYShhLCBnLCBrLCBkLCBlLCBiLCBjKSAmJiAoaCA9IGYgPSAhMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLlcgPSAhMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjICYmIChhLlYgPSAhMCkpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB3aGlsZSAoaCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGYNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIGFiKGEsIGIsIGMsIGQsIGU9ITEpIHsNCiAgICAgICAgICAgICAgICB2YXIgZiA9IE1hdGguUEkgLyA0Ow0KICAgICAgICAgICAgICAgIGxldCBoOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGcgPSAwOyA0ID4gZzsgKytnKQ0KICAgICAgICAgICAgICAgICAgICBoID0gZiArIDIgKiBNYXRoLlBJIC8gNCAqIGcsDQogICAgICAgICAgICAgICAgICAgIFBhKGEuUiwgS2EpLk0oYiwgYywgMiAqIE1hdGguY29zKGgpLCAyICogTWF0aC5zaW4oaCkgKyAtMSwgZCk7DQogICAgICAgICAgICAgICAgZSAmJiBQYShhLk8sIE9hKS5NKGIsIGMsIDIgKiBNYXRoLnJhbmRvbSgpIC0gMSwgLjUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBiYihhKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgZCA9IDA7IGQgPCBhLndpZHRoICogYS5oZWlnaHQ7ICsrZCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuZzsNCiAgICAgICAgICAgICAgICAgICAgYiA9IDAgPiBkIHx8IGQgPj0gYi53aWR0aCAqIGIuaGVpZ2h0ID8gMSA6IGIuZ1swXVtkXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKDEyID09IGIgfHwgMTMgPT0gYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhLmc7DQogICAgICAgICAgICAgICAgICAgICAgICAwID4gZCB8fCBkID49IGMud2lkdGggKiBjLmhlaWdodCB8fCAoYy5nWzBdW2RdID0gMTIgPT0gYiA/IDEzIDogMTIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBjYihhLCBiLCBjKSB7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IFs1LCA2LCA3XQ0KICAgICAgICAgICAgICAgICAgLCBlID0gW25ldyBFKDI1NSwyNTUsMjU1KSwgbmV3IEUoMjU1LDI1NSw4NSksIG5ldyBFKDE3MCwyNTUsMjU1KV07DQogICAgICAgICAgICAgICAgbGV0IGYgPSAhMSwgaCA9ICExLCBnLCBrLCBsOw0KICAgICAgICAgICAgICAgIGEuQyA9ICEwOw0KICAgICAgICAgICAgICAgIE0oYS5nLCAwLCAobSxuKT0+ew0KICAgICAgICAgICAgICAgICAgICBnID0gSyhhLmcsIDAsIG0sIG4pOw0KICAgICAgICAgICAgICAgICAgICBrID0gSyhhLmcsIDEsIG0sIG4pOw0KICAgICAgICAgICAgICAgICAgICAxMSA9PSBnICYmIChoID0gITAsDQogICAgICAgICAgICAgICAgICAgIDAgIT0gayB8fCBmIHx8IChmID0gITApKTsNCiAgICAgICAgICAgICAgICAgICAgNCA9PSBrICYmIGQuaW5jbHVkZXMoZykgfHwgMTAgPT0gayAmJiA1ID09IGcgPyAobCA9IGVbMF0sDQogICAgICAgICAgICAgICAgICAgIDEwICE9IGsgJiYgTChhLmcsIDEsIG0sIG4sIDApLA0KICAgICAgICAgICAgICAgICAgICA1ID09IGcgPyAoTChhLmcsIDAsIG0sIG4sIDApLA0KICAgICAgICAgICAgICAgICAgICBsID0gZVsxXSkgOiA3ID09IGcgJiYgKEwoYS5nLCAwLCBtLCBuLCA4KSwNCiAgICAgICAgICAgICAgICAgICAgbCA9IGVbMl0pLA0KICAgICAgICAgICAgICAgICAgICBhYihhLCAxNiAqIG0gKyA4LCAxNiAqIG4gKyA4LCBsLCA0ID09IGspLA0KICAgICAgICAgICAgICAgICAgICB4KGMuYXVkaW8sIHcoYiwgImRpZSIpLCAuNikpIDogNCA9PSBrICYmIChhLkMgPSAhMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBoICYmIGEuZy5sKCkgIT0gZiAmJiAoYmIoYSksDQogICAgICAgICAgICAgICAgYS5nLmkgPSBmLA0KICAgICAgICAgICAgICAgIHgoYy5hdWRpbywgdyhiLCAidG9nZ2xlIiArIChmID8gIjIiIDogIjEiKSksIC42KSk7DQogICAgICAgICAgICAgICAgYS5DICYmIChhLk4gPSAxMjAsDQogICAgICAgICAgICAgICAgeChjLmF1ZGlvLCB3KGIsICJ2aWN0b3J5IiksIC44KSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIGRiKGEpIHsNCiAgICAgICAgICAgICAgICBhLnYucHVzaChhLmwuY2xvbmUoKSk7DQogICAgICAgICAgICAgICAgNjQgPD0gYS52Lmxlbmd0aCAmJiBhLnYuc2hpZnQoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gZWIoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgIGxldCBkLCBlOw0KICAgICAgICAgICAgICAgIE0oYS5nLCAwLCAoZixoLGcpPT57DQogICAgICAgICAgICAgICAgICAgIGQgPSAxNiAqIGY7DQogICAgICAgICAgICAgICAgICAgIGUgPSAxNiAqIGg7DQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZykgew0KICAgICAgICAgICAgICAgICAgICBjYXNlIDI6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGcgPSAwOyAyID4gZzsgKytnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEocShiLCBjLCA1NiwgMCwgOCwgOCwgZCwgZSArIDggKiBnKSwgYywgNTYsIDAsIDgsIDgsIGQgKyA4LCBlICsgOCAqIGcsIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgMCA8IGggJiYgMiAhPSBhLmlbKGggLSAxKSAqIGEud2lkdGggKyBmXSAmJiAoZSAtPSA4LA0KICAgICAgICAgICAgICAgICAgICAgICAgcShxKGIsIGMsIDU2LCA4LCA4LCA4LCBkLCBlKSwgYywgNTYsIDgsIDgsIDgsIGQgKyA4LCBlLCAxKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gMDsgMiA+IGY7ICsrZikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxKGIsIGMsIDY0LCAwLCA4LCAxNiwgZCArIDggKiBmLCBlICsgLTIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgNToNCiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBkOw0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGU7DQogICAgICAgICAgICAgICAgICAgICAgICBnID0gYS5TICogTWF0aC5QSSAqIDI7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaywgbCA9IDQgKiBNYXRoLlBJIC8gMTY7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9IGMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IDY0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gMzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBrID0gMTY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiB8PSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggfD0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IHI7ICsrcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGcgKyBsICogcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGYgKyBNYXRoLnJvdW5kKE1hdGguc2luKHYpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5ULmRyYXdJbWFnZShjLCBtLCBuICsgcCwgaywgMSwgdiwgaCArIHAsIGssIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgNjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IDA7IDIgPiBmOyArK2YpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcShiLCBjLCA3MiwgMCwgOCwgOCwgZCArIDggKiBmLCBlICsgOCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSA3Og0KICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGQ7DQogICAgICAgICAgICAgICAgICAgICAgICBoID0gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBhLlMgKiBNYXRoLlBJICogMjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGggKz0gNjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGIuc2V0RmlsbENvbG9yKDE3MCwgMjU1LCAyNTUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChuID0gMDsgMTYgPiBuOyArK24pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IE1hdGgucm91bmQoMiAqIE1hdGguc2luKGcgKyAyICogTWF0aC5QSSAvIDE2ICogbikgKiBNYXRoLnNpbihNYXRoLlBJIC8gMTYgKiBuKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5maWxsUmVjdChmICsgbiwgaCArIG0sIDEsIDE2IC0gKG0gKyA2KSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSA4Og0KICAgICAgICAgICAgICAgICAgICAgICAgcShiLCBjLCA4MCwgMzIsIDE2LCAxNiwgZCwgZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSA5Og0KICAgICAgICAgICAgICAgICAgICAgICAgcShiLCBjLCA4MCwgMCwgMTYsIDE2LCBkLCBlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlIDExOg0KICAgICAgICAgICAgICAgICAgICAgICAgKDAgPT0gSyhhLmcsIDEsIGYsIGgpIHx8IGEubyAmJiAuNSA+IGEuaCkgJiYgcShiLCBjLCA0OCwgMjQsIDE2LCA4LCBkLCBlICsgOCk7DQogICAgICAgICAgICAgICAgICAgICAgICBxKGIsIGMsIDQ4LCA0MCwgMTYsIDgsIGQsIGUgKyA4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOg0KICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOg0KICAgICAgICAgICAgICAgICAgICAgICAgcShiLCBjLCA5NiwgMTYgLSAxNiAqIChnIC0gMTIpLCAxNiwgMTYsIGQsIGUpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gZmIoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBbMCwgMSwgMCwgLTEsIDBdDQogICAgICAgICAgICAgICAgICAsIGUgPSBbMCwgMCwgLTEsIDAsIDFdOw0KICAgICAgICAgICAgICAgIGxldCBmID0gMCwgaCA9IDAsIGc7DQogICAgICAgICAgICAgICAgTShhLmcsIDEsIChrLGwsbSk9PnsNCiAgICAgICAgICAgICAgICAgICAgZyA9IGEualtsICogYS53aWR0aCArIGtdOw0KICAgICAgICAgICAgICAgICAgICBmID0gMTYgKiBrOw0KICAgICAgICAgICAgICAgICAgICBoID0gMTYgKiBsOw0KICAgICAgICAgICAgICAgICAgICAwICE9IGcgJiYgKGYgLT0gZFtOdW1iZXIoZyldICogKDEgLSBhLmgpICogMTYsDQogICAgICAgICAgICAgICAgICAgIGggLT0gZVtOdW1iZXIoZyldICogKDEgLSBhLmgpICogMTYpOw0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG0pIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSA0Og0KICAgICAgICAgICAgICAgICAgICAgICAgbSA9IGY7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGg7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCB2ID0gITE7DQogICAgICAgICAgICAgICAgICAgICAgICAzICE9IGcgJiYgMSAhPSBnICYmIDIgPT0gSyhhLmcsIDAsIGssIGwpICYmICgxICE9IEsoYS5nLCAwLCBrLCBsICsgMSkgfHwgNCA9PSBnKSB8fCAyID09IGcgJiYgMiA9PSBLKGEuZywgMCwgaywgbCArIDEpID8gKHYgPSAhMCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgMCAhPSBnICYmIChyICs9IE1hdGguZmxvb3IoMiAqIGEuaCkpKSA6IDQgPT0gZyAmJiAyICE9IEsoYS5nLCAwLCBrLCBsKSAmJiA0ICE9IEsoYS5nLCAxLCBrLCBsICsgMSkgPyByID0gNSA6IDAgIT0gZyAmJiAoNCAhPSBLKGEuZywgMSwgaywgbCArIDEpIHx8IGwgPCBhLmhlaWdodCAtIDEgJiYgMCA9PSBhLmpbKGwgKyAxKSAqIGEud2lkdGggKyBrXSkgJiYgKHIgPSAxICsgTWF0aC5mbG9vcig0ICogYS5oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IDE2Ow0KICAgICAgICAgICAgICAgICAgICAgICAgNCA9PSBLKGEuZywgMSwgaywgbCAtIDEpICYmIChwID0gMzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdiA/IHEoYiwgYywgNjQsIDE2LCAxNiwgMTYsIG0sIG4gKyAxLCAwID09IHIgPyAwIDogMSkgOiBxKHEoYiwgYywgMCwgcCwgMTYsIDgsIG0sIG4gKyAxLCBhLmcuaigpKSwgYywgWzAsIDE2LCAxNiwgMzIsIDMyLCA0OF1bcl0sIHAgKyBbOCwgMCwgOCwgMCwgOCwgMF1bcl0sIDE2LCA4LCBtLCBuICsgOSwgYS5nLmooKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoNCiAgICAgICAgICAgICAgICAgICAgICAgIHEoYiwgYywgODAsIDE2LCAxNiwgMTYsIGYsIGggKyAxKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIGdiKGEpIHsNCiAgICAgICAgICAgICAgICBhLm8gfHwgKGEubCA9IGEuZy5jbG9uZSgpKTsNCiAgICAgICAgICAgICAgICBkYihhKTsNCiAgICAgICAgICAgICAgICBhLmcgPSBuZXcgTihhLmksYS5pLm1hcChiPT5OdW1iZXIoVmEuaW5jbHVkZXMoYikpICogYiksYS53aWR0aCxhLmhlaWdodCwwKTsNCiAgICAgICAgICAgICAgICBhLmogPSBBcnJheShhLndpZHRoICogYS5oZWlnaHQpLmZpbGwoMCk7DQogICAgICAgICAgICAgICAgYS5nLmggPSAwDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBoYihhKSB7DQogICAgICAgICAgICAgICAgbGV0IGIgPSBhLm8gPyBhLmwgOiBhLnYucG9wKCk7DQogICAgICAgICAgICAgICAgbnVsbCAhPSBiICYmIChhLmcgPSBiLmNsb25lKCksDQogICAgICAgICAgICAgICAgYS5vID0gITEsDQogICAgICAgICAgICAgICAgYS5oID0gMCwNCiAgICAgICAgICAgICAgICBhLmouZmlsbCgwKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIGliKGEsIGIpIHsNCiAgICAgICAgICAgICAgICBhLlMgPSAoYS5TICsgLjAyNSAqIGIuc3RlcCkgJSAxOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGMgb2YgYS5QKQ0KICAgICAgICAgICAgICAgICAgICBjLnVwZGF0ZShiKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBjIG9mIGEuUikNCiAgICAgICAgICAgICAgICAgICAgYy51cGRhdGUoYik7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgYyBvZiBhLk8pDQogICAgICAgICAgICAgICAgICAgIGMudXBkYXRlKGIpOw0KICAgICAgICAgICAgICAgIGEuWi51cGRhdGUoYikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIGpiKGEsIGIsIGMpIHsNCiAgICAgICAgICAgICAgICBhLmkgPSBBcnJheS5mcm9tKGMpOw0KICAgICAgICAgICAgICAgIGEudi5sZW5ndGggPSAwOw0KICAgICAgICAgICAgICAgIGEuZyA9IG5ldyBOKGEuaSxhLmkubWFwKGQ9Pk51bWJlcihWYS5pbmNsdWRlcyhkKSkgKiBkKSxhLndpZHRoLGEuaGVpZ2h0LDApOw0KICAgICAgICAgICAgICAgIGEudi5wdXNoKGEuZy5jbG9uZSgpKTsNCiAgICAgICAgICAgICAgICBhLmwgPSBhLmcuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICBhLmouZmlsbCgwKTsNCiAgICAgICAgICAgICAgICBhLiQgPSBUYShhLmksIGEud2lkdGgsIGEuaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBhLkMgPSAhMTsNCiAgICAgICAgICAgICAgICBhLk4gPSAwOw0KICAgICAgICAgICAgICAgIGEuSiA9IDMwOw0KICAgICAgICAgICAgICAgIGEuY2EgPSBiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGQgb2YgYS5QKQ0KICAgICAgICAgICAgICAgICAgICBkLkIgPSAhMTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBkIG9mIGEuUikNCiAgICAgICAgICAgICAgICAgICAgZC5CID0gITE7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBhLk8pDQogICAgICAgICAgICAgICAgICAgIGQuQiA9ICExOw0KICAgICAgICAgICAgICAgIFJhKGEuWikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIGtiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuViA9IHRoaXMuVyA9IHRoaXMuWSA9IHRoaXMuWCA9IHRoaXMuSyA9IHRoaXMubyA9ICExOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLlMgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkogPSAzMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5DID0gITE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuTiA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSAxMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSA5Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdhID0gKCk9PiF0aGlzLkMgJiYgMCA+PSB0aGlzLko7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IEFycmF5LmZyb20oYSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSBuZXcgTih0aGlzLmksdGhpcy5pLm1hcChjPT5OdW1iZXIoVmEuaW5jbHVkZXMoYykpICogYyksdGhpcy53aWR0aCx0aGlzLmhlaWdodCwwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52LnB1c2godGhpcy5nLmNsb25lKCkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmwgPSB0aGlzLmcuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gQXJyYXkodGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0KS5maWxsKDApOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSBUYSh0aGlzLmksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYSA9IGI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLlAgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5PID0gW107DQogICAgICAgICAgICAgICAgICAgIHRoaXMuWiA9IG5ldyBTYQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB1cGRhdGUoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHRoaXMuaDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaCArPSAodGhpcy5LID8gLjEyNSA6IC4wNjI1KSAqIGEuc3RlcDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuWCAmJiAuNSA+PSBjICYmIC41IDwgdGhpcy5oICYmIHgoYS5hdWRpbywgdyhiLCAiY2xpbWIiKSwgLjYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgMSA8PSB0aGlzLmggJiYgKHRoaXMuaCA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLksgPSB0aGlzLlggPSB0aGlzLm8gPSAhMSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuai5maWxsKDApLA0KICAgICAgICAgICAgICAgICAgICAgICAgY2IodGhpcywgYiwgYSksDQogICAgICAgICAgICAgICAgICAgICAgICAkYSh0aGlzLCA0LCAhMCkgPyAodGhpcy5vID0gITAsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmggPSAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5LID0gITApIDogKCF0aGlzLksgJiYgdGhpcy5WICYmICh4KGEuYXVkaW8sIHcoYiwgImJvdWxkZXIiKSwgMS4yKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuViA9ICExKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiKHRoaXMpKSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuQykNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwIDwgdGhpcy5KKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuSiAtPSBhLnN0ZXA7DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubyAmJiAoYyA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgMSA9PSAoeihhLmtleWJvYXJkLCAicmlnaHQiKSAmIDEpID8gYyA9IDEgOiAxID09ICh6KGEua2V5Ym9hcmQsICJ1cCIpICYgMSkgPyBjID0gMiA6IDEgPT0gKHooYS5rZXlib2FyZCwgImxlZnQiKSAmIDEpID8gYyA9IDMgOiAxID09ICh6KGEua2V5Ym9hcmQsICJkb3duIikgJiAxKSAmJiAoYyA9IDQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVyA9IHRoaXMuWSA9ICExLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhKHRoaXMsIGMpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm8gPSAhMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5LID0gITE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgyID09IGMgfHwgNCA9PSBjKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5YID0gITA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuWSAmJiB4KGEuYXVkaW8sIHcoYiwgInJ1bWJsZSIpLCAuNik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVyAmJiB4KGEuYXVkaW8sIHcoYiwgImJvdWxkZXIiKSwgMS4yKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzID09IHooYS5rZXlib2FyZCwgInVuZG8iKSA/ICh4KGEuYXVkaW8sIHcoYiwgImNob29zZSIpLCAuNiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGIodGhpcykpIDogMyA9PSB6KGEua2V5Ym9hcmQsICJyZXN0YXJ0IikgJiYgKHgoYS5hdWRpbywgdyhiLCAiY2hvb3NlIiksIC42KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYih0aGlzKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoMCA+PSAodGhpcy5OIC09IGEuc3RlcCkpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLnUoImJhc2UiKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSBhLnUoImZvbnRCaWciKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gYiAmJiBudWxsICE9IGMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGViKHRoaXMsIGEsIGIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCAyICogdGhpcy5oZWlnaHQ7ICsrZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IDIgKiB0aGlzLndpZHRoOyArK2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLiRbZCAqIHRoaXMud2lkdGggKiAyICsgZV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKDAgPiBmKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gZikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnNldEZpbGxDb2xvcigyNTUsIDE3MCwgODUpLmZpbGxSZWN0KDggKiBlLCA4ICogZCwgOCwgOCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBmICUgNzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZiAvIDcgfCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEoYSwgYiwgOCAqIGgsIDggKiBmLCA4LCA4LCA4ICogZSwgOCAqIGQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwIDwgZCAmJiAoZiA9IHRoaXMuJFsoZCAtIDEpICogdGhpcy53aWR0aCAqIDIgKyBlXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgPD0gZiAmJiAzID49IGYgJiYgYS5zZXRGaWxsQ29sb3IoMTcwLCA4NSwgODUpLmZpbGxSZWN0KDggKiBlICsgMiwgOCAqIGQsIDQsIDEpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZyBvZiB0aGlzLlApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5zKGEsIGIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmIodGhpcywgYSwgYik7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIG9mIHRoaXMuUikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnMoYSk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsIG9mIHRoaXMuTykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnMoYSwgYik7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLloucyhhKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLkMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhLnNldEZpbGxDb2xvcigwLCAwLCAwLCAuMzMpLmZpbGxSZWN0KCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IFsiU1RBR0UiLCAiQ0xFQVIiXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gYS53aWR0aCAvIDIgLSA1NCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gNSAqIE1hdGgubWluKDEsIDEgLSAodGhpcy5OIC0gNjApIC8gNjApLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBNYXRoLmZsb29yKGQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAwOyBsIDwgTWF0aC5taW4oNSwgayArIDEpOyArK2wpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IGggKyAxOCAqIGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID09IGsgJiYgKGcgPSBhLmhlaWdodCAvIDIgKiAoMSAtIGQgJSAxKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSAxOyAwIDw9IGY7IC0tZikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQodChhLCBjLCBiWzBdLmNoYXJBdChsKSwgZSArIGYsIGEuaGVpZ2h0IC8gMiAtIDI0IC0gZyArIGYpLCBjLCBiWzFdLmNoYXJBdChsKSwgZSArIGYsIGEuaGVpZ2h0IC8gMiAtIDIgKyBnICsgZik7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA8IHRoaXMuSikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGEuc2V0RmlsbENvbG9yKDAsIDAsIDAsIC4zMykuZmlsbFJlY3QoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gMTsgMCA8PSBiOyAtLWIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoYSwgYywgIlNUQUdFICIgKyBOdW1iZXIodGhpcy5jYSB8IDApLCBhLndpZHRoIC8gMiArIGIsIGEuaGVpZ2h0IC8gMiAtIDE2ICsgYiwgLTE0LCAwLCAxKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgO2NvbnN0IFAgPSBbIiAgSElOVDogVVNFIEFSUk9XIEtFWVMgVE8gTU9WRS4iLCAiICBISU5UOiBQUkVTUyBCQUNLU1BBQ0UgVE8gVU5ETy4iLCAiICBISU5UOiBQUkVTUyBSIFRPIFJFU1RBUlQuIiwgIiAgSElOVDogUFJFU1MgRU5URVIgVE8gUEFVU0UuIl07DQogICAgICAgICAgICBjbGFzcyBEYSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IDE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaiA9IHRoaXMubCA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IG5ldyBrYihCW3RoaXMuZyAtIDFdLHRoaXMuZyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IG5ldyBJYShbbmV3IEMoIlJFU1VNRSIsKCk9PnRoaXMuaC5IKCkpLCBuZXcgQygiUkVTVEFSVCIsKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdiKHRoaXMuaSk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmguSCgpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKSwgbmV3IEMoIlVORE8iLCgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICBoYih0aGlzLmkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oLkgoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICksIG5ldyBDKCJBVURJTzogT04gIixhPT57DQogICAgICAgICAgICAgICAgICAgICAgICBhLmF1ZGlvLnRvZ2dsZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oLmJ1dHRvbnNbM10udGV4dCA9IGEuYXVkaW8uVSgpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKSwgbmV3IEMoIlFVSVQiLGE9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaC5IKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhLnRyYW5zaXRpb24uQSghMCwgMSwgMSAvIDMwLCAoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuRigidGl0bGVzY3JlZW4iLCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLCA2KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICldKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBJKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLmJ1dHRvbnNbM10udGV4dCA9IGIuYXVkaW8uVSgpOw0KICAgICAgICAgICAgICAgICAgICBudWxsICE9IGEgJiYgKHRoaXMuZyA9IE51bWJlcihhKSwNCiAgICAgICAgICAgICAgICAgICAgamIodGhpcy5pLCB0aGlzLmcsIEJbdGhpcy5nIC0gMV0pKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB1cGRhdGUoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmguaXNBY3RpdmUoKSB8fCAoaWIodGhpcy5pLCBhKSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gKHRoaXMubCArIC4wMjUgKiBhLnN0ZXApICUgKDIgKiBNYXRoLlBJKSk7DQogICAgICAgICAgICAgICAgICAgIGEudHJhbnNpdGlvbi5pc0FjdGl2ZSgpIHx8ICh0aGlzLmguaXNBY3RpdmUoKSA/IHRoaXMuaC51cGRhdGUoYSkgOiB0aGlzLmkuZ2EoKSAmJiAzID09IHooYS5rZXlib2FyZCwgInBhdXNlIikgPyAoeChhLmF1ZGlvLCB3KGEubSwgInBhdXNlIiksIC42KSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLkEoMCkpIDogKHRoaXMuZyA8PSBQLmxlbmd0aCAmJiAodGhpcy5qID0gKHRoaXMuaiArIC41ICogYS5zdGVwKSAlICg4ICogUFt0aGlzLmcgLSAxXS5sZW5ndGgpKSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pLnVwZGF0ZShhLCBhLm0pICYmICh0aGlzLmcgPT0gQi5sZW5ndGggPyBhLnRyYW5zaXRpb24uQSghMCwgMSwgMSAvIDYwLCBiPT57DQogICAgICAgICAgICAgICAgICAgICAgICBiLnRyYW5zaXRpb24uSCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYi5GKCJzdG9yeSIsIDEpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLCA2KSA6IGEudHJhbnNpdGlvbi5BKCEwLCAyLCAxIC8gMzAsICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZHlpbmdfZHJlYW1zX2pzMTNrX3NhdmUiLCBTdHJpbmcodGhpcy5nICsgMSkpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYikNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICsrdGhpcy5nOw0KICAgICAgICAgICAgICAgICAgICAgICAgamIodGhpcy5pLCB0aGlzLmcsIEJbdGhpcy5nIC0gMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gMA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICkpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgTChhKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBiID0gYS51KCJiYWNrZ3JvdW5kIik7DQogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT0gYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSA0ICogTWF0aC5QSSAvIGIud2lkdGg7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGIud2lkdGg7ICsrZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gTWF0aC5yb3VuZCg0ICogTWF0aC5zaW4odGhpcy5sICsgYyAqIGUpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxKGEsIGIsIGUsIGQgKyA0LCAxLCBhLmhlaWdodCwgZSwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmkucyhhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLmlzQWN0aXZlKCkgJiYgKGEuc2V0RmlsbENvbG9yKDAsIDAsIDAsIC4zMykuZmlsbFJlY3QoKSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oLnMoYSkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nIDw9IFAubGVuZ3RoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhLnNldEZpbGxDb2xvcigwLCAwLCAwLCAuMzMpLmZpbGxSZWN0KDAsIDAsIGEud2lkdGgsIDEwKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSAwOyAyID4gYjsgKytiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoYSwgYS51KCJmb250IiksIFBbdGhpcy5nIC0gMV0sIC1NYXRoLmZsb29yKHRoaXMuaikgKyBiICogUFt0aGlzLmcgLSAxXS5sZW5ndGggKiA4LCAxLCAwKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDtjb25zdCBRID0gWzAsIDM3LCA2LCAyN10NCiAgICAgICAgICAgICAgLCBSID0gWzAsIDM3LCA1NywgLTFdDQogICAgICAgICAgICAgICwgbGIgPSBbMCwgMjEsIDQyLCAtMV0NCiAgICAgICAgICAgICAgLCBtYiA9IFswLCAtMSwgNiwgMjddDQogICAgICAgICAgICAgICwgbmIgPSBbMCwgMzYsIDU3LCAtMV0NCiAgICAgICAgICAgICAgLCBTID0gWzAsIDM2LCA1NiwgLTFdDQogICAgICAgICAgICAgICwgVCA9IFswLCAzMywgNTQsIC0xXQ0KICAgICAgICAgICAgICAsIFUgPSBbMCwgMzMsIDU0LCA1OF0NCiAgICAgICAgICAgICAgLCBWID0gWzAsIDQzLCA2MywgLTFdDQogICAgICAgICAgICAgICwgb2IgPSBbMCwgNTIsIDU2LCAtMV0NCiAgICAgICAgICAgICAgLCBXID0gWzAsIDYsIDI3LCA0N10NCiAgICAgICAgICAgICAgLCBwYiA9IFswLCAyMiwgNDMsIC0xXQ0KICAgICAgICAgICAgICAsIHFiID0gWzAsIDMzLCA1NCwgLTFdDQogICAgICAgICAgICAgICwgcmIgPSBbMCwgMjEsIDQyLCAtMV0NCiAgICAgICAgICAgICAgLCBYID0gWzAsIDAsIDUyLCAtMV0NCiAgICAgICAgICAgICAgLCBzYiA9IFtRLCBRLCBRLCBSLCBbMCwgMzcsIDU3LCA2XSwgWzAsIDM3LCA1NywgMjddLCBtYiwgbGIsIG5iLCBbMCwgNDIsIDYzLCAtMV0sIFMsIFMsIFUsIFUsIFIsIFIsIFIsIFIsIFIsIFIsIG1iLCBsYiwgbmIsIFEsIFMsIFMsIFUsIFUsIFYsIFYsIFYsIFYsIFYsIFYsIFYsIFYsIFYsIFYsIFswLCA2MywgNDMsIC0xXSwgcGIsIFQsIFQsIFYsIFYsIFYsIFYsIFYsIFYsIHFiLCBxYiwgViwgViwgcGIsIHBiLCBULCBULCBWLCBWLCBWLCBWLCBWLCBWLCBWLCBWLCBvYiwgb2IsIFcsIFcsIFgsIFgsIFYsIFYsIFYsIFYsIFYsIFYsIHJiLCByYiwgWzAsIDYxLCA1NiwgLTFdLCBvYiwgVywgVywgWCwgWF07DQogICAgICAgICAgICBjbGFzcyBHYSB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaCA9IHRoaXMuZyA9IDANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgSShhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIGIudHJhbnNpdGlvbi5BKCExLCAxLCAxIC8gMzAsICgpPT57fQ0KICAgICAgICAgICAgICAgICAgICAsIDYpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHVwZGF0ZShhKSB7DQogICAgICAgICAgICAgICAgICAgICFhLnRyYW5zaXRpb24uaXNBY3RpdmUoKSAmJiAoNjAgPD0gKHRoaXMuaCArPSBhLnN0ZXApIHx8IGEua2V5Ym9hcmQuYWEoKSkgJiYgKHRoaXMuaCA9IDAsDQogICAgICAgICAgICAgICAgICAgIGEudHJhbnNpdGlvbi5BKCEwLCAxLCAxIC8gMzAsIGI9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIDEgPT0gdGhpcy5nID8gKGIuRigidGl0bGVzY3JlZW4iLCAwKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGIudHJhbnNpdGlvbi5BKCExLCAyLCAxIC8gMzAsICgpPT57fQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSkgOiArK3RoaXMuZw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICwgNikpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEwoYSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IGEudSgiZm9udCIpOw0KICAgICAgICAgICAgICAgICAgICBhLmNsZWFyKDApOw0KICAgICAgICAgICAgICAgICAgICAwID09IHRoaXMuZyA/ICh0KGEsIGIsICJBIEdBTUUgQlkiLCBhLndpZHRoIC8gMiwgYS5oZWlnaHQgLyAyIC0gMTAsIDAsIDAsIDEpLA0KICAgICAgICAgICAgICAgICAgICB0KGEsIGIsICJKQU5JIE5ZS0BORU4iLCBhLndpZHRoIC8gMiwgYS5oZWlnaHQgLyAyICsgMiwgMCwgMCwgMSkpIDogdChhLCBiLCAiTUFERSBGT1IgSlMxM0siLCBhLndpZHRoIC8gMiwgYS5oZWlnaHQgLyAyIC0gNCwgMCwgMCwgMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICA7Y2xhc3MgSGEgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSBuZXcgSWEoW25ldyBDKCJZRVMiLGE9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuYXVkaW8udG9nZ2xlKCEwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuRigiaW50cm8iKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICksIG5ldyBDKCJOTyIsYT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgYS5hdWRpby50b2dnbGUoITEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYS5GKCJpbnRybyIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKV0sITApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEkoKSB7fQ0KICAgICAgICAgICAgICAgIHVwZGF0ZShhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZy51cGRhdGUoYSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgTChhKSB7DQogICAgICAgICAgICAgICAgICAgIGEuY2xlYXIoODUsIDE3MCwgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSBhLnUoImZvbnQiKTsNCiAgICAgICAgICAgICAgICAgICAgdChhLnNldEZpbGxDb2xvcigwLCAwLCA4NSkuZmlsbFJlY3QoMTAsIDIwLCBhLndpZHRoIC0gMTYsIDY0KS5maWxsUmVjdChhLndpZHRoIC8gMiAtIDE0LCBhLmhlaWdodCAvIDIgKyAzMCwgMzQsIDI2KS5zZXRGaWxsQ29sb3IoMCwgODUsIDE3MCkuZmlsbFJlY3QoNiwgMTYsIGEud2lkdGggLSAxNiwgNjQpLmZpbGxSZWN0KGEud2lkdGggLyAyIC0gMTgsIGEuaGVpZ2h0IC8gMiArIDI2LCAzNCwgMjYpLCBiLCAiV09VTEQgWU9VIExJS0UgVE9cbkVOQUJMRSBBVURJTz8gWU9VXG5DQU4gQ0hBTkdFIFRISVNcbkxBVEVSLiIsIDEyLCAyNCwgMCwgMik7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZy5zKGEsIDAsIDQwLCAhMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICA7Y29uc3QgWSA9IFtbIllPVSBBUkUgSEFWSU5HXG5USEUgU0FNRVxuRFJFQU0gQUdBSU4uIiwgIlRIRSBEUkVBTSBXSEVSRVxuRVZFUllPTkUgTVVTVFxuRElFLiJdLCBbIllPVSBXQUtFIFVQLiIsICJFVkVSWU9ORSBBUk9VTkRcbllPVSBJUyBERUFELiIsICJFVkVSWU9ORSBZT1VcbkVWRVIgQ0FSRURcbkFCT1VULiIsICJESUQgWU9VIEtJTExcblRIRU0gT1IgV0VSRVxuVEhFWSBLSUxMRUQgQllcbllPVVIgRFJFQU0/IiwgIlRIQVQgWU9VIFdJTExcbk5FVkVSIEtOT1cuIl1dOw0KICAgICAgICAgICAgY2xhc3MgRmEgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmwgPSB0aGlzLmkgPSB0aGlzLmggPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSAhMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gdGhpcy5oZWlnaHQgPSB0aGlzLm8gPSB0aGlzLkMgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnYgPSAhMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBJKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gdGhpcy5pID0gdGhpcy5oID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qID0gITE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IE51bWJlcihhKTsNCiAgICAgICAgICAgICAgICAgICAgYSA9IFlbdGhpcy5nXVswXS5zcGxpdCgiXG4iKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vID0gTWF0aC5tYXgoLi4uYS5tYXAoYj0+Yi5sZW5ndGgpKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBhLmxlbmd0aA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB1cGRhdGUoYSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFhLnRyYW5zaXRpb24uaXNBY3RpdmUoKSAmJiAhdGhpcy52KQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuQyA9ICh0aGlzLkMgKyAuMTUgKiBhLnN0ZXApICUgKDIgKiBNYXRoLlBJKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaiA9IHRoaXMuaSA+PSBZW3RoaXMuZ11bdGhpcy5oXS5sZW5ndGgsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmopDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5rZXlib2FyZC5hYSgpICYmICgrK3RoaXMuaCA9PSBZW3RoaXMuZ10ubGVuZ3RoID8gMCA9PSB0aGlzLmcgPyAoYS5GKCJnYW1lIiwgMSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS50cmFuc2l0aW9uLkEoITEsIDIsIDEgLyAzMCwgKCk9Pnt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkgOiAodGhpcy52ID0gITAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS50cmFuc2l0aW9uLkEoITEsIDEsIDEgLyAxMjAsICgpPT57fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgNikpIDogKHRoaXMubCA9IHRoaXMuaSA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IFlbdGhpcy5nXVt0aGlzLmhdLnNwbGl0KCJcbiIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubyA9IE1hdGgubWF4KC4uLmIubWFwKGM9PmMubGVuZ3RoKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBiLmxlbmd0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSAhMSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeChhLmF1ZGlvLCB3KGEubSwgImNob29zZSIpLCAuNikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYS5rZXlib2FyZC5hYSgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IFlbdGhpcy5nXVt0aGlzLmhdLmxlbmd0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmogPSAhMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKDQgPD0gKHRoaXMubCArPSBhLnN0ZXApIHx8IFsiXG4iLCAiICIsICJcdCJdLmluY2x1ZGVzKFlbdGhpcy5nXVt0aGlzLmhdKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK3RoaXMuaSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmwgPSAwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEwoYSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEudSgiZm9udCIpOw0KICAgICAgICAgICAgICAgICAgICBhLmNsZWFyKDApOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdChhLCBiLCAiVEhFIEVORCIsIGEud2lkdGggLyAyLCBhLmhlaWdodCAvIDIgLSA0LCAwLCAwLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGEud2lkdGggLyAyIC0gOCAqIHRoaXMubyAvIDINCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBkID0gYS5oZWlnaHQgLyAyIC0gMTAgKiB0aGlzLmhlaWdodCAvIDI7DQogICAgICAgICAgICAgICAgICAgICAgICAoMCA8IHRoaXMuaCB8fCAwIDwgdGhpcy5pKSAmJiB0aGlzLmggPCBZW3RoaXMuZ10ubGVuZ3RoICYmIHQoYSwgYiwgWVt0aGlzLmddW3RoaXMuaF0uc3Vic3RyaW5nKDAsIHRoaXMuaSksIGMsIGQsIDAsIDIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYiA9IDIgKiBNYXRoLnJvdW5kKE1hdGguc2luKHRoaXMuQykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qICYmIGEuc2V0RmlsbENvbG9yKDI1NSkuZmlsbFJlY3QoYyArIDggKiB0aGlzLm8gKyA0LCBkICsgMTAgKiB0aGlzLmhlaWdodCArIDQgKyBiLCA2LCA2KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgO2Z1bmN0aW9uIHRiKGEsIGI9MSkgew0KICAgICAgICAgICAgICAgIGEudHJhbnNpdGlvbi5BKCEwLCAyLCAxIC8gMzAsIGM9PnsNCiAgICAgICAgICAgICAgICAgICAgMSA8IGIgPyBjLkYoImdhbWUiLCBiKSA6IChjLkYoInN0b3J5IiwgMCksDQogICAgICAgICAgICAgICAgICAgIGMudHJhbnNpdGlvbi5IKCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIEVhIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gMjk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaiA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaSA9IEFycmF5KDcpLmZpbGwoMCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IG5ldyBJYShbbmV3IEMoIk5FVyBHQU1FIixhPT57DQogICAgICAgICAgICAgICAgICAgICAgICB0YihhKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICksIG5ldyBDKCJDT05USU5VRSIsYT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IE51bWJlcih3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oImR5aW5nX2RyZWFtc19qczEza19zYXZlIikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBNYXRoLm1pbihCLmxlbmd0aCwgTWF0aC5tYXgoYywgMSkpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRiKGEsIGIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKSwgbmV3IEMoIkFVRElPOiBPRkYiLGE9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuYXVkaW8udG9nZ2xlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcuYnV0dG9uc1syXS50ZXh0ID0gYS5hdWRpby5VKCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApXSwhMCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgSShhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZy5BKDApOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcuYnV0dG9uc1syXS50ZXh0ID0gYi5hdWRpby5VKCk7DQogICAgICAgICAgICAgICAgICAgIG51bGwgIT0gYSAmJiAodGhpcy5oID0gTnVtYmVyKGEpLA0KICAgICAgICAgICAgICAgICAgICAxID09IHRoaXMuaCAmJiB0aGlzLmcuQSgxKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdXBkYXRlKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IFsuMywgLjUsIC4zMywgLjc1LCAuNCwgLjYsIC4yNV07DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaiA9ICh0aGlzLmogKyBNYXRoLlBJIC8gNjAgKiBhLnN0ZXApICUgKDIgKiBNYXRoLlBJKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmkubGVuZ3RoOyArK2MpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlbY10gPSAodGhpcy5pW2NdICsgYltjXSAqIGEuc3RlcCkgJSAoYS5mYSArIDE2KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFhLnRyYW5zaXRpb24uaXNBY3RpdmUoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09IHRoaXMuaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzID09IHooYS5rZXlib2FyZCwgInN0YXJ0IikgfHwgMyA9PSB6KGEua2V5Ym9hcmQsICJzZWxlY3QiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeChhLmF1ZGlvLCB3KGEubSwgInBhdXNlIiksIC42KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyt0aGlzLmg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sID0gKHRoaXMubCArIGEuc3RlcCkgJSA2MA0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nLnVwZGF0ZShhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBMKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLnUoImJhY2tncm91bmQiKTsNCiAgICAgICAgICAgICAgICAgICAgKHZvaWQgMCA9PSBiID8gYSA6IHEoYSwgYiwgMCwgMCwgYi53aWR0aCwgYi5oZWlnaHQsIDAsIC04LCAwKSkuc2V0RmlsbENvbG9yKDAsIDAsIDAsIC4zMykuZmlsbFJlY3QoKTsNCiAgICAgICAgICAgICAgICAgICAgYiA9IFszMiwgODAsIDk2LCA2NCwgMTIwLCA3NiwgNDhdOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IFszMiwgMTYsIDU2LCA3MiwgMTA4LCAxMjgsIDE0NF0NCiAgICAgICAgICAgICAgICAgICAgICAsIGQgPSBbNCwgOCwgNiwgMTYsIDYsIDEyLCA0XQ0KICAgICAgICAgICAgICAgICAgICAgICwgZSA9IGEudSgiYmFzZSIpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGMubGVuZ3RoOyArK2YpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gTWF0aC5yb3VuZChjW2ZdIC0gOCArIHRoaXMuaVtmXSkgJSAxNzYgLSAxNjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gdGhpcy5qICsgMiAqIE1hdGguUEkgLyA2ICogZjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBiW2ZdIC0gNCArIE1hdGgucm91bmQoTWF0aC5zaW4oZykgKiBkW2ZdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gNCA+IHRoaXMuaVtmXSAlIDggPyAwIDogMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHEoYSwgZSwgOTYsIDMyICsgOCAqIGssIDE2LCA4LCBoLCBnKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIDAgPT0gdGhpcy5oID8gKHQoYSwgYS51KCJmb250IiksICIoQykyMDIyIEpBTkkgTllLQE5FTiIsIGEud2lkdGggLyAyLCBhLmhlaWdodCAtIDksIDAsIDAsIDEpLA0KICAgICAgICAgICAgICAgICAgICAzMCA8PSB0aGlzLmwgJiYgdChhLCBhLnUoImZvbnRZZWxsb3ciKSwgIlBSRVNTIEVOVEVSIiwgYS53aWR0aCAvIDIsIGEuaGVpZ2h0IC8gMiArIDI4LCAwLCAwLCAxKSkgOiB0aGlzLmcucyhhLCAwLCA0MCk7DQogICAgICAgICAgICAgICAgICAgIGIgPSBbMTYsIDQwXTsNCiAgICAgICAgICAgICAgICAgICAgYyA9IFsiRFlJTkciLCAiRFJFQU1TIl07DQogICAgICAgICAgICAgICAgICAgIGQgPSBhLnUoImZvbnRCaWciKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gMDsgMiA+IGY7ICsrZikNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZSA9IGEud2lkdGggLyAyIC0gMTggKiAoY1tmXS5sZW5ndGggKyAxKSAvIDIsDQogICAgICAgICAgICAgICAgICAgICAgICBnID0gMDsgZyA8IGNbZl0ubGVuZ3RoOyArK2cpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChoID0gTWF0aC5yb3VuZCg0ICogTWF0aC5zaW4odGhpcy5qICsgMiAqIE1hdGguUEkgLyBjW2ZdLmxlbmd0aCAqIGcpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gMTsgMCA8PSBrOyAtLWspDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoYSwgZCwgY1tmXS5jaGFyQXQoZyksIGUgKyAxOCAqIGcgKyBrLCBoICsgYltmXSArIGspDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgO3dpbmRvdy5vbmxvYWQgPSAoKT0+QmEoYT0+ew0KICAgICAgICAgICAgICAgIHZhciBiID0gQXJyYXkoNjQpOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyA2NCA+IGM7ICsrYykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGMgPj4gNDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAoYyAmIDEyKSA+PiAyOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGMgJiAzOw0KICAgICAgICAgICAgICAgICAgICBiWzMgKiBjXSA9IDg1ICogZDsNCiAgICAgICAgICAgICAgICAgICAgYlszICogYyArIDFdID0gODUgKiBlOw0KICAgICAgICAgICAgICAgICAgICBiWzMgKiBjICsgMl0gPSA4NSAqIGYNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbWEoYS5tLCAiYmFja2dyb3VuZCIsIHVhKGEubSkpOw0KICAgICAgICAgICAgICAgIGQgPSBhLm07DQogICAgICAgICAgICAgICAgZSA9IFsxNzAsIDI1NSwgMF07DQogICAgICAgICAgICAgICAgZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGYud2lkdGggPSA1MTI7DQogICAgICAgICAgICAgICAgZi5oZWlnaHQgPSA1MTI7DQogICAgICAgICAgICAgICAgYyA9IGYuZ2V0Q29udGV4dCgiMmQiKTsNCiAgICAgICAgICAgICAgICBjLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICExOw0KICAgICAgICAgICAgICAgIGMuZm9udCA9ICJib2xkIDI0cHggQXJpYWwiOw0KICAgICAgICAgICAgICAgIGMudGV4dEFsaWduID0gImNlbnRlciI7DQogICAgICAgICAgICAgICAgYy5maWxsU3R5bGUgPSBlYSguLi5lLCAxKTsNCiAgICAgICAgICAgICAgICB2YXIgaCA9IDMyOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGcgPSAyOyA4ID4gZzsgKytnKQ0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgMTYgPiBrOyArK2spDQogICAgICAgICAgICAgICAgICAgICAgICBjLmZpbGxUZXh0KDY0ID09IGggPyAiXHUwMGU0IiA6IFN0cmluZy5mcm9tQ2hhckNvZGUoaCksIDMyICogKGsgKyAuNSksIDMyICogKGcgKyAuNjcpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICsraDsNCiAgICAgICAgICAgICAgICBjID0gZi5nZXRDb250ZXh0KCIyZCIpOw0KICAgICAgICAgICAgICAgIGggPSBjLmdldEltYWdlRGF0YSgwLCAwLCBmLndpZHRoLCBmLmhlaWdodCk7DQogICAgICAgICAgICAgICAgZm9yIChnID0gMDsgZyA8IGYud2lkdGggKiBmLmhlaWdodDsgKytnKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IDMgPiBrOyArK2spDQogICAgICAgICAgICAgICAgICAgICAgICBoLmRhdGFbNCAqIGcgKyBrXSA9IGVba107DQogICAgICAgICAgICAgICAgICAgIGguZGF0YVs0ICogZyArIDNdID0gMTI3ID4gaC5kYXRhWzQgKiBnICsgM10gPyAwIDogMjU1DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMucHV0SW1hZ2VEYXRhKGgsIDAsIDApOw0KICAgICAgICAgICAgICAgIGphKGYsIDY0LCAyNTYpOw0KICAgICAgICAgICAgICAgIG1hKGQsICJmb250QmlnIiwgZik7DQogICAgICAgICAgICAgICAgbmEoYS5tLCAiYmFzZSIsICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUhBQUFBQXdBZ01BQUFDMDFoYTBBQUFBREZCTVZFWC8vLytxcXFvQUFBQlZWVlhuNnAxcUFBQURHMGxFUVZRNHkyV1VUMnNUUVJqR0g2ZUk3Z1FSd2JWWEVXSmlZUEVyZUNsZUxmVE5tS0tiWEFUL0lIb1JQVFdERUJEUGJsRXZMb0tTRGhSUEswVnA0eGNRdktRRlFiczM5YVNYU3FpNDR6dXo2NS9VWjNoSm1OKytzL084RHl5TVYwWVpVV3h0UTR0VTZKWXhRN2VMVWlVY01Rd21vdmVNa2tVTnpQeUJFZEdkRzdaaEdrV1FLL3ZrKzRCSTdZWEp5QWFUdm4xU2VIaG1uMXQvanJYcjNjYWtYM1NMd2R5Q3dvTmpibVcwUTlTMWZHeW1Ha1dmMTJEZnVWbDh1Ylp5N2N2VmpNWjhERU9kMEpNU3ZqbXpoV0swTVNvMk1uS3FvRjB5REcvT0tKQi9HeThQZ1VRQksrMitHVnc0dEFjV1FEMEc2S2RwRDg3dDJ3TW5RSEFINk50a2FYRG1EVVB2OEM4VUtlQjl6dHljbllZRldCVjhlMkdMWVcyczhncGFXY0ZQeGVDV1VyQldqQXI5RzlhMWd5L3NwMTAvUGc2bU5RVEYxUkE4ZEpHTnJETW1oOENydG5ZbGQ5dXBleFF5aFQzOGplSHBUU0FoN2FwT3RJYWt6ZWN1WXJ6L25BTFdTWXRPV2ZWbnRDYUkvKytRZmdjY0FESUhsQys1UXluRHREYW12SUxMR3FzeHNMcUJHbDBaTW54NCtpSk53UEtkaUlaQWRCWEI0dXA1QjZQYmRLZUNodUZsdUZzR2FhMG54K3BoOW9HSzh0aFYwbWlsZ0JoQ1F1aVQ2L0g1N0RZdGVTamVzOGVYejdWOHp4NVpiS2VYVU5WWkk4cVJkZlJwNTVFbDJVcENxdXlzWjd6NXVsTjZORVlMY3NPNDZHL3JvWGo1VE11TVBXNzFHZjdRRWQwdW9Seno1cGpZNjZMMmNQT0ZybjNZenFzTHJlZ2FyV2k4SG51STVaWVcxbW9QZy9OUkx6QlJENjlld3NNTkYraHVPWGc1YktYU0dVMmJKVFQ0RzVtN0laYmJ2a1NIZjNFUWh0VThlTHlKNE90bTd1Zkw1UytHSmxnejVuNXFFRnluRkpFYmZnV2Jhd2lKbE91R3VPU0E4aVVkWEh1RmNHNWVtZWVQSFZ4bUVBTlJtU2NlTHlHY1gvamR1U2ZQajdFT0YyaDJLTk1XUkdjNlR4SEgrUkVLejJxaEJmQm9Pay9SamZPak5LZmc1VDFXNVNQN21JZmh2QkwzVG1pVUhxdGkxWkx0enlGL0xOeHcvb2NYMVNTY3AxbHBUT3FoK0JkdXE4bVJCVG9ybno5TzRhWlM1ZW1oMkZLVG94UXExem1WcDRjNzNUUU01NVM4L3pTZHl0TS92ZDdWYnJiaTdsMDlsV2ROMlJ5bmRtRlowQUsvQU40RCtGdXQ3WlgxQUFBQUFFbEZUa1N1UW1DQyIsIGIsIHNiKTsNCiAgICAgICAgICAgICAgICBuYShhLm0sICJmb250IiwgImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBSUFBQUFBd0FRTUFBQURqT3VEOUFBQUFCbEJNVkVVQUFBRC8vLytsMlovZEFBQUJBa2xFUVZRb3orMk9JVzdGUUF4RWM0QUZIeTRvNkJFTS94RnlqTUNDZ29VR09VaVBZeFFWakFxakJUbENWQVV1V0ZXZE9LdCtLZWtSL2dCTGZ2WjQzRDExa21TdklpY3d4RC9RNy9YMkFHMzFYeUFOUFlDamh2ZVVWelpYcWFRVXF4YlZvKzJRY3I0Ykl1Q3ZvWVBFK0ZiTUFlZUJRTkpuS0tLalcrNEVRNndCQTRKdkNJSGx1QkQ0RFVxMXBLZzZNT1htWDEzVTg0VlNpa0lWOWdWK1U0SEZESXlIZmEvb0ZEQ1lHVUcybjRvT0tJWnRXNnJFemVZZFZCamM4cEZ0V3NBVGZtT0ZaTmdFdHpERm1KSlFKcVpjeExuU3h1VjZBTEFUQjZFQndIYWdpTTNDb3dTempISUFxMXNROUxPR29RSE5rRlZIT2h0NGdZcktPOVJUV0U3NkJRaUFzOEd0dzdFR0FBQUFBRWxGVGtTdVFtQ0MiLCBiLCBBcnJheSg5NikuZmlsbChbLTEsIDAsIDAsIDYzXSkpOw0KICAgICAgICAgICAgICAgIG5hKGEubSwgImZvbnRZZWxsb3ciLCAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFJQUFBQUF3QVFNQUFBRGpPdUQ5QUFBQUJsQk1WRVVBQUFELy8vK2wyWi9kQUFBQkFrbEVRVlFveisyT0lXN0ZRQXhFYzRBRkh5NG82QkVNL3hGeWpNQ0Nnb1VHT1VpUFl4UVZqQXFqQlRsQ1ZBVXVXRldkT0t0K0tla1IvZ0JMZnZaNDNEMTFrbVN2SWljd3hEL1E3L1gyQUczMVh5QU5QWUNqaHZlVVZ6WlhxYVFVcXhiVm8rMlFjcjRiSXVDdm9ZUEUrRmJNQWVlQlFOSm5LS0tqVys0RVE2d0JBNEp2Q0lIbHVCRDREVXExcEtnNk1PWG1YMTNVODRWU2lrSVY5Z1YrVTRIRkRJeUhmYS9vRkRDWUdVRzJuNG9PS0ladFc2ckV6ZVlkVkJqYzhwRnRXc0FUZm1PRlpOZ0V0ekRGbUpKUUpxWmN4TG5TeHVWNkFMQVRCNkVCd0hhZ2lNM0Nvd1N6akhJQXExc1E5TE9Hb1FITmtGVkhPaHQ0Z1lyS085UlRXRTc2QlFpQXM4R3R3N0VHQUFBQUFFbEZUa1N1UW1DQyIsIGIsIEFycmF5KDk2KS5maWxsKFstMSwgMCwgMCwgNjBdKSk7DQogICAgICAgICAgICAgICAgYiA9IGEuYXVkaW8uRyhbWzE5MiwgNF0sIFsxNDQsIDhdLCBbMTI4LCAxMl1dLCAuNywgInNxdWFyZSIsIDIsIC4yKTsNCiAgICAgICAgICAgICAgICBhLm0uRC5zZXQoImRpZSIsIGIpOw0KICAgICAgICAgICAgICAgIGIgPSBhLmF1ZGlvLkcoW1sxNjAsIDRdXSwgLjcsICJzcXVhcmUiLCAwKTsNCiAgICAgICAgICAgICAgICBhLm0uRC5zZXQoImNsaW1iIiwgYik7DQogICAgICAgICAgICAgICAgYiA9IGEuYXVkaW8uRyhbWzE2MCwgNF0sIFsxOTIsIDEyXV0sIC43LCAic3F1YXJlIiwgMCwgLjM1KTsNCiAgICAgICAgICAgICAgICBhLm0uRC5zZXQoInRvZ2dsZTEiLCBiKTsNCiAgICAgICAgICAgICAgICBiID0gYS5hdWRpby5HKFtbMTkyLCA0XSwgWzE2MCwgMTJdXSwgLjcsICJzcXVhcmUiLCAwLCAuMzUpOw0KICAgICAgICAgICAgICAgIGEubS5ELnNldCgidG9nZ2xlMiIsIGIpOw0KICAgICAgICAgICAgICAgIGIgPSBhLmF1ZGlvLkcoW1syMjQsIDRdLCBbMTYwLCA0XSwgWzE5MiwgNF0sIFsxNjAsIDRdLCBbMTI4LCAxMl1dLCAuOCwgInNhd3Rvb3RoIiwgMSwgLjIpOw0KICAgICAgICAgICAgICAgIGEubS5ELnNldCgicnVtYmxlIiwgYik7DQogICAgICAgICAgICAgICAgYiA9IGEuYXVkaW8uRyhbWzE0NCwgOF1dLCAxLCAidHJpYW5nbGUiLCAyLCAuMik7DQogICAgICAgICAgICAgICAgYS5tLkQuc2V0KCJib3VsZGVyIiwgYik7DQogICAgICAgICAgICAgICAgYiA9IGEuYXVkaW8uRyhbWzEyOCwgMTJdLCBbMTQ0LCAxMl0sIFsxNjAsIDEyXSwgWzE3NiwgMTJdLCBbMTkyLCAxMl0sIFsyMDgsIDYwXV0sIC42LCAic2F3dG9vdGgiLCAwLCAuMSk7DQogICAgICAgICAgICAgICAgYS5tLkQuc2V0KCJ2aWN0b3J5IiwgYik7DQogICAgICAgICAgICAgICAgYiA9IGEuYXVkaW8uRyhbWzE2MCwgNl1dLCAuNywgInNxdWFyZSIsIDApOw0KICAgICAgICAgICAgICAgIGEubS5ELnNldCgiY2hvb3NlIiwgYik7DQogICAgICAgICAgICAgICAgYiA9IGEuYXVkaW8uRyhbWzE5MiwgMTBdXSwgLjcsICJzcXVhcmUiLCAwLCAuMyk7DQogICAgICAgICAgICAgICAgYS5tLkQuc2V0KCJzZWxlY3QiLCBiKTsNCiAgICAgICAgICAgICAgICBiID0gYS5hdWRpby5HKFtbMTI4LCA0XSwgWzE0NCwgNl1dLCAuNywgInNxdWFyZSIsIDIpOw0KICAgICAgICAgICAgICAgIGEubS5ELnNldCgicGF1c2UiLCBiKTsNCiAgICAgICAgICAgICAgICB5KHkoeSh5KHkoeSh5KHkoeShhLmtleWJvYXJkLCAicmlnaHQiLCAiQXJyb3dSaWdodCIsICJLZXlEIiksICJ1cCIsICJBcnJvd1VwIiwgIktleVciKSwgImxlZnQiLCAiQXJyb3dMZWZ0IiwgIktleUEiKSwgImRvd24iLCAiQXJyb3dEb3duIiwgIktleVMiKSwgInVuZG8iLCAiQmFja3NwYWNlIiwgIktleVoiKSwgInJlc3RhcnQiLCAiS2V5UiIpLCAic3RhcnQiLCAiRW50ZXIiKSwgInBhdXNlIiwgIkVudGVyIiksICJzZWxlY3QiLCAiU3BhY2UiKTsNCiAgICAgICAgICAgICAgICBhLmF1ZGlvLmVhID0gLjUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICk7DQogICAgICAgIDwvc2NyaXB0Pg0KICAgICAgICA8c2NyaXB0IHNyYz0iIj48L3NjcmlwdD4NCiAgICANCg0KPC9ib2R5PjwvaHRtbD4=";
