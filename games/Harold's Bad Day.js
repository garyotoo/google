window.game = "DQo8aHRtbD48aGVhZD4NCg0KDQo8IS0tIFVsdGltYXRlIEdhbWUgU3Rhc2ggZmlsZS0tPiANCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPg0KDQoNCjx0aXRsZT5QSUNPLTggQ2FydHJpZGdlPC90aXRsZT4NCjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIHVzZXItc2NhbGFibGU9bm8iPg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KDQoJLy8gRGVmYXVsdCBzaGVsbCBmb3IgUElDTy04IDAuMi4yIChpbmNsdWRlcyBAd2VlYmxlJ3MgZ2FtZXBhZCBtb2QgMS4wKQ0KCS8vIFRoaXMgZmlsZSBpcyBhdmFpbGFibGUgdW5kZXIgYSBDQzAgbGljZW5zZSBodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvc2hhcmUteW91ci13b3JrL3B1YmxpYy1kb21haW4vY2MwLw0KCS8vIChub3RlOiAidGhpcyBmaWxlIiBkb2VzIG5vdCBpbmNsdWRlIGFueSBjYXJ0cmlkZ2Ugb3IgY2FydHJpZGdlIGFydHdvcmsgaW5qZWN0ZWQgaW50byBhIGRlcml2YXRpdmUgaHRtbCBmaWxlIHdoZW4gdXNpbmcgdGhlIFBJQ08tOCBodG1sIGV4cG9ydGVyKQ0KDQoJLy8gb3B0aW9ucw0KDQoJLy8gZnVsbHNjcmVlbiwgc291bmQsIGNsb3NlIGJ1dHRvbiBhdCB0b3Agd2hlbiBwbGF5aW5nIG9uIHRvdWNoc2NyZWVuDQoJdmFyIHA4X2FsbG93X21vYmlsZV9tZW51ID0gdHJ1ZTsNCg0KCS8vIHA4X2F1dG9wbGF5IHRydWUgdG8gYm9vdCB0aGUgY2FydHJpZGdlIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgcGFnZSBsb2FkIHdoZW4gcG9zc2libGUNCgkvLyBpZiB0aGUgYnJvd3NlciBjYW4gbm90IGNyZWF0ZSBhbiBhdWRpbyBjb250ZXh0IG91dHNpZGUgb2YgYSB1c2VyIGdlc3R1cmUgKGUuZy4gb24gaU9TKSwgcDhfYXV0b3BsYXkgaGFzIG5vIGVmZmVjdA0KCXZhciBwOF9hdXRvcGxheSA9IGZhbHNlOw0KDQoJLy8gV2hlbiBwaWNvOF9zdGF0ZSBpcyBkZWZpbmVkLCBQSUNPLTggd2lsbCBzZXQgLmlzX3BhdXNlZCwgLnNvdW5kX3ZvbHVtZSBhbmQgLmZyYW1lX251bWJlciBlYWNoIGZyYW1lIA0KCS8vICh1c2VkIGZvciBkZXRlcm1pbmluZyBidXR0b24gaWNvbnMpDQoJdmFyIHBpY284X3N0YXRlID0gW107DQoNCgkvLyBXaGVuIHBpY284X2J1dHRvbnMgaXMgZGVmaW5lZCwgUElDTy04IHJlYWRzIGVhY2ggaW50IGFzIGEgYml0ZmllbGQgaG9sZGluZyB0aGF0IHBsYXllcidzIGJ1dHRvbiBzdGF0ZXMNCgkvLyAweDEgbGVmdCwgMHgyIHJpZ2h0LCAweDQgdXAsIDB4OCByaWdodCwgMHgxMCBPLCAweDIwIFgsIDB4NDAgbWVudQ0KCS8vICh1c2VkIGJ5IHA4X3VwZGF0ZV9nYW1lcGFkcykNCgl2YXIgcGljbzhfYnV0dG9ucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsgLy8gbWF4IDggcGxheWVycw0KDQoJLy8gV2hlbiBwaWNvOF9tb3VzZSBpcyBkZWZpbmVkLCBQSUNPLTggcmVhZHMgdGhlIDMgaW50ZWdlcnMgYXMgWCwgWSBhbmQgYSBiaXRmaWVsZCBmb3IgYnV0dG9uczogMHgxIExNQiwgMHgyIFJNQg0KCXZhciBwaWNvOF9tb3VzZSA9IFtdOw0KDQoJLy8gdXNlZCB0byBkaXNwbGF5IG51bWJlciBvZiBkZXRlY3RlZCBqb3lzdGlja3MNCgl2YXIgcGljbzhfZ2FtZXBhZHMgPSB7fTsNCglwaWNvOF9nYW1lcGFkcy5jb3VudCA9IDA7DQoNCgkvLyBXaGVuIHBpY284X2dwaW8gaXMgZGVmaW5lZCwgcmVhZGluZyBhbmQgd3JpdGluZyB0byBncGlvIHBpbnMgd2lsbCByZWFkIGFuZCB3cml0ZSB0byB0aGVzZSB2YWx1ZXMNCgl2YXIgcGljbzhfZ3BpbyA9IG5ldyBBcnJheSgxMjgpOw0KDQoJLy8gV2hlbiBwaWNvOF9hdWRpb19jb250ZXh0IGNvbnRleHQgaXMgZGVmaW5lZCwgdGhlIGh0bWwgc2hlbGwgKHRoaXMgZmlsZSkgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGFuZCBtYW5hZ2luZyBpdC4NCgkvLyBUaGlzIG1ha2VzIHNhdGlzZnlpbmcgYnJvd3NlciByZXF1aXJlbWVudHMgZWFzaWVyIC0tIGUuZy4gaW5pdGlhbGlzaW5nIGF1ZGlvIGZyb20gYSBzaG9ydCBzY3JpcHQgaW4gcmVzcG9uc2UgdG8gYSB1c2VyIGFjdGlvbi4NCgkvLyBPdGhlcndpc2UgUElDTy04IHdpbGwgdHJ5IHRvIGNyZWF0ZSBhbmQgdXNlIGl0cyBvd24gY29udGV4dC4NCg0KCXZhciBwaWNvOF9hdWRpb19jb250ZXh0Ow0KDQoNCgkvLyBtZW51IGJ1dHRvbiBhbmQgY29udHJvbGxlciBncmFwaGljcw0KCXA4X2dmeF9kYXQ9ew0KCQkJInA4Yl9wYXVzZTEiOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQU9VbEVRVlJJeDJOZ0dQYmcvOGNYLzBGNDZGdEFNNHZvYmdIVkxSb3dDNmhtMFlCYlFMRkZveGFNNEZRMGRIUHkwQzFOaDI2Tk51Z0JBQW5pek5pTWZ2YkdBQUFBQUVsRlRrU3VRbUNDIiwNCiJwOGJfY29udHJvbHMiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBUTBsRVFWUkl4Mk5nR0FYRWdQOGZYL3luQmFhcDRYQkxocWNGMUl5ZllXUUJyWkx6MExFQWx6cXF4UUZWTGNBbVQzTUxxSnFUYVc3QjRDcUxhRjRmaklJQkJ3QkwvQjJ2cXRQVkl3QUFBQUJKUlU1RXJrSmdnZz09IiwNCiJwOGJfZnVsbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFOMGxFUVZSSXgyTmdHUExnLzhjWC8ybUo2V2NCclVKbTRDd2dPU2dHclFWRUI4V29CYU1XREdNTGhtNU9IbnFsNmRDdDBZWThBQUE5b1ptKzlaOXhRQUFBQUFCSlJVNUVya0pnZ2c9PSIsDQoicDhiX3BhdXNlMCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFLVWxFUVZSSXgyTmdHSGJnLzhjWC83RmhjdFdOV2pCcXdhZ0ZveGFNV2pCcXdhZ0Y1Rmt3NUFBQVBhR1p2c0lVdFhVQUFBQUFTVVZPUks1Q1lJST0iLA0KInA4Yl9zb3VuZDAiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBTmtsRVFWUkl4Mk5nR0RIZy84Y1gvNUh4MExFQTNjQ2hZd0V1Z3dhdkJjUkc0cWdGb3hZTVp3dUdmazRlZnFYcDhLblJCajBBQU16N2NMRG5HNEZlQUFBQUFFbEZUa1N1UW1DQyIsDQoicDhiX3NvdW5kMSI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFQVWxFUVZSSXgyTmdHREhnLzhjWC81SHgwTEVBM2NDaFl3RXVnd2haUUxRRHFHNEJzWkZJS01oR0xSaTFZQ2hiTVBSejh2QXJUWWRQalRib0FRQ1NWZ3BYVVdRQU1BQUFBQUJKUlU1RXJrSmdnZz09IiwNCiJwOGJfY2xvc2UiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBVTBsRVFWUkl4Mk5rb0RGZ3BKc0YveisrK0k4aXdTOUJrdVc0OUErY0JjUmFSRWdmL1N3ZzFTSmkxZEhmQWtJRzRFeU9PSUp5NEN3ZzFpSkNpV0RVQXZJdEdMcXBhT2ptNUtGZm1nNzlHbTNJdGlvQWwrbUFHVllJWlVVQUFBQUFTVVZPUks1Q1lJST0iLA0KDQoiY29udHJvbHNfbGVmdF9wYW5lbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU3dBQUFFc0NBWUFBQUI1Zlk1MUFBQUVJMGxFUVZSNDJ1M2RNVTdEUUJDRzBUamFtOURUY1A4anBFbWZzd1M1aUhCaEFzTHhldi9odlFZNnBHWHlaUlRRK25RQ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFIcWJIRUV0bCt2dDdoUytmTHkvbVhIQlFxeEVpLzZhSS9BaUZXOVNuQjJCV0RrREJBdEFzQURCQWhBc0FNRUNCQXRBc0FBRUN4QXNBTUVDRUN4QXNBQUVDMEN3T05KOHRZdnJYUkFzSW1LMTlqMElGc1BHU3JRUUxDSmlOVitldDd4QVQ3UVFMSWFOMWRyM29vVmdNV3lzUkF2QklpcFdvb1ZnRVJVcjBVS3dpSXFWYUNGWVJNVkt0QkFzb21JbFdnZ1dVYkVTTFFTTHFGaUpGb0pGVkt4RUM4RWlLbGFpaFdBUkZTdlJRckRZSlNTVmZoYUNCU0JZQUlJRkNCYkFIcG9qNEJsL3NjT0dCV0RENGxYOGl3RTJMQURCQWdRTFFMQUFCQXNRTEFEQkFoQXNRTEFBQkF0QXNBREJBaEFzQU1FQ0JBdEFzQUFFQ3hBc0FNRUNFQ3hBc0FBRUN4QXNBTUVDRUN4QXNNaDF1ZDd1VHNIWlZEY1p5Rm84WXQ1c1ZKNk55VUFhU05FeUl5bWFYd1plcElLZDRtd29RYkFGQzBDd0FNRUNFQ3dBd1FJRUMwQ3dBQVFMRUN3QXdRSVFMRUN3QUFRTFFMQUF3UUk0VUhNRTIvMTBRWnE3dXN5Qk9iQmhSUXdwbUJVYjFuQUR1UGJ1YVVEL3AyZXpNSCsxYWRtd2hvc1ZmQmN4YjJTQ0pWYUlsbUFoVm9pV1lJa1ZvaVZhZ2lWV2lKWmdpWlZZSVZxQ0pWYUlsbWdKbGxnaFdvSWxWaUJhZ2lWV2lKWm9DWlpZSVZxQ0pWWWdXb0lsVmlCYWdnVUlsbmMwc1BFTGxtZ2hWbUlsV0tLRldBbVdhSUZZQ1pab0lWWUlsbWdoVm9JbFdpQldnaVZhaUpWZ0lWcUlsV0NKRm9pVllJa1dZaVZZaUJaaUpWaWloVmlKMVhiTkVXeUwxbU1RUll2ZnZJR0psUTFybUUwTHpJb055eUJpRHJCaEFZSUZJRmlBWUFFSUZvQmdBWUlGSUZnQWdnVUlGb0JnQVFnV0lGZ0FnZ1VnV0lCZ0RjK05uMUQvdGRIOFl1cHdnWnk1cUc0eWtLSWxWbVpEc0Rqc2hTbGF6cVFxSDdwNzkzUTJDQmFBWUFHQ0JTQllBSUlGQ0JhQVlBRUlGaUJZQUlJRklGaUFZQUVJRm9CZ0FZSUZJRmdBZ2dVSUZvQmdBUWdXSUZnQWdnVWdXSUJnQVFnV3dFTnpCS3haUHViOUNKN1dqQTBMc0dGUlYrOU41K2pORGhzV2dHQUJnZ1VnV0FDQ3hXNTZmZ2p1QTNjRWl6OVovbld3UjBpV1A4UC9ZQ0ZZREJzdHNVS3dpSWlXV0NGWVJFUkxyQkFzSXFJbFZnZ1dFZEVTS3dTTGlHaUpGWUpGUkxURUNzRWlJbHBpaFdBUkVTMnhRckNJaUpaWUlWaEVSRXVzRUN3aW9pVldDQll4MFJJckJJdW9hSWtWcitZaEZIVFp0TUNHQlFnV2dHQUJDQllnV0FDQ0JTQllnR0FCQ0JhQVlBR0NCU0JZQUlJRkNCYmoydU9SOHM2QUViaGV4Z3NXWXJpM1NLaEtjemNYQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU1BMm4rZTBVTUR6aDN5VEFBQUFBRWxGVGtTdVFtQ0MiLA0KDQoNCiJjb250cm9sc19yaWdodF9wYW5lbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU3dBQUFGZUNBWUFBQUEvbHlLL0FBQUtIa2xFUVZSNDJ1M2RBWkthV0JBR1lFM3R2ZkJtTUNmRG5HeldKTGhMSEhCR0J0N3JodStyU2lXYmJBazhwMys3VWVGMEFnQUFBQUFBQUFBQUFPQVF6cGFBek41dkRsT3NOd0lMaEpYUVN1SWZQL1lvWk1HY3hROUxnTEJ5ZkFJTFFHQUJBZ3RBWUFFSUxFQmdBUWdzQUlFRkNDd0FnUVVnc0FDQkJTQ3dBQVFXSUxBQUJCWXN0L2NMM0xtQTMvOWNjUlJGVFJxdVpJaWd5bEtzcmp3S0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFNWjB0QVh6MC92N2VMaTZxOC9uTkNnb3MyQ0tZbXR0dmwrRS91dzAyY1gvTTZ5M0lmbHB4Z1FWTHU2ZnVTY0M4SERJUDRmZjA4WFZod05Nd3VmM3EzejlxdnpQK2ZUVWdoMStQK2lIa0FQNExpNm1RYWlydFR6TzNUNTR0RUZSaHU1bVpyazl3d1lHRHFvMCtkczEwWFlJTGpoUlVqZ09JMkozMGV6cVJ2Y2RqQW1IMWR6ZXl1NktlQ0M3ZEZpUXQ1c01VOG1Nd2UvWWhWOWN4MWpodVFLZWhzd1JXQ0t2bTRHdlJDQzNJMFZVWWhUNkdsdk5hSUt5RUZpQ3NoQllJSzZFbHRLQnVBUW9yYXdZS3o5b0JheFdjdCt1WHJhR1BmMENoWXV1ZGg3R09rS2t6VUdUcmhwWk9GVFljQlkweDFoUjBBN3BXUUZGNU1ZRERGSlN4cGRCb2FEVmdwOTNWazNzSnptbWpkakY3NnJMYytabXEzZFh2SDhLYktDRjErblBuNXN2RFAxMkhYMU9tL3Y5ZnVraDNkNDYyMXBDMXUyb0Q3Y3Y0K3ZEdHdzY0plWi9CU09zTktidXIydWRWdHJxbFZ0VDdERHFYQlFsZjdhZHVvMVVvRlBzanJ6dm9ycGFGVmRHYk9Vd0VaSFBFdFllTVlkWFU2alpxWHpjcVFtaU45c0hIU09DRnNhUXB2TjBtU0lkVDlXb0tvM1V3RmtMRWtTVGFaV3RxaDZleEVJSyt1a2U5eHRhNDB6cEtsd3ZHd2MrMzJRZitOSDJWZlRNV1FzQlJKTU1YcTJ0OWJjWllDRjhya3JaMFVVWWVmV3A5T2ZrZTV0bCtobjRvSTBvVlNPbk9aZmpqcisvMC9ZeTZMc08rWFd1c1VhMXRRb3JBS2p3T3BocDVLblZaem1OQjdZTE0rQldVR3Z2c1BCWThMNDVlSWM3dWMvRnZBTnhQK0dkYUorZXdLT202MDIxOTIraGMxc1VhQ1N3cWp6c1Z0blZOdUZUWDB1dFZZM3NDaXl4ZHhOc2V0NVYxbnpPdWtjQmlienJIc0Y4Q0M2RVZjQ3hFWUlIQUVsZ0FBZ3RBWUFFQ0MwQmdBUWdzaU9kaUNRUVd4OUlKTElFRndzb3hDQ3hZVzhZTDA3bVluc0RpWUFVNStrSnZ4dEhxOG5BTUFoSXFoVld4cTJtNmdOL1hBOHNGL09DVERxS0FMbUVIY1YrYjZ3NmZEMGpaWWJrSlJhRDl6ZGlKNnJBb3BTdTh2V3VXTG10OFM3SURQQytRb29ObzNVaDFjaCtyM2tqVmlYZDRIaUJ0aGFKMHEvcVp0ZkZUQ1o5MFBKVUNvUSs0SHRYMnpUMEo0ZXNkVDFOd204MW9OR3dEcnNWN2hXMDN4a0VJV2lqUlF1dGhmNW9LMjIram45dUR3NDZGRVVKaXFyT3F0Ui9HUVVqdzZ2NFFXalhPRy9VQndzbzRDQXNLcHErOC9XTEJNV3l6RDlMaDljWkJTRFNTVEFSSXYrRzIycHBkblhFUTFpdmlOc2grckhwQ2ZnakVUUjU3RCtzT3VxeDFnNnRmVXRURDQvVFJnbXBQM2RWWjZWQXJKRTUvdnNmV2xicisweGYzNlhMNmVCV0Q2Mm4rS2dwVC8vOHAwbkZGWFcrQlJib3U2L2NQNFUzUVFEMmR2djdsNEc0NGxqZHJEVHZ0c3FKLzEyOG42OXc3ZHdVcnZmSjdtMzNUOVcyOE13aTZMTjBWS0NxOEdFQ1NzY1ZvYUUxQk42QnJCVFlxTXFGbEhTSFZHS016K0Y2bmFoU0V3cUdsNEt3ZEtEeHJCcXhaZ0wwQ1hCUld6bHVCMEJKV2dOQVNWaUMwaEJWUXIwQzlYVDhkVmo3K0FRbENxei9vR3ZUQ0NuSjJGNGZwdG81NjNLRFQwRmtDdFF0NWIxM0h4TzNJaklDd3M2Sk9IMXg3UENaZ3Z0dEsyNDNzNVRpQWhRVWZ2VHVKZXVOVm9GNXdoUnVySmtZL1FRV0M2NE5xWGRkTU55V29nRSs3bVh0NHRSdHZ1NTBKS1NmVFgrUXVzQnl5NnhyKzJFMzg4L2p2cnVmeitlY3JvWGo2KzdiMXM0K2YrWGJ4QW12L2hmSDZFK01IdWxqbk5RcVpib05OZEV2Q0Q0SGxoeDR2TmdMTFdHR3NBRUoyVWs3Y0F1RzdLVytOQTltQ3lvY1BnZkJCNWVzZFFQeWdjaHhBeE83RUpVcUFWTjJJaThBQllZdlpaWGFCRkYySEd4a1lFVUdub2JNRTFnNHJOK01VV3BDaXF6QUtuZHp1SElTVjBBS0VsZEFDWVlYUWdtQUZLS3lzR1NnOGF3ZXNWWERlcmwrMmhqNytBWVdLclhjZXhqcENwczVBa2EwYldqcFYySEFVTk1aWVU5QU42Rm9CUmVYRkFBNVRVTWFXUXFPaDFZQkEzZFdlaW5MTlk5Rmx3WXJkVmRUSDI4dTY3R2x0eU90SDl1NXErR08zMW1PZWI3SjNXdmQ5dngvTGlycUhkUWNpdk9KbjdTYTIzbTlkRmpxc0lOMVY5azVydzg1S2x3VVpYdW16ZEJRbDkxT1hoUTdydFlLNWYzemh1dlcyTW5SYWhUcXJzZXZEOHdBQzY0bkxsdU5ncHRDcUVGYmpkYjhvSVFnNmtrUWJoV3J1ajdFUUhkWnI0MkJYZXR1Uk9xMUtuZFdITHN0WWlNRDYyamg0cmJIeENLRVZJS3pHNjI4c2hPaWppTEhVV0lnTzY2VnhwS1lhblZhUXppclU4NERBaXR4ZGhmcXdZc25RQ2hoV1laOFhCRllvdDVwOU8xSm9SUTJyU004RFJPeXd3cDR6MldyZm9wOG5jaDRMSGRaejE2QmQzK3FkVnVReE1QcnpnY0JTSUFWREswbFlDU3dFMWt3QnB6aXh1MFpvSlFxcmRNOFBBcXQwSUx3bDJNZkZvWlV0ckp4NFIyRHR3SkxReXRoWmdjQTZZR2dKS3hCWUtVSkxXSUhBU2hGYXdnb0VWb3JRRWxZZ3NGS0VsckFDZ1pVbXRJUVZDS3p3cGtaQ1FHQ0ZEYXZ6UUdpQndBb2ZWbzhqb2RBQ2dSVTZySVFXQ0t4VVlTVzBZT2VCbGVtcUFLOThkQ0ZyYUxsS0F3SnJ1cURma2hYeXk1K3p5dHhwdVdvREFtdmFaWTlobFRpMExzb0lab0lnZWlHdnRZOVpycFh1bXU3b3NPWjFlKzJza25kYW5WSkNZTTBIUXh0d24xYi9ibUQwMEhMQ0hZSDF2SURmZ2hidVpsOWt6dEJwT2VFT1Q4SWhVdkdXMnArSTU0cWN2MEtIOWJsdUtKWm16NTFWOUU1cnRQNmRNa0pnemJzT3YxK09FbFpCUSt2eThId0FFVWVSbzIvZk9JZ09LOGxZR09GS29iVTdMZU1ndkZnd3d3dDhmK1N1b3RiKy9GcjNZZE9ObjBZSVdLeFJSNkFhKzJVY3hFaTRmQ3hzU3hSbzdURXd5bmc0V20vaklFUjdwZmVkUHQwVk9xd1VYVmFtVzNHVjZMUjBWeEQwRlQ5cko3SGxmdXV1MEdHdDEyWDFheFptbHM2cVZLYzFXbC9kRmF6eHlyL0cyK3g3NlNMV1BJN1J4MGgwVjdCQ1FiVnJmUzVyVDBXNVltRGRQM2ZsY2pLZ3FJN3hZZ0JNakMwK2dXMU5RVGVnYXdVMktqS2haUjBoMVJpak0vaGVwMm9VaE1LaHBlQ3NIU2c4YXdhc1dZQzlBbHdVVnM1YmdkQVNWb0RRRWxZZ3RJUVZVSzlBdlYwL0hWWSsvZ0VKUXFzLzZCcjB3Z3B5ZGhlSDZiYU9ldHlnMDlCWkFyVUxlVzlkeDlCVkdRRmh4MFdkUHJqMmVFekFmTGVWdGh2WnkzRUFDd3MrZW5jeWRGU0NDZ1JYM0xGcVl2UVRWQ0M0UHFqV2RjMTBVNElLK0xTYnVZZFh1L0cyMjVtUWNqS2R3emhiZ3VVQk12eXhtL2puOGQ5ZHorZnp6MWRDOGZiYlplYXgvdnE3MitPK2VTWVFXTHpjZVkxQ3B0dGdFOTJTOEFPQnhaSXU3UFVuUnZjRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDd3dML2N2QkloMDkraEpBQUFBQUJKUlU1RXJrSmdnZz09IiwNCg0KCX07DQoNCg0KCS8vIGFkZGVkIDAuMi4xOiB3b3JrLWFyb3VuZCBmb3IgaU9TL1NhZmFyaSBydW5uaW5nIGZyb20gYW4gaUZyYW1lIChlLmcuIGZyb20gaXRjaC5pbyBwYWdlKToNCgkvLyB0b3VjaCBldmVudHMgb25seSByZWdpc3RlciBhZnRlciBhZGRpbmcgZHVtbXkgbGlzdGVuZXJzIG9uIGRvY3VtZW50Lg0KDQoJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHt9KTsNCglkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB7fSk7DQoJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB7fSk7DQoNCg0KCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJLy8gcGljby04IDAuMi4yOiBhbGxvdyBkcm9wcGluZyBmaWxlcw0KCXZhciBwOF9kcm9wcGVkX2NhcnQgPSBudWxsOw0KCXZhciBwOF9kcm9wcGVkX2NhcnRfbmFtZSA9ICIiOw0KCWZ1bmN0aW9uIHA4X2Ryb3BfZmlsZShlKQ0KCXsNCgkJLy8gY29uc29sZS5sb2coIkBAIGRyb3BwaW5nIGZpbGUuLi4iKTsNCgkNCgkJZS5zdG9wUHJvcGFnYXRpb24oKTsNCgkJZS5wcmV2ZW50RGVmYXVsdCgpOw0KDQoJCWlmIChlLmRhdGFUcmFuc2ZlciAmJiBlLmRhdGFUcmFuc2Zlci5maWxlcyAmJiBlLmRhdGFUcmFuc2Zlci5maWxlc1swXSkNCgkJew0KCQkJLy8gcmVhZCBmcm9tIGZpbGUNCgkJCXJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQoJCQlyZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7DQoJCQkJcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5uYW1lOw0KCQkJCXA4X2Ryb3BwZWRfY2FydCA9IHJlYWRlci5yZXN1bHQ7DQoJCQkJLy8gZGF0YTppbWFnZS9wbmc7YmFzZTY0DQoJCQkJZS5zdG9wUHJvcGFnYXRpb24oKTsNCgkJCQllLnByZXZlbnREZWZhdWx0KCk7IA0KCQkJfTsNCgkJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKTsNCgkJCWNvZG9fY29tbWFuZCA9IDk7IC8vIHJlYWQgZGlyZWN0bHkgZnJvbSBwOF9kcm9wcGVkX2NhcnQgd2l0aCBsaWJiNjQgZGVjb2Rlcg0KCQl9DQoJCWVsc2UNCgkJew0KCQkJLy8gcmVhZCBmcm9tIHVybCAob3IgZGF0YSB1cmwpDQoJCQl0eHQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0Jyk7DQoJCQlpZiAodHh0KXsNCgkJCQlwOF9kcm9wcGVkX2NhcnRfbmFtZSA9ICJ1bnRpdGxlZC5wOC5wbmciOw0KCQkJCXA4X2Ryb3BwZWRfY2FydCA9IHR4dDsNCgkJCQljb2RvX2NvbW1hbmQgPSA5Ow0KCQkJfQ0KCQl9DQoJfQ0KCWZ1bmN0aW9uIG5vcChldnQpIHsNCgkJZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KCQlldnQucHJldmVudERlZmF1bHQoKTsNCgl9DQoJZnVuY3Rpb24gZHJhZ292ZXIoZXZ0KSB7DQoJCWV2dC5zdG9wUHJvcGFnYXRpb24oKTsNCgkJZXZ0LnByZXZlbnREZWZhdWx0KCk7DQoJCU1vZHVsZS5waWNvOERyYWdPdmVyKCk7DQoJfQ0KCWZ1bmN0aW9uIGRyYWdzdG9wKGV2dCkgew0KCQlldnQuc3RvcFByb3BhZ2F0aW9uKCk7DQoJCWV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KCQlNb2R1bGUucGljbzhEcmFnU3RvcCgpOw0KCX0NCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCgl2YXIgcDhfYnV0dG9uc19oYXNoID0gLTE7DQoJZnVuY3Rpb24gcDhfdXBkYXRlX2J1dHRvbl9pY29ucygpDQoJew0KCQkvLyBidXR0b25zIG9ubHkgYXBwZWFyIHdoZW4gcnVubmluZw0KCQlpZiAoIXA4X2lzX3J1bm5pbmcpDQoJCXsNCgkJCXJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCgkJCXJldHVybjsNCgkJfQ0KCQl2YXIgaXNfZnVsbHNjcmVlbj0oZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KCQkNCgkJLy8gaGFzaCBiYXNlZCBvbjogcGljbzhfc3RhdGUuc291bmRfdm9sdW1lICBwaWNvOF9zdGF0ZS5pc19wYXVzZWQgYm90dG9tX21hcmdpbiBsZWZ0IGlzX2Z1bGxzY3JlZW4gcDhfdG91Y2hfZGV0ZWN0ZWQNCgkJdmFyIGhhc2ggPSAwOw0KCQloYXNoID0gcGljbzhfc3RhdGUuc291bmRfdm9sdW1lOw0KCQlpZiAocGljbzhfc3RhdGUuaXNfcGF1c2VkKSBoYXNoICs9IDB4MTAwOw0KCQlpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpICAgICBoYXNoICs9IDB4MjAwOw0KCQlpZiAoaXNfZnVsbHNjcmVlbikgICAgICAgICBoYXNoICs9IDB4NDAwOw0KDQoJCWlmIChwOF9idXR0b25zX2hhc2ggPT0gaGFzaCkNCgkJew0KCQkJcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9idXR0b25faWNvbnMpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCQ0KCQlwOF9idXR0b25zX2hhc2ggPSBoYXNoOw0KCQkvLyBjb25zb2xlLmxvZygiQEAgdXBkYXRpbmcgYnV0dG9uIGljb25zIik7DQoNCgkJZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncDhfbWVudV9idXR0b24nKTsNCgkJZm9yIChpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykNCgkJew0KCQkJZWwgPSBlbHNbaV07DQoJCQlpbmRleCA9IGVsLmlkOwkJCQ0KCQkJaWYgKGluZGV4ID09ICdwOGJfc291bmQnKSBpbmRleCArPSAocGljbzhfc3RhdGUuc291bmRfdm9sdW1lID09IDAgPyAiMCIgOiAiMSIpOyAvLyAxIGlmIHVuZGVmaW5lZA0KCQkJaWYgKGluZGV4ID09ICdwOGJfcGF1c2UnKSBpbmRleCArPSAocGljbzhfc3RhdGUuaXNfcGF1c2VkID4gMCA/ICIxIiA6ICIwIik7ICAgICAvLyAwIGlmIHVuZGVmaW5lZA0KDQoJCQluZXdfc3RyID0gJzxpbWcgd2lkdGg9MjQgaGVpZ2h0PTI0IHN0eWxlPSJwb2ludGVyLWV2ZW50czpub25lIiBzcmM9IicrcDhfZ2Z4X2RhdFtpbmRleF0rJyI+JzsNCgkJCWlmIChlbC5pbm5lckhUTUwgIT0gbmV3X3N0cikNCgkJCQllbC5pbm5lckhUTUwgPSBuZXdfc3RyOw0KDQoNCg0KDQoJCQkvLyBoaWRlIGFsbCBidXR0b25zIGZvciB0b3VjaCBtb2RlIChjYW4gcGF1c2Ugd2l0aCBtZW51IGJ1dHRvbnMpDQoJCQkNCgkJCXZhciBpc192aXNpYmxlID0gcDhfaXNfcnVubmluZzsNCg0KCQkJaWYgKCghcDhfdG91Y2hfZGV0ZWN0ZWQgfHwgIXA4X2FsbG93X21vYmlsZV9tZW51KSAmJiBlbC5wYXJlbnRFbGVtZW50LmlkID09ICJwOF9tZW51X2J1dHRvbnNfdG91Y2giKQ0KCQkJCWlzX3Zpc2libGUgPSBmYWxzZTsNCg0KCQkJaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIGVsLnBhcmVudEVsZW1lbnQuaWQgPT0gInA4X21lbnVfYnV0dG9ucyIpDQoJCQkJaXNfdmlzaWJsZSA9IGZhbHNlOw0KDQoJCQlpZiAoaXNfZnVsbHNjcmVlbikgDQoJCQkJaXNfdmlzaWJsZSA9IGZhbHNlOw0KDQoJCQlpZiAoaXNfdmlzaWJsZSkNCgkJCQllbC5zdHlsZS5kaXNwbGF5PSIiOw0KCQkJZWxzZQ0KCQkJCWVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KCQl9DQoJCXJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCgl9DQoNCg0KDQoJZnVuY3Rpb24gYWJzKHgpDQoJew0KCQlyZXR1cm4geCA8IDAgPyAteCA6IHg7DQoJfQ0KCQ0KCS8vIHN0ZXAgMCBkb3duIDEgZHJhZyAyIHVwIChub3QgdXNlZCkNCglmdW5jdGlvbiBwaWNvOF9idXR0b25zX2V2ZW50KGUsIHN0ZXApDQoJew0KCQlpZiAoIXA4X2lzX3J1bm5pbmcpIHJldHVybjsNCgkNCgkJcGljbzhfYnV0dG9uc1swXSA9IDA7DQoNCgkJaWYgKHN0ZXAgPT0gMiAmJiB0eXBlb2YocGljbzhfbW91c2UpICE9PSAndW5kZWZpbmVkJykNCgkJew0KCQkJcGljbzhfbW91c2VbMl0gPSAwOw0KCQl9DQoJCQ0KCQl2YXIgbnVtID0gMDsNCgkJaWYgKGUudG91Y2hlcykgbnVtID0gZS50b3VjaGVzLmxlbmd0aDsNCg0KCQlpZiAobnVtID09IDAgJiYgdHlwZW9mKHBpY284X21vdXNlKSAhPT0gJ3VuZGVmaW5lZCcpDQoJCXsNCgkJCS8vICBubyBhY3RpdmUgdG91Y2hlczogcmVsZWFzZSBtb3VzZSBidXR0b24gZnJvbSBhbnl3aGVyZSBvbiBwYWdlLiAobWF5YmUgcmVkdW5kYW50PyBidXQganVzdCBpbiBjYXNlKQ0KCQkJcGljbzhfbW91c2VbMl0gPSAwOw0KCQl9DQoNCgkJDQoJCWZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspDQoJCXsNCgkJCXZhciB0b3VjaCA9IGUudG91Y2hlc1tpXTsNCgkJCXZhciB4ID0gdG91Y2guY2xpZW50WDsNCgkJCXZhciB5ID0gdG91Y2guY2xpZW50WTsNCgkJCXZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7DQoJCQl2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCg0KCQkJdmFyIHIgPSBNYXRoLm1pbih3LGgpIC8gMTI7DQoJCQlpZiAociA+IDQwKSByID0gNDA7DQoNCgkJCS8vIG1vdXNlICgwLjEuMTJkKQ0KDQoJCQlsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KCQkJaWYgKHA4X3RvdWNoX2RldGVjdGVkKQ0KCQkJaWYgKHR5cGVvZihwaWNvOF9tb3VzZSkgIT09ICd1bmRlZmluZWQnKQ0KCQkJaWYgKGNhbnZhcykNCgkJCXsNCgkJCQl2YXIgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCgkJCQkvL2NvbnNvbGUubG9nKHJlY3QudG9wLCByZWN0LnJpZ2h0LCByZWN0LmJvdHRvbSwgcmVjdC5sZWZ0LCB4LCB5KTsNCg0KCQkJCWlmICh4ID49IHJlY3QubGVmdCAmJiB4IDwgcmVjdC5yaWdodCAmJiB5ID49IHJlY3QudG9wICYmIHkgPCByZWN0LmJvdHRvbSkNCgkJCQl7DQoJCQkJCXBpY284X21vdXNlID0gWw0KCQkJCQkJTWF0aC5mbG9vcigoeCAtIHJlY3QubGVmdCkgKiAxMjggLyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkpLA0KCQkJCQkJTWF0aC5mbG9vcigoeSAtIHJlY3QudG9wKSAqIDEyOCAvIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSksDQoJCQkJCQlzdGVwIDwgMiA/IDEgOiAwDQoJCQkJCV07DQoJCQkJCS8vIHJldHVybjsgLy8gY29tbWVudGVkIC0tIGJsb2NrcyBvdmVybGFwcGluZyBidXR0b25zDQoJCQkJfWVsc2UNCgkJCQl7DQoJCQkJCXBpY284X21vdXNlWzJdID0gMDsNCgkJCQl9DQoJCQl9DQoNCg0KCQkJLy8gYnV0dG9ucw0KCQkJDQoJCQliID0gMDsNCg0KCQkJaWYgKHkgPCBoIC0gcio4KQ0KCQkJew0KCQkJCS8vIG5vIGNvbnRyb2xsZXIgYnV0dG9ucyB1cCBoZXJlOyBpbmNsdWRlcyBjYW52YXMgYW5kIG1lbnUgYnV0dG9ucyBhdCB0b3AgaW4gdG91Y2ggbW9kZQ0KCQkJfQ0KCQkJZWxzZQ0KCQkJew0KCQkJCWUucHJldmVudERlZmF1bHQoKTsNCg0KCQkJCWlmICgoeSA8IGggLSByKjYpICYmIHkgPiAoaCAtIHIqOCkpDQoJCQkJew0KCQkJCQkvLyBtZW51IGJ1dHRvbjogaGFsZiBhcyBoaWdoIGFzIFggTyBidXR0b24NCgkJCQkJLy8gc3RyZXRjaCBhY3Jvc3MgcmlnaHQtaGFuZCBoYWxmIGFib3ZlIFggTyBidXR0b25zDQoJCQkJCWlmICh4ID4gdyAtIHIqMykgDQoJCQkJCQliIHw9IDB4NDA7DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKHggPCB3LzIgJiYgeCA8IHIqNikNCgkJCQl7DQoJCQkJCS8vIHN0aWNrDQoNCgkJCQkJbWFzayA9IDB4ZjsgLy8gZHBhZA0KCQkJCQl2YXIgY3ggPSAwICsgciozOw0KCQkJCQl2YXIgY3kgPSBoIC0gciozOw0KDQoJCQkJCWRlYWR6b25lID0gci8zOw0KCQkJCQl2YXIgZHggPSB4IC0gY3g7DQoJCQkJCXZhciBkeSA9IHkgLSBjeTsNCg0KCQkJCQlpZiAoYWJzKGR4KSA+IGFicyhkeSkgKiAwLjYpIC8vIGhvcml6b250YWwgDQoJCQkJCXsNCgkJCQkJCWlmIChkeCA8IC1kZWFkem9uZSkgYiB8PSAweDE7DQoJCQkJCQlpZiAoZHggPiBkZWFkem9uZSkgYiB8PSAweDI7DQoJCQkJCX0NCgkJCQkJaWYgKGFicyhkeSkgPiBhYnMoZHgpICogMC42KSAvLyB2ZXJ0aWNhbA0KCQkJCQl7DQoJCQkJCQlpZiAoZHkgPCAtZGVhZHpvbmUpIGIgfD0gMHg0Ow0KCQkJCQkJaWYgKGR5ID4gZGVhZHpvbmUpIGIgfD0gMHg4Ow0KCQkJCQl9DQoJCQkJfQ0KCQkJCWVsc2UgaWYgKHggPiB3IC0gcio2KQ0KCQkJCXsNCgkJCQkJLy8gYnV0dG9uOyBkaWFnb25hbCBzcGxpdCBmcm9tIGJvdHRvbSByaWdodCBjb3JuZXINCgkJCQkNCgkJCQkJbWFzayA9IDB4MzA7DQoJCQkJCQ0KCQkJCQkvLyBvbmUgb3IgYm90aCBvZiBbWF0sIFtPXQ0KCQkJCQlpZiAoIChoLXkpID4gKHcteCkgKiAwLjgpIGIgfD0gMHgxMDsNCgkJCQkJaWYgKCAody14KSA+IChoLXkpICogMC44KSBiIHw9IDB4MjA7DQoJCQkJfQ0KCQkJfQ0KDQoJCQlwaWNvOF9idXR0b25zWzBdIHw9IGI7DQoJCQ0KCQl9DQoJfQ0KDQoJLy8gcDhfdXBkYXRlX2xheW91dF9oYXNoIGlzIHVzZWQgdG8gZGVjaWRlIHdoZW4gdG8gdXBkYXRlIGxheW91dCAoZXhwZW5zaXZlIGVzcGVjaWFsbHkgd2hlbiBwYXJ0IG9mIGEgaGVhdnkgcGFnZSkNCgl2YXIgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gLTE7DQoJdmFyIGxhc3Rfd2luZG93ZWRfY29udGFpbmVyX2hlaWdodCA9IDUxMjsNCgl2YXIgcDhfbGF5b3V0X2ZyYW1lcyA9IDA7DQoNCglmdW5jdGlvbiBwOF91cGRhdGVfbGF5b3V0KCkNCgl7DQoJCXZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7DQoJCXZhciBwOF9wbGF5YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9wbGF5YXJlYSIpOw0KCQl2YXIgcDhfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X2NvbnRhaW5lciIpOw0KCQl2YXIgcDhfZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfZnJhbWUiKTsNCgkJdmFyIGNzaXplID0gNTEyOw0KCQl2YXIgbWFyZ2luX3RvcCA9IDA7DQoJCXZhciBtYXJnaW5fbGVmdCA9IDA7DQoNCgkJLy8gcGFnZSBkaWRuJ3QgbG9hZCB5ZXQ/IGZpcnN0IGNhbGwgc2hvdWxkIGJlIGFmdGVyIHA4X2ZyYW1lIGlzIGNyZWF0ZWQgc28gdGhhdCBsYXlvdXQgZG9lc24ndCBqdW1wIGFyb3VuZC4NCgkJaWYgKCFjYW52YXMgfHwgIXA4X3BsYXlhcmVhIHx8ICFwOF9jb250YWluZXIgfHwgIXA4X2ZyYW1lKQ0KCQl7DQoJCQlwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSAtMTsNCgkJCXJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfbGF5b3V0KTsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCXA4X2xheW91dF9mcmFtZXMgKys7DQoNCgkJLy8gYXNzdW1lcyBmcmFtZSBkb2Vzbid0IGhhdmUgcGFkZGluZw0KCQkNCgkJdmFyIGlzX2Z1bGxzY3JlZW49KGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbiB8fCBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCgkJdmFyIGZyYW1lX3dpZHRoID0gcDhfZnJhbWUub2Zmc2V0V2lkdGg7DQoJCXZhciBmcmFtZV9oZWlnaHQgPSBwOF9mcmFtZS5vZmZzZXRIZWlnaHQ7DQoNCgkJaWYgKGlzX2Z1bGxzY3JlZW4pDQoJCXsNCgkJCS8vIHNhbWUgYXMgd2luZG93DQoJCQlmcmFtZV93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOw0KCQkJZnJhbWVfaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0Ow0KCQl9DQoJCWVsc2V7DQoJCQkvLyBuZXZlciBsYXJnZXIgdGhhbiB3aW5kb3cgIC8vIChoYXBwZW5zIHdoZW4gYWRkcmVzcyBiYXIgaXMgZG93biBpbiBwb3J0cmFpZ2h0IG1vZGUgb24gcGhvbmUpDQoJCQlmcmFtZV93aWR0aCAgPSBNYXRoLm1pbihmcmFtZV93aWR0aCwgd2luZG93LmlubmVyV2lkdGgpOw0KCQkJZnJhbWVfaGVpZ2h0ID0gTWF0aC5taW4oZnJhbWVfaGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQpOw0KCQl9DQoNCgkJLy8gYXMgYmlnIGFzIHdpbGwgZml0IGluIGEgZnJhbWUuLg0KCQljc2l6ZSA9ICBNYXRoLm1pbihmcmFtZV93aWR0aCxmcmFtZV9oZWlnaHQpOw0KDQoJCS8vIC4uIGJ1dCBuZXZlciBtb3JlIHRoYW4gMi8zIG9mIGxvbmdlc3Qgc2lkZSBmb3IgdG91Y2ggKGUuZy4gbGVhdmUgc3BhY2UgZm9yIGNvbnRyb2xzIG9uIGlQYWQpDQoJCWlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nKQ0KCQl7DQoJCQl2YXIgbG9uZ2VzdF9zaWRlID0gTWF0aC5tYXgod2luZG93LmlubmVyV2lkdGgsd2luZG93LmlubmVySGVpZ2h0KTsNCgkJCWNzaXplID0gTWF0aC5taW4oY3NpemUsIGxvbmdlc3Rfc2lkZSAqIDIvMyk7DQoJCX0NCg0KCQkvLyBwaXhlbCBwZXJmZWN0OiBxdWFudGl6ZSB0byBjbG9zZXN0IG11bHRpcGxlIG9mIDEyOA0KCQkvLyBvbmx5IHdoZW4gbGFyZ2UgZGlzcGxheSAoZGVza3RvcCkNCgkJaWYgKGZyYW1lX3dpZHRoID49IDUxMiAmJiBmcmFtZV9oZWlnaHQgPj0gNTEyKQ0KCQl7DQoJCQljc2l6ZSA9IChjc2l6ZSsxKSAmIH4weDdmOw0KCQl9DQoNCgkJLy8gY3NpemUgc2hvdWxkIG5ldmVyIGJlIGhpZ2hlciB0aGFuIHBhcmVudCBmcmFtZQ0KCQkvLyAob3RoZXJ3aXNlIHN0cmV0Y2hlZCBsYXJnZSB3aGVuIGZ1bGxzY3JlZW4gYW5kIHRoZW4gcmV0dXJuKQ0KCQlpZiAoIWlzX2Z1bGxzY3JlZW4gJiYgcDhfZnJhbWUpIA0KCQkJY3NpemUgPSBNYXRoLm1pbihjc2l6ZSwgbGFzdF93aW5kb3dlZF9jb250YWluZXJfaGVpZ2h0KTsgLy8gcDhfZnJhbWVfMCBwYXJlbnQNCgkJDQoNCgkJaWYgKGlzX2Z1bGxzY3JlZW4pDQoJCXsNCgkJCS8vIGFsd2F5cyBjZW50ZXIgaG9yaXpvbnRhbGx5DQoJCQltYXJnaW5fbGVmdCA9IChmcmFtZV93aWR0aCAtIGNzaXplKS8yOw0KDQoJCQlpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpDQoJCQl7DQoJCQkJaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgd2luZG93LmlubmVySGVpZ2h0KQ0KCQkJCXsNCgkJCQkJLy8gcG9ydHJhaXQ6IGtlZXAgYXQgeT00MCAoYXZvaWQgcm91bmRlZCB0b3AgY29ybmVycyAvIGNhbWVyYSBudWIgdGhpbmcgZXRjLikNCgkJCQkJbWFyZ2luX3RvcCA9IE1hdGgubWluKDQwLCBmcmFtZV9oZWlnaHQgLSBjc2l6ZSk7DQoJCQkJfQ0KCQkJCWVsc2UNCgkJCQl7DQoJCQkJCS8vIGxhbmRzY2FwZTogcHV0IGEgbGl0dGxlIGFib3ZlIHZlcnRpY2FsIGNlbnRlcg0KCQkJCQltYXJnaW5fdG9wID0gKGZyYW1lX2hlaWdodCAtIGNzaXplKS80Ow0KCQkJCX0NCgkJCX0NCgkJCWVsc2V7DQoJCQkJLy8gbm9uLXRvdWNoOiBjZW50ZXIgdmVydGljYWxseQ0KCQkJCW1hcmdpbl90b3AgPSAoZnJhbWVfaGVpZ2h0IC0gY3NpemUpLzI7DQoJCQl9DQoJCX0NCg0KCQkvLyBza2lwIGlmIHJlbGV2YW50IHN0YXRlIGhhcyBub3QgY2hhbmdlZA0KDQoJCXZhciB1cGRhdGVfaGFzaCA9IGNzaXplICsgbWFyZ2luX3RvcCAqIDEwMDAuMyArIG1hcmdpbl9sZWZ0ICogMC4wMDEgKyBmcmFtZV93aWR0aCAqIDMzMy4zMyArIGZyYW1lX2hlaWdodCAqIDc3Mi4xNTEzNDsNCgkJaWYgKGlzX2Z1bGxzY3JlZW4pIHVwZGF0ZV9oYXNoICs9IDAuMTIzNzsNCg0KCQkvLyB1bmV4cGVjdGVkIHRoaW5ncyBjYW4gaGFwcGVuIGluIHRoZSBmaXJzdCBmZXcgc2Vjb25kcywgc28ganVzdCBrZWVwIHJlLWNhbGN1bGF0aW5nIGxheW91dC4gd2FzbSB2ZXJzaW9uIGJyZWFrcyBsYXlvdXQgb3RoZXJ3aXNlLg0KCQkvLyBhbHNvOiBib251cyByZWZyZXNoIGF0IDUsIDggc2Vjb25kcyBqdXN0IGluIGNhc2UgLl8uDQoJCWlmIChwOF9sYXlvdXRfZnJhbWVzIDwgMTgwIHx8IHA4X2xheW91dF9mcmFtZXMgPT0gNjAqNSB8fCBwOF9sYXlvdXRfZnJhbWVzID09IDYwKjggKQ0KCQkJdXBkYXRlX2hhc2ggPSBwOF9sYXlvdXRfZnJhbWVzOw0KDQoJCWlmICghaXNfZnVsbHNjcmVlbikgLy8gZnVsbHNjcmVlbjogdXBkYXRlIGV2ZXJ5IGZyYW1lIGZvciBzYWZldHkuIHNob3VsZCBiZSBjaGVhcCENCgkJaWYgKCFwOF90b3VjaF9kZXRlY3RlZCkgLy8gbW9iaWxlOiB1cGRhdGUgZXZlcnkgZnJhbWUgYmVjYXVzZSBub3RoaW5nIGNhbiBiZSB0cnVzdGVkDQoJCWlmIChwOF91cGRhdGVfbGF5b3V0X2hhc2ggPT0gdXBkYXRlX2hhc2gpDQoJCXsNCgkJCS8vY29uc29sZS5sb2coInA4X3VwZGF0ZV9sYXlvdXQoKTogc2tpcHBpbmciKTsNCgkJCXJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfbGF5b3V0KTsNCgkJCXJldHVybjsNCgkJfQ0KCQlwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSB1cGRhdGVfaGFzaDsNCg0KCQkvLyByZWNvcmQgdGhpcyBmb3IgcmV0dXJuaW5nIHRvIG9yaWdpbmFsIHNpemUgYWZ0ZXIgZnVsbHNjcmVlbiBwdXNoZXMgb3V0IGNvbnRhaW5lciBoZWlnaHQgKGFyZ2gpDQoJCWlmICghaXNfZnVsbHNjcmVlbiAmJiBwOF9mcmFtZSkNCgkJCWxhc3Rfd2luZG93ZWRfY29udGFpbmVyX2hlaWdodCA9IHA4X2ZyYW1lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7DQoJCQ0KDQoJCS8vIG1vYmlsZSBpbiBwb3J0cmFpdCBtb2RlOiBwdXQgc2NyZWVuIGF0IHRvcCAodyAvIGEgbGl0dGxlIGV4dHJhIHNwYWNlIGZvciBmdWxsc2NyZWVuIGJ1dHRvbiBpZiBuZWVkZWQpDQoJCS8vIChkb24ndCBjYXJ0IHRvbyBhYm91dCBidXR0b25zIG92ZXJsYXBwaW5nIHNjcmVlbikNCgkJaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIHA4X2lzX3J1bm5pbmcgJiYgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KQ0KCQkJcDhfcGxheWFyZWEuc3R5bGUubWFyZ2luVG9wID0gcDhfYWxsb3dfbW9iaWxlX21lbnUgPyAzMiA6IDg7DQoJCWVsc2UgaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIHA4X2lzX3J1bm5pbmcpIC8vIGxhbmRzY2FwZTogc2xpZ2h0bHkgYWJvdmUgdmVydGljYWwgY2VudGVyIChvbmx5IHJlbGV2YW50IGZvciBpUGFkIC8gaGlnaHJlcyBkZXZpY2VzKQ0KCQkJcDhfcGxheWFyZWEuc3R5bGUubWFyZ2luVG9wID0gKGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IC0gY3NpemUpIC8gNDsNCgkJZWxzZQ0KCQkJcDhfcGxheWFyZWEuc3R5bGUubWFyZ2luVG9wID0gIiI7DQoNCgkJY2FudmFzLnN0eWxlLndpZHRoID0gY3NpemU7DQoJCWNhbnZhcy5zdHlsZS5oZWlnaHQgPSBjc2l6ZTsNCg0KCQkvLyB0byBkbzogdGhpcyBzaG91bGQganVzdCBoYXBwZW4gZnJvbSBjc3MgbGF5b3V0DQoJCWNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gbWFyZ2luX2xlZnQ7DQoJCWNhbnZhcy5zdHlsZS5tYXJnaW5Ub3AgPSBtYXJnaW5fdG9wOw0KDQoJCXA4X2NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGNzaXplOw0KCQlwOF9jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gY3NpemU7DQoNCgkJLy8gc2V0IG1lbnUgYnV0dG9ucyBwb3NpdGlvbiB0byBib3R0b20gcmlnaHQNCgkJZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfbWVudV9idXR0b25zIik7DQoJCWVsLnN0eWxlLm1hcmdpblRvcCA9IGNzaXplIC0gZWwub2Zmc2V0SGVpZ2h0Ow0KDQoJCWlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nKQ0KCQl7DQoJCQkvLyB0dXJuIG9mZiBwb2ludGVyIGV2ZW50cyB0byBwcmV2ZW50IGRvdWJsZS10YXAgem9vbSBldGMgKHdvcmtzIG9uIEFuZHJvaWQpDQoJCQkvLyBkb24ndCB3YW50IHRoaXMgZm9yIGRlc2t0b3AgYmVjYXVzZSBicmVha3MgbW91c2UgaW5wdXQgJiBjbGljay10by1mb2N1cyB3aGVuIHVzaW5nIGNvZG9fdGV4dGFyZWENCgkJCWNhbnZhcy5zdHlsZS5wb2ludGVyRXZlbnRzID0gIm5vbmUiOw0KDQoJCQlwOF9jb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gIjBweCI7DQoNCgkJCS8vIGJ1dHRvbnMNCgkJCQ0KCQkJLy8gc2FtZSBhcyB0b3VjaCBldmVudCBoYW5kbGluZw0KCQkJdmFyIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCgkJCXZhciBoID0gd2luZG93LmlubmVySGVpZ2h0Ow0KCQkJdmFyIHIgPSBNYXRoLm1pbih3LGgpIC8gMTI7DQoNCgkJCWlmIChyID4gNDApIHIgPSA0MDsNCg0KCQkJZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udHJvbHNfcmlnaHRfcGFuZWwiKTsNCgkJCWVsLnN0eWxlLmxlZnQgPSB3LXIqNjsNCgkJCWVsLnN0eWxlLnRvcCA9IGgtcio3Ow0KCQkJZWwuc3R5bGUud2lkdGggPSByKjY7DQoJCQllbC5zdHlsZS5oZWlnaHQgPSByKjc7DQoJCQlpZiAoZWwuZ2V0QXR0cmlidXRlKCJzcmMiKSAhPSBwOF9nZnhfZGF0WyJjb250cm9sc19yaWdodF9wYW5lbCJdKSAvLyBvcHRpbWlzYXRpb246IGF2b2lkIHJlbG9hZD8gKGJyb3dzZXIgc2hvdWxkIGhhbmRsZSB0aG91Z2gpDQoJCQkJZWwuc2V0QXR0cmlidXRlKCJzcmMiLCBwOF9nZnhfZGF0WyJjb250cm9sc19yaWdodF9wYW5lbCJdKTsNCg0KCQkJZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udHJvbHNfbGVmdF9wYW5lbCIpOw0KCQkJZWwuc3R5bGUubGVmdCA9IDA7DQoJCQllbC5zdHlsZS50b3AgPSBoLXIqNjsNCgkJCWVsLnN0eWxlLndpZHRoID0gcio2Ow0KCQkJZWwuc3R5bGUuaGVpZ2h0ID0gcio2Ow0KCQkJaWYgKGVsLmdldEF0dHJpYnV0ZSgic3JjIikgIT0gcDhfZ2Z4X2RhdFsiY29udHJvbHNfbGVmdF9wYW5lbCJdKSAvLyBvcHRpbWlzYXRpb246IGF2b2lkIHJlbG9hZD8gKGJyb3dzZXIgc2hvdWxkIGhhbmRsZSB0aG91Z2gpDQoJCQkJZWwuc2V0QXR0cmlidXRlKCJzcmMiLCBwOF9nZnhfZGF0WyJjb250cm9sc19sZWZ0X3BhbmVsIl0pOw0KCQkJDQoJCQkvLyBzY3JvbGwgdG8gY2FydCAoY29tbWVudGVkOyB3YXMgYSBmYWlsZWQgYXR0ZW1wdCB0byBwcmV2ZW50IHNjcm9sbC1vbi1kcmFnIG9uIHNvbWUgYnJvd3NlcnMpDQoJCQkvLyBwOF9mcmFtZS5zY3JvbGxJbnRvVmlldyh0cnVlKTsNCg0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvdWNoX2NvbnRyb2xzX2dmeCIpLnN0eWxlLmRpc3BsYXk9InRhYmxlIjsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19iYWNrZ3JvdW5kIikuc3R5bGUuZGlzcGxheT0idGFibGUiOw0KDQoJCX0NCgkJZWxzZXsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19nZngiKS5zdHlsZS5kaXNwbGF5PSJub25lIjsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19iYWNrZ3JvdW5kIikuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQoJCX0NCg0KCQlpZiAoIXA4X2lzX3J1bm5pbmcpDQoJCXsNCgkJCXA4X3BsYXlhcmVhLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KCQkJcDhfY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9ImZsZXgiOw0KCQkJcDhfY29udGFpbmVyLnN0eWxlLm1hcmdpblRvcD0iYXV0byI7DQoNCgkJCWVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3N0YXJ0X2J1dHRvbiIpOw0KCQkJaWYgKGVsKSBlbC5zdHlsZS5kaXNwbGF5PSJmbGV4IjsNCgkJfQ0KCQlyZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2xheW91dCk7DQoJfQ0KDQoNCgl2YXIgcDhfdG91Y2hfZGV0ZWN0ZWQgPSBmYWxzZTsNCglhZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24oZXZlbnQpDQoJew0KCQlwOF90b3VjaF9kZXRlY3RlZCA9IHRydWU7DQoNCgkJLy8gaGlkZSBjb2RvX3RleHRhcmVhIC0tIGNsaXBib2FyZCBzdXBwb3J0IG9uIG1vYmlsZSBpcyBub3QgZmVhc2libGUNCgkJZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29kb190ZXh0YXJlYSIpOw0KCQlpZiAoZWwgJiYgZWwuc3R5bGUuZGlzcGxheSAhPSAibm9uZSIpew0KCQkJZWwuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQoJCX0NCg0KCX0sICB7cGFzc2l2ZTogdHJ1ZX0pOw0KDQoJZnVuY3Rpb24gcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKQ0KCXsNCgkJaWYgKHBpY284X2F1ZGlvX2NvbnRleHQpIA0KCQl7DQoJCQl0cnkgew0KCQkJCXBpY284X2F1ZGlvX2NvbnRleHQucmVzdW1lKCk7DQoJCQl9DQoJCQljYXRjaChlcnIpIHsNCgkJCQljb25zb2xlLmxvZygiKiogcGljbzhfYXVkaW9fY29udGV4dC5yZXN1bWUoKSBmYWlsZWQiKTsNCgkJCX0JDQoJCQlyZXR1cm47DQoJCX0NCg0KCQl2YXIgd2ViQXVkaW9BUEkgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgfHwgd2luZG93Lm1vekF1ZGlvQ29udGV4dCB8fCB3aW5kb3cub0F1ZGlvQ29udGV4dCB8fCB3aW5kb3cubXNBdWRpb0NvbnRleHQ7CQkJDQoJCWlmICh3ZWJBdWRpb0FQSSkNCgkJew0KCQkJcGljbzhfYXVkaW9fY29udGV4dCA9IG5ldyB3ZWJBdWRpb0FQSTsNCg0KCQkJLy8gd2FrZSB1cCBpT1MNCgkJCWlmIChwaWNvOF9hdWRpb19jb250ZXh0KQ0KCQkJew0KCQkJCXRyeSB7DQoJCQkJCXZhciBkdW1teV9zb3VyY2Vfc2Z4ID0gcGljbzhfYXVkaW9fY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsNCgkJCQkJZHVtbXlfc291cmNlX3NmeC5idWZmZXIgPSBwaWNvOF9hdWRpb19jb250ZXh0LmNyZWF0ZUJ1ZmZlcigxLCAxLCAyMjA1MCk7IC8vIGR1bW15DQoJCQkJCWR1bW15X3NvdXJjZV9zZnguY29ubmVjdChwaWNvOF9hdWRpb19jb250ZXh0LmRlc3RpbmF0aW9uKTsNCgkJCQkJZHVtbXlfc291cmNlX3NmeC5zdGFydCgxLCAwLjI1KTsgLy8gZ2l2ZXMgSW52YWxpZFN0YXRlRXJyb3IgLS0gd2h5PyBoYXNuJ3QgYmVlbiBwbGF5ZWQgYmVmb3JlIA0KCQkJCQkvL2R1bW15X3NvdXJjZV9zZngubm90ZU9uKDApOyAvLyBkZWxldGVtZQ0KCQkJCX0NCgkJCQljYXRjaChlcnIpIHsNCgkJCQkJY29uc29sZS5sb2coIioqIGR1bW15X3NvdXJjZV9zZnguc3RhcnQoMSwgMC4yNSkgZmFpbGVkIik7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfQ0KDQoJZnVuY3Rpb24gcDhfY2xvc2VfY2FydCgpDQoJew0KCQkvLyBqdXN0IHJlbG9hZCBwYWdlISB1c2VkIGZvciB0b3VjaCBidXR0b25zIC0tIGhhcmQgdG8gcm9sbCBiYWNrIHN0YXRlIA0KCQl3aW5kb3cubG9jYXRpb24uaGFzaCA9ICIiOyAvLyB0cmlnZ2VycyByZWxvYWQNCgl9DQoNCgl2YXIgcDhfaXNfcnVubmluZyA9IGZhbHNlOw0KCXZhciBwOF9zY3JpcHQgPSBudWxsOw0KCXZhciBNb2R1bGUgPSBudWxsOw0KCWZ1bmN0aW9uIHA4X3J1bl9jYXJ0KCkNCgl7DQoJCWlmIChwOF9pc19ydW5uaW5nKSByZXR1cm47DQoJCXA4X2lzX3J1bm5pbmcgPSB0cnVlOw0KDQoJCS8vIHRvdWNoOiBoaWRlIGV2ZXJ5dGhpbmcgZXhjZXB0IHA4X2ZyYW1lXzANCgkJaWYgKHA4X3RvdWNoX2RldGVjdGVkKQ0KCQl7DQoJCQllbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5XzAiKTsNCgkJCWVsMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9mcmFtZV8wIik7DQoJCQlpZiAoZWwgJiYgZWwyKQ0KCQkJew0KCQkJCWVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KCQkJCWVsLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwyKTsNCgkJCX0NCgkJfQ0KDQoJCS8vIGNyZWF0ZSBhdWRpbyBjb250ZXh0IGFuZCB3YWtlIGl0IHVwIChmb3IgaU9TIC0tIG5lZWRzIGhhcHBlbiBpbnNpZGUgdG91Y2ggZXZlbnQpCQkNCgkJcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsNCg0KCQkvLyBzaG93IHRvdWNoIGVsZW1lbnRzDQoJCWVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3A4X2NvbnRyb2xsZXJfYXJlYScpOw0KCQlmb3IgKGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKQ0KCQkJZWxzW2ldLnN0eWxlLmRpc3BsYXk9IiI7DQoNCg0KCQkvLyBpbnN0YWxsIHRvdWNoIGV2ZW50cy4gVGhlc2UgYWxzbyBzZXJ2ZSB0byBibG9jayBzY3JvbGxpbmcgLyBwaW5jaGluZyAvIHpvb21pbmcgb24gcGhvbmVzIHdoZW4gcDhfaXNfcnVubmluZw0KCQkJLy8gbW92ZWQgZXZlbnQucHJldmVudERlZmF1bHQoKTsgY2FsbHMgaW50byBwaWNvOF9idXR0b25zX2V2ZW50KCkgKHdhbnQgdG8gbGV0IHRvcCBidXR0b25zIHBhc3MgdGhyb3VnaCkNCgkJYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMCk7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KCQlhZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLCAgZnVuY3Rpb24oZXZlbnQpeyBwaWNvOF9idXR0b25zX2V2ZW50KGV2ZW50LCAxKTsgfSwge3Bhc3NpdmU6IGZhbHNlfSk7DQoJCWFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIiwgICBmdW5jdGlvbihldmVudCl7IHBpY284X2J1dHRvbnNfZXZlbnQoZXZlbnQsIDIpOyB9LCB7cGFzc2l2ZTogZmFsc2V9KTsNCg0KDQoJCS8vIGxvYWQgYW5kIHJ1biBzY3JpcHQNCgkJZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KCQlwOF9zY3JpcHQgPSBlOw0KCQllLm9ubG9hZCA9IGZ1bmN0aW9uKCl7DQoJCQkNCgkJCS8vIHNob3cgY2FudmFzIC8gbWVudSBidXR0b25zIG9ubHkgYWZ0ZXIgbG9hZGluZw0KCQkJZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfcGxheWFyZWEiKTsNCgkJCWlmIChlbCkgZWwuc3R5bGUuZGlzcGxheT0idGFibGUiOw0KDQoJCQlpZiAodHlwZW9mKHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCkgIT09ICd1bmRlZmluZWQnKQ0KCQkJCXA4X3VwZGF0ZV9sYXlvdXRfaGFzaCA9IC03NzsNCgkJCWlmICh0eXBlb2YocDhfYnV0dG9uc19oYXNoKSAhPT0gJ3VuZGVmaW5lZCcpDQoJCQkJcDhfYnV0dG9uc19oYXNoID0gLTMzOw0KDQoNCgkJfQ0KCQllLnR5cGUgPSAiYXBwbGljYXRpb24vamF2YXNjcmlwdCI7DQoJCWUuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvVUdTLUFzc2V0c0A4NTc5ZGU5MWU5M2MzZTk5MTBiNzJlOTFiNTkwMWE0MGFkNTMxZTNkL3BpY28lMjA4JTIwZ2FtZXMvaGFyb2xkLmpzIjsNCgkJZS5pZCA9ICJlX3NjcmlwdCI7DQoJCQ0KCQlkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpOyAvLyBsb2FkIGFuZCBydW4NCg0KCQkvLyBoaWRlIHN0YXJ0IGJ1dHRvbiBhbmQgc2hvdyBjYW52YXMgLyBtZW51IGJ1dHRvbnMuIGhpZGUgc3RhcnQgYnV0dG9uDQoJCWVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3N0YXJ0X2J1dHRvbiIpOw0KCQlpZiAoZWwpIGVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KDQoJCS8vIGFkZCAjcGxheWluZyBmb3IgdG91Y2hzY3JlZW4gZGV2aWNlcyAoYWxsb3dzIGJhY2sgYnV0dG9uIHRvIGNsb3NlKQ0KCQkvLyBYIGJ1dHRvbiBjYW4gYWxzbyBiZSB1c2VkIHRvIHRyaWdnZXIgdGhpcyANCgkJaWYgKHA4X3RvdWNoX2RldGVjdGVkKQ0KCQl7DQoJCQl3aW5kb3cubG9jYXRpb24uaGFzaCA9ICIjcGxheWluZyI7DQoJCQl3aW5kb3cub25oYXNoY2hhbmdlID0gZnVuY3Rpb24oKQ0KCQkJew0KCQkJCWlmICh3aW5kb3cubG9jYXRpb24uaGFzaC5zZWFyY2goInBsYXlpbmciKSA8IDApDQoJCQkJCXdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsNCgkJCX0NCgkJfQ0KDQoJCS8vIGluc3RhbGwgZHJhZyZkcm9wIGxpc3RlbmVycw0KCQl7DQoJCQlsZXQgY2FudmFzID0gcDhfZG9jdW1lbnQoKS5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7DQoJCQlpZiAoY2FudmFzKQ0KCQkJew0KCQkJCWNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBkcmFnb3ZlciwgZmFsc2UpOw0KCQkJCWNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGRyYWdvdmVyLCBmYWxzZSk7DQoJCQkJY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyYWdzdG9wLCBmYWxzZSk7DQoJCQkJY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBub3AsIGZhbHNlKTsNCgkJCQljYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHA4X2Ryb3BfZmlsZSwgZmFsc2UpOw0KCQkJfQ0KCQl9DQoJfQ0KDQoJDQoJCS8vIEdhbWVwYWQgY29kZQ0KCQ0KCXZhciBQOF9CVVRUT05fTyA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4MTB9Ow0KCXZhciBQOF9CVVRUT05fWCA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4MjB9Ow0KCXZhciBQOF9EUEFEX0xFRlQgPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDF9Ow0KCXZhciBQOF9EUEFEX1JJR0hUID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHgyfTsNCgl2YXIgUDhfRFBBRF9VUCA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4NH07DQoJdmFyIFA4X0RQQURfRE9XTiA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4OH07DQoJdmFyIFA4X01FTlUgPSB7YWN0aW9uOidtZW51J307DQoJdmFyIFA4X05PX0FDVElPTiA9IHthY3Rpb246J25vbmUnfTsNCg0KCXZhciBQOF9CVVRUT05fTUFQUElORyA9IFsNCgkJLy8gcmVmOiBodHRwczovL3czYy5naXRodWIuaW8vZ2FtZXBhZC8jcmVtYXBwaW5nDQoJCVA4X0JVVFRPTl9PLCAgICAgICAgICAvLyBCb3R0b20gZmFjZSBidXR0b24NCgkJUDhfQlVUVE9OX1gsICAgICAgICAgIC8vIFJpZ2h0IGZhY2UgYnV0dG9uDQoJCVA4X0JVVFRPTl9YLCAgICAgICAgICAvLyBMZWZ0IGZhY2UgYnV0dG9uDQoJCVA4X0JVVFRPTl9PLCAgICAgICAgICAvLyBUb3AgZmFjZSBidXR0b24NCgkJUDhfTk9fQUNUSU9OLCAgICAgICAgIC8vIE5lYXIgbGVmdCBzaG91bGRlciBidXR0b24gKEwxKQ0KCQlQOF9OT19BQ1RJT04sICAgICAgICAgLy8gTmVhciByaWdodCBzaG91bGRlciBidXR0b24gKFIxKQ0KCQlQOF9OT19BQ1RJT04sICAgICAgICAgLy8gRmFyIGxlZnQgc2hvdWxkZXIgYnV0dG9uIChMMikNCgkJUDhfTk9fQUNUSU9OLCAgICAgICAgIC8vIEZhciByaWdodCBzaG91bGRlciBidXR0b24gKFIyKQ0KCQlQOF9NRU5VLCAgICAgICAgICAgICAgLy8gTGVmdCBhdXhpbGlhcnkgYnV0dG9uIChzZWxlY3QpDQoJCVA4X01FTlUsICAgICAgICAgICAgICAvLyBSaWdodCBhdXhpbGlhcnkgYnV0dG9uIChzdGFydCkNCgkJUDhfTk9fQUNUSU9OLCAgICAgICAgIC8vIExlZnQgc3RpY2sgYnV0dG9uDQoJCVA4X05PX0FDVElPTiwgICAgICAgICAvLyBSaWdodCBzdGljayBidXR0b24NCgkJUDhfRFBBRF9VUCwgICAgICAgICAgIC8vIERwYWQgdXANCgkJUDhfRFBBRF9ET1dOLCAgICAgICAgIC8vIERwYWQgZG93bg0KCQlQOF9EUEFEX0xFRlQsICAgICAgICAgLy8gRHBhZCBsZWZ0DQoJCVA4X0RQQURfUklHSFQsICAgICAgICAvLyBEcGFkIHJpZ2h0DQoJXTsNCg0KCS8vIFRyYWNrIHdoaWNoIHBsYXllciBpcyBjb250cm9sbGVyIGJ5IGVhY2ggZ2FtZXBhZC4gR2FtZXBhZCBpbmRleCBpIGNvbnRyb2xzIHRoZQ0KCS8vIHBsYXllciB3aXRoIGluZGV4IHBpY284X2dhbWVwYWRzX21hcHBpbmdbaV0uIEdhbWVwYWRzIHdpdGggbnVsbCBwbGF5ZXIgYXJlDQoJLy8gY3VycmVudGx5IHVuYXNzaWduZWQgLSB0aGV5IGdldCBhc3NpZ25lZCB0byBhIHBsYXllciB3aGVuIGEgYnV0dG9uIGlzIHByZXNzZWQuDQoJdmFyIHBpY284X2dhbWVwYWRzX21hcHBpbmcgPSBbXTsNCg0KCWZ1bmN0aW9uIHA4X3VuYXNzaWduX2dhbWVwYWQoZ2FtZXBhZF9pbmRleCkgew0KCQlpZiAocGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tnYW1lcGFkX2luZGV4XSA9PSBudWxsKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJcGljbzhfYnV0dG9uc1twaWNvOF9nYW1lcGFkc19tYXBwaW5nW2dhbWVwYWRfaW5kZXhdXSA9IDA7DQoJCXBpY284X2dhbWVwYWRzX21hcHBpbmdbZ2FtZXBhZF9pbmRleF0gPSBudWxsOw0KCX0NCg0KDQoJZnVuY3Rpb24gcDhfZmlyc3RfcGxheWVyX3dpdGhvdXRfZ2FtZXBhZChtYXhfcGxheWVycykgew0KCQl2YXIgYWxsb2NhdGVkX3BsYXllcnMgPSBwaWNvOF9nYW1lcGFkc19tYXBwaW5nLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9IG51bGw7IH0pOw0KCQl2YXIgc29ydGVkX3BsYXllcnMgPSBBcnJheS5mcm9tKGFsbG9jYXRlZF9wbGF5ZXJzKS5zb3J0KCk7DQoJCWZvciAodmFyIGRlc2lyZWQgPSAwOyBkZXNpcmVkIDwgc29ydGVkX3BsYXllcnMubGVuZ3RoICYmIGRlc2lyZWQgPCBtYXhfcGxheWVyczsgKytkZXNpcmVkKSB7DQoJCQlpZiAoZGVzaXJlZCAhPSBzb3J0ZWRfcGxheWVyc1tkZXNpcmVkXSkgew0KCQkJCXJldHVybiBkZXNpcmVkOw0KCQkJfQ0KCQl9DQoJCWlmIChzb3J0ZWRfcGxheWVycy5sZW5ndGggPCBtYXhfcGxheWVycykgew0KCQkJcmV0dXJuIHNvcnRlZF9wbGF5ZXJzLmxlbmd0aDsNCgkJfQ0KCQlyZXR1cm4gbnVsbDsNCgl9DQoNCglmdW5jdGlvbiBwOF9hc3NpZ25fZ2FtZXBhZF90b19wbGF5ZXIoZ2FtZXBhZF9pbmRleCwgcGxheWVyX2luZGV4KSB7DQoJCXA4X3VuYXNzaWduX2dhbWVwYWQoZ2FtZXBhZF9pbmRleCk7DQoJCXBpY284X2dhbWVwYWRzX21hcHBpbmdbZ2FtZXBhZF9pbmRleF0gPSBwbGF5ZXJfaW5kZXg7DQoJfQ0KDQoNCg0KCWZ1bmN0aW9uIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ2FtZXBhZCwgYXhpc190aHJlc2hvbGQsIGJ1dHRvbl90aHJlc2hvbGQpIHsNCgkJLy8gR2l2ZW4gYSBnYW1lcGFkIG9iamVjdCwgcmV0dXJuOg0KCQkvLyB7DQoJCS8vICAgICBidXR0b25fc3RhdGU6IHRoZSBiaW5hcnkgZW5jb2RlZCBQaWNvIDggYnV0dG9uIHN0YXRlDQoJCS8vICAgICBtZW51X2J1dHRvbjogdHJ1ZSBpZiBhbnkgbWVudS1tYXBwZWQgYnV0dG9uIHdhcyBwcmVzc2VkDQoJCS8vICAgICBhbnlfYnV0dG9uOiB0cnVlIGlmIGFueSBidXR0b24gd2FzIHByZXNzZWQsIGluY2x1ZGluZyBkLXBhZA0KCQkvLyAgICAgICAgIGJ1dHRvbnMgYW5kIHVubWFwcGVkIGJ1dHRvbnMNCgkJLy8gfQ0KCQlpZiAoIWdhbWVwYWQgfHwgIWdhbWVwYWQuYXhlcyB8fCAhZ2FtZXBhZC5idXR0b25zKSB7DQoJCQlyZXR1cm4gew0KCQkJCWJ1dHRvbl9zdGF0ZTogMCwNCgkJCQltZW51X2J1dHRvbjogZmFsc2UsDQoJCQkJYW55X2J1dHRvbjogZmFsc2UNCgkJCX07DQoJCX0NCgkJZnVuY3Rpb24gYnV0dG9uX3N0YXRlX2Zyb21fYXhpcyhheGlzLCBsb3dfc3RhdGUsIGhpZ2hfc3RhdGUsIGRlZmF1bHRfc3RhdGUpIHsNCgkJCWlmIChheGlzICYmIGF4aXMgPCAtYXhpc190aHJlc2hvbGQpIHJldHVybiBsb3dfc3RhdGU7DQoJCQlpZiAoYXhpcyAmJiBheGlzID4gYXhpc190aHJlc2hvbGQpIHJldHVybiBoaWdoX3N0YXRlOw0KCQkJcmV0dXJuIGRlZmF1bHRfc3RhdGU7DQoJCX0NCgkJdmFyIGF4ZXNfYWN0aW9ucyA9IFsNCgkJCWJ1dHRvbl9zdGF0ZV9mcm9tX2F4aXMoZ2FtZXBhZC5heGVzWzBdLCBQOF9EUEFEX0xFRlQsIFA4X0RQQURfUklHSFQsIFA4X05PX0FDVElPTiksDQoJCQlidXR0b25fc3RhdGVfZnJvbV9heGlzKGdhbWVwYWQuYXhlc1sxXSwgUDhfRFBBRF9VUCwgUDhfRFBBRF9ET1dOLCBQOF9OT19BQ1RJT04pLA0KCQldOw0KDQoJCXZhciBidXR0b25fYWN0aW9ucyA9IGdhbWVwYWQuYnV0dG9ucy5tYXAoZnVuY3Rpb24gKGJ1dHRvbiwgaW5kZXgpIHsNCgkJCXZhciBwcmVzc2VkID0gYnV0dG9uLnZhbHVlID4gYnV0dG9uX3RocmVzaG9sZCB8fCBidXR0b24ucHJlc3NlZDsNCgkJCWlmICghcHJlc3NlZCkgcmV0dXJuIFA4X05PX0FDVElPTjsNCgkJCXJldHVybiBQOF9CVVRUT05fTUFQUElOR1tpbmRleF0gfHwgUDhfTk9fQUNUSU9OOw0KCQl9KTsNCg0KCQl2YXIgYWxsX2FjdGlvbnMgPSBheGVzX2FjdGlvbnMuY29uY2F0KGJ1dHRvbl9hY3Rpb25zKTsNCgkJDQoJCXZhciBtZW51X2J1dHRvbiA9IGJ1dHRvbl9hY3Rpb25zLnNvbWUoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYWN0aW9uLmFjdGlvbiA9PSAnbWVudSc7IH0pOw0KCQl2YXIgYnV0dG9uX3N0YXRlID0gKGFsbF9hY3Rpb25zDQoJCQkuZmlsdGVyKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLmFjdGlvbiA9PSAnYnV0dG9uJzsgfSkNCgkJCS5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuY29kZTsgfSkNCgkJCS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgY29kZSkgeyByZXR1cm4gcmVzdWx0IHwgY29kZTsgfSwgMCkNCgkJKTsNCgkJdmFyIGFueV9idXR0b24gPSBnYW1lcGFkLmJ1dHRvbnMuc29tZShmdW5jdGlvbiAoYnV0dG9uKSB7DQoJCQlyZXR1cm4gYnV0dG9uLnZhbHVlID4gYnV0dG9uX3RocmVzaG9sZCB8fCBidXR0b24ucHJlc3NlZDsNCgkJfSk7DQoNCgkJYW55X2J1dHRvbiB8PSBidXR0b25fc3RhdGU7IC8vand3OiBpbmNsdWRlIGF4ZXMgMCwxIGFzIG1pZ2h0IGJlIGZpcnN0IGludGVuZGVkIGFjdGlvbg0KDQoJCXJldHVybiB7DQoJCQlidXR0b25fc3RhdGUsDQoJCQltZW51X2J1dHRvbiwNCgkJCWFueV9idXR0b24NCgkJfTsNCgl9DQoNCgkvLyBqd3c6IHBpY28tOCAwLjIuMSB2ZXJzaW9uIGZvciB1bm1hcHBlZCBnYW1lcGFkcywgZm9sbG93aW5nIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUNCgkvLyBheGVzIDAsMSAmIGJ1dHRvbnMgMCwxLDIsMyBhcmUgcmVhc29uYWJseSBzYWZlLiBkb24ndCB0cnkgdG8gcmVhZCBkcGFkLg0KCS8vIG1lbnUgYnV0dG9ucyBhcmUgdW5wcmVkaWN0YWJsZSwgYnV0IHVzZSA2Li44IGFueXdheSAoYmV0dGVyIHRvIGhhdmUgYSB3ZWlyZCBtZW51IGJ1dHRvbiB0aGFuIG5vbmUpDQoNCglmdW5jdGlvbiBwOF9jb252ZXJ0X3VubWFwcGVkX2dhbWVwYWRfdG9fYnV0dG9uX3N0YXRlKGdhbWVwYWQsIGF4aXNfdGhyZXNob2xkLCBidXR0b25fdGhyZXNob2xkKSB7DQoNCgkJaWYgKCFnYW1lcGFkIHx8ICFnYW1lcGFkLmF4ZXMgfHwgIWdhbWVwYWQuYnV0dG9ucykgew0KCQkJcmV0dXJuIHsNCgkJCQlidXR0b25fc3RhdGU6IDAsDQoJCQkJbWVudV9idXR0b246IGZhbHNlLA0KCQkJCWFueV9idXR0b246IGZhbHNlDQoJCQl9Ow0KCQl9DQoNCgkJdmFyIGJ1dHRvbl9zdGF0ZSA9IDA7DQoNCgkJaWYgKGdhbWVwYWQuYXhlc1swXSAmJiBnYW1lcGFkLmF4ZXNbMF0gPCAtYXhpc190aHJlc2hvbGQpIGJ1dHRvbl9zdGF0ZSB8PSAweDE7DQoJCWlmIChnYW1lcGFkLmF4ZXNbMF0gJiYgZ2FtZXBhZC5heGVzWzBdID4gYXhpc190aHJlc2hvbGQpICBidXR0b25fc3RhdGUgfD0gMHgyOw0KCQlpZiAoZ2FtZXBhZC5heGVzWzFdICYmIGdhbWVwYWQuYXhlc1sxXSA8IC1heGlzX3RocmVzaG9sZCkgYnV0dG9uX3N0YXRlIHw9IDB4NDsNCgkJaWYgKGdhbWVwYWQuYXhlc1sxXSAmJiBnYW1lcGFkLmF4ZXNbMV0gPiBheGlzX3RocmVzaG9sZCkgIGJ1dHRvbl9zdGF0ZSB8PSAweDg7DQoNCgkJLy8gYnV0dG9uczogZmlyc3QgNCB0YWtlbiB0byBiZSBPL1gsIDYuLjggdGFrZW4gdG8gYmUgbWVudSBidXR0b24NCg0KCQlmb3IgKGogPSAwOyBqIDwgZ2FtZXBhZC5idXR0b25zLmxlbmd0aDsgaisrKQ0KCQlpZiAoZ2FtZXBhZC5idXR0b25zW2pdLnZhbHVlID4gMCB8fCBnYW1lcGFkLmJ1dHRvbnNbal0ucHJlc3NlZCkNCgkJew0KCQkJaWYgKGogPCA0KQ0KCQkJCWJ1dHRvbl9zdGF0ZSB8PSAoMHgxMCA8PCAoKChqKzEpLzIpJjEpKTsgLy8gMCAxIDEgMCAtLSBBLFggLT4gTyxYIG9uIHhib3gzNjANCgkJCWVsc2UgaWYgKGogPj0gNiAmJiBqIDw9IDgpDQoJCQkJYnV0dG9uX3N0YXRlIHw9IDB4NDA7DQoJCX0NCg0KCQl2YXIgbWVudV9idXR0b24gPSBidXR0b25fc3RhdGUgJiAweDQwOw0KDQoJCXZhciBhbnlfYnV0dG9uID0gZ2FtZXBhZC5idXR0b25zLnNvbWUoZnVuY3Rpb24gKGJ1dHRvbikgew0KCQkJcmV0dXJuIGJ1dHRvbi52YWx1ZSA+IGJ1dHRvbl90aHJlc2hvbGQgfHwgYnV0dG9uLnByZXNzZWQ7DQoJCX0pOw0KDQoJCWFueV9idXR0b24gfD0gYnV0dG9uX3N0YXRlOyAvL2p3dzogaW5jbHVkZSBheGVzIDAsMSBhcyBtaWdodCBiZSBmaXJzdCBpbnRlbmRlZCBhY3Rpb24NCgkJDQoJCXJldHVybiB7DQoJCQlidXR0b25fc3RhdGUsDQoJCQltZW51X2J1dHRvbiwNCgkJCWFueV9idXR0b24NCgkJfTsNCgl9DQoNCgkNCgkvLyBnYW1lcGFkICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2FtZXBhZF9BUEkvVXNpbmdfdGhlX0dhbWVwYWRfQVBJDQoJLy8gKHNldHMgYml0cyBpbiBwaWNvOF9idXR0b25zW10pDQoJZnVuY3Rpb24gcDhfdXBkYXRlX2dhbWVwYWRzKCkgew0KCQl2YXIgYXhpc190aHJlc2hvbGQgPSAwLjM7DQoJCXZhciBidXR0b25fdGhyZXNob2xkID0gMC41OyAvLyBTaG91bGQgYmUgdW5uZWNlc3NhcnksIHdlIHNob3VsZCBiZSBhYmxlIHRvIHRydXN0IC5wcmVzc2VkDQoJCXZhciBtYXhfcGxheWVycyA9IDg7DQoJCXZhciBncHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKTsNCg0KCQlpZiAoIWdwcykgcmV0dXJuOw0KDQoJCS8vIEluIENocm9tZSwgZ3BzIGlzIGl0ZXJhYmxlIGJ1dCBpdCdzIG5vdCBhbiBhcnJheS4NCgkJZ3BzID0gQXJyYXkuZnJvbShncHMpOw0KDQoJCXBpY284X2dhbWVwYWRzLmNvdW50ID0gZ3BzLmxlbmd0aDsNCgkJd2hpbGUgKGdwcy5sZW5ndGggPiBwaWNvOF9nYW1lcGFkc19tYXBwaW5nLmxlbmd0aCkgew0KCQkgICAgcGljbzhfZ2FtZXBhZHNfbWFwcGluZy5wdXNoKG51bGwpOw0KCQl9DQoNCgkJdmFyIG1lbnVfYnV0dG9uID0gZmFsc2U7DQoJCXZhciBnYW1lcGFkX3N0YXRlcyA9IGdwcy5tYXAoZnVuY3Rpb24gKGdwKSB7DQoJCQlyZXR1cm4gKGdwICYmIGdwLm1hcHBpbmcgPT0gInN0YW5kYXJkIikgPw0KCQkJCXA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ3AsIGF4aXNfdGhyZXNob2xkLCBidXR0b25fdGhyZXNob2xkKSA6DQoJCQkJcDhfY29udmVydF91bm1hcHBlZF9nYW1lcGFkX3RvX2J1dHRvbl9zdGF0ZShncCwgYXhpc190aHJlc2hvbGQsIGJ1dHRvbl90aHJlc2hvbGQpOw0KCQl9KTsNCg0KCQkvLyBVbmFzc2lnbiBkaXNjb25uZWN0ZWQgZ2FtZXBhZHMuDQoJCS8vIGdwcy5mb3JFYWNoKGZ1bmN0aW9uIChncCwgaSkgeyBpZiAoZ3AgJiYgIWdwLmNvbm5lY3RlZCkgeyBwOF91bmFzc2lnbl9nYW1lcGFkKGkpOyB9fSk7DQoJCWdwcy5mb3JFYWNoKGZ1bmN0aW9uIChncCwgaSkgeyBpZiAoIWdwIHx8ICFncC5jb25uZWN0ZWQpIHsgcDhfdW5hc3NpZ25fZ2FtZXBhZChpKTsgfX0pOyAvLyBodHRwczovL3d3dy5sZXhhbG9mZmxlLmNvbS9iYnMvP3BpZD04NzEzMiNwDQoNCg0KCQkvLyBBc3NpZ24gdW5hc3NpZ25lZCBnYW1lcGFkcyB3aGVuIGFueSBidXR0b24gaXMgcHJlc3NlZC4NCgkJZ2FtZXBhZF9zdGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGUsIGkpIHsNCgkJCWlmIChzdGF0ZS5hbnlfYnV0dG9uICYmIHBpY284X2dhbWVwYWRzX21hcHBpbmdbaV0gPT0gbnVsbCkgew0KCQkJCXZhciBmaXJzdF9mcmVlX3BsYXllciA9IHA4X2ZpcnN0X3BsYXllcl93aXRob3V0X2dhbWVwYWQobWF4X3BsYXllcnMpOw0KCQkJCXA4X2Fzc2lnbl9nYW1lcGFkX3RvX3BsYXllcihpLCBmaXJzdF9mcmVlX3BsYXllcik7DQoJCQl9DQoJCX0pOw0KDQoJCS8vIFVwZGF0ZSBwaWNvOF9idXR0b25zIGFycmF5Lg0KCQlnYW1lcGFkX3N0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChnYW1lcGFkX3N0YXRlLCBpKSB7DQoJCQlpZiAocGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tpXSAhPSBudWxsKSB7DQoJCQkJcGljbzhfYnV0dG9uc1twaWNvOF9nYW1lcGFkc19tYXBwaW5nW2ldXSA9IGdhbWVwYWRfc3RhdGUuYnV0dG9uX3N0YXRlOw0KCQkJfQ0KCQl9KTsNCg0KCQkvLyBVcGRhdGUgbWVudSBidXR0b24uDQoJCS8vIFBpY28gOCBvbmx5IHJlY29nbmlzZXMgdGhlIG1lbnUgYnV0dG9uIG9uIHRoZSBmaXJzdCBwbGF5ZXIsIHNvIHdlDQoJCS8vIHByZXNzIGl0IHdoZW4gYW55IGdhbWVwYWQgaGFzIHByZXNzZWQgYSBidXR0b24gbWFwcGVkIHRvIG1lbnUuDQoJCWlmIChnYW1lcGFkX3N0YXRlcy5zb21lKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUubWVudV9idXR0b247IH0pKSB7DQoJCQlwaWNvOF9idXR0b25zWzBdIHw9IDB4NDA7DQoJCX0NCg0KCQlyZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2dhbWVwYWRzKTsNCgl9DQoJcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9nYW1lcGFkcyk7DQoNCgkvLyBFbmQgb2YgZ2FtZXBhZCBjb2RlDQoNCg0KCS8vIGtleSBibG9ja2VyLiBwcmV2ZW50IGN1cnNvciBrZXlzIGZyb20gc2Nyb2xsaW5nIHBhZ2Ugd2hpbGUgcGxheWluZyBjYXJ0Lg0KCS8vIGFsc28gZG9uJ3QgYWN0IG9uIE0sIFIgc28gdGhhdCBjYW4gbXV0ZSAvIHJlc2V0IGNhcnQNCglkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywNCglmdW5jdGlvbiAoZXZlbnQpIHsNCgkJZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7DQoJCWlmICghcDhfaXNfcnVubmluZykgcmV0dXJuOw0KCQlpZiAocGljbzhfc3RhdGUuaGFzX2ZvY3VzID09IDEpDQoJCQlpZiAoWzMyLCAzNywgMzgsIDM5LCA0MCwgNzcsIDgyLCA4MCwgOV0uaW5kZXhPZihldmVudC5rZXlDb2RlKSA+IC0xKSAgICAgICAvLyBibG9jayBjdXJzb3JzLCBNIFIgUCwgdGFiDQoJCQkJaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KCX0se3Bhc3NpdmU6IGZhbHNlfSk7DQoNCgkvLyB3aGVuIHVzaW5nIGNvZG9fdGV4dGFyZWEgdG8gZGV0ZXJtaW5lIGZvY3VzLCBuZWVkIHRvIGV4cGxpY2l0bHkgaGFuZCBmb2N1cyBiYWNrIHdoZW4gY2xpY2tpbmcgYSBwOF9tZW51X2J1dHRvbg0KCWZ1bmN0aW9uIHA4X2dpdmVfZm9jdXMoKQ0KCXsNCgkJZWwgPSAodHlwZW9mIGNvZG9fdGV4dGFyZWEgPT09ICd1bmRlZmluZWQnKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RvX3RleHRhcmVhIikgOiBjb2RvX3RleHRhcmVhOw0KCQlpZiAoZWwpDQoJCXsNCgkJCWVsLmZvY3VzKCk7DQoJCQllbC5zZWxlY3QoKTsNCgkJfQ0KCX0NCg0KCWZ1bmN0aW9uIHA4X3JlcXVlc3RfZnVsbHNjcmVlbigpIHsNCg0KCQl2YXIgaXNfZnVsbHNjcmVlbj0oZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KDQoJCWlmIChpc19mdWxsc2NyZWVuKQ0KCQl7DQoJCQkgaWYgKGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKSB7DQoJCSAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsNCgkJICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHsNCgkJICAgICAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpOw0KCQkgICAgfSBlbHNlIGlmIChkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKSB7DQoJCSAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KCQkgICAgfSBlbHNlIGlmIChkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKSB7DQoJCSAgICAgICAgZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpOw0KCQkgICAgfQ0KCQkJcmV0dXJuOw0KCQl9DQoJCQ0KCQl2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfcGxheWFyZWEiKTsNCg0KCQlpZiAoIGVsLnJlcXVlc3RGdWxsc2NyZWVuICkgew0KCQkJZWwucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCgkJfSBlbHNlIGlmICggZWwubW96UmVxdWVzdEZ1bGxTY3JlZW4gKSB7DQoJCQllbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOw0KCQl9IGVsc2UgaWYgKCBlbC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiApIHsNCgkJCWVsLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCBFbGVtZW50LkFMTE9XX0tFWUJPQVJEX0lOUFVUICk7DQoJCX0NCgl9DQoNCjwvc2NyaXB0Pg0KDQo8U1RZTEUgVFlQRT0idGV4dC9jc3MiPg0KPCEtLQ0KLnA4X21lbnVfYnV0dG9uew0KCW9wYWNpdHk6MC4zOw0KCXBhZGRpbmc6NHB4Ow0KCWRpc3BsYXk6dGFibGU7DQoJd2lkdGg6MjRweDsNCgloZWlnaHQ6MjRweDsNCglmbG9hdDpyaWdodDsNCn0NCg0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo1MTJweCkgew0KCS5wOF9tZW51X2J1dHRvbnsNCgkJd2lkdGg6MjRweDsgbWFyZ2luLWxlZnQ6MTJweDsgbWFyZ2luLWJvdHRvbTo4cHg7DQoJfQ0KfQ0KLnA4X21lbnVfYnV0dG9uOmhvdmVyew0KCW9wYWNpdHk6MS4wOw0KCWN1cnNvcjpwb2ludGVyOw0KfQ0KDQpjYW52YXN7DQogICAgaW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZVNwZWVkOw0KICAgIGltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsNCiAgICBpbWFnZS1yZW5kZXJpbmc6IC13ZWJraXQtb3B0aW1pemUtY29udHJhc3Q7DQogICAgaW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZS1jb250cmFzdDsNCiAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDsNCiAgICAtbXMtaW50ZXJwb2xhdGlvbi1tb2RlOiBuZWFyZXN0LW5laWdoYm9yOw0KCWJvcmRlcjogMHB4Ow0KCWN1cnNvcjogbm9uZTsNCn0NCg0KDQoucDhfc3RhcnRfYnV0dG9uew0KCWN1cnNvcjpwb2ludGVyOw0KCWJhY2tncm91bmQ6dXJsKCIiKTsNCgktcmVwZWF0IGNlbnRlcjsNCgktd2Via2l0LWJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgLW1vei1iYWNrZ3JvdW5kLXNpemU6Y292ZXI7IC1vLWJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgYmFja2dyb3VuZC1zaXplOmNvdmVyOw0KfQ0KDQouYnV0dG9uX2dmeHsNCglzdHJva2Utd2lkdGg6MjsNCglzdHJva2U6ICNmZmZmZmY7DQoJc3Ryb2tlLW9wYWNpdHk6MC40Ow0KCWZpbGwtb3BhY2l0eTowLjI7DQoJZmlsbDpibGFjazsNCn0NCg0KLmJ1dHRvbl9nZnhfaWNvbnsNCglzdHJva2Utd2lkdGg6MzsNCglzdHJva2U6ICM5MDkwOTA7DQoJc3Ryb2tlLW9wYWNpdHk6MC43Ow0KCWZpbGw6bm9uZTsNCn0NCg0KLS0+DQo8L1NUWUxFPg0KDQo8L2hlYWQ+DQoNCjxib2R5IHN0eWxlPSJwYWRkaW5nOjBweDsgbWFyZ2luOjBweDsgYmFja2dyb3VuZC1jb2xvcjojMjIyOyBjb2xvcjojY2NjIj4NCjxkaXYgaWQ9ImJvZHlfMCI+IDwhLS0gaGlkZSB0aGlzIHdoZW4gcGxheWluZyBpbiBtb2JpbGUgKHA4X3RvdWNoX2RldGVjdGVkKSBzbyB0aGF0IGVsZW1lbnRzIGRvbid0IGFmZmVjdCBsYXlvdXQgLS0+DQoNCg0KPCEtLSBBZGQgYW55IGNvbnRlbnQgYWJvdmUgdGhlIGNhcnQgaGVyZSAtLT4NCg0KDQo8ZGl2IGlkPSJwOF9mcmFtZV8wIiBzdHlsZT0ibWF4LXdpZHRoOjgwMHB4OyBtYXgtaGVpZ2h0OjgwMHB4OyBtYXJnaW46YXV0bzsiPiA8IS0tIGRvdWJsZSBmdW5jdGlvbjogbGltaXQgc2l6ZSwgYW5kIGRpc3BsYXkgb25seSB0aGlzIGRpdiBmb3IgdG91Y2ggZGV2aWNlcyAtLT4NCjxkaXYgaWQ9InA4X2ZyYW1lIiBzdHlsZT0iZGlzcGxheTpmbGV4OyB3aWR0aDoxMDAlOyBtYXgtd2lkdGg6OTV2dzsgaGVpZ2h0OjEwMHZ3OyBtYXgtaGVpZ2h0Ojk1dmg7IG1hcmdpbjphdXRvOyI+DQoNCgk8ZGl2IGlkPSJwOF9tZW51X2J1dHRvbnNfdG91Y2giIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgd2lkdGg6MTAwJTsgei1pbmRleDoxMDsgbGVmdDowcHg7Ij4NCgkJPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIGlkPSJwOGJfZnVsbCIgIHN0eWxlPSJmbG9hdDpsZWZ0O21hcmdpbi1sZWZ0OjEwcHgiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgcDhfcmVxdWVzdF9mdWxsc2NyZWVuKCk7Ij48L2Rpdj4NCgkJPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIGlkPSJwOGJfc291bmQiIHN0eWxlPSJmbG9hdDpsZWZ0O21hcmdpbi1sZWZ0OjEwcHgiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsgTW9kdWxlLnBpY284VG9nZ2xlU291bmQoKTsiPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgaWQ9InA4Yl9jbG9zZSIgc3R5bGU9ImZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweCIgb25DbGljaz0icDhfY2xvc2VfY2FydCgpOyI+PC9kaXY+DQoJPC9kaXY+DQoNCgk8ZGl2IGlkPSJwOF9jb250YWluZXIiDQoJCXN0eWxlPSJtYXJnaW46YXV0bzsgZGlzcGxheTp0YWJsZTsiDQoJCW9uY2xpY2s9InA4X2NyZWF0ZV9hdWRpb19jb250ZXh0KCk7IHA4X3J1bl9jYXJ0KCk7Ij4NCg0KCQk8ZGl2IGlkPSJwOF9zdGFydF9idXR0b24iIGNsYXNzPSJwOF9zdGFydF9idXR0b24iIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgZGlzcGxheTpmbGV4OyI+DQoJCQk8aW1nIHdpZHRoPTgwIGhlaWdodD04MCBzdHlsZT0ibWFyZ2luOmF1dG87Ig0KCQlzcmM9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRkFBQUFCUUNBWUFBQUNPRWZLdEFBQUJwa2xFUVZSNDJ1M2F1MjNEUUJDRVlVWE9YSUdLY3VqUVhVZ0Z1QTBYSUtnVzkwUTlvRUFnK0xqZDI3dmQyUnNDZjA1OGdFRHFob2ZQaitPQjZTTUNBUWxJUUFJeUFoS1FnQVJrQkFRRG5NNlhTUnNCNy8yZS90U0EwLy8xMmZDQUtzUVgzbnREQTRvUkZ3QlJJYzBBaXhFMzhCQWhUUUdMRUFzQlVTRE5BWGNSaFlEUklac0FQbHA5OVZFQ1JvWHNEcGdOMGcwd0M2UTdJRHBrR0VCVXlHNkEwK3ZLQnRrZE1CdWtHMkFXU0hkQWRNZ3dnS2lRNFFEUklNTUNva0NHQjR3T0NRUFlGVkt3MmNBQk5vY1VqbDZ3Z0UwZ0Zhc2hQS0FacEhKMlRRTllCVm14VzZjREZFTldEdjlwQVVzaENWZ0pTY0JLU0FJU2tEOWhQa1Q0R2tOQU1kemVweWo4S3llODUyRUJMZTUxQ1pISFdRSzRKY1RoRDFTbGNIUEVZWS8wYStBMG42U2tHWlY2dzZXWk5iM2c0SWQxYjdod2dHaHdZUUJSNGR3QjBlSGNBTFBBZFFmTUJoY09FQTB1RENBcW5Ec2dPcHdiWUJhNHBvQS8zMStyWllGckJyaUZwd0dNQ3RjRWNBOVBBaGdkemh5d0JLOEVFUVhPRkZDQ3R3YUlCbWNHS01XYkk2TENtUUJxOFI2aHc1a0FNZ0lTa0lBRUpDQWpJQUVKU0VCR1FJOXVrVjdsUm45bkQrZ0FBQUFBU1VWT1JLNUNZSUk9Ii8+DQoJCTwvZGl2Pg0KDQoJCTxkaXYgaWQ9InA4X3BsYXlhcmVhIiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW46YXV0bzsNCgkJCQktd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IHVzZXItc2VsZWN0OiBub25lOyAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6bm9uZTsNCgkJIj4NCg0KCQkJPGRpdiAgaWQ9InRvdWNoX2NvbnRyb2xzX2JhY2tncm91bmQiDQoJCQkJICBzdHlsZT0iIHBvaW50ZXItZXZlbnRzOm5vbmU7IGRpc3BsYXk6bm9uZTsgYmFja2dyb3VuZC1jb2xvcjojMDAwOw0KCQkJCQkJIHBvc2l0aW9uOmZpeGVkOyB0b3A6MHB4OyBsZWZ0OjBweDsgYm9yZGVyOjA7IHdpZHRoOjEwMHZ3OyBoZWlnaHQ6MTAwdmgiPg0KCQkJCSZuYnNwDQoJCQk8L2Rpdj4NCg0KCQkJPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBwb3NpdGlvbjpyZWxhdGl2ZSI+DQoJCQkJPCEtLSBwb2ludGVyLWV2ZW50cyB0dXJuZWQgb2ZmIGZvciBtb2JpbGUgaW4gcDhfdXBkYXRlX2xheW91dCBiZWNhdXNlIG5lZWQgZm9yIGRlc2t0b3AgbW91c2UgLS0+DQoJCQkJPGNhbnZhcyBjbGFzcz0iZW1zY3JpcHRlbiIgaWQ9ImNhbnZhcyIgb25jb250ZXh0bWVudT0iZXZlbnQucHJldmVudERlZmF1bHQoKTsiID4NCgkJCQk8L2NhbnZhcz4NCgkJCQk8ZGl2IGNsYXNzPXA4X21lbnVfYnV0dG9ucyBpZD0icDhfbWVudV9idXR0b25zIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPg0KCQkJCQk8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MTI1cHgiIGlkPSJwOGJfY29udHJvbHMiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgTW9kdWxlLnBpY284VG9nZ2xlQ29udHJvbE1lbnUoKTsiPjwvZGl2PgkJCQkJDQoJCQkJCTxkaXYgY2xhc3M9InA4X21lbnVfYnV0dG9uIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IGJvdHRvbTo5MHB4IiBpZD0icDhiX3BhdXNlIiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IE1vZHVsZS5waWNvOFRvZ2dsZVBhdXNlZCgpOyBwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSAtMjI7Ij48L2Rpdj4NCgkJCQkJPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjU1cHgiIGlkPSJwOGJfc291bmQiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsgTW9kdWxlLnBpY284VG9nZ2xlU291bmQoKTsiPjwvZGl2Pg0KCQkJCQk8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MjBweCIgaWQ9InA4Yl9mdWxsIiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IHA4X3JlcXVlc3RfZnVsbHNjcmVlbigpOyI+PC9kaXY+DQoJCQkJPC9kaXY+DQoJCQk8L2Rpdj4NCg0KDQoJCQk8IS0tIGRpc3BsYXkgYWZ0ZXIgZmlyc3QgbGF5b3V0IHVwZGF0ZSAtLT4NCgkJCTxkaXYgIGlkPSJ0b3VjaF9jb250cm9sc19nZngiDQoJCQkJICBzdHlsZT0iIHBvaW50ZXItZXZlbnRzOm5vbmU7IGRpc3BsYXk6dGFibGU7IA0KCQkJCQkJIHBvc2l0aW9uOmZpeGVkOyB0b3A6MHB4OyBsZWZ0OjBweDsgYm9yZGVyOjA7IHdpZHRoOjEwMHZ3OyBoZWlnaHQ6MTAwdmgiPg0KDQoJCQkJCTxpbWcgc3JjPSIiIGlkPSJjb250cm9sc19yaWdodF9wYW5lbCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBvcGFjaXR5OjAuNTsiPg0KCQkJCQk8aW1nIHNyYz0iIiBpZD0iY29udHJvbHNfbGVmdF9wYW5lbCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyAgb3BhY2l0eTowLjU7Ij4NCgkJCQkJCQ0KCQkJDQoJCQk8L2Rpdj4gPCEtLSB0b3VjaF9jb250cm9sc19nZnggLS0+DQoNCgkJCTwhLS0gdXNlZCBmb3IgY2xpcGJvYXJkIGFjY2VzcyAmIGtleWJvYXJkIGlucHV0OyBkaXNwbGF5ZWQgYW5kIHVzZWQgYnkgUElDTy04IG9ubHkgb25jZSBuZWVkZWQuIGNhbiBiZSBzYWZlbHkgcmVtb3ZlZCBpZiBjbGlwYm9hcmQgLyBrZXkgcHJlc3NlcyBub3QgbmVlZGVkLiAtLT4NCgkJCTwhLS0gKG5lZWRzIHRvIGJlIGluc2lkZSBwOF9wbGF5YXJlYSBzbyB0aGF0IGl0IHN0aWxsIHdvcmtzIHVuZGVyIENocm9tZSB3aGVuIGZ1bGxzY3JlZW5lZCkgLS0+DQoJCQk8dGV4dGFyZWEgaWQ9ImNvZG9fdGV4dGFyZWEiIGNsYXNzPSJlbXNjcmlwdGVuIiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDotOTk5OXB4OyBoZWlnaHQ6MHB4OyBvdmVyZmxvdzpoaWRkZW4iPjwvdGV4dGFyZWE+DQoNCgkJPC9kaXY+IDwhLS1wOF9wbGF5YXJlYSAtLT4NCg0KCTwvZGl2PiA8IS0tIHA4X2NvbnRhaW5lciAtLT4NCg0KPC9kaXY+IDwhLS0gcDhfZnJhbWUgLS0+DQo8L2Rpdj4gPCEtLSBwOF9mcmFtZV8wIHNpemUgbGltaXQgLS0+DQoNCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCg0KCXA4X3VwZGF0ZV9sYXlvdXQoKTsNCglwOF91cGRhdGVfYnV0dG9uX2ljb25zKCk7DQoNCgl2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KCU1vZHVsZSA9IHt9Ow0KCU1vZHVsZS5jYW52YXMgPSBjYW52YXM7DQoNCgkvLyBmcm9tIEB1bHRyYWJyaXRlJ3Mgc2hlbGw6IHRlc3QgaWYgYW4gQXVkaW9Db250ZXh0IGNhbiBiZSBjcmVhdGVkIG91dHNpZGUgb2YgYW4gZXZlbnQgY2FsbGJhY2suDQoJLy8gSWYgaXQgY2FuJ3QgYmUgY3JlYXRlZCwgdGhlbiByZXF1aXJlIHByZXNzaW5nIHRoZSBzdGFydCBidXR0b24gdG8gcnVuIHRoZSBjYXJ0cmlkZ2UNCg0KCWlmIChwOF9hdXRvcGxheSkNCgl7DQoJCXZhciB0ZW1wX2NvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7DQoJCXRlbXBfY29udGV4dC5vbnN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkNCgkJew0KCQkJaWYgKHRlbXBfY29udGV4dC5zdGF0ZT09J3J1bm5pbmcnKQ0KCQkJew0KCQkJCXA4X3J1bl9jYXJ0KCk7DQoJCQkJdGVtcF9jb250ZXh0LmNsb3NlKCk7DQoJCQl9DQoJCX07DQoJfQ0KDQoJLy8gcG9pbnRlciBsb2NrIHJlcXVlc3QgbmVlZHMgdG8gYmUgaW5zaWRlIGEgY2FudmFzIGludGVyYWN0aW9uIGV2ZW50DQoJLy8gcGljbzhfc3RhdGUucmVxdWVzdF9wb2ludGVyX2xvY2sgaXMgdHJ1ZSB3aGVuIDB4NWYyZCBiaXQgMCBhbmQgYml0IDIgYXJlIHNldCAtLSBwb2tlKDB4NWYyZCwweDUpIA0KCWNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkNCgl7DQoJCWlmICghcDhfdG91Y2hfZGV0ZWN0ZWQpDQoJCQlpZiAocGljbzhfc3RhdGUucmVxdWVzdF9wb2ludGVyX2xvY2spDQoJCQkJY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jaygpOw0KCX0pOw0KCQ0KPC9zY3JpcHQ+DQoNCg0KDQo8IS0tIEFkZCBjb250ZW50IGJlbG93IHRoZSBjYXJ0IGhlcmUgLS0+DQoNCg0KDQoNCjwvZGl2PiA8IS0tIGJvZHlfMCAtLT4NCjwvYm9keT48L2h0bWw+DQoNCg==";
