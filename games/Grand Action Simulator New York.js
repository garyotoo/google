window.game = "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8YmFzZSBocmVmID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9Qb2sxMmQvdGFAbWFpbi9nYXMtbnkvIj4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQo8c2NyaXB0Pg0KDQovLyBsb2FkIGNyYXp5DQooKCkgPT4gew0KICB3aW5kb3cuQ3JhenlnYW1lcyA9IHdpbmRvdy5DcmF6eWdhbWVzIHx8IHt9Ow0KICB3aW5kb3cuQ3JhenlTREsgPSB3aW5kb3cuQ3JhenlTREsgfHwge307DQoNCiANCiAgd2luZG93LkNyYXp5Z2FtZXMuaW5pdCA9IChvcHRpb25zKSA9PiB7DQogICAgY29uc29sZS5sb2coIltTaGltXSBDcmF6eWdhbWVzLmluaXQgY2FsbGVkIHdpdGggb3B0aW9uczoiLCBvcHRpb25zKTsNCg0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgY29uc3QgZmFrZUluaXQgPSB7DQogICAgICAgIGdhbWVMaW5rOiAiaHR0cHM6Ly93d3cuY3JhenlnYW1lcy5jb20vZ2FtZS9ibG9ja3ktZGVtb2xpdGlvbi1kZXJieSIsDQogICAgICAgIHVzZXJJbmZvOiB7DQogICAgICAgICAgY291bnRyeUNvZGU6ICJVUyIsDQogICAgICAgICAgbG9jYWxlOiAiZW4tVVMiLA0KICAgICAgICAgIGRldmljZTogeyB0eXBlOiAiZGVza3RvcCIgfSwNCiAgICAgICAgICBvczogeyBuYW1lOiAiV2luZG93cyIsIHZlcnNpb246ICIxMCIgfSwNCiAgICAgICAgICBicm93c2VyOiB7IG5hbWU6ICJDaHJvbWUiLCB2ZXJzaW9uOiAiMTQwLjAuMC4wIiB9DQogICAgICAgIH0NCiAgICAgIH07DQoNCiAgICAgIHdpbmRvdy51bml0eUdhbWVJbnN0YW5jZT8uU2VuZE1lc3NhZ2UoIkNyYXp5U0RLIiwgIkluaXRDYWxsYmFjayIsIEpTT04uc3RyaW5naWZ5KGZha2VJbml0KSk7DQoNCiAgICAgIA0KICAgICAgd2luZG93LnVuaXR5R2FtZUluc3RhbmNlPy5TZW5kTWVzc2FnZSgiQ3JhenlTREsiLCAiQWRibG9ja05vdERldGVjdGVkIiwgdW5kZWZpbmVkKTsNCg0KICAgICAgY29uc29sZS5sb2coIltTaGltXSBJbml0Q2FsbGJhY2sgKyBBZGJsb2NrTm90RGV0ZWN0ZWQgc2VudCB0byBVbml0eSIpOw0KICAgIH0sIDIwMCk7DQogIH07DQoNCg0KICB3aW5kb3cuQ3JhenlnYW1lcy5yZXF1ZXN0QWQgPSAoYWRUeXBlKSA9PiB7DQogICAgY29uc29sZS5sb2coIltTaGltXSBDcmF6eWdhbWVzLnJlcXVlc3RBZCBjYWxsZWQgd2l0aCB0eXBlOiIsIGFkVHlwZSk7DQoJDQoJDQoJLy93aW5kb3cudHJlKCkNCg0KICAgIA0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgY29uc29sZS5sb2coIltTaGltXSBTZW5kaW5nIEFkRXZlbnQgLT4gYWRTdGFydGVkIik7DQogICAgICB3aW5kb3cudW5pdHlHYW1lSW5zdGFuY2U/LlNlbmRNZXNzYWdlKCJDcmF6eVNESyIsICJBZEV2ZW50IiwgImFkU3RhcnRlZCIpOw0KICAgIH0sIDIwMCk7DQoNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgIGNvbnNvbGUubG9nKCJbU2hpbV0gU2VuZGluZyBBZEV2ZW50IC0+IGFkRmluaXNoZWQiKTsNCiAgICAgIHdpbmRvdy51bml0eUdhbWVJbnN0YW5jZT8uU2VuZE1lc3NhZ2UoIkNyYXp5U0RLIiwgIkFkRXZlbnQiLCAiYWRGaW5pc2hlZCIpOw0KICAgIH0sIDIwMDApOw0KDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBpZiAoYWRUeXBlID09PSAicmV3YXJkZWQiKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJbU2hpbV0gU2VuZGluZyBBZEV2ZW50IC0+IGFkQ29tcGxldGVkIChyZXdhcmQgZ3JhbnRlZCkiKTsNCiAgICAgICAgd2luZG93LnVuaXR5R2FtZUluc3RhbmNlPy5TZW5kTWVzc2FnZSgiQ3JhenlTREsiLCAiQWRFdmVudCIsICJhZENvbXBsZXRlZCIpOw0KICAgICAgfQ0KICAgIH0sIDIyMDApOw0KDQogICAgDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBjb25zb2xlLmxvZygiW1NoaW1dIFNlbmRpbmcgQWRFdmVudCAtPiBhZEVycm9yIChyZXF1ZXN0ZWQgdG9vIHNvb24pIik7DQogICAgICB3aW5kb3cudW5pdHlHYW1lSW5zdGFuY2U/LlNlbmRNZXNzYWdlKCJDcmF6eVNESyIsICJBZEV2ZW50IiwgImFkRXJyb3IiKTsNCiAgICB9LCAxMDApOyANCiAgfTsNCg0KIA0KICB3aW5kb3cuQ3JhenlTREsuaW5pdCA9IChvcHRpb25zKSA9PiB3aW5kb3cuQ3JhenlnYW1lcy5pbml0KG9wdGlvbnMpOw0KICB3aW5kb3cuQ3JhenlTREsucmVxdWVzdEFkID0gKHR5cGUpID0+IHdpbmRvdy5DcmF6eWdhbWVzLnJlcXVlc3RBZCh0eXBlKTsNCg0KICBjb25zb2xlLmxvZygiW1NoaW1dIEZha2UgQ3JhenlHYW1lcyBTREsgaW5zdGFsbGVkIik7DQp9KSgpOw0KPC9zY3JpcHQ+DQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KICAgIDxzdHlsZT4NCiAgICAgICAgYm9keSB7IG1hcmdpbjogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZC1jb2xvcjogIzIzMUYyMDsgfQ0KICAgICAgICAjdW5pdHktY29udGFpbmVyIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwdmg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQ0KICAgICAgICBjYW52YXMgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBkaXNwbGF5OiBibG9jazsgfQ0KICAgIDwvc3R5bGU+DQo8L2hlYWQ+DQo8Ym9keT4NCjxoMSBpZCA9ICJsb2FkaW5nIj5Mb2FkaW5nLi4uPC9oMT4NCiAgICA8ZGl2IGlkPSJ1bml0eS1jb250YWluZXIiPg0KICAgICAgICA8Y2FudmFzIGlkPSJ1bml0eS1jYW52YXMiPjwvY2FudmFzPg0KICAgIDwvZGl2Pg0KDQoNCjxzY3JpcHQ+dmFyIGpzTG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0IikNCmpzTG9hZGVyLnNyYyA9ICJVbml0eUxvYWRlci12My1ycnJyLmpzIjsNCmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoanNMb2FkZXIpPC9zY3JpcHQ+DQogICAgDQogICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIDxzY3JpcHQgc3JjID0gImpzemlwLmpzIj48L3NjcmlwdD4NCgk8c2NyaXB0PiAgICANCgkNCiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbmRDb21iaW5lWmlwKGJpblVybHMpIHsNCiAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChiaW5VcmxzLm1hcCh1cmwgPT4gZmV0Y2godXJsKSkpOw0KICAgIGNvbnN0IGJ1ZmZlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSkpOw0KICAgIGxldCB0b3RhbExlbmd0aCA9IGJ1ZmZlcnMucmVkdWNlKChhY2MsIGJ1ZikgPT4gYWNjICsgYnVmLmJ5dGVMZW5ndGgsIDApOw0KICAgIGxldCBjb21iaW5lZCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTsNCiAgICBsZXQgb2Zmc2V0ID0gMDsNCiAgICBmb3IgKGxldCBidWYgb2YgYnVmZmVycykgew0KICAgICAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSwgb2Zmc2V0KTsNCiAgICAgICAgb2Zmc2V0ICs9IGJ1Zi5ieXRlTGVuZ3RoOw0KICAgIH0NCiAgICByZXR1cm4gY29tYmluZWQ7DQp9DQoNCmFzeW5jIGZ1bmN0aW9uIHVuemlwV2VicEZyb21FeHRlcm5hbEJpbnMoYmluVXJscykgew0KICAgIGNvbnN0IGJsb2JVcmxzID0ge307DQogICAgY29uc3QgYnl0ZXMgPSBhd2FpdCBmZXRjaEFuZENvbWJpbmVaaXAoYmluVXJscyk7DQogICAgY29uc3QgemlwID0gYXdhaXQgSlNaaXAubG9hZEFzeW5jKGJ5dGVzKTsNCiAgICBmb3IgKGNvbnN0IFtmaWxlbmFtZSwgZmlsZV0gb2YgT2JqZWN0LmVudHJpZXMoemlwLmZpbGVzKSkgew0KICAgICAgICANCg0KICAgICAgICBpZiAoIWZpbGUuZGlyKSB7DQogICAgICAgICAgICBsZXQgbWltZSA9ICcnOw0KICAgICAgICAgICAgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuanMnKSB8fCBmaWxlbmFtZS5lbmRzV2l0aCgnLm1qcycpKSB7DQogICAgICAgICAgICAgICAgbWltZSA9ICd0ZXh0L2phdmFzY3JpcHQnOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLmNzcycpKSB7DQogICAgICAgICAgICAgICAgbWltZSA9ICd0ZXh0L2Nzcyc7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuaHRtbCcpKSB7DQogICAgICAgICAgICAgICAgbWltZSA9ICd0ZXh0L2h0bWwnOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlbmFtZS5pbmNsdWRlcygnZjAzZTIwZDkyMTlkZDIyZjY3YjZmNGJkMzNhZGJkYTUnKSkgew0KICAgICAgICAgICAgICAgIG1pbWUgPSAnYXBwbGljYXRpb24vd2FzbSc7DQogICAgICAgICAgICB9IA0KICAgICAgICAgICAgZWxzZSBpZiAoZmlsZW5hbWUuaW5jbHVkZXMoJ2ZlZGJjNTM4ODQ2ZTNiMGRmNDk0MDYyYWYzY2E0MzdmJykpIHsNCiAgICAgICAgICAgICAgICBtaW1lID0gJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5wbmcnKSkgew0KICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2UvcG5nJzsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5qcGcnKSB8fCBmaWxlbmFtZS5lbmRzV2l0aCgnLmpwZWcnKSkgew0KICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2UvanBlZyc7DQogICAgICAgICAgICB9DQoJCQllbHNlIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLndhc20nKSApIHsNCiAgICAgICAgICAgICAgICBtaW1lID0gJ2FwcGxpY2F0aW9uL3dhc20nOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBlbHNlIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLmRhdGEudW5pdHl3ZWInKSkgew0KICAgIG1pbWUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJzsNCn0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5hc20uY29kZS51bml0eXdlYicpKSB7DQogICAgbWltZSA9ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JzsNCn0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5hc20ubWVtb3J5LnVuaXR5d2ViJykpIHsNCiAgICBtaW1lID0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7DQp9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuYXNtLmZyYW1ld29yay51bml0eXdlYicpKSB7DQogICAgbWltZSA9ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JzsNCn0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy53YXNtJykpIHsNCiAgICBtaW1lID0gJ2FwcGxpY2F0aW9uL3dhc20nOw0KICAgIA0KICAgIA0KICAgIA0KfQ0KDQppZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5hc20uZnJhbWV3b3JrLnVuaXR5d2ViJykpIG1pbWUgPSAnYXBwbGljYXRpb24vamF2YXNjcmlwdCc7DQppZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5hc20uY29kZS51bml0eXdlYicpKSBtaW1lID0gJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnOw0KaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuYXNtLm1lbW9yeS51bml0eXdlYicpKSBtaW1lID0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7DQoNCiAgICAgICAgICAgIGNvbnN0IHJhd0Jsb2IgPSBhd2FpdCBmaWxlLmFzeW5jKCJibG9iIik7DQogICAgICAgICAgICBjb25zdCBibG9iID0gbWltZSA/IG5ldyBCbG9iKFtyYXdCbG9iXSwgeyB0eXBlOiBtaW1lIH0pIDogcmF3QmxvYjsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFeHRyYWN0ZWQ6IiwgZmlsZW5hbWUsIGJsb2Iuc2l6ZSk7DQogICAgICAgICAgICBjb25zdCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFeHRyYWN0ZWQ6IiwgZmlsZW5hbWUpOw0KICAgICAgICAgICAgYmxvYlVybHNbZmlsZW5hbWVdID0gYmxvYlVybDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gYmxvYlVybHM7DQp9DQoNCmxldCBibG9iVXJsc3MgPSAiIjsNCmxldCBiaW5QYXJ0cyA9IFsNCiAgInBhcnRfMS5iaW4iLA0KICAicGFydF8yLmJpbiIsDQogICJwYXJ0XzMuYmluIiwNCiAgInBhcnRfNC5iaW4iLA0KICAicGFydF81LmJpbiIsDQogIA0KXTsNCg0KdW56aXBXZWJwRnJvbUV4dGVybmFsQmlucyhiaW5QYXJ0cykudGhlbihibG9iVXJscyA9PiB7DQoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvYWRpbmciKS5yZW1vdmUoKQ0KICAgIGJsb2JVcmxzcyA9IGJsb2JVcmxzOw0KICAgIGNvbnN0IE9SSUdJTkFMX0NSRUFURV9FTEVNRU5UID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudDsNCiAgICBjb25zdCBPUklHSU5BTF9TRVRfQVRUUklCVVRFID0gRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlOw0KDQogICAgDQogICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKHRhZ05hbWUpIHsNCiAgICAgICAgY29uc3QgZWwgPSBPUklHSU5BTF9DUkVBVEVfRUxFTUVOVC5jYWxsKHRoaXMsIHRhZ05hbWUpOw0KDQogICAgICAgIGlmICh0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzY3JpcHQnKSB7DQogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdzcmMnLCB7DQogICAgICAgICAgICAgICAgc2V0KG5ld1NyYykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGV4dHJhY3RGaWxlbmFtZShuZXdTcmMpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IGJsb2JVcmxzc1tmaWxlbmFtZV07DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwoZWwsICdzcmMnLCByZXBsYWNlbWVudCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwoZWwsICdzcmMnLCBuZXdTcmMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBnZXQoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBlbDsNCiAgICB9Ow0KDQogICAgDQogICAgRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsNCiAgICAgICAgaWYgKHRoaXMudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgbmFtZSA9PT0gJ3NyYycpIHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZXh0cmFjdEZpbGVuYW1lKHZhbHVlKTsNCiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gYmxvYlVybHNzW2ZpbGVuYW1lXTsNCiAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCkgew0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHJldHVybiBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwodGhpcywgbmFtZSwgcmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIE9SSUdJTkFMX1NFVF9BVFRSSUJVVEUuY2FsbCh0aGlzLCBuYW1lLCB2YWx1ZSk7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGV4dHJhY3RGaWxlbmFtZSh1cmwpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZikucGF0aG5hbWUuc3BsaXQoJy8nKS5wb3AoKTsNCiAgICAgICAgfSBjYXRjaCB7DQogICAgICAgICAgICByZXR1cm4gdXJsLnNwbGl0KCcvJykucG9wKCk7IA0KICAgICAgICB9DQogICAgfQ0KDQoNCmNvbnN0IGltYWdlU3JjRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSW1hZ2UucHJvdG90eXBlLCAnc3JjJyk7DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoSW1hZ2UucHJvdG90eXBlLCAnc3JjJywgew0KICBzZXQodmFsdWUpIHsNCiAgICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHZhbHVlKTsNCiAgICBpbWFnZVNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsNCiAgfSwNCiAgZ2V0OiBpbWFnZVNyY0Rlc2NyaXB0b3IuZ2V0LA0KICBjb25maWd1cmFibGU6IHRydWUsDQogIGVudW1lcmFibGU6IHRydWUsDQp9KTsNCg0KDQpjb25zdCBzY3JpcHRTcmNEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MU2NyaXB0RWxlbWVudC5wcm90b3R5cGUsICdzcmMnKTsNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MU2NyaXB0RWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7DQogIHNldCh2YWx1ZSkgew0KICAgIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodmFsdWUpOw0KICAgIHNjcmlwdFNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsNCiAgfSwNCiAgZ2V0OiBzY3JpcHRTcmNEZXNjcmlwdG9yLmdldCwNCiAgY29uZmlndXJhYmxlOiB0cnVlLA0KICBlbnVtZXJhYmxlOiB0cnVlLA0KfSk7DQoNCg0KY29uc3QgbGlua0hyZWZEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MTGlua0VsZW1lbnQucHJvdG90eXBlLCAnaHJlZicpOw0KT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxMaW5rRWxlbWVudC5wcm90b3R5cGUsICdocmVmJywgew0KICBzZXQodmFsdWUpIHsNCiAgICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHZhbHVlKTsNCiAgICBsaW5rSHJlZkRlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsNCiAgfSwNCiAgZ2V0OiBsaW5rSHJlZkRlc2NyaXB0b3IuZ2V0LA0KICBjb25maWd1cmFibGU6IHRydWUsDQogIGVudW1lcmFibGU6IHRydWUsDQp9KTsNCg0KDQpjb25zdCBtZWRpYVNyY0Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjJyk7DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7DQogIHNldCh2YWx1ZSkgew0KICAgIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodmFsdWUpOw0KICAgIG1lZGlhU3JjRGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLCBuZXdVUkwpOw0KICB9LA0KICBnZXQ6IG1lZGlhU3JjRGVzY3JpcHRvci5nZXQsDQogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwNCiAgZW51bWVyYWJsZTogdHJ1ZSwNCn0pOw0KDQovLyBmZXRjaA0KY29uc3Qgb3JpZ2luYWxGZXRjaCA9IHdpbmRvdy5mZXRjaDsNCndpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uKHJlc291cmNlLCBpbml0KSB7DQoNCiAgaWYgKHR5cGVvZiByZXNvdXJjZSA9PT0gInN0cmluZyIpIHsNCiAgLy9jb25zb2xlLmxvZyhyZXNvdXJjZSkNCiAgICByZXNvdXJjZSA9IHJld3JpdGVVUkwocmVzb3VyY2UpOw0KICB9IGVsc2UgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgUmVxdWVzdCkgew0KICAgIHJlc291cmNlID0gbmV3IFJlcXVlc3QocmV3cml0ZVVSTChyZXNvdXJjZS51cmwpLCByZXNvdXJjZSk7DQogIH0NCiAgcmV0dXJuIG9yaWdpbmFsRmV0Y2guY2FsbCh0aGlzLCByZXNvdXJjZSwgaW5pdCk7DQp9Ow0KDQovLyBYTUxIdHRwUmVxdWVzdA0KY29uc3Qgb3JpZ2luYWxPcGVuID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47DQpYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCAuLi5yZXN0KSB7DQogIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodXJsKTsNCiAgcmV0dXJuIG9yaWdpbmFsT3Blbi5jYWxsKHRoaXMsIG1ldGhvZCwgbmV3VVJMLCAuLi5yZXN0KTsNCn07DQoNCg0KY29uc3QgT3JpZ2luYWxBdWRpbyA9IHdpbmRvdy5BdWRpbzsNCndpbmRvdy5BdWRpbyA9IGZ1bmN0aW9uKHNyYykgew0KICBjb25zdCBhdWRpbyA9IG5ldyBPcmlnaW5hbEF1ZGlvKCk7DQogIGlmIChzcmMpIHsNCiAgICBhdWRpby5zcmMgPSByZXdyaXRlVVJMKHNyYyk7DQogIH0NCiAgcmV0dXJuIGF1ZGlvOw0KfTsNCndpbmRvdy5BdWRpby5wcm90b3R5cGUgPSBPcmlnaW5hbEF1ZGlvLnByb3RvdHlwZTsNCg0KDQpmdW5jdGlvbiByZXdyaXRlVVJMKG9yaWdpbmFsKSB7DQoJDQogIHZhciB0cmltbWVkID0gb3JpZ2luYWwuc3BsaXQoIi8iKS5wb3AoKTsNCiAgLy9jb25zb2xlLmxvZyh0cmltbWVkKQ0KICBpZiAodHJpbW1lZC5pbmNsdWRlcygiPyIpKSB0cmltbWVkID0gdHJpbW1lZC5zcGxpdCgiPyIpWzBdDQogIHJldHVybiBibG9iVXJsc3NbdHJpbW1lZF0gfHwgb3JpZ2luYWw7DQp9DQoNCg0KICAgICAgIHZhciBidWlsZFNldHRpbmdzID0geyANCiJjb21wYW55TmFtZSI6ICJoZ2FtZXNhcnRhY3Rpb24iLA0KInByb2R1Y3ROYW1lIjogIkdyYW5kIEFjdGlvbiBTaW11bGF0b3IgLSBOZXcgWW9yayBDYXIgR2FuZyIsDQoiZGF0YVVybCI6IGJsb2JVcmxzc1siYWN0aW9uc2ltLmRhdGEudW5pdHl3ZWIiXSwNCiJhc21Db2RlVXJsIjogYmxvYlVybHNzWyJhY3Rpb25zaW0uYXNtLmNvZGUudW5pdHl3ZWIiXSwNCiJhc21NZW1vcnlVcmwiOiBibG9iVXJsc3NbImFjdGlvbnNpbS5hc20ubWVtb3J5LnVuaXR5d2ViIl0sDQoiYXNtRnJhbWV3b3JrVXJsIjogYmxvYlVybHNzWyJhY3Rpb25zaW0uYXNtLmZyYW1ld29yay51bml0eXdlYiJdLA0KIlRPVEFMX01FTU9SWSI6IDUzNjg3MDkxMiwNCiJncmFwaGljc0FQSSI6IFsiV2ViR0wgMi4wIiwgIldlYkdMIDEuMCJdLA0KIndlYmdsQ29udGV4dEF0dHJpYnV0ZXMiOiB7InByZXNlcnZlRHJhd2luZ0J1ZmZlciI6IGZhbHNlfSwNCiJzcGxhc2hTY3JlZW5TdHlsZSI6ICJEYXJrIiwNCiJiYWNrZ3JvdW5kQ29sb3IiOiAiIzIzMUYyMCINCn0NCiAgICAgICAgDQogICAgICAgIGNvbnN0IGJ1aWxkQmxvYiA9IG5ldyBCbG9iKA0KICBbSlNPTi5zdHJpbmdpZnkoYnVpbGRTZXR0aW5ncyldLA0KICB7IHR5cGU6ICJhcHBsaWNhdGlvbi9qc29uIiB9DQopOw0KY29uc3QgYnVpbGRVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJ1aWxkQmxvYik7DQoNCiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVuaXR5LWNhbnZhcyIpOw0KDQogICAgICAgIFVuaXR5TG9hZGVyLmluc3RhbnRpYXRlKA0KICAgICAgICAgICAgInVuaXR5LWNvbnRhaW5lciIsDQogICAgICAgICAgICBidWlsZFVybCwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBvblByb2dyZXNzOiAodW5pdHlJbnN0YW5jZSwgcHJvZ3Jlc3MpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkxvYWRpbmcgcHJvZ3Jlc3M6IiwgcHJvZ3Jlc3MpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICk7DQp9KTsNCiAgICA8L3NjcmlwdD4NCiAgICANCiAgICANCg0KCTxzY3JpcHQ+DQoJDQoJPC9zY3JpcHQ+DQoNCjwvYm9keT4NCjwvaHRtbD4=";
