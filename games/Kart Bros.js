window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KDQoNCjxodG1sIGxhbmc9ImVuLXVzIj4NCjxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvVUdTLUFzc2V0c0BtYWluL2thcnQlMjBicm9zLyI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8dGl0bGU+S0FSVCBCUk9TISAtIEZyZWUgT25saW5lIC5pbyBLYXJ0IFJhY2luZyBHYW1lPC90aXRsZT4gDQogIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iVGVtcGxhdGVEYXRhL2Zhdmljb24uaWNvIj4NCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJUZW1wbGF0ZURhdGEvc3R5bGUuY3NzIj4NCiAgPGxpbmsgcmVsPSJjYW5vbmljYWwiIGhyZWY9Imh0dHBzOi8va2FydGJyb3MuaW8vIj4NCiAgPGxpbmsgcmVsPSJtYW5pZmVzdCIgaHJlZj0ibWFuaWZlc3QuanNvbiIgLz4NCiAgPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9IkthcnQgQnJvcyBpcyBhIGZyZWUga2FydCByYWNpbmcgZ2FtZSB0aGF0J3MgcGFja2VkIHdpdGggd2lsZCBhbnRpY3MhIFdoZXRoZXIgeW91J3JlIGh1Z2dpbmcgdGhlIHR1cm5zLCBkcmlmdGluZyBhcm91bmQgdHJhY2tzIG9yIGh1cmxpbmcgcG93ZXJ1cHMgd2l0aCBmcmllbmRzLCBLYXJ0IEJyb3MgaXMgYW4gaW8gcmFjaW5nIGdhbWUgdGhhdCBkZWxpdmVycyBub27igJFzdG9wIHRocmlsbHMgaW4gZXZlcnkgcmFjZS4iPg0KDQogIDxtZXRhIHByb3BlcnR5PSJvZzp0aXRsZSIgY29udGVudD0iS2FydCBCcm9zISI+DQogIDxtZXRhIHByb3BlcnR5PSJvZzpkZXNjcmlwdGlvbiIgY29udGVudD0iS2FydCBCcm9zIGlzIGEgZnJlZSBrYXJ0IHJhY2luZyBnYW1lIHRoYXQncyBwYWNrZWQgd2l0aCB3aWxkIGFudGljcyEgV2hldGhlciB5b3UncmUgaHVnZ2luZyB0aGUgdHVybnMsIGRyaWZ0aW5nIGFyb3VuZCB0cmFja3Mgb3IgaHVybGluZyBwb3dlcnVwcyB3aXRoIGZyaWVuZHMsIEthcnQgQnJvcyBpcyBhbiBpbyByYWNpbmcgZ2FtZSB0aGF0IGRlbGl2ZXJzIG5vbuKAkXN0b3AgdGhyaWxscyBpbiBldmVyeSByYWNlLiI+DQogIDxtZXRhIHByb3BlcnR5PSJvZzppbWFnZSIgY29udGVudD0iaHR0cHM6Ly9rYXJ0YnJvcy5pby9UZW1wbGF0ZURhdGEva2FydGJyb3NfZW1iZWQuanBnIj4NCiAgPG1ldGEgcHJvcGVydHk9Im9nOnR5cGUiIGNvbnRlbnQ9IndlYnNpdGUiPg0KICA8bWV0YSBwcm9wZXJ0eT0ib2c6dXJsIiBjb250ZW50PSJodHRwczovL2thcnRicm9zLmlvIj4NCg0KICA8IS0tIFR3aXR0ZXIgQ2FyZCBtZXRhIHRhZ3MgLS0+DQogIDxtZXRhIG5hbWU9InR3aXR0ZXI6Y2FyZCIgY29udGVudD0ic3VtbWFyeV9sYXJnZV9pbWFnZSI+DQogIDxtZXRhIG5hbWU9InR3aXR0ZXI6c2l0ZSIgY29udGVudD0iQEJsdWVXaXphcmRHYW1lcyI+DQogIDxtZXRhIG5hbWU9InR3aXR0ZXI6Y3JlYXRvciIgY29udGVudD0iQEJsdWVXaXphcmRHYW1lcyI+DQogIDxtZXRhIG5hbWU9InR3aXR0ZXI6dGl0bGUiIGNvbnRlbnQ9IkthcnQgQnJvcyEiPg0KICA8bWV0YSBuYW1lPSJ0d2l0dGVyOmRlc2NyaXB0aW9uIiBjb250ZW50PSJLYXJ0IEJyb3MgaXMgYSBmcmVlIGthcnQgcmFjaW5nIGdhbWUgdGhhdCdzIHBhY2tlZCB3aXRoIHdpbGQgYW50aWNzISBXaGV0aGVyIHlvdSdyZSBodWdnaW5nIHRoZSB0dXJucywgZHJpZnRpbmcgYXJvdW5kIHRyYWNrcyBvciBodXJsaW5nIHBvd2VydXBzIHdpdGggZnJpZW5kcywgS2FydCBCcm9zIGlzIGFuIGlvIHJhY2luZyBnYW1lIHRoYXQgZGVsaXZlcnMgbm9u4oCRc3RvcCB0aHJpbGxzIGluIGV2ZXJ5IHJhY2UuIj4NCiAgPG1ldGEgbmFtZT0idHdpdHRlcjppbWFnZSIgY29udGVudD0iaHR0cHM6Ly9rYXJ0YnJvcy5pby9UZW1wbGF0ZURhdGEva2FydGJyb3NfZW1iZWQuanBnIj4NCg0KICA8bWV0YSBpZD0idmlld3BvcnQiIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsDQogICAgICAgICAgICAgICAgICAgICBpbml0aWFsLXNjYWxlPTEsDQogICAgICAgICAgICAgICAgICAgICBtYXhpbXVtLXNjYWxlPTEsDQogICAgICAgICAgICAgICAgICAgICB1c2VyLXNjYWxhYmxlPW5vLA0KICAgICAgICAgICAgICAgICAgICAgdmlld3BvcnQtZml0PWNvdmVyIj4NCg0KICA8IS0tIDxzY3JpcHQ+DQogICAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgZnVuY3Rpb24gKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IH0sIHsgY2FwdHVyZTogZmFsc2UsIHBhc3NpdmU6IGZhbHNlIH0pOw0KICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDIpIHsNCiAgICAgICAgdmFyIG1ldGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlld3BvcnQiKTsNCiAgICAgICAgbWV0YS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCAnd2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPScgKyAoMiAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSArICcsIHVzZXItc2NhbGFibGU9bm8nKTsNCiAgICAgIH0NCiAgICA8L3NjcmlwdD4gLS0+DQoNCiAgPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9sZCtqc29uIj4NCiAgICB7DQogICAgICAiQGNvbnRleHQiOiAiaHR0cHM6Ly9zY2hlbWEub3JnIiwNCiAgICAgICJAdHlwZSI6ICJWaWRlb0dhbWUiLA0KICAgICAgIm5hbWUiOiAiS2FydCBCcm9zISIsDQogICAgICAidXJsIjogImh0dHBzOi8va2FydGJyb3MuaW8iLA0KICAgICAgImltYWdlIjogImh0dHBzOi8va2FydGJyb3MuaW8vVGVtcGxhdGVEYXRhL2thcnRicm9zX2VtYmVkLmpwZyIsDQogICAgICAiZGVzY3JpcHRpb24iOiAiS2FydCBCcm9zIGlzIGEgZnJlZSBrYXJ0IHJhY2luZyBnYW1lIHRoYXQncyBwYWNrZWQgd2l0aCB3aWxkIGFudGljcyEgV2hldGhlciB5b3UncmUgaHVnZ2luZyB0aGUgdHVybnMsIGRyaWZ0aW5nIGFyb3VuZCB0cmFja3Mgb3IgaHVybGluZyBwb3dlcnVwcyB3aXRoIGZyaWVuZHMsIEthcnQgQnJvcyBpcyBhbiBpbyByYWNpbmcgZ2FtZSB0aGF0IGRlbGl2ZXJzIG5vbuKAkXN0b3AgdGhyaWxscyBpbiBldmVyeSByYWNlLiIsDQogICAgICAiZ2FtZVBsYXRmb3JtIjogIlBDIiwNCiAgICAgICJhcHBsaWNhdGlvbkNhdGVnb3J5IjogIkdhbWUiLA0KICAgICAgImFwcGxpY2F0aW9uU3ViQ2F0ZWdvcnkiOiAiUmFjaW5nIiwNCiAgICAgICJvcGVyYXRpbmdTeXN0ZW0iOiAiQ2hyb21lT1MsIFdpbmRvd3MsIE1BQ09TLCBMaW51eCIsDQogICAgICAiYXV0aG9yIjogew0KICAgICAgICAiQHR5cGUiOiAiT3JnYW5pemF0aW9uIiwNCiAgICAgICAgIm5hbWUiOiAiQmx1ZSBXaXphcmQgRGlnaXRhbCINCiAgICAgIH0sDQogICAgICAicHVibGlzaGVyIjogew0KICAgICAgICAiQHR5cGUiOiAiT3JnYW5pemF0aW9uIiwNCiAgICAgICAgIm5hbWUiOiAiQmx1ZSBXaXphcmQgRGlnaXRhbCINCiAgICAgIH0sDQogICAgICAicGxheU1vZGUiOiAiTXVsdGlQbGF5ZXIiDQogICAgfQ0KICA8L3NjcmlwdD4NCiAgPHNjcmlwdD4NCiAgICBmdW5jdGlvbiBmaXQoKSB7DQogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tdmgnLCBgJHt3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxfXB4YCk7DQogICAgfQ0KDQogICAgLy8gMXN0IHJ1bg0KICAgIGZpdCgpOw0KDQogICAgLy8gaW5zdGFudCByZWFjdGlvbiB0byBvcmllbnRhdGlvbiAvIGNsYXNzaWMgcmVzaXplcw0KICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZpdCwgew0KICAgICAgcGFzc2l2ZTogdHJ1ZQ0KICAgIH0pOw0KDQogICAgLy8gZXh0cmEgcGFzcyBvbmNlIHRoZSBVUkwgYmFyIGhhcyBmdWxseSBoaWRkZW4gKGlPUy9DaHJvbWUtQW5kcm9pZCBxdWlyaykNCiAgICBhZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsICgpID0+IHsNCiAgICAgIHNldFRpbWVvdXQoZml0LCA0NTApOyAvLyB0d2VhayBpZiB5b3Ugc3RpbGwgc2VlIGEgZ2FwDQogICAgfSk7DQoNCiAgICAvLyB2aXN1YWwtdmlld3BvcnQgY2hhbmdlIChpT1MgMTUrIC8gQ2hyb21lIDEwOCspDQogICAgaWYgKHdpbmRvdy52aXN1YWxWaWV3cG9ydCkgew0KICAgICAgdmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZml0LCB7DQogICAgICAgIHBhc3NpdmU6IHRydWUNCiAgICAgIH0pOw0KICAgIH0NCiAgPC9zY3JpcHQ+DQoNCiAgPHN0eWxlPg0KICAgIC8qIEJhc2ljIHN0eWxpbmcgKi8NCiAgICBodG1sLA0KICAgIGJvZHkgew0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgcGFkZGluZzogMDsNCiAgICAgIGJhY2tncm91bmQ6ICMwMDAwMDA7DQogICAgICBjb2xvcjogIzAwMDsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDA7DQogICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgfQ0KDQogICAgLmJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCiAgICAgIC8qIFdlYktpdCAqLw0KICAgICAgd2lkdGg6IDBweDsNCiAgICB9DQoNCiAgICAvKiBMYXlvdXQgc3RydWN0dXJlIC0gbWFpbiB3cmFwcGVyICovDQogICAgLyogLnBhZ2Utd3JhcHBlciB7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOw0KICAgIH0gKi8NCg0KICAgIC8qIEZpeCBmb3Igc2Nyb2xsaW5nIHdoZW4gbW91c2UgaXMgb3ZlciBjYW52YXMgLSByZW1vdmVkIHBvaW50ZXItZXZlbnRzOiBub25lICovDQogICAgLyogR2FtZSBzZWN0aW9uIC0gbWFkZSB0byByZXNwZWN0IHBvaW50ZXIgZXZlbnRzICovDQogICAgLmdhbWUtc2VjdGlvbiB7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgIC8qIGFzcGVjdC1yYXRpbzogMTYgLyA5OyAqLw0KICAgICAgYmFja2dyb3VuZDogIzAwMDsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB9DQoNCiAgICAvKiBMb2FkaW5nIHNjcmVlbiAqLw0KICAgICN1bml0eS1sb2FkaW5nLWJhciB7DQogICAgICBiYWNrZ3JvdW5kOiAjMDAwOw0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgdG9wOiA2MCU7DQogICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICB6LWluZGV4OiAxNTsNCiAgICB9DQoNCiAgICAvKiBJbmZvIHNlY3Rpb24gKi8NCiAgICAuaW5mby1zZWN0aW9uIHsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgYmFja2dyb3VuZDogIzAwMDsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIHBhZGRpbmc6IDIwcHggMDsNCiAgICB9DQoNCiAgICAjdW5pdHktY2FudmFzIHsNCiAgICAgIGJhY2tncm91bmQ6ICMwMDA7DQogICAgICB3aWR0aDogY2FsYygxMDAlKTsNCiAgICAgIGZsb2F0OiBsZWZ0Ow0KICAgICAgLyogZGlzcGxheTogYmxvY2s7ICovDQogICAgICAvKiBBZGQgb2JqZWN0LWZpdC1saWtlIGJlaGF2aW9yIGZvciBjYW52YXMgKi8NCiAgICAgIC8qIHBvc2l0aW9uOiByZWxhdGl2ZTsgKi8NCiAgICB9DQoNCg0KICAgICN1bml0eS13YXJuaW5nIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIHRvcDogNTAlOw0KICAgICAgbGVmdDogNTAlOw0KICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7DQogICAgICBjb2xvcjogI2ZmZjsNCiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOw0KICAgICAgbWF4LXdpZHRoOiA5MCU7DQogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICBkaXNwbGF5OiBub25lOw0KICAgIH0NCg0KICAgIGh0bWwsDQogICAgYm9keSwNCiAgICAuZ2FtZS1zZWN0aW9uLA0KICAgICN1bml0eS1jYW52YXMgew0KICAgICAgLyogd2lkdGg6IDEwMHZ3OyAqLw0KICAgICAgaGVpZ2h0OiBjYWxjKHZhcigtLXZoLCAxdmgpKjEwMCk7DQogICAgICAvKiByZXBsYWNlcyAxMDAgdmggKi8NCiAgICAgIG92ZXJzY3JvbGwtYmVoYXZpb3I6IG5vbmU7DQogICAgICAvKiBhdm9pZHMgcnViYmVyLWJhbmQgc2Nyb2xsICovDQogICAgfQ0KDQogICAgLyogQ29udGFpbmVyIGZvciBnYW1lIGluZm8gKi8NCiAgICAuY29udGFpbmVyIHsNCiAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA0MjBweCk7DQogICAgICBtYXJnaW46IDIwcHggYXV0bzsNCiAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogICAgfQ0KDQogICAgLyogQ29udGVudCBzdHlsaW5nICovDQogICAgcCB7DQogICAgICBmb250LXNpemU6IDEuMnJlbTsNCiAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7DQogICAgfQ0KDQogICAgaDEgew0KICAgICAgY29sb3I6ICNkMzJmMmY7DQogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgfQ0KDQogICAgaDIgew0KICAgICAgY29sb3I6ICMxOTc2ZDI7DQogICAgfQ0KDQogICAgLmNoYW5nZWxvZyB7DQogICAgICBiYWNrZ3JvdW5kOiAjZTNmMmZkOw0KICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgIzE5NzZkMjsNCiAgICB9DQoNCiAgICAuZmFxIHsNCiAgICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgfQ0KDQogICAgLmZhcS1pdGVtIHsNCiAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgfQ0KDQogICAgLmZhcS1pdGVtIGgzIHsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIGNvbG9yOiAjZDMyZjJmOw0KICAgIH0NCg0KICAgIC5zb2NpYWwgew0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICB9DQoNCiAgICAvKiBTb2NpYWwgbGlua3MgKi8NCiAgICAuc29jaWFsLWxpbmtzIHsNCiAgICAgIG1hcmdpbi10b3A6IDQwcHg7DQogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgfQ0KDQogICAgLnNvY2lhbC1saW5rcyBhIHsNCiAgICAgIG1hcmdpbjogMCAxMHB4Ow0KICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIH0NCg0KICAgIC5zb2NpYWwtbGlua3MgaW1nIHsNCiAgICAgIHdpZHRoOiAzMHB4Ow0KICAgICAgaGVpZ2h0OiAzMHB4Ow0KICAgIH0NCg0KICAgIGEgew0KICAgICAgY29sb3I6IGhvdHBpbms7DQogICAgfQ0KDQogICAgI2FkQ29udGFpbmVyTWFpbk1lbnUgew0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgLyogbm8gbG9uZ2VyIGZpeGVkICovDQogICAgICB0b3A6IDUwJTsNCiAgICAgIC8qIGNlbnRlciB2ZXJ0aWNhbGx5IGluIGdhbWUtc2VjdGlvbiAqLw0KICAgICAgbGVmdDogNTAlOw0KICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7DQogICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsNCiAgICAgIHotaW5kZXg6IDEwMDA7DQogICAgfQ0KDQogICAgI2FkQ29udGFpbmVyTWFpbk1lbnU+ZGl2IHsNCiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvOw0KICAgIH0NCg0KICAgIC8qIEluZGl2aWR1YWwgYWQgZWxlbWVudHMgc2hvdWxkIHJlY2VpdmUgY2xpY2tzICovDQogICAgI2thcnRicm9zLWlvXzMwMHgyNTAsDQogICAgI2thcnRicm9zLWlvXzMwMHgyNTBfMiB7DQogICAgICBwb2ludGVyLWV2ZW50czogYXV0bzsNCiAgICAgIC8qIE9ubHkgdGhlIGFjdHVhbCBhZCBlbGVtZW50cyBnZXQgY2xpY2tzICovDQogICAgfQ0KDQogICAgI2FkQ29udGFpbmVyQm90dG9tIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIGJvdHRvbTogMXB4Ow0KICAgICAgbGVmdDogNTAlOw0KICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgei1pbmRleDogMTAwMDsNCiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAvKiBJbml0aWFsbHkgaGlkZGVuIGxpa2Ugb3RoZXIgYWQgY29udGFpbmVycyAqLw0KICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQogICAgfQ0KDQogICAgI2FkQ29udGFpbmVyQm90dG9tPmRpdiB7DQogICAgICBwb2ludGVyLWV2ZW50czogYXV0bzsNCiAgICB9DQoNCiAgICAjYWRDb250YWluZXJUb3Agew0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgdG9wOiAxMHB4Ow0KICAgICAgLyogY2VudGVyIHZlcnRpY2FsbHkgaW4gZ2FtZS1zZWN0aW9uICovDQogICAgICBsZWZ0OiA1MCU7DQogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7DQogICAgICB6LWluZGV4OiAxMDAwOw0KICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgIC8qIEluaXRpYWxseSBoaWRkZW4gbGlrZSBtYWluIG1lbnUgYWRzICovDQogICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsNCiAgICB9DQoNCiAgICAjYWRDb250YWluZXJUb3A+ZGl2IHsNCiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvOw0KICAgIH0NCg0KICAgIC8qIEluZGl2aWR1YWwgYWQgZWxlbWVudHMgc2hvdWxkIHJlY2VpdmUgY2xpY2tzICovDQogICAgI2thcnRicm9zLWlvXzcyOHg5MCB7DQogICAgICBwb2ludGVyLWV2ZW50czogYXV0bzsNCiAgICB9DQoNCiAgICAvKiBQaWxsYXIgYWQgY29udGFpbmVycyBmb3IgY2hhcmFjdGVyL3RyYWNrIHNlbGVjdCBzY3JlZW5zICovDQogICAgI2FkQ29udGFpbmVyUGlsbGFycyB7DQogICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICB0b3A6IDA7DQogICAgICBsZWZ0OiAwOw0KICAgICAgcmlnaHQ6IDA7DQogICAgICBib3R0b206IDA7DQogICAgICB6LWluZGV4OiAxMDAwOw0KICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQogICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgLyogSW5pdGlhbGx5IGhpZGRlbiAqLw0KICAgIH0NCg0KICAgICNhZENvbnRhaW5lclBpbGxhcnM+ZGl2IHsNCiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvOw0KICAgIH0NCg0KICAgIC8qIEluZGl2aWR1YWwgcGlsbGFyIGFkIGVsZW1lbnRzICovDQogICAgI2thcnRicm9zLWlvXzE2MHg2MDAgew0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgbGVmdDogMTBweDsNCiAgICAgIHRvcDogNTAlOw0KICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOw0KICAgICAgd2lkdGg6IDE2MHB4Ow0KICAgICAgaGVpZ2h0OiA2MDBweDsNCiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvOw0KICAgICAgei1pbmRleDogMTAwMTsNCiAgICB9DQoNCiAgICAja2FydGJyb3MtaW9fMTYweDYwMF8yIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIHJpZ2h0OiAxMHB4Ow0KICAgICAgdG9wOiA1MCU7DQogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogICAgICB3aWR0aDogMTYwcHg7DQogICAgICBoZWlnaHQ6IDYwMHB4Ow0KICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87DQogICAgICB6LWluZGV4OiAxMDAxOw0KICAgIH0NCg0KICAgIC8qIFZpZGVvIGFkIG92ZXJsYXkgKi8NCiAgICAjdmlkZW9BZE92ZXJsYXkgew0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgdG9wOiAwOw0KICAgICAgbGVmdDogMDsNCiAgICAgIHdpZHRoOiAxMDB2dzsNCiAgICAgIGhlaWdodDogMTAwdmg7DQogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuOCk7DQogICAgICB6LWluZGV4OiAyMDAwOw0KICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB9DQoNCiAgICAjdmlkZW9hZCB7DQogICAgICB3aWR0aDogOTYwcHg7DQogICAgICBoZWlnaHQ6IDU0MHB4Ow0KICAgICAgYmFja2dyb3VuZDogIzAwMDsNCiAgICB9DQoNCiAgICAvKiBTcGlubmluZyB3aGVlbCBhbmltYXRpb24gKi8NCiAgICBAa2V5ZnJhbWVzIHNwaW4gew0KICAgICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCiAgICAgIH0NCg0KICAgICAgMTAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICB9DQogICAgfQ0KDQogICAgLnNwaW5uaW5nLXdoZWVsIHsNCiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGNlbnRlcjsNCiAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7DQogICAgfQ0KICA8L3N0eWxlPg0KDQogIDxzY3JpcHQ+DQogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlciAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdUZW1wbGF0ZURhdGEvc3cuanMnKQ0KICAgIH0NCiAgPC9zY3JpcHQ+DQoNCiAgPCEtLSBBZGluUGxheSBBZHMgU25pcHBldCBJbnRlZ3JhdGlvbiAtLT4NCiAgPHNjcmlwdD4NCiAgICB3aW5kb3cuYWlwdGFnID0gd2luZG93LmFpcHRhZyB8fCB7DQogICAgICBjbWQ6IFtdDQogICAgfTsNCiAgICBhaXB0YWcuY21kLmRpc3BsYXkgPSBhaXB0YWcuY21kLmRpc3BsYXkgfHwgW107DQogICAgYWlwdGFnLmNtZC5wbGF5ZXIgPSBhaXB0YWcuY21kLnBsYXllciB8fCBbXTsNCg0KICAgIC8vIENNUCB0b29sIHNldHRpbmdzDQogICAgYWlwdGFnLmNtcCA9IHsNCiAgICAgIHNob3c6IHRydWUsDQogICAgICBidXR0b246IHRydWUsDQogICAgICBidXR0b25UZXh0OiAiUHJpdmFjeSBzZXR0aW5ncyIsDQogICAgICBidXR0b25Qb3NpdGlvbjogImJvdHRvbS1sZWZ0Ig0KICAgIH07DQoNCiAgICAvLyBJbml0aWFsaXplIHRoZSB2aWRlbyBhZCBwbGF5ZXINCiAgICBhaXB0YWcuY21kLnBsYXllci5wdXNoKGZ1bmN0aW9uKCkgew0KICAgICAgYWlwdGFnLmFkcGxheWVyID0gbmV3IGFpcFBsYXllcih7DQogICAgICAgIEFEX1dJRFRIOiA5NjAsDQogICAgICAgIEFEX0hFSUdIVDogNTQwLA0KICAgICAgICBBRF9ESVNQTEFZOiAnZGVmYXVsdCcsIC8vIGRlZmF1bHQsIGZ1bGxzY3JlZW4sIGZpbGwsIGNlbnRlciwgbW9kYWwtY2VudGVyDQogICAgICAgIExPQURJTkdfVEVYVDogJ2xvYWRpbmcgYWR2ZXJ0aXNlbWVudCcsDQogICAgICAgIFBSRVJPTExfRUxFTTogZnVuY3Rpb24oKSB7DQogICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb2FkJyk7DQogICAgICAgIH0sDQogICAgICAgIEFJUF9DT01QTEVURTogZnVuY3Rpb24oc3RhdGUpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygiVmlkZW8gQWQgQ29tcGxldGVkOiAiICsgc3RhdGUpOw0KICAgICAgICAgIGlmICh0eXBlb2YgU2VuZEV2ZW50ID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgICBTZW5kRXZlbnQoImV2ZW50IiwgImFpcF92aWRlb19jb21wbGV0ZWQiLCB7DQogICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0eXBlb2YgY29tcGxldGVWaWRlb0FkID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgICBjb21wbGV0ZVZpZGVvQWQoZmFsc2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSk7DQogIDwvc2NyaXB0Pg0KICA8c2NyaXB0Pg0KICAgIChmdW5jdGlvbigpIHsNCiAgICAgIGZ1bmN0aW9uIGRldGVjdE1zU3RhcnQoKSB7DQogICAgICAgIHZhciB1cmkgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2g7DQogICAgICAgIHZhciBsb3dlclVyaSA9ICh1cmkgfHwgJycpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggfHwgJycpOw0KICAgICAgICBpZiAocGFyYW1zLmhhcygnbXMnKSB8fCBwYXJhbXMuaGFzKCdtc3N0YXJ0X3Nka19pbml0JykpIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobG93ZXJVcmkuaW5kZXhPZignbXNzdGFydF9zZGtfaW5pdCcpICE9PSAtMSkgew0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBsb3dlclVyaS5pbmRleE9mKCdtcycpICE9PSAtMTsNCiAgICAgIH0NCg0KICAgICAgd2luZG93LmlzTXNTdGFydCA9IGRldGVjdE1zU3RhcnQoKTsNCiAgICAgIGlmICh3aW5kb3cuaXNNc1N0YXJ0KSB7DQogICAgICAgIHdpbmRvdy5tc1N0YXJ0ID0gdHJ1ZTsNCiAgICAgICAgdmFyIG1zU2RrU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7DQogICAgICAgIG1zU2RrU2NyaXB0LnNyYyA9ICdodHRwczovL2Fzc2V0cy5tc24uY29tL3N0YXRpY3NiL3N0YXRpY3MvbGF0ZXN0L21zc3RhcnQtZ2FtZXMtc2RrL21zc3RhcnQtdjEuMC4wLXJjLjE5Lm1pbi5qcyc7DQogICAgICAgIG1zU2RrU2NyaXB0LmFzeW5jID0gdHJ1ZTsNCiAgICAgICAgbXNTZGtTY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93LmxvYWRNc1ZpZGVvQXN5bmMgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgIHdpbmRvdy5sb2FkTXNWaWRlb0FzeW5jKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChtc1Nka1NjcmlwdCk7DQogICAgICB9DQogICAgfSkoKTsNCiAgPC9zY3JpcHQ+DQogIDxzY3JpcHQgYXN5bmMgc3JjPSIvL2FwaS5hZGlucGxheS5jb20vbGlicy9haXB0YWcvcHViL1NTSy9rYXJ0YnJvcy5pby90YWcubWluLmpzIj48L3NjcmlwdD4NCiAgPCEtLSBFbmQgQWRpblBsYXkgU25pcHBldCAtLT4NCiAgPCEtLSBHb29nbGUgdGFnIChndGFnLmpzKSAtLT4NCiAgPHNjcmlwdCBhc3luYyBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9Ry0xQlNYQzNZODY1Ij48L3NjcmlwdD4NCiAgPHNjcmlwdD4NCiAgICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTsNCg0KICAgIGZ1bmN0aW9uIGd0YWcoKSB7DQogICAgICBkYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpOw0KICAgIH0NCiAgICBndGFnKCdqcycsIG5ldyBEYXRlKCkpOw0KDQogICAgZ3RhZygnY29uZmlnJywgJ0ctMUJTWEMzWTg2NScsIHsNCiAgICAgIGNvb2tpZV9mbGFnczogJ3NlY3VyZTtzYW1lc2l0ZT1ub25lJw0KICAgIH0pOw0KICA8L3NjcmlwdD4NCg0KICA8IS0tIEFuYWx5dGljcyBGdW5jdGlvbnMgLS0+DQogIDxzY3JpcHQ+DQogICAgLy8gR2VuZXJhdGUgdW5pcXVlIHNlc3Npb24gSUQNCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25JZCgpIHsNCiAgICAgIGNvbnN0IGNoYXJzID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7DQogICAgICBsZXQgcmVzdWx0ID0gJyc7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1OyBpKyspIHsNCiAgICAgICAgcmVzdWx0ICs9IGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KDQogICAgLy8gU2Vzc2lvbiBJRCBmb3IgdHJhY2tpbmcNCiAgICB2YXIgc2lkID0gZ2VuZXJhdGVTZXNzaW9uSWQoKTsNCg0KICAgIC8vIFN0YXR1cyB1cGRhdGUgZnVuY3Rpb24gdGhhdCByZWNvcmRzIHNlc3Npb24gYWN0aXZpdHkNCiAgICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoZnJvbUV2ZW50ID0gZmFsc2UpIHsNCiAgICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KICAgICAgdmFyIGFTdHIgPSAicmVjb3Jkc2Vzc2lvbi5waHA/cz0iICsgc2lkOw0KICAgICAgaWYgKGZyb21FdmVudCA9PSB0cnVlKSBhU3RyID0gYVN0ciArICImZT0xIg0KICAgICAgcmVxLm9wZW4oIkdFVCIsIGFTdHIpOw0KICAgICAgcmVxLnNlbmQoKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBTZW5kRXZlbnQodGhlRXZlbnQsIHRoZUFjdGlvbiwgdGhlUGFybXMgPSAnJykgew0KICAgICAgaWYgKHRoZVBhcm1zID09ICcnKSB7DQogICAgICAgIGd0YWcodGhlRXZlbnQsIHRoZUFjdGlvbik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBndGFnKHRoZUV2ZW50LCB0aGVBY3Rpb24sIHRoZVBhcm1zKTsNCiAgICAgIH0NCiAgICAgIHVwZGF0ZVN0YXR1cyh0cnVlKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBHQTRfU2VuZEV2ZW50KGV2ZW50TmFtZSwgcGFyYW1zSnNvbikgew0KICAgICAgLy8gUGFyc2UgcGFyYW1ldGVycyBpZiBwcm92aWRlZA0KICAgICAgdmFyIHBhcnNlZFBhcmFtczsNCiAgICAgIGlmIChwYXJhbXNKc29uICYmIHBhcmFtc0pzb24ubGVuZ3RoID4gMCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHBhcnNlZFBhcmFtcyA9IEpTT04ucGFyc2UocGFyYW1zSnNvbik7DQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICBwYXJzZWRQYXJhbXMgPSB1bmRlZmluZWQ7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy8gQ2FsbCBTZW5kRXZlbnQgZnVuY3Rpb24NCiAgICAgIGlmIChwYXJzZWRQYXJhbXMgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgZXZlbnROYW1lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCBldmVudE5hbWUsIHBhcnNlZFBhcmFtcyk7DQogICAgICB9DQogICAgfQ0KDQogICAgdXBkYXRlU3RhdHVzKGZhbHNlKTsNCiAgPC9zY3JpcHQ+DQogIDxzY3JpcHQ+DQogICAgdmFyIG1zVmlkZW9JbnN0YW5jZUlkID0gbnVsbDsNCiAgICB2YXIgbGFzdFVuaXRQbGF5ZWQgPSBudWxsOw0KDQogICAgZnVuY3Rpb24gdHJhY2tBZEV2ZW50KG5hbWUsIGRhdGEpIHsNCiAgICAgIGlmICh0eXBlb2YgU2VuZEV2ZW50ID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAib2JqZWN0Iikgew0KICAgICAgICAgIFNlbmRFdmVudCgiZXZlbnQiLCBuYW1lLCBkYXRhKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBTZW5kRXZlbnQoImV2ZW50IiwgbmFtZSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBmb2N1c0dhbWVDYW52YXMoKSB7DQogICAgICB3aW5kb3cuZm9jdXMoKTsNCiAgICAgIHZhciBjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvcGVuZmwtY29udGVudCIpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0eS1jYW52YXMiKTsNCiAgICAgIGlmIChjb250ZW50RWxlbWVudCAmJiB0eXBlb2YgY29udGVudEVsZW1lbnQuZm9jdXMgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgY29udGVudEVsZW1lbnQuZm9jdXMoKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjb21wbGV0ZVZpZGVvQWQoaXNCbG9ja2VkKSB7DQogICAgICBpZiAodHlwZW9mIHdpbmRvdy5NYWluICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2Ygd2luZG93Lk1haW4uRG9uZVZpZGVvQWQgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBpZiAodHlwZW9mIGlzQmxvY2tlZCA9PT0gInVuZGVmaW5lZCIpIHsNCiAgICAgICAgICAgIHdpbmRvdy5NYWluLkRvbmVWaWRlb0FkKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHdpbmRvdy5NYWluLkRvbmVWaWRlb0FkKGlzQmxvY2tlZCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICBjb25zb2xlLndhcm4oIk1haW4uRG9uZVZpZGVvQWQgZXJyb3IiLCBlcnIpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBmb2N1c0dhbWVDYW52YXMoKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBsb2FkTXNWaWRlb0FzeW5jKCkgew0KICAgICAgaWYgKCF3aW5kb3cuaXNNc1N0YXJ0IHx8IHR5cGVvZiB3aW5kb3cuJG1zc3RhcnQgPT09ICJ1bmRlZmluZWQiIHx8IHR5cGVvZiB3aW5kb3cuJG1zc3RhcnQubG9hZEFkc0FzeW5jICE9PSAiZnVuY3Rpb24iKSB7DQogICAgICAgIG1zVmlkZW9JbnN0YW5jZUlkID0gbnVsbDsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICB3aW5kb3cuJG1zc3RhcnQubG9hZEFkc0FzeW5jKCkudGhlbihmdW5jdGlvbihhZEluc3RhbmNlKSB7DQogICAgICAgIG1zVmlkZW9JbnN0YW5jZUlkID0gYWRJbnN0YW5jZSAmJiBhZEluc3RhbmNlLmluc3RhbmNlSWQ7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZygiTVMgbG9hZEFkc0FzeW5jIGVycm9yIiwgZXJyb3IpOw0KICAgICAgICBtc1ZpZGVvSW5zdGFuY2VJZCA9IG51bGw7DQogICAgICB9KTsNCg0KICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuU2V0dXBNU05vdGlmaWNhdGlvbiA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHdpbmRvdy5TZXR1cE1TTm90aWZpY2F0aW9uKCk7DQogICAgICAgIH0gY2F0Y2ggKG5vdGlmaWNhdGlvbkVycm9yKSB7DQogICAgICAgICAgY29uc29sZS53YXJuKCJTZXR1cE1TTm90aWZpY2F0aW9uIGVycm9yIiwgbm90aWZpY2F0aW9uRXJyb3IpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gU2hvd1ZpZGVvKHRoZVVuaXROYW1lLCBmb3JjZUFpcCkgew0KICAgICAgdmFyIHVuaXROYW1lID0gdGhlVW5pdE5hbWUgfHwgImthcnRicm9zLWlvX3ByZXJvbGwiOw0KICAgICAgdmFyIGZvcmNlRmFsbGJhY2sgPSAhIWZvcmNlQWlwOw0KDQogICAgICBjb25zb2xlLmxvZygiU0hPV19WSURFTyIsIHVuaXROYW1lLCAiZm9yY2VBaXA6IiwgZm9yY2VGYWxsYmFjayk7DQoNCiAgICAgIGlmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7DQogICAgICAgIHZhciBwcmVyb2xsRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcmVyb2xsIik7DQogICAgICAgIGlmIChwcmVyb2xsRWxlbWVudCkgew0KICAgICAgICAgIHByZXJvbGxFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgcHJlcm9sbEVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KICAgICAgICB9DQogICAgICAgIGNvbXBsZXRlVmlkZW9BZChmYWxzZSk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgaWYgKCFmb3JjZUZhbGxiYWNrICYmIHdpbmRvdy5pc01zU3RhcnQgJiYgdHlwZW9mIHdpbmRvdy4kbXNzdGFydCAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHdpbmRvdy4kbXNzdGFydC5zaG93QWRzQXN5bmMgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgaWYgKCFtc1ZpZGVvSW5zdGFuY2VJZCkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJNU1N0YXJ0IGFkIG5vdCByZWFkeSwgZmFsbGluZyBiYWNrIHRvIEFJUCIpOw0KICAgICAgICAgIGxvYWRNc1ZpZGVvQXN5bmMoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB3aW5kb3cuJG1zc3RhcnQuc2hvd0Fkc0FzeW5jKG1zVmlkZW9JbnN0YW5jZUlkKS50aGVuKGZ1bmN0aW9uKGFkSW5zdGFuY2UpIHsNCiAgICAgICAgICAgIHZhciBjb21wbGV0aW9uID0gYWRJbnN0YW5jZSAmJiBhZEluc3RhbmNlLnNob3dBZHNDb21wbGV0ZWRBc3luYzsNCiAgICAgICAgICAgIGlmIChjb21wbGV0aW9uICYmIHR5cGVvZiBjb21wbGV0aW9uLnRoZW4gPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICAgICAgY29tcGxldGlvbi50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNUyBWaWRlbyBBZCBDb21wbGV0ZSIpOw0KICAgICAgICAgICAgICAgIHRyYWNrQWRFdmVudCgibXNfdmlkZW9fc2hvd24yIik7DQogICAgICAgICAgICAgICAgY29tcGxldGVWaWRlb0FkKGZhbHNlKTsNCiAgICAgICAgICAgICAgICBsb2FkTXNWaWRlb0FzeW5jKCk7DQogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNUyB2aWRlbyBub3QgY29tcGxldGVkIiwgZXJyKTsNCiAgICAgICAgICAgICAgICB0cmFja0FkRXZlbnQoIm1zX3ZpZGVvX25vdF9jb21wbGV0ZWQiKTsNCiAgICAgICAgICAgICAgICBsb2FkTXNWaWRlb0FzeW5jKCk7DQogICAgICAgICAgICAgICAgU2hvd1ZpZGVvKHVuaXROYW1lLCB0cnVlKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTVMgdmlkZW8gY29tcGxldGlvbiBwcm9taXNlIG1pc3NpbmciKTsNCiAgICAgICAgICAgICAgdHJhY2tBZEV2ZW50KCJtc192aWRlb19zaG93bjIiKTsNCiAgICAgICAgICAgICAgY29tcGxldGVWaWRlb0FkKGZhbHNlKTsNCiAgICAgICAgICAgICAgbG9hZE1zVmlkZW9Bc3luYygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coIk1TIFZpZGVvIEFkIEVycm9yLCBzaG93aW5nIEFJUCBmYWxsYmFjayIsIGVycik7DQogICAgICAgICAgICB0cmFja0FkRXZlbnQoIm1zX3ZpZGVvX3Nob3dfZXJyb3IyIik7DQogICAgICAgICAgICBsb2FkTXNWaWRlb0FzeW5jKCk7DQogICAgICAgICAgICBTaG93VmlkZW8odW5pdE5hbWUsIHRydWUpOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBpZiAodHlwZW9mIHdpbmRvdy5haXB0YWcgPT09ICJ1bmRlZmluZWQiIHx8ICF3aW5kb3cuYWlwdGFnLmNtZCB8fCAhd2luZG93LmFpcHRhZy5jbWQucGxheWVyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJWSURFT19BREJMT0NLRUQiKTsNCiAgICAgICAgdHJhY2tBZEV2ZW50KCJ2aWRlb19hZGJsb2NrZWQiKTsNCiAgICAgICAgY29tcGxldGVWaWRlb0FkKHRydWUpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxhc3RVbml0UGxheWVkID0gdW5pdE5hbWU7DQogICAgICB0cmFja0FkRXZlbnQoInN0YXJ0dmlkZW8tIiArIHVuaXROYW1lKTsNCg0KICAgICAgd2luZG93LmFpcHRhZy5jbWQucGxheWVyLnB1c2goZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBwbGF5ZXIgPSB3aW5kb3cuYWlwdGFnLmFkcGxheWVyIHx8IHdpbmRvdy5hZHBsYXllcjsNCiAgICAgICAgaWYgKHBsYXllciAmJiB0eXBlb2YgcGxheWVyLnN0YXJ0UHJlUm9sbCA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICAgIHBsYXllci5zdGFydFByZVJvbGwodW5pdE5hbWUpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJBSVAgYWRwbGF5ZXIgbWlzc2luZyAtIG1hcmtpbmcgdmlkZW8gY29tcGxldGUiKTsNCiAgICAgICAgICB0cmFja0FkRXZlbnQoInZpZGVvX2FkcGxheWVyX21pc3NpbmciKTsNCiAgICAgICAgICBjb21wbGV0ZVZpZGVvQWQodHJ1ZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIExvYWRWaWRlbygpIHsNCiAgICAgIGxvYWRNc1ZpZGVvQXN5bmMoKTsNCiAgICB9DQoNCiAgICB3aW5kb3cuTG9hZFZpZGVvID0gTG9hZFZpZGVvOw0KICAgIHdpbmRvdy5TaG93VmlkZW8gPSBTaG93VmlkZW87DQoNCiAgICBsb2FkTXNWaWRlb0FzeW5jKCk7DQogIDwvc2NyaXB0Pg0KPC9oZWFkPg0KDQo8Ym9keT4NCiAgPG5vc2NyaXB0Pg0KICAgIDxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO2luc2V0OjA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2NvbG9yOiNmZmY7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7Zm9udC1zaXplOjIwcHg7bGluZS1oZWlnaHQ6MS40O3otaW5kZXg6OTk5OTt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjI0cHgiPg0KICAgICAgRW5hYmxlIEphdmFTY3JpcHQgYnJvIQ0KICAgIDwvZGl2Pg0KICA8L25vc2NyaXB0Pg0KICA8IS0tIEFkZCBhIHNjcm9sbCBoZWxwZXIgdGhhdCBzaXRzIGJlaGluZCB0aGUgZ2FtZSBidXQgYWxsb3dzIHNjcm9sbGluZyAtLT4NCiAgPCEtLSA8ZGl2IGNsYXNzPSJwYWdlLXdyYXBwZXIiPiAtLT4NCiAgPCEtLSBHYW1lIHNlY3Rpb24gKGZ1bGwgaGVpZ2h0IG9mIHZpZXdwb3J0KSAtLT4NCiAgPGRpdiBjbGFzcz0iZ2FtZS1zZWN0aW9uIj4NCiAgICA8Y2FudmFzIGlkPSJ1bml0eS1jYW52YXMiIHRhYmluZGV4PSItMSIgb25ibHVyPSJ3aW5kb3cuZm9jdXMoKTsgd2luZG93LnNjcm9sbFRvKDAsIDApOyI+PC9jYW52YXM+DQoNCiAgICA8IS0tIDxkaXYgaWQ9InVuaXR5LWxvYWRpbmctYmFyIj4NCiAgICAgICAgPGRpdiBpZD0ibG9hZGluZy10ZXh0Ij5ZT1VSIEJST1MgR0FNRSBJUyBMT0FESU5HPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1lbXB0eSI+DQogICAgICAgICAgPGRpdiBpZD0idW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2PiAtLT4NCg0KICAgIDxkaXYgaWQ9InVuaXR5LWxvYWRpbmctYmFyIj4NCiAgICAgIDxjZW50ZXI+DQogICAgICAgIDxpbWcgc3JjPSJUZW1wbGF0ZURhdGEva2FydF93aGVlbC5wbmciIGNsYXNzPSJzcGlubmluZy13aGVlbCIgYWx0PSJTcGlubmluZyBrYXJ0IHdoZWVsIGxvYWRpbmcgaW5kaWNhdG9yIj4NCiAgICAgICAgPGJyPg0KICAgICAgICA8aW1nIHNyYz0iVGVtcGxhdGVEYXRhL2xvYWRpbmc0LnBuZyIgYWx0PSJMb2FkaW5nIGdhbWUiPg0KICAgICAgICA8YnI+DQogICAgICAgIDxpbWcgc3JjPSJUZW1wbGF0ZURhdGEvZmJyby5wbmciIGFsdD0iRm9vdGJhbGwgQnJvcyBjaGFyYWN0ZXIgaWNvbiI+DQogICAgICAgIDxpbWcgc3JjPSJUZW1wbGF0ZURhdGEvYmJicm8ucG5nIiBhbHQ9IkJhc2tldCBCcm9zIGNoYXJhY3RlciBpY29uIj4NCiAgICAgICAgPGltZyBzcmM9IlRlbXBsYXRlRGF0YS9zYnJvLnBuZyIgYWx0PSJTb2NjZXIgQnJvcyBjaGFyYWN0ZXIgaWNvbiI+DQogICAgICAgIDxpbWcgc3JjPSJUZW1wbGF0ZURhdGEvd2Jyby5wbmciIGFsdD0iV3Jlc3RsZSBCcm9zIGNoYXJhY3RlciBpY29uIj4NCiAgICAgICAgPGltZyBzcmM9IlRlbXBsYXRlRGF0YS9rYnJvLnBuZyIgYWx0PSJLYXJ0IEJyb3MgY2hhcmFjdGVyIGljb24iPg0KICAgICAgICA8aW1nIHNyYz0iVGVtcGxhdGVEYXRhL2Jicm8ucG5nIiBhbHQ9IkJhc2ViYWxsIEJyb3MgY2hhcmFjdGVyIGljb24iPg0KICAgICAgICA8aW1nIHNyYz0iVGVtcGxhdGVEYXRhL2thcnRicm8ucG5nIiBhbHQ9IkthcnQgQnJvcyBjaGFyYWN0ZXIgaWNvbiI+DQogICAgICA8L2NlbnRlcj4NCiAgICA8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9InVuaXR5LXdhcm5pbmciPjwvZGl2Pg0KDQogICAgPGRpdiBpZD0iYWRDb250YWluZXJNYWluTWVudSI+DQogICAgICA8ZGl2IGlkPSJrYXJ0YnJvcy1pb18zMDB4MjUwIiBzdHlsZT0id2lkdGg6IDMzNnB4OyBoZWlnaHQ6IDI4MHB4OyB2aXNpYmlsaXR5OiB2aXNpYmxlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKGNhbGMoLTEwMCUgLSAzMjBweCkpOyBvdmVyZmxvdzogaGlkZGVuOyBkaXNwbGF5OiBibG9jazsgcG9pbnRlci1ldmVudHM6IGF1dG87Ij4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBpZD0ia2FydGJyb3MtaW9fMzAweDI1MF8yIiBzdHlsZT0id2lkdGg6IDMzNnB4OyBoZWlnaHQ6IDI4MHB4OyB2aXNpYmlsaXR5OiB2aXNpYmxlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKGNhbGMoMzIwcHggKyAzNnB4KSk7IG92ZXJmbG93OiBoaWRkZW47IGRpc3BsYXk6IGJsb2NrOyBwb2ludGVyLWV2ZW50czogYXV0bzsiPg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iYWRDb250YWluZXJUb3AiPg0KICAgICAgPGRpdiBpZD0ia2FydGJyb3MtaW9fNzI4eDkwIj48L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImFkQ29udGFpbmVyQm90dG9tIj4NCiAgICAgIDxkaXYgaWQ9ImthcnRicm9zLWlvXzk3MHgyNTAiPjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPCEtLSBQaWxsYXIgYWRzIGZvciBjaGFyYWN0ZXIvdHJhY2sgc2VsZWN0IHNjcmVlbnMgLS0+DQogICAgPGRpdiBpZD0iYWRDb250YWluZXJQaWxsYXJzIj4NCiAgICAgIDxkaXYgaWQ9ImthcnRicm9zLWlvXzE2MHg2MDAiPjwvZGl2Pg0KICAgICAgPGRpdiBpZD0ia2FydGJyb3MtaW9fMTYweDYwMF8yIj48L2Rpdj4NCiAgICA8L2Rpdj4NCiAgPC9kaXY+DQoNCiAgPCEtLSBJbmZvcm1hdGlvbiBzZWN0aW9uIChzY3JvbGxzIGJlbG93IGdhbWUpIC0tPg0KICA8ZGl2IGNsYXNzPSJpbmZvLXNlY3Rpb24iPg0KICAgIDwhLS0gTWFpbiBjb250ZW50IGNvbnRhaW5lciAtLT4NCiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPg0KICAgICAgPGgxPkthcnQgQnJvczogRnJlZS10by1QbGF5IE9ubGluZSBSYWNpbmc8L2gxPg0KICAgICAgPHA+S2FydCBCcm9zIGlzIGEgc2ltcGxlLCBmYXN04oCRcGFjZWQga2FydCByYWNpbmcgZ2FtZSB0aGF0J3MgaW5jcmVkaWJseSBlYXN5IHRvIHBpY2sgdXDigJR5ZXQgcGFja2VkIHdpdGggd2lsZA0KICAgICAgICBhbnRpY3MhIFdoZXRoZXIgeW91J3JlIGh1Z2dpbmcgdGhlIHR1cm5zLCBkcmlmdGluZyBhcm91bmQgdHJhY2tzIG9yIGh1cmxpbmcgcG93ZXJ1cHMgd2l0aCBmcmllbmRzLCBLYXJ0IEJyb3MNCiAgICAgICAgZGVsaXZlcnMgbm9u4oCRc3RvcCB0aHJpbGxzIGluIGV2ZXJ5IHJhY2UuPC9wPg0KICAgICAgPHA+VGhpcyBpcyBhIGZyZWUtdG8tcGxheSAuaW8gcmFjaW5nIGdhbWU6IE5vIGRvd25sb2FkcyByZXF1aXJlZOKAlGp1c3QgZmlyZSB1cCB5b3VyIGJyb3dzZXIgKENocm9tZSByZWNvbW1lbmRlZCkNCiAgICAgICAgYW5kIHJhY2UhPC9wPg0KICAgICAgPHA+S2FydCBCcm9zIGlzIHN0aWxsIGluIGVhcmx5IGFjY2VzcyBhbmQgcmVjZWl2aW5nIG9uZ29pbmcgdXBkYXRlczogTmV3IGZlYXR1cmVzLCB0cmFja3MsIGFuZCBrYXJ0cyBhcmUgYWx3YXlzDQogICAgICAgIHJpZ2h0IGFyb3VuZCB0aGUgY29ybmVyLiBQcm92aWRlIGZlZWRiYWNrIG9uIHRoZSBkaXNjb3JkIHRvIGhlbHAgdXMgZGV2ZWxvcCBpbiB0aGUgcmlnaHQgZGlyZWN0aW9uITwvcD4NCg0KICAgICAgPGgyPkNvbnRyb2xzPC9oMj4NCiAgICAgIDx1bD4NCiAgICAgICAgPGxpPjxzdHJvbmc+RHJpdmU6PC9zdHJvbmc+IEFycm93IGtleXMgb3IgV0FTRDwvbGk+DQogICAgICAgIDxsaT48c3Ryb25nPlVzZSBQb3dlcnVwczo8L3N0cm9uZz4gU3BhY2UgYmFyPC9saT4NCiAgICAgICAgPGxpPjxzdHJvbmc+TG9vayBCYWNrOjwvc3Ryb25nPiBMZWZ0IFNoaWZ0PC9saT4NCiAgICAgIDwvdWw+DQoNCiAgICAgIDxkaXYgY2xhc3M9ImNoYW5nZWxvZyI+DQogICAgICAgIDxoMj5MYXN0IENoYW5nZWxvZyBVcGRhdGUgKDEwLzIwLzIwMjUpIHYxLjQ0PC9oMj4NCiAgICAgICAgPHA+8J+bo++4jyBUUkFDS1MhIDMgbmV3IHRyYWNrczogU3BhY2UsIEFuY2llbnQgYW5kIEdhcmRlbjwvcD4NCiAgICAgICAgPHA+8J+Pju+4jyBNT1JFIFJBQ0VSUyEhISBNb3JlIHRvIGNob29zZSBmcm9tLCB1bmxvY2sgdGhlbSBub3cgPC9wPg0KICAgICAgICA8cD7wn5qpIEZMQUdTISBQZXJzb25hbGl6ZSB5b3VyIGthcnQhIDwvcD4NCiAgICAgICAgPHA+8J+PhiBORVcgQ1VQISBDYW4geW91IGJlYXQgRnVyaW91cyBSYWNlcnMgaW4gYSBncmFuZCBwcml4PyA8L3A+DQogICAgICAgIDxwPvCflJMgVU5MT0NLUyEhIEJldHRlciB1bmxvY2sgcHJvZ3Jlc3Npb24gZm9yIG5ldyBwbGF5ZXJzPC9wPg0KICAgICAgICA8cD7wn6qyIEJVRyBGSVhFUyEhPC9wPg0KICAgICAgPC9kaXY+DQoNCiAgICAgIDxkaXYgY2xhc3M9ImZhcSI+DQogICAgICAgIDxoMj5GQVE8L2gyPg0KICAgICAgICA8ZGl2IGNsYXNzPSJmYXEtaXRlbSI+DQogICAgICAgICAgPGgzPldoeSBpc24ndCB0aGUgZ2FtZSBsb2FkaW5nPzwvaDM+DQogICAgICAgICAgPHA+Rmlyc3QsIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbiBhbmQgZW5zdXJlIEthcnQgQnJvcyBpc24ndCBibG9ja2VkIGJ5IHlvdXIgbmV0d29yay4gQWxzbywgdHJ5DQogICAgICAgICAgICBkaXNhYmxpbmcgYW55IGFkIGJsb2NrZXJzLjwvcD4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImZhcS1pdGVtIj4NCiAgICAgICAgICA8aDM+SG93IGRvIEkgcGxheT88L2gzPg0KICAgICAgICAgIDxwPlVzZSB0aGUgYXJyb3cga2V5cyBvciBXQVNEIHRvIGRyaXZlLCBhbmQgcHJlc3MgdGhlIHNwYWNlIGJhciB0byB1c2UgaXRlbXMuIEl0J3Mgc3RyYWlnaHRmb3J3YXJk4oCUcGljayB5b3VyDQogICAgICAgICAgICBjaGFyYWN0ZXIsIHRyYWNrLCBzdGFydCB5b3VyIGVuZ2luZXMsIGFuZCBoYXZlIGZ1biE8L3A+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJmYXEtaXRlbSI+DQogICAgICAgICAgPGgzPldoaWNoIGJyb3dzZXIgc2hvdWxkIEkgdXNlPzwvaDM+DQogICAgICAgICAgPHA+V2UgcmVjb21tZW5kIENocm9tZSBmb3IgdGhlIGJlc3QgZXhwZXJpZW5jZS4gS2FydCBCcm9zIGFsc28gd29ya3Mgb24gRmlyZWZveCBhbmQgU2FmYXJpLCBidXQgQ2hyb21lIGlzDQogICAgICAgICAgICB0aGUgb25seSBicm93c2VyIGZ1bGx5IHN1cHBvcnRlZC4gVGhlIGdhbWUgaXMgb3B0aW1pemVkIHRvIHJ1biB3ZWxsIGluIGJyb3dzZXIgb24gYWxsIGNvbXB1dGVycywgZnJvbQ0KICAgICAgICAgICAgc2Nob29sIENocm9tZWJvb2tzIHRvIHRoZSBiZXN0IGdhbWluZyBQQy48L3A+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJmYXEtaXRlbSI+DQogICAgICAgICAgPGgzPkFyZSB0aGVyZSBtb3JlIEJyb3MgZ2FtZXM/PC9oMz4NCiAgICAgICAgICA8cD5EZWZpbml0ZWx5ISBDaGVjayBvdXQgPGEgaHJlZj0iaHR0cHM6Ly9mb290YmFsbGJyb3MuaW8iIHRhcmdldD0iX2JsYW5rIj5Gb290YmFsbCBCcm9zPC9hPiwgPGEgaHJlZj0iaHR0cHM6Ly9iYXNrZXRicm9zLmlvIiB0YXJnZXQ9Il9ibGFuayI+QmFza2V0IEJyb3M8L2E+LCA8YSBocmVmPSJodHRwczovL3NvY2NlcmJyb3MuZ2ciIHRhcmdldD0iX2JsYW5rIj5Tb2NjZXIgQnJvczwvYT4sIDxhIGhyZWY9Imh0dHBzOi8vd3Jlc3RsZWJyb3MuaW8iIHRhcmdldD0iX2JsYW5rIj5XcmVzdGxlIEJyb3M8L2E+LCBhbmQNCiAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vYmFzZWJhbGxicm9zLmlvIiB0YXJnZXQ9Il9ibGFuayI+QmFzZWJhbGwgQnJvczwvYT4uIFlvdSBjYW4gZmluZCBhZGRpdGlvbmFsIGZyZWUgd2ViDQogICAgICAgICAgICBnYW1lcyBhdCA8YSBocmVmPSJodHRwczovL2lvZ2FtZXMuc3BhY2UiIHRhcmdldD0iX2JsYW5rIj5pb2dhbWVzLnNwYWNlPC9hPiENCiAgICAgICAgICA8L3A+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJmYXEtaXRlbSI+DQogICAgICAgICAgPGgzPkRvIHlvdSBoYXZlIGEgZmF2b3JpdGUgdHJhY2sgb3IgcmFjZXI/PC9oMz4NCiAgICAgICAgICA8cD5XZSBzdXJlIGRvLCBidXQgd2UncmUgbm90IHNwaWxsaW5nIHRoZSBiZWFucyEg8J+YiVRyeSBhbGwgOSB0cmFja3MgYW5kIGxldCB1cyBrbm93IHlvdXIgZmF2b3JpdGUuPC9wPg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iZmFxLWl0ZW0iPg0KICAgICAgICAgIDxoMz5XaGVuIGlzIEthcnQgQnJvcyByZWxlYXNpbmc/PC9oMz4NCiAgICAgICAgICA8cD5JdCdzIGxpdmUgcmlnaHQgbm93IEJybyEgVW5sb2NrIGFsbCB0aGUgY29udGVudCBhbmQgZ2V0IHRvIHRoZSBmaW5pc2ggbGluZSBmaXJzdDwvcD4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImZhcS1pdGVtIj4NCiAgICAgICAgICA8aDM+SSB3YW50IE1PUkUgaW5mbyBhYm91dCB0aGUgZ2FtZSBicm8hPC9oMz4NCiAgICAgICAgICA8cD5XZSBoaWdobHkgcmVjb21tZW5kIHlvdSBzY3JvbGwgdXAgYW5kIGp1bXAgaW50byBhIGdhbWUsIGJ1dCBzaW5jZSB5b3UgYXNrZWTigKY8L3A+DQoNCiAgICAgICAgICA8aDQ+U2luZ2xl4oCRUGxheWVyIFJhY2luZzwvaDQ+DQogICAgICAgICAgPHA+PHN0cm9uZz5UYWtlIHRoZSBsZWFkOjwvc3Ryb25nPiBTdGFydCBpbiBRdWljayBQbGF5IG1vZGUgdG8gcGVyZmVjdCB5b3VyIGRyaWZ0aW5nIGFyb3VuZCB0aWdodCBjb3JuZXJzDQogICAgICAgICAgICBhbmQgbmFpbCB0aG9zZSBib29zdOKAkWZpbGxlZCBzdHJhaWdodHMuPC9wPg0KICAgICAgICAgIDxwPjxzdHJvbmc+RmlyZSBmaXJzdDo8L3N0cm9uZz4gRWFybiBpbuKAkXJhY2UgcmV3YXJkcyB0byB1bmxvY2sgYSBob3N0IG9mIHdlaXJkIGFuZCB3b25kZXJmdWwNCiAgICAgICAgICAgIGNoYXJhY3RlcnPigJRjaG9vc2UgZnJvbSB5b3VyIHZpYnJhbnQgcm9zdGVyIG9mIGRyaXZlcnMsIGVhY2ggd2l0aCB1bmlxdWUgc3RhdHMuPC9wPg0KICAgICAgICAgIDxwPjxzdHJvbmc+VG91cm5hbWVudCBtb2RlOjwvc3Ryb25nPiBHYW1lIGZvciBtb3JlIGRyaXZpbmc/IEp1bXAgaW50byB0aGUgQnJvIEN1cCB0byBmYWNlIG9mZiBvbiB0aHJlZQ0KICAgICAgICAgICAgYmFjay10by1iYWNrIG1hcHMsIHJhY2luZyB5b3VyIHdheSB0byBwb2xlIHBvc2l0aW9uIGFuZCBjbGFpbWluZyB0aGUgdHJvcGh5LjwvcD4NCg0KICAgICAgICAgIDxoND5NdWx0aeKAkVBsYXllciBSYWNpbmc8L2g0Pg0KICAgICAgICAgIDxwPjxzdHJvbmc+T25saW5lIFJhY2VzOjwvc3Ryb25nPiBIb3N0IG9yIEpvaW4geW91ciBmcmllbmRzIGluIGZyYW50aWMgb25saW5lIG11bHRpcGxheWVyIHJlYWzigJF0aW1lIHJhY2VzDQogICAgICAgICAgPC9wPg0KICAgICAgICAgIDxwPjxzdHJvbmc+Q2hhb3RpYyBQb3dlcuKAkVVwczo8L3N0cm9uZz4gR3JhYiByb2NrZXRzLCBzcGVlZCBib29zdHMsIHNoaWVsZHMsIGFuZCBtb3Jl4oCUdGltaW5nIHlvdXIgaXRlbXMNCiAgICAgICAgICAgIHBlcmZlY3RseSBjYW4gdHVybiB0aGUgdGlkZSBvZiBhbnkgcmFjZS48L3A+DQoNCiAgICAgICAgICA8cD5HZXQgcmVhZHkgdG8gcmV2IHlvdXIgZW5naW5lcywgdW5sZWFzaCBtYXloZW0gd2l0aCBwb3dlcuKAkXVwcywgYW5kIGJlY29tZSB0aGUgdWx0aW1hdGUga2FydCByYWNpbmcNCiAgICAgICAgICAgIGNoYW1waW9u4oCUc29sbyBvciBvbmxpbmXigJRhdCBrYXJ0YnJvcy5pbyE8L3A+DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQoNCiAgICAgIDxkaXYgY2xhc3M9InNvY2lhbCI+DQogICAgICAgIDxwPlRvIGtlZXAgdXAgdG8gZGF0ZSwgc2lnbiB1cCBmb3Igb3VyIGVtYWlsIG5ld3NsZXR0ZXIgPGEgaHJlZj0iaHR0cHM6Ly9ibHVld2l6YXJkLmNvbS9zdWJzY3JpYmUtdG8tYndkLyI+cmlnaHQNCiAgICAgICAgICAgIGhlcmUhPC9hPjwvcD4NCg0KICAgICAgICA8cD5Gb2xsb3cgdXMgb24gc29jaWFsIG1lZGlhIHRvIHN0YXkgdXBkYXRlZCB3aXRoIHRoZSBsYXRlc3QgbmV3cyBhbmQgZmVhdHVyZXMhPC9wPg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8IS0tIFNvY2lhbCBsaW5rcyAtLT4NCiAgICA8ZGl2IGNsYXNzPSJzb2NpYWwtbGlua3MiPg0KICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkLmNvbS9pbnZpdGUvYmx1ZXdpemFyZCI+PGltZyBzcmM9Imh0dHBzOi8venVja3ZtdXNrLmNvbS9pbWcvZGlzY29yZC5wbmciIGFsdD0iRGlzY29yZCI+PC9hPg0KICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2JsdWV3aXphcmRkaWdpdGFsIj48aW1nIHNyYz0iaHR0cHM6Ly96dWNrdm11c2suY29tL2ltZy9mYWNlYm9vay5wbmciIGFsdD0iRmFjZWJvb2siPjwvYT4NCiAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnRpa3Rvay5jb20vQGJsdWV3aXphcmRkaWdpdGFsIj48aW1nIHNyYz0iaHR0cHM6Ly96dWNrdm11c2suY29tL2ltZy90aWt0b2sucG5nIiBhbHQ9IlRpa1RvayI+PC9hPg0KICAgICAgPGEgaHJlZj0iaHR0cHM6Ly90d2l0dGVyLmNvbS9ibHVld2l6YXJkZ2FtZXMiPjxpbWcgc3JjPSJodHRwczovL3p1Y2t2bXVzay5jb20vaW1nL3R3aXR0ZXIucG5nIiBhbHQ9IlR3aXR0ZXIiPjwvYT4NCiAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vYmx1ZXdpemFyZGdhbWVzLyI+PGltZyBzcmM9Imh0dHBzOi8venVja3ZtdXNrLmNvbS9pbWcvaW5zdGFncmFtLnBuZyIgYWx0PSJJbnN0YWdyYW0iPjwvYT4NCiAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2JsdWV3aXphcmRkaWdpdGFsIj48aW1nIHNyYz0iaHR0cHM6Ly96dWNrdm11c2suY29tL2ltZy95b3V0dWJlLnBuZyIgYWx0PSJZb3V0dWJlIj48L2E+DQogICAgICA8YSBocmVmPSIvY2RuLWNnaS9sL2VtYWlsLXByb3RlY3Rpb24jNjUwYzBiMDMwYTI1MDcwOTEwMDAxMjBjMWYwNDE3MDE0YjA2MGEwOCI+PGltZyBzcmM9Imh0dHBzOi8venVja3ZtdXNrLmNvbS9pbWcvZW1haWwucG5nIiBhbHQ9IkVtYWlsIj48L2E+DQogICAgPC9kaXY+DQoNCiAgICA8IS0tIEFkIGNvbnRhaW5lcnMgbW92ZWQgb3V0IG9mIGluZm8tc2VjdGlvbiB0byBiZSBpbiBnbG9iYWwgc2NvcGUgLS0+DQogIDwvZGl2Pg0KICA8IS0tIDwvZGl2PiAtLT4NCg0KICA8IS0tIFZpZGVvIGFkIG92ZXJsYXkgLS0+DQogIDxkaXYgaWQ9InZpZGVvQWRPdmVybGF5Ij4NCiAgICA8ZGl2IGlkPSJ2aWRlb2FkIj4NCiAgICAgIDwhLS0gVGhlIEFkaW5QbGF5IHZpZGVvIGFkIHdpbGwgYmUgaW5qZWN0ZWQgaGVyZSAtLT4NCiAgICA8L2Rpdj4NCiAgPC9kaXY+DQoNCiAgPCEtLSBTY3JpcHRzIC0tPg0KICA8c2NyaXB0IGRhdGEtY2Zhc3luYz0iZmFsc2UiIHNyYz0iL2Nkbi1jZ2kvc2NyaXB0cy81YzVkZDcyOC9jbG91ZGZsYXJlLXN0YXRpYy9lbWFpbC1kZWNvZGUubWluLmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9IlRlbXBsYXRlRGF0YS9wbGVhc2Vyb3RhdGUubWluLmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdD4NCiAgLy8gV2FpdCBmb3IgRE9NIHRvIGJlIGZ1bGx5IGxvYWRlZA0KICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7DQogICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0eS1jYW52YXMiKTsNCiAgICBsZXQgbG9hZGluZ0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0eS1sb2FkaW5nLWJhciIpOw0KDQogICAgaWYgKCFjYW52YXMgfHwgIWxvYWRpbmdCYXIpIHsNCiAgICAgIGNvbnNvbGUuZXJyb3IoIlJlcXVpcmVkIGVsZW1lbnRzIG5vdCBmb3VuZCEiKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB1bml0eVNob3dCYW5uZXIobXNnLCB0eXBlKSB7DQogICAgICBsZXQgd2FybmluZ0Jhbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0eS13YXJuaW5nIik7DQoNCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbm5lclZpc2liaWxpdHkoKSB7DQogICAgICAgIHdhcm5pbmdCYW5uZXIuc3R5bGUuZGlzcGxheSA9IHdhcm5pbmdCYW5uZXIuY2hpbGRyZW4ubGVuZ3RoID8gImJsb2NrIiA6ICJub25lIjsNCiAgICAgIH0NCiAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgIGRpdi5pbm5lckhUTUwgPSBtc2c7DQogICAgICB3YXJuaW5nQmFubmVyLmFwcGVuZENoaWxkKGRpdik7DQoNCiAgICAgIGlmICh0eXBlID09PSAiZXJyb3IiKSB7DQogICAgICAgIGRpdi5zdHlsZSA9ICJiYWNrZ3JvdW5kOiByZWQ7IHBhZGRpbmc6IDEwcHg7IjsNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gIndhcm5pbmciKSB7DQogICAgICAgIGRpdi5zdHlsZSA9ICJiYWNrZ3JvdW5kOiB5ZWxsb3c7IHBhZGRpbmc6IDEwcHg7IjsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgd2FybmluZ0Jhbm5lci5yZW1vdmVDaGlsZChkaXYpOw0KICAgICAgICAgIHVwZGF0ZUJhbm5lclZpc2liaWxpdHkoKTsNCiAgICAgICAgfSwgNTAwMCk7DQogICAgICB9DQogICAgICB1cGRhdGVCYW5uZXJWaXNpYmlsaXR5KCk7DQogICAgfQ0KDQogICAgLy8gU3BsaXQgZmlsZSBsb2FkaW5nIGZ1bmN0aW9uDQogICAgYXN5bmMgZnVuY3Rpb24gbG9hZFNwbGl0RGF0YShiYXNlVXJsLCBwYXJ0cykgew0KICAgICAgY29uc3QgY2h1bmtzID0gW107DQogICAgICBsZXQgdG90YWxTaXplID0gMDsNCiAgICAgIA0KICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcGFydHM7IGkrKykgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0ucGFydCR7aX1gKTsNCiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkICR7YmFzZVVybH0ucGFydCR7aX1gKTsNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgY2h1bmsgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgIGNodW5rcy5wdXNoKGNodW5rKTsNCiAgICAgICAgICB0b3RhbFNpemUgKz0gY2h1bmsuYnl0ZUxlbmd0aDsNCiAgICAgICAgICBjb25zb2xlLmxvZyhgTG9hZGVkIHBhcnQgJHtpfS8ke3BhcnRzfSBvZiAke2Jhc2VVcmx9ICgke2NodW5rLmJ5dGVMZW5ndGh9IGJ5dGVzKWApOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGxvYWRpbmcgcGFydCAke2l9OmAsIGVycm9yKTsNCiAgICAgICAgICB0aHJvdyBlcnJvcjsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvLyBNZXJnZSBhbGwgY2h1bmtzIGludG8gYSBzaW5nbGUgQXJyYXlCdWZmZXINCiAgICAgIGNvbnN0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KHRvdGFsU2l6ZSk7DQogICAgICBsZXQgb2Zmc2V0ID0gMDsNCiAgICAgIA0KICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHsNCiAgICAgICAgbWVyZ2VkLnNldChuZXcgVWludDhBcnJheShjaHVuayksIG9mZnNldCk7DQogICAgICAgIG9mZnNldCArPSBjaHVuay5ieXRlTGVuZ3RoOw0KICAgICAgfQ0KICAgICAgDQogICAgICBjb25zb2xlLmxvZyhgTWVyZ2VkICR7cGFydHN9IHBhcnRzIGludG8gJHt0b3RhbFNpemV9IGJ5dGVzYCk7DQogICAgICANCiAgICAgIGNvbnN0IG1lcmdlZEJsb2IgPSBuZXcgQmxvYihbbWVyZ2VkLmJ1ZmZlcl0pOw0KICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwobWVyZ2VkQmxvYik7DQogICAgfQ0KDQogICAgdmFyIGJ1aWxkVXJsID0gIkJ1aWxkIjsNCiAgICB2YXIgbG9hZGVyVXJsID0gYnVpbGRVcmwgKyAiLzUwYWFlODg4NWY4MTI4NzQ2YWNiY2YzMDMxNjlmMDZkLmxvYWRlci5qcyI7DQogICAgdmFyIGNvbmZpZyA9IHsNCiAgICAgIGFyZ3VtZW50czogW10sDQogICAgICBkYXRhVXJsOiBidWlsZFVybCArICIvOGEzNmZmYjdhMTRmNmZkMWNlZTk1NDBlN2EyN2FkNWQuZGF0YS51bml0eXdlYiIsDQogICAgICBmcmFtZXdvcmtVcmw6IGJ1aWxkVXJsICsgIi9mYTJlZTZlZDBkOTI4ZmIwNTRhMDY5NTViZWUwM2NlYy5mcmFtZXdvcmsuanMudW5pdHl3ZWIiLA0KICAgICAgY29kZVVybDogYnVpbGRVcmwgKyAiL2RkZGFhNWZhNDQwMmExOTViNTc1ZTQyNjExMzY4MTQyLndhc20udW5pdHl3ZWIiLA0KICAgICAgc3RyZWFtaW5nQXNzZXRzVXJsOiAiU3RyZWFtaW5nQXNzZXRzIiwNCiAgICAgIGNvbXBhbnlOYW1lOiAiQmx1ZVdpemFyZCIsDQogICAgICBwcm9kdWN0TmFtZTogIktBUlQgQlJPUyEiLA0KICAgICAgcHJvZHVjdFZlcnNpb246ICIxLjQzIiwNCiAgICAgIHNob3dCYW5uZXI6IHVuaXR5U2hvd0Jhbm5lciwNCiAgICB9Ow0KDQogICAgbG9hZGluZ0Jhci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCg0KICAgIC8vIExvYWQgQk9USCBzcGxpdCBmaWxlcyAoYWRqdXN0IHRoZSBudW1iZXIgMiB0byBtYXRjaCB5b3VyIGFjdHVhbCBwYXJ0IGNvdW50KQ0KICAgIFByb21pc2UuYWxsKFsNCiAgICAgIGxvYWRTcGxpdERhdGEoYnVpbGRVcmwgKyAiLzhhMzZmZmI3YTE0ZjZmZDFjZWU5NTQwZTdhMjdhZDVkLmRhdGEudW5pdHl3ZWIiLCAyKSwNCiAgICAgIGxvYWRTcGxpdERhdGEoYnVpbGRVcmwgKyAiL2RkZGFhNWZhNDQwMmExOTViNTc1ZTQyNjExMzY4MTQyLndhc20udW5pdHl3ZWIiLCAyKQ0KICAgIF0pDQogICAgLnRoZW4oKFtkYXRhVXJsLCB3YXNtVXJsXSkgPT4gew0KICAgICAgY29uZmlnLmRhdGFVcmwgPSBkYXRhVXJsOw0KICAgICAgY29uZmlnLmNvZGVVcmwgPSB3YXNtVXJsOw0KICAgICAgDQogICAgICBjb25zb2xlLmxvZygiQWxsIHNwbGl0IGZpbGVzIGxvYWRlZCBhbmQgbWVyZ2VkIHN1Y2Nlc3NmdWxseSIpOw0KICAgICAgDQogICAgICBsZXQgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOw0KICAgICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgY3JlYXRlVW5pdHlJbnN0YW5jZShjYW52YXMsIGNvbmZpZywgKHByb2dyZXNzKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coYFVuaXR5IGxvYWRpbmc6ICR7TWF0aC5yb3VuZChwcm9ncmVzcyAqIDEwMCl9JWApOw0KICAgICAgICB9KS50aGVuKCh1bml0eUluc3RhbmNlKSA9PiB7DQogICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UgPSB1bml0eUluc3RhbmNlOw0KICAgICAgICAgIGxvYWRpbmdCYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICANCiAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGRhdGFVcmwpOw0KICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwod2FzbVVybCk7DQogICAgICAgIH0pLmNhdGNoKChtZXNzYWdlKSA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcigiVW5pdHkgaW5zdGFuY2UgY3JlYXRpb24gZmFpbGVkOiIsIG1lc3NhZ2UpOw0KICAgICAgICAgIGFsZXJ0KG1lc3NhZ2UpOw0KICAgICAgICB9KTsNCiAgICAgIH07DQogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7DQogICAgfSkNCiAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBzcGxpdCBmaWxlczoiLCBlcnJvcik7DQogICAgICBhbGVydCgiRmFpbGVkIHRvIGxvYWQgZ2FtZSBmaWxlczogIiArIGVycm9yLm1lc3NhZ2UpOw0KICAgIH0pOw0KICB9KTsNCjwvc2NyaXB0Pg0KPC9ib2R5Pg0KDQo8L2h0bWw+";
