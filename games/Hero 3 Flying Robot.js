window.game = "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuLXVzIj4KICA8aGVhZD4KICAgICAgPGJhc2UgaHJlZiA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZmFyYWxvbmcvYWxsQG1haW4vaGVybzMvIj4KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIj4KICAgIAogICAgPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSJUZW1wbGF0ZURhdGEvZmF2aWNvbi5pY28iPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJUZW1wbGF0ZURhdGEvc3R5bGUuY3NzIj4KICA8L2hlYWQ+CiAgPGJvZHkgY2xhc3M9ImRhcmsiPgogICAgICA8aDEgaWQgPSAibG9hZCI+TG9hZGluZy4uLjwvaDE+CiAgICA8ZGl2IGlkPSJ1bml0eS1jb250YWluZXIiIGNsYXNzPSJ1bml0eS1kZXNrdG9wIj4KICAgICAgPGNhbnZhcyBpZD0idW5pdHktY2FudmFzIj48L2NhbnZhcz4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0ibG9hZGluZy1jb3ZlciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICA8ZGl2IGlkPSJ1bml0eS1sb2FkaW5nLWJhciI+CiAgICAgICAgPGRpdiBpZD0idW5pdHktbG9nbyI+PGltZyBzcmM9ImxvZ28ucG5nIj48L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJ1bml0eS1wcm9ncmVzcy1iYXItZW1wdHkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICAgICAgICA8ZGl2IGlkPSJ1bml0eS1wcm9ncmVzcy1iYXItZnVsbCI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3Bpbm5lciI+PC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSJ1bml0eS1mdWxsc2NyZWVuLWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48L2Rpdj4KICAgIDxzY3JpcHQgc3JjID0gImpzemlwLmpzIj48L3NjcmlwdD4KICAgICA8c2NyaXB0PgogICAgICAgICAKICAgICAgCgogICAgICAKICAgICAgCiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbmRDb21iaW5lWmlwKGJpblVybHMpIHsKICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKGJpblVybHMubWFwKHVybCA9PiBmZXRjaCh1cmwpKSk7CiAgICBjb25zdCBidWZmZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwocmVzcG9uc2VzLm1hcChyZXMgPT4gcmVzLmFycmF5QnVmZmVyKCkpKTsKICAgIGxldCB0b3RhbExlbmd0aCA9IGJ1ZmZlcnMucmVkdWNlKChhY2MsIGJ1ZikgPT4gYWNjICsgYnVmLmJ5dGVMZW5ndGgsIDApOwogICAgbGV0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpOwogICAgbGV0IG9mZnNldCA9IDA7CiAgICBmb3IgKGxldCBidWYgb2YgYnVmZmVycykgewogICAgICAgIGNvbWJpbmVkLnNldChuZXcgVWludDhBcnJheShidWYpLCBvZmZzZXQpOwogICAgICAgIG9mZnNldCArPSBidWYuYnl0ZUxlbmd0aDsKICAgIH0KICAgIHJldHVybiBjb21iaW5lZDsKfQoKYXN5bmMgZnVuY3Rpb24gdW56aXBXZWJwRnJvbUV4dGVybmFsQmlucyhiaW5VcmxzKSB7CiAgICBjb25zdCBibG9iVXJscyA9IHt9OwogICAgY29uc3QgYnl0ZXMgPSBhd2FpdCBmZXRjaEFuZENvbWJpbmVaaXAoYmluVXJscyk7CiAgICBjb25zdCB6aXAgPSBhd2FpdCBKU1ppcC5sb2FkQXN5bmMoYnl0ZXMpOwogICAgZm9yIChjb25zdCBbZmlsZW5hbWUsIGZpbGVdIG9mIE9iamVjdC5lbnRyaWVzKHppcC5maWxlcykpIHsKICAgICAgICBpZiAoIWZpbGUuZGlyKSB7CiAgICAgICAgICAgIGxldCBtaW1lID0gJyc7CiAgICAgICAgICAgIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLmpzJykgfHwgZmlsZW5hbWUuZW5kc1dpdGgoJy5tanMnKSkgewogICAgICAgICAgICAgICAgbWltZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuY3NzJykpIHsKICAgICAgICAgICAgICAgIG1pbWUgPSAndGV4dC9jc3MnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuaHRtbCcpKSB7CiAgICAgICAgICAgICAgICBtaW1lID0gJ3RleHQvaHRtbCc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy53ZWJwJykpIHsKICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2Uvd2VicCc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5wbmcnKSkgewogICAgICAgICAgICAgICAgbWltZSA9ICdpbWFnZS9wbmcnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuanBnJykgfHwgZmlsZW5hbWUuZW5kc1dpdGgoJy5qcGVnJykpIHsKICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2UvanBlZyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgcmF3QmxvYiA9IGF3YWl0IGZpbGUuYXN5bmMoImJsb2IiKTsKICAgICAgICAgICAgY29uc3QgYmxvYiA9IG1pbWUgPyBuZXcgQmxvYihbcmF3QmxvYl0sIHsgdHlwZTogbWltZSB9KSA6IHJhd0Jsb2I7CiAgICAgICAgICAgIGNvbnN0IGJsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiRXh0cmFjdGVkOiIsIGZpbGVuYW1lKTsKICAgICAgICAgICAgYmxvYlVybHNbZmlsZW5hbWVdID0gYmxvYlVybDsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gYmxvYlVybHM7Cn0KCmxldCBibG9iVXJsc3MgPSAiIjsKbGV0IGJpblBhcnRzID0gWwogICJwYXJ0cy0xLmJpbiIsCiAgInBhcnRzLTIuYmluIiwKICAicGFydHMtMy5iaW4iLApdOwoKdW56aXBXZWJwRnJvbUV4dGVybmFsQmlucyhiaW5QYXJ0cykudGhlbihibG9iVXJscyA9PiB7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9hZCIpLnJlbW92ZSgpCiAgICBibG9iVXJsc3MgPSBibG9iVXJsczsKICAgIGNvbnN0IE9SSUdJTkFMX0NSRUFURV9FTEVNRU5UID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudDsKICAgIGNvbnN0IE9SSUdJTkFMX1NFVF9BVFRSSUJVVEUgPSBFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGU7CgogICAgCiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24odGFnTmFtZSkgewogICAgICAgIGNvbnN0IGVsID0gT1JJR0lOQUxfQ1JFQVRFX0VMRU1FTlQuY2FsbCh0aGlzLCB0YWdOYW1lKTsKCiAgICAgICAgaWYgKHRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NjcmlwdCcpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsLCAnc3JjJywgewogICAgICAgICAgICAgICAgc2V0KG5ld1NyYykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZXh0cmFjdEZpbGVuYW1lKG5ld1NyYyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBibG9iVXJsc3NbZmlsZW5hbWVdOwogICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgT1JJR0lOQUxfU0VUX0FUVFJJQlVURS5jYWxsKGVsLCAnc3JjJywgcmVwbGFjZW1lbnQpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE9SSUdJTkFMX1NFVF9BVFRSSUJVVEUuY2FsbChlbCwgJ3NyYycsIG5ld1NyYyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCdzcmMnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZWw7CiAgICB9OwoKICAgIAogICAgRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgICAgICBpZiAodGhpcy50YWdOYW1lID09PSAnU0NSSVBUJyAmJiBuYW1lID09PSAnc3JjJykgewogICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGV4dHJhY3RGaWxlbmFtZSh2YWx1ZSk7CiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gYmxvYlVybHNzW2ZpbGVuYW1lXTsKICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50KSB7CiAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwodGhpcywgbmFtZSwgcmVwbGFjZW1lbnQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gT1JJR0lOQUxfU0VUX0FUVFJJQlVURS5jYWxsKHRoaXMsIG5hbWUsIHZhbHVlKTsKICAgIH07CgogICAgZnVuY3Rpb24gZXh0cmFjdEZpbGVuYW1lKHVybCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZikucGF0aG5hbWUuc3BsaXQoJy8nKS5wb3AoKTsKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgcmV0dXJuIHVybC5zcGxpdCgnLycpLnBvcCgpOyAKICAgICAgICB9CiAgICB9CgoKY29uc3QgaW1hZ2VTcmNEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihJbWFnZS5wcm90b3R5cGUsICdzcmMnKTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KEltYWdlLnByb3RvdHlwZSwgJ3NyYycsIHsKICBzZXQodmFsdWUpIHsKICAgIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodmFsdWUpOwogICAgaW1hZ2VTcmNEZXNjcmlwdG9yLnNldC5jYWxsKHRoaXMsIG5ld1VSTCk7CiAgfSwKICBnZXQ6IGltYWdlU3JjRGVzY3JpcHRvci5nZXQsCiAgY29uZmlndXJhYmxlOiB0cnVlLAogIGVudW1lcmFibGU6IHRydWUsCn0pOwoKCmNvbnN0IHNjcmlwdFNyY0Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEhUTUxTY3JpcHRFbGVtZW50LnByb3RvdHlwZSwgJ3NyYycpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTFNjcmlwdEVsZW1lbnQucHJvdG90eXBlLCAnc3JjJywgewogIHNldCh2YWx1ZSkgewogICAgY29uc3QgbmV3VVJMID0gcmV3cml0ZVVSTCh2YWx1ZSk7CiAgICBzY3JpcHRTcmNEZXNjcmlwdG9yLnNldC5jYWxsKHRoaXMsIG5ld1VSTCk7CiAgfSwKICBnZXQ6IHNjcmlwdFNyY0Rlc2NyaXB0b3IuZ2V0LAogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICBlbnVtZXJhYmxlOiB0cnVlLAp9KTsKCgpjb25zdCBsaW5rSHJlZkRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEhUTUxMaW5rRWxlbWVudC5wcm90b3R5cGUsICdocmVmJyk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MTGlua0VsZW1lbnQucHJvdG90eXBlLCAnaHJlZicsIHsKICBzZXQodmFsdWUpIHsKICAgIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodmFsdWUpOwogICAgbGlua0hyZWZEZXNjcmlwdG9yLnNldC5jYWxsKHRoaXMsIG5ld1VSTCk7CiAgfSwKICBnZXQ6IGxpbmtIcmVmRGVzY3JpcHRvci5nZXQsCiAgY29uZmlndXJhYmxlOiB0cnVlLAogIGVudW1lcmFibGU6IHRydWUsCn0pOwoKCmNvbnN0IG1lZGlhU3JjRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmMnKTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjJywgewogIHNldCh2YWx1ZSkgewogICAgY29uc3QgbmV3VVJMID0gcmV3cml0ZVVSTCh2YWx1ZSk7CiAgICBtZWRpYVNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsKICB9LAogIGdldDogbWVkaWFTcmNEZXNjcmlwdG9yLmdldCwKICBjb25maWd1cmFibGU6IHRydWUsCiAgZW51bWVyYWJsZTogdHJ1ZSwKfSk7CgovLyBmZXRjaApjb25zdCBvcmlnaW5hbEZldGNoID0gd2luZG93LmZldGNoOwp3aW5kb3cuZmV0Y2ggPSBmdW5jdGlvbihyZXNvdXJjZSwgaW5pdCkgewoKICBpZiAodHlwZW9mIHJlc291cmNlID09PSAic3RyaW5nIikgewogIC8vY29uc29sZS5sb2cocmVzb3VyY2UpCiAgICByZXNvdXJjZSA9IHJld3JpdGVVUkwocmVzb3VyY2UpOwogIH0gZWxzZSBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7CiAgICByZXNvdXJjZSA9IG5ldyBSZXF1ZXN0KHJld3JpdGVVUkwocmVzb3VyY2UudXJsKSwgcmVzb3VyY2UpOwogIH0KICByZXR1cm4gb3JpZ2luYWxGZXRjaC5jYWxsKHRoaXMsIHJlc291cmNlLCBpbml0KTsKfTsKCi8vIFhNTEh0dHBSZXF1ZXN0CmNvbnN0IG9yaWdpbmFsT3BlbiA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuOwpYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCAuLi5yZXN0KSB7CiAgY29uc3QgbmV3VVJMID0gcmV3cml0ZVVSTCh1cmwpOwogIHJldHVybiBvcmlnaW5hbE9wZW4uY2FsbCh0aGlzLCBtZXRob2QsIG5ld1VSTCwgLi4ucmVzdCk7Cn07CgoKY29uc3QgT3JpZ2luYWxBdWRpbyA9IHdpbmRvdy5BdWRpbzsKd2luZG93LkF1ZGlvID0gZnVuY3Rpb24oc3JjKSB7CiAgY29uc3QgYXVkaW8gPSBuZXcgT3JpZ2luYWxBdWRpbygpOwogIGlmIChzcmMpIHsKICAgIGF1ZGlvLnNyYyA9IHJld3JpdGVVUkwoc3JjKTsKICB9CiAgcmV0dXJuIGF1ZGlvOwp9Owp3aW5kb3cuQXVkaW8ucHJvdG90eXBlID0gT3JpZ2luYWxBdWRpby5wcm90b3R5cGU7CgoKZnVuY3Rpb24gcmV3cml0ZVVSTChvcmlnaW5hbCkgewogIHZhciB0cmltbWVkID0gb3JpZ2luYWwuc3BsaXQoIi8iKS5wb3AoKTsKICAvL2NvbnNvbGUubG9nKHRyaW1tZWQpCiAgaWYgKHRyaW1tZWQuaW5jbHVkZXMoIj8iKSkgdHJpbW1lZCA9IHRyaW1tZWQuc3BsaXQoIj8iKVswXQogIHJldHVybiBibG9iVXJsc3NbdHJpbW1lZF0gfHwgb3JpZ2luYWw7Cn0KICAgICAgY29uc3QgaGlkZUZ1bGxTY3JlZW5CdXR0b24gPSAiMSI7CiAgICAgIGNvbnN0IGJ1aWxkVXJsID0gIkJ1aWxkIjsKICAgICAgY29uc3QgbG9hZGVyVXJsID0gYnVpbGRVcmwgKyAiL0hlcm8zX0ZseWluZ1JvYm90X0dELmxvYWRlci5qcyI7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICBkYXRhVXJsOiBidWlsZFVybCArICIvSGVybzNfRmx5aW5nUm9ib3RfR0QuZGF0YS51bml0eXdlYiIsCiAgICAgICAgZnJhbWV3b3JrVXJsOiBidWlsZFVybCArICIvSGVybzNfRmx5aW5nUm9ib3RfR0QuZnJhbWV3b3JrLmpzLnVuaXR5d2ViIiwKICAgICAgICBjb2RlVXJsOiBidWlsZFVybCArICIvSGVybzNfRmx5aW5nUm9ib3RfR0Qud2FzbS51bml0eXdlYiIsCiAgICAgICAgc3RyZWFtaW5nQXNzZXRzVXJsOiAiU3RyZWFtaW5nQXNzZXRzIiwKICAgICAgICBjb21wYW55TmFtZTogIkdvR29NYW4iLAogICAgICAgIHByb2R1Y3ROYW1lOiAiRmx5aW5nIFJvYm90IiwKICAgICAgICBwcm9kdWN0VmVyc2lvbjogIjAuMSIsCiAgICAgIH07CgogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY29udGFpbmVyIik7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jYW52YXMiKTsKICAgICAgY29uc3QgbG9hZGluZ0NvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2xvYWRpbmctY292ZXIiKTsKICAgICAgY29uc3QgcHJvZ3Jlc3NCYXJFbXB0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1wcm9ncmVzcy1iYXItZW1wdHkiKTsKICAgICAgY29uc3QgcHJvZ3Jlc3NCYXJGdWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LXByb2dyZXNzLWJhci1mdWxsIik7CiAgICAgIGNvbnN0IGZ1bGxzY3JlZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktZnVsbHNjcmVlbi1idXR0b24iKTsKICAgICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJyk7CgogICAgICBjb25zdCBjYW5GdWxsc2NyZWVuID0gKGZ1bmN0aW9uKCkgewogICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFsKICAgICAgICAgICAgJ2V4aXRGdWxsc2NyZWVuJywKICAgICAgICAgICAgJ3dlYmtpdEV4aXRGdWxsc2NyZWVuJywKICAgICAgICAgICAgJ3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLAogICAgICAgICAgICAnbW96Q2FuY2VsRnVsbFNjcmVlbicsCiAgICAgICAgICAgICdtc0V4aXRGdWxsc2NyZWVuJywKICAgICAgICAgIF0pIHsKICAgICAgICAgIGlmIChrZXkgaW4gZG9jdW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSgpKTsKCiAgICAgIGlmICgvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgewogICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAidW5pdHktbW9iaWxlIjsKICAgICAgICBjb25maWcuZGV2aWNlUGl4ZWxSYXRpbyA9IDE7CiAgICAgIH0KICAgICAgY2FudmFzLnN0eWxlLmJhY2tncm91bmQgPSAidXJsKCciICsgYnVpbGRVcmwgKyAiL0hlcm8zX0ZseWluZ1JvYm90X0dELmpwZycpIGNlbnRlciAvIGNvdmVyIjsKICAgICAgbG9hZGluZ0NvdmVyLnN0eWxlLmRpc3BsYXkgPSAiIjsKCiAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOwogICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4gewogICAgICAgIGNyZWF0ZVVuaXR5SW5zdGFuY2UoY2FudmFzLCBjb25maWcsIChwcm9ncmVzcykgPT4gewogICAgICAgICAgc3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgcHJvZ3Jlc3NCYXJFbXB0eS5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgICBwcm9ncmVzc0JhckZ1bGwuc3R5bGUud2lkdGggPSBgJHsxMDAgKiBwcm9ncmVzc30lYDsKICAgICAgICB9KS50aGVuKCh1bml0eUluc3RhbmNlKSA9PiB7CiAgICAgICAgICBsb2FkaW5nQ292ZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgIGlmIChjYW5GdWxsc2NyZWVuKSB7CiAgICAgICAgICAgIGlmICghaGlkZUZ1bGxTY3JlZW5CdXR0b24pIHsKICAgICAgICAgICAgICBmdWxsc2NyZWVuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdWxsc2NyZWVuQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgdW5pdHlJbnN0YW5jZS5TZXRGdWxsc2NyZWVuKDEpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChtZXNzYWdlKSA9PiB7CiAgICAgICAgICBhbGVydChtZXNzYWdlKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwp9KTsKICAgIDwvc2NyaXB0PgogIDwvYm9keT4KPC9odG1sPgo=";
