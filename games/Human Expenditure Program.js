window.game = "PCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KPCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCiAgICA8aGVhZD4NCiAgICAgICAgPGJhc2UgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2dlbml6eS93ZWItcG9ydEBtYWluL2h1bWFuLWV4cGVuZGl0dXJlLXByb2dyYW0vIj4NCiAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICAgICAgICA8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIiBjb250ZW50PSJ5ZXMiPg0KICAgICAgICA8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1zdGF0dXMtYmFyLXN0eWxlIiBjb250ZW50PSJibGFjay10cmFuc2x1Y2VudCI+DQogICAgICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ1c2VyLXNjYWxhYmxlPW5vIj4NCiAgICAgICAgPGxpbmsgcmVsPSJpY29uIiBocmVmPSJpY29uL2ljb24ucG5nIiB0eXBlPSJpbWFnZS9wbmciPg0KICAgICAgICA8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIGhyZWY9Imljb24vaWNvbi5wbmciPg0KICAgICAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSJjc3MvZ2FtZS5jc3MiPg0KICAgICAgICA8dGl0bGU+SFVNQU4gRVhQRU5ESVRVUkUgUFJPR1JBTTwvdGl0bGU+DQogICAgPC9oZWFkPg0KICAgIDxib2R5IHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjayI+DQogICAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9ImpzL21haW4uanMiPjwvc2NyaXB0Pg0KICAgIDwvYm9keT4NCjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9uaXBwbGVqcy8wLjkuMC9uaXBwbGVqcy5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIGZ1bGwgc2NyZWVuIHRoZSBnYW1lIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgZnVuY3Rpb24gYXBwbHljYW52YXNtb2RlKCkgew0KICAgICAgICAgICAgbGV0IHcgPSAwOw0KICAgICAgICAgICAgbGV0IGggPSAwOw0KICAgICAgICAgICAgbGV0IG1heFcgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgICAgICAgIGxldCBtYXhIID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICAgICAgaWYgKChtYXhXICogMC43NSkgPiBtYXhIKSB7DQogICAgICAgICAgICAgICAgaCA9IG1heEg7DQogICAgICAgICAgICAgICAgdyA9IE1hdGguZmxvb3IoKG1heEggLyAzKSAqIDQpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB3ID0gbWF4VzsNCiAgICAgICAgICAgICAgICBoID0gTWF0aC5mbG9vcigobWF4VyAvIDQpICogMyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2dhbWVDYW52YXMiKS5zdHlsZS53aWR0aCA9IHcgKyAicHgiOw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2dhbWVDYW52YXMiKS5zdHlsZS5oZWlnaHQgPSBoICsgInB4IjsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNnYW1lVmlkZW8iKS5zdHlsZS53aWR0aCA9IHcgKyAicHgiOw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2dhbWVWaWRlbyIpLnN0eWxlLmhlaWdodCA9IGggKyAicHgiOw0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI21vdXNlQ2FudmFzIikuc3R5bGUud2lkdGggPSB3ICsgInB4IjsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNtb3VzZUNhbnZhcyIpLnN0eWxlLmhlaWdodCA9IGggKyAicHgiOw0KfSBjYXRjaChlKSB7fQ0KICAgICAgICB9DQogICAgICAgIHNldEludGVydmFsKGFwcGx5Y2FudmFzbW9kZSwgMTAwKTsNCg0KICAgICAgICAvLyBzdXBwb3J0IG1vYmlsZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCihmdW5jdGlvbiAoKSB7DQogICAgY29uc3QgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgaWYgKCFpc01vYmlsZSkgcmV0dXJuOw0KDQogICAgbGV0IG1vZGUgPSAiY3Vyc29yIjsgLy8gInJwZyIgb3IgImN1cnNvciINCiAgICBsZXQgY3Vyc29yRWw7DQogICAgbGV0IGxhc3RIb3ZlckVsID0gbnVsbDsNCiAgICAvLyBrZWVwIG9yaWdpbmFsIGtleSBzdHlsZSAoeW91ciBnYW1lIHByb2JhYmx5IGV4cGVjdHMgJ3VwJywnZG93bicsIGV0YykNCiAgICBmdW5jdGlvbiBzZW5kS2V5RXZlbnQoa2V5LCB0eXBlID0gImtleWRvd24iKSB7DQogICAgICAgIGlmICh0eXBlID09ICJrZXlkb3duIikgew0KICAgICAgICAgICAgSW5wdXQuX2N1cnJlbnRTdGF0ZVtrZXldID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIElucHV0Ll9jdXJyZW50U3RhdGVba2V5XSA9IGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZGlzcGF0Y2hDdXJzb3JNb3ZlKHgsIHkpIHsNCiAgICAgICAgLy8gZWxlbWVudCB1bmRlciBjdXJzb3INCiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KE1hdGgucm91bmQoeCksIE1hdGgucm91bmQoeSkpOw0KDQogICAgICAgIC8vIGlmIGVsZW1lbnQgY2hhbmdlZCAtPiBmaXJlIG1vdXNlb3V0IG9uIGxhc3QsIG1vdXNlb3ZlciBvbiBuZXcNCiAgICAgICAgaWYgKGVsICE9PSBsYXN0SG92ZXJFbCkgew0KICAgICAgICAgICAgaWYgKGxhc3RIb3ZlckVsKSB7DQogICAgICAgICAgICAgICAgbGFzdEhvdmVyRWwuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnbW91c2VvdXQnLCB7IGJ1YmJsZXM6IHRydWUsIGNsaWVudFg6IHgsIGNsaWVudFk6IHkgfSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnbW91c2VvdmVyJywgeyBidWJibGVzOiB0cnVlLCBjbGllbnRYOiB4LCBjbGllbnRZOiB5IH0pKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxhc3RIb3ZlckVsID0gZWw7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBhbHdheXMgc2VuZCBtb3VzZW1vdmUgdG8gY3VycmVudCBlbGVtZW50IChzbyBob3ZlciBjYWxsYmFja3MgcnVuKQ0KICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ21vdXNlbW92ZScsIHsgYnViYmxlczogdHJ1ZSwgY2xpZW50WDogeCwgY2xpZW50WTogeSB9KSk7DQogICAgICAgIH0NCiAgICB9DQoNCg0KICAgIGZ1bmN0aW9uIHNldHVwTW9iaWxlQ29udHJvbHMoKSB7DQogICAgICAgIC8vIHZpcnR1YWwgY3Vyc29yDQogICAgICAgIGN1cnNvckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIGN1cnNvckVsLnN0eWxlID0gYA0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgdG9wOiA1MCU7DQogICAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMThweDsNCiAgICAgICAgICAgIGhlaWdodDogMThweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDIzMCwwLDAuOTUpOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgei1pbmRleDogMTAwMDAwOw0KICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCA2cHggcmdiYSgwLDAsMCwwLjYpOw0KICAgICAgICBgOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGN1cnNvckVsKTsNCiAgICAgICAgY3Vyc29yRWwuaGlkZGVuID0gZmFsc2U7DQoNCiAgICAgICAgLy8gY29udGFpbmVyIGZvciBqb3lzdGljayArIHRvZ2dsZSBzbyB2aXN1YWwgYW5kIGhpdCBhcmVhcyBhbGlnbg0KICAgICAgICBjb25zdCBjb250cm9sc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBjb250cm9sc0NvbnRhaW5lci5zdHlsZSA9ICJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IDV2dzsgYm90dG9tOiA1dnc7IHdpZHRoOiAyNXZ3OyBoZWlnaHQ6IDI1dnc7IHotaW5kZXg6IDk5OTk7IjsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250cm9sc0NvbnRhaW5lcik7DQoNCiAgICAgICAgLy8gam95c3RpY2sgem9uZSAoZmlsbHMgY29udGFpbmVyKQ0KICAgICAgICBsZXQgaW50ZXJuYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgaW50ZXJuYWwuc3R5bGUgPSAicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OjA7IHRvcDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsiOw0KICAgICAgICBjb250cm9sc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbnRlcm5hbCk7DQoNCiAgICAgICAgLy8gc3RhdGljIGpveXN0aWNrIHBvc2l0aW9uZWQgaW4gdGhlIG1pZGRsZSBvZiB0aGUgY29udGFpbmVyDQpsZXQgam95c3RpY2sgPSBuaXBwbGVqcy5jcmVhdGUoew0KICAgIG1vZGU6ICJzdGF0aWMiLA0KICAgIHpvbmU6IGludGVybmFsLA0KICAgIGNvbG9yOiAicmVkIiwNCiAgICBwb3NpdGlvbjogeyBsZWZ0OiAiNTAlIiwgdG9wOiAiNTAlIiB9LA0KICAgIHNpemU6IE1hdGgubWluKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpICogMC4yIC8vIGJpZ2dlciBqb3lzdGljayAod2FzIDAuMTIpDQp9KTsNCg0KDQogICAgICAgIC8vIFRvZ2dsZSBidXR0b24gcGxhY2VkIGluc2lkZSB0aGUgc2FtZSBjb250YWluZXIgYWJvdmUgam95c3RpY2sgKHNvIGhpdGJveCBtYXRjaGVzKQ0KICAgICAgICBsZXQgdG9nZ2xlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIHRvZ2dsZUJ0bi5zdHlsZSA9IGANCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICBib3R0b206IGNhbGMoMTAwJSArIDF2dyk7IC8qIHNpdHMganVzdCBhYm92ZSB0aGUgY29udGFpbmVyICovDQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogOHZ3Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzQ0NDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogM3Z3Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMXZ3Ow0KICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsNCiAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247DQogICAgICAgICAgICB6LWluZGV4OiAxMDAwMDA7DQogICAgICAgIGA7DQogICAgICAgIHRvZ2dsZUJ0bi5pbm5lclRleHQgPSBtb2RlID09PSAicnBnIiA/ICJSUEcgTW9kZSIgOiAiQ3Vyc29yIE1vZGUiOw0KICAgICAgICAvLyB1c2UgdG91Y2hzdGFydCBzbyBpdCByZXNwb25kcyBpbW1lZGlhdGVseSBvbiBtb2JpbGUNCiAgICAgICAgdG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoc3RhcnQiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgbW9kZSA9IG1vZGUgPT09ICJycGciID8gImN1cnNvciIgOiAicnBnIjsNCiAgICAgICAgICAgIGN1cnNvckVsLmhpZGRlbiA9IG1vZGUgPT09ICJycGciOw0KICAgICAgICAgICAgdG9nZ2xlQnRuLmlubmVyVGV4dCA9IG1vZGUgPT09ICJycGciID8gIlJQRyBNb2RlIiA6ICJDdXJzb3IgTW9kZSI7DQogICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7DQogICAgICAgIGNvbnRyb2xzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRvZ2dsZUJ0bik7DQoNCiAgICAgICAgLy8gYmFzaWMgRU5URVIgYnV0dG9uIChhcyBiZWZvcmUpDQogICAgICAgIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9ICh0ZXh0LCBrZXksIGJvdHRvbSwgcmlnaHQsIGJnQ29sb3IpID0+IHsNCiAgICAgICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZSA9IGANCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICAgICAgYm90dG9tOiAke2JvdHRvbX07DQogICAgICAgICAgICAgICAgcmlnaHQ6ICR7cmlnaHR9Ow0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMHZ3Ow0KICAgICAgICAgICAgICAgIGhlaWdodDogMTB2dzsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAke2JnQ29sb3J9Ow0KICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgICAgICB0b3VjaC1hY3Rpb246IG5vbmU7DQogICAgICAgICAgICAgICAgei1pbmRleDogOTk5OTk5Ow0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDN2dzsNCiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICBgOw0KICAgICAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IHRleHQ7DQogICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGUgPT4gew0KICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBzZW5kS2V5RXZlbnQoa2V5LCAia2V5ZG93biIpOw0KICAgICAgICAgICAgfSwgeyBwYXNzaXZlOiBmYWxzZSB9KTsNCiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIGUgPT4gew0KICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBzZW5kS2V5RXZlbnQoa2V5LCAia2V5dXAiKTsNCiAgICAgICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1dHRvbik7DQogICAgICAgIH07DQogICAgICAgIGNyZWF0ZUJ1dHRvbigiRU5URVIiLCAib2siLCAiMjB2dyIsICI1dnciLCAiIzg4MGYiKTsNCiAgICAgICAgY3JlYXRlQnV0dG9uKCJFU0MiLCAiZXNjYXBlIiwgIjEwdnciLCAiNXZ3IiwgIiM4ODBmIik7DQoNCiAgICAgICAgLy8gam95c3RpY2sgaGFuZGxlcnMNCiAgICAgICAgbGV0IGN1cnNvclggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDI7DQogICAgICAgIGxldCBjdXJzb3JZID0gd2luZG93LmlubmVySGVpZ2h0IC8gMjsNCg0KICAgICAgICAvLyBzbWFsbCBoZWxwZXIgdG8gY2xhbXANCiAgICAgICAgY29uc3QgY2xhbXAgPSAodiwgYSwgYikgPT4gTWF0aC5tYXgoYSwgTWF0aC5taW4oYiwgdikpOw0KDQogICAgICAgIGpveXN0aWNrLm9uKCJtb3ZlIiwgZnVuY3Rpb24gKGV2dCwgZGF0YSkgew0KICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIFJQRyBtb2RlOiB1c2UgZGlyZWN0aW9uIHN0cmluZ3MgYnV0IHN3YXAgdXAvZG93biAoZml4ZXMgdGhlIGludmVydGVkIG9yaWVudGF0aW9uKQ0KICAgICAgICAgICAgaWYgKG1vZGUgPT09ICJycGciKSB7DQogICAgICAgICAgICAgICAgaWYgKGRhdGEuZGlyZWN0aW9uICYmIGRhdGEuZGlyZWN0aW9uLmFuZ2xlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIHN3YXAgdXAvZG93biBiZWNhdXNlIG9yaWVudGF0aW9uIHdhcyBpbnZlcnRlZCBmb3IgeW91DQogICAgICAgICAgICAgICAgICAgIGxldCBkaXIgPSBkYXRhLmRpcmVjdGlvbi5hbmdsZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpciA9PT0gInVwIikgZGlyID0gImRvd24iOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXIgPT09ICJkb3duIikgZGlyID0gInVwIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlycyA9IFsidXAiLCAiZG93biIsICJsZWZ0IiwgInJpZ2h0Il07DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG8gb2YgZGlycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gIT09IGRpcikgc2VuZEtleUV2ZW50KG8sICJrZXl1cCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZW5kS2V5RXZlbnQobywgImtleWRvd24iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIGN1cnNvciBtb2RlOiBtb3ZlIHZpcnR1YWwgY3Vyc29yDQogICAgICAgICAgICAvLyBwcmVmZXIgZGF0YS52ZWN0b3IgKGdpdmVzIHgveSBjb21wb25lbnRzKSBpZiBwcmVzZW50IGZvciBtb3JlIHJlbGlhYmxlIG1vdmVtZW50DQogICAgICAgICAgICBjb25zdCBmb3JjZSA9IGRhdGEuZm9yY2UgfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IHNwZWVkID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oZm9yY2UgKiA2LCA5KSk7IC8vIHNsb3dlciBtb3ZlbWVudA0KDQogICAgICAgICAgICBpZiAoZGF0YS52ZWN0b3IpIHsNCiAgICAgICAgICAgICAgICAvLyBOT1RFOiB3ZSBpbnZlcnQgWSBoZXJlIChzdWJ0cmFjdCkgdG8gY29ycmVjdCB0aGUgdXAvZG93biBpbnZlcnNpb24geW91IHNhdw0KICAgICAgICAgICAgICAgIGN1cnNvclggKz0gKGRhdGEudmVjdG9yLnggfHwgMCkgKiBzcGVlZDsNCiAgICAgICAgICAgICAgICBjdXJzb3JZIC09IChkYXRhLnZlY3Rvci55IHx8IDApICogc3BlZWQ7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuYW5nbGUgJiYgdHlwZW9mIGRhdGEuYW5nbGUucmFkaWFuID09PSAibnVtYmVyIikgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gZGF0YS5hbmdsZS5yYWRpYW47DQogICAgICAgICAgICAgICAgY3Vyc29yWCArPSBNYXRoLmNvcyhhbmdsZSkgKiBzcGVlZDsNCiAgICAgICAgICAgICAgICBjdXJzb3JZIC09IE1hdGguc2luKGFuZ2xlKSAqIHNwZWVkOyAvLyBzdWJ0cmFjdCB0byBtYWtlIHVwID0gdXANCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY3Vyc29yWCA9IGNsYW1wKGN1cnNvclgsIDAsIHdpbmRvdy5pbm5lcldpZHRoKTsNCiAgICAgICAgICAgIGN1cnNvclkgPSBjbGFtcChjdXJzb3JZLCAwLCB3aW5kb3cuaW5uZXJIZWlnaHQpOw0KDQogICAgICAgICAgICBjdXJzb3JFbC5zdHlsZS5sZWZ0ID0gY3Vyc29yWCArICJweCI7DQogICAgICAgICAgICBjdXJzb3JFbC5zdHlsZS50b3AgPSBjdXJzb3JZICsgInB4IjsNCg0KICAgICAgICAgICAgLy8gZGlzcGF0Y2ggaG92ZXIvbW91c2Vtb3ZlIHRvIGVsZW1lbnQgdW5kZXIgdGhlIHZpcnR1YWwgY3Vyc29yDQogICAgICAgICAgICBkaXNwYXRjaEN1cnNvck1vdmUoY3Vyc29yWCwgY3Vyc29yWSk7DQogICAgICAgIH0pOw0KDQogICAgICAgIGpveXN0aWNrLm9uKCJlbmQiLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAobW9kZSA9PT0gInJwZyIpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBkaXJzID0gWyJ1cCIsICJkb3duIiwgImxlZnQiLCAicmlnaHQiXTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBvIG9mIGRpcnMpIHNlbmRLZXlFdmVudChvLCAia2V5dXAiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImludGVyYWN0aXZlIikgew0KICAgICAgICBzZXR1cE1vYmlsZUNvbnRyb2xzKCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIHNldHVwTW9iaWxlQ29udHJvbHMpOw0KICAgIH0NCn0pKCk7DQo8L3NjcmlwdD4NCg0KPC9odG1sPg0KDQoNCg0KDQoNCg==";
