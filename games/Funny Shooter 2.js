window.game = "DQo8IS0tIFVsdGltYXRlIEdhbWUgU3Rhc2ggZmlsZS0tPiANCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPg0KDQoNCjwvc3R5bGU+PC9oZWFkPjxib2R5IGNsYXNzPSJkYXJrIiBkaXI9Imx0ciI+DQogICAgPGRpdiBjbGFzcz0idW5pdHktZGVza3RvcCIgaWQ9InVuaXR5LWNvbnRhaW5lciI+DQogICAgICA8Y2FudmFzIGlkPSJ1bml0eS1jYW52YXMiIHN0eWxlPSJiYWNrZ3JvdW5kOiB1cmwoJnF1b3Q7aHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vaGlsZmlnM3IvbG9sc2hvb3RlcjIvOTdhN2IzNTQyODQzNDE5ZGI1MjIxNjUyMmE4NGE0ZjY4YTY1YTkwNC9GdW5ueVNob290ZXIyX1lhbmRleC5qcGcmcXVvdDspIGNlbnRlciBjZW50ZXIgLyBjb3ZlcjsiPjwvY2FudmFzPg0KICAgIDwvZGl2Pg0KICAgIDxkaXYgaWQ9ImxvYWRpbmctY292ZXIiIHN0eWxlPSIiPg0KICAgICAgPGRpdiBpZD0idW5pdHktbG9hZGluZy1iYXIiPg0KICAgICAgICA8ZGl2IGlkPSJ1bml0eS1sb2dvIj48aW1nIHNyYz0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vaGlsZmlnM3IvbG9sc2hvb3RlcjIvOTdhN2IzNTQyODQzNDE5ZGI1MjIxNjUyMmE4NGE0ZjY4YTY1YTkwNC9sb2dvLnBuZyI+PC9kaXY+DQogICAgICAgIDxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1lbXB0eSIgc3R5bGU9IiI+DQogICAgICAgICAgPGRpdiBpZD0idW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwiIHN0eWxlPSJ3aWR0aDogOTAlOyI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJzcGlubmVyIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjwvZGl2Pg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0idW5pdHktZnVsbHNjcmVlbi1idXR0b24iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PC9kaXY+DQogICAgPHNjcmlwdD4NCiAgICAgIGNvbnN0IGhpZGVGdWxsU2NyZWVuQnV0dG9uID0gIjEiOw0KICAgICAgY29uc3QgYnVpbGRVcmwgPSAiQnVpbGQiOw0KICAgICAgY29uc3QgbG9hZGVyVXJsID0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vaGlsZmlnM3IvbG9sc2hvb3RlcjIvOTdhN2IzNTQyODQzNDE5ZGI1MjIxNjUyMmE4NGE0ZjY4YTY1YTkwNC9GdW5ueVNob290ZXIyX1lhbmRleC5sb2FkZXIuanMiOw0KICAgICAgY29uc3QgY29uZmlnID0gew0KICAgICAgICBkYXRhVXJsOiJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9oaWxmaWczci9sb2xzaG9vdGVyMi85N2E3YjM1NDI4NDM0MTlkYjUyMjE2NTIyYTg0YTRmNjhhNjVhOTA0L0Z1bm55U2hvb3RlcjJfWWFuZGV4LmRhdGEudW5pdHl3ZWIiLA0KICAgICAgICBmcmFtZXdvcmtVcmw6Imh0dHBzOi8vcmF3Y2RuLmdpdGhhY2suY29tL2hpbGZpZzNyL2xvbHNob290ZXIyLzk3YTdiMzU0Mjg0MzQxOWRiNTIyMTY1MjJhODRhNGY2OGE2NWE5MDQvRnVubnlTaG9vdGVyMl9ZYW5kZXguZnJhbWV3b3JrLmpzLnVuaXR5d2ViIiwNCiAgICAgICAgY29kZVVybDoiaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vaGlsZmlnM3IvbG9sc2hvb3RlcjIvOTdhN2IzNTQyODQzNDE5ZGI1MjIxNjUyMmE4NGE0ZjY4YTY1YTkwNC9GdW5ueVNob290ZXIyX1lhbmRleC53YXNtLnVuaXR5d2ViIiwNCiAgICAgICAgc3RyZWFtaW5nQXNzZXRzVXJsOiAiU3RyZWFtaW5nQXNzZXRzIiwNCiAgICAgICAgY29tcGFueU5hbWU6ICJHb0dvTWFuIiwNCiAgICAgICAgcHJvZHVjdE5hbWU6ICJGdW5ueSBTaG9vdGVyIDIiLA0KICAgICAgICBwcm9kdWN0VmVyc2lvbjogIjEuMC4xIiwNCiAgICAgIH07DQoNCiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jb250YWluZXIiKTsNCiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jYW52YXMiKTsNCiAgICAgIGNvbnN0IGxvYWRpbmdDb3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNsb2FkaW5nLWNvdmVyIik7DQogICAgICBjb25zdCBwcm9ncmVzc0JhckVtcHR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LXByb2dyZXNzLWJhci1lbXB0eSIpOw0KICAgICAgY29uc3QgcHJvZ3Jlc3NCYXJGdWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LXByb2dyZXNzLWJhci1mdWxsIik7DQogICAgICBjb25zdCBmdWxsc2NyZWVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWZ1bGxzY3JlZW4tYnV0dG9uIik7DQogICAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKTsNCg0KICAgICAgY29uc3QgY2FuRnVsbHNjcmVlbiA9IChmdW5jdGlvbigpIHsNCiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgWw0KICAgICAgICAgICAgJ2V4aXRGdWxsc2NyZWVuJywNCiAgICAgICAgICAgICd3ZWJraXRFeGl0RnVsbHNjcmVlbicsDQogICAgICAgICAgICAnd2Via2l0Q2FuY2VsRnVsbFNjcmVlbicsDQogICAgICAgICAgICAnbW96Q2FuY2VsRnVsbFNjcmVlbicsDQogICAgICAgICAgICAnbXNFeGl0RnVsbHNjcmVlbicsDQogICAgICAgICAgXSkgew0KICAgICAgICAgIGlmIChrZXkgaW4gZG9jdW1lbnQpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9KCkpOw0KDQogICAgICBpZiAoL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsNCiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICJ1bml0eS1tb2JpbGUiOw0KICAgICAgICBjb25maWcuZGV2aWNlUGl4ZWxSYXRpbyA9IDE7DQogICAgICB9DQogICAgICBjYW52YXMuc3R5bGUuYmFja2dyb3VuZCA9ICJ1cmwoJ2h0dHBzOi8vcmF3Y2RuLmdpdGhhY2suY29tL2hpbGZpZzNyL2xvbHNob290ZXIyLzk3YTdiMzU0Mjg0MzQxOWRiNTIyMTY1MjJhODRhNGY2OGE2NWE5MDQvRnVubnlTaG9vdGVyMl9ZYW5kZXguanBnJykgY2VudGVyIC8gY292ZXIiOw0KICAgICAgbG9hZGluZ0NvdmVyLnN0eWxlLmRpc3BsYXkgPSAiIjsNCg0KICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOw0KICAgICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgY3JlYXRlVW5pdHlJbnN0YW5jZShjYW52YXMsIGNvbmZpZywgKHByb2dyZXNzKSA9PiB7DQogICAgICAgICAgc3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgIHByb2dyZXNzQmFyRW1wdHkuc3R5bGUuZGlzcGxheSA9ICIiOw0KICAgICAgICAgIHByb2dyZXNzQmFyRnVsbC5zdHlsZS53aWR0aCA9IGAkezEwMCAqIHByb2dyZXNzfSVgOw0KICAgICAgICB9KS50aGVuKCh1bml0eUluc3RhbmNlKSA9PiB7DQogICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UgPSB1bml0eUluc3RhbmNlOw0KICAgICAgICAgIC8vbG9hZERhdGEoKTsNCiAgICAgICAgICBsb2FkaW5nQ292ZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICBpZiAoY2FuRnVsbHNjcmVlbikgew0KICAgICAgICAgICAgaWYgKCFoaWRlRnVsbFNjcmVlbkJ1dHRvbikgew0KICAgICAgICAgICAgICBmdWxsc2NyZWVuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAiIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bGxzY3JlZW5CdXR0b24ub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgdW5pdHlJbnN0YW5jZS5TZXRGdWxsc2NyZWVuKDEpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9DQogICAgICAgIH0pLmNhdGNoKChtZXNzYWdlKSA9PiB7DQogICAgICAgICAgYWxlcnQobWVzc2FnZSk7DQogICAgICAgIH0pOw0KICAgICAgfTsNCiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsNCiAgICA8L3NjcmlwdD48c2NyaXB0IHNyYz0iaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vaGlsZmlnM3IvbG9sc2hvb3RlcjIvOTdhN2IzNTQyODQzNDE5ZGI1MjIxNjUyMmE4NGE0ZjY4YTY1YTkwNC9GdW5ueVNob290ZXIyX1lhbmRleC5sb2FkZXIuanMiPjwvc2NyaXB0Pg0KDQoNCiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIHZhciBwbGF5ZXIgPSBudWxsOw0KICAgIHZhciBzZGs7DQogICAgdmFyIHBheW1lbnRzID0gbnVsbDsNCiAgICB2YXIgU0hPV19BRFMgPSB0cnVlOw0KDQogICAgIFlhR2FtZXMuaW5pdCh7DQogICAgICBhZHY6IHsNCiAgICAgICAgb25BZHZDbG9zZTogd2FzU2hvd24gPT4gew0KICAgICAgICAgIGNvbnNvbGUuaW5mbygnYWR2IGNsb3NlZCEnKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0pDQogICAgICAudGhlbih5c2RrID0+IHsNCiAgICAgICAgc2RrID0geXNkazsNCiAgICAgICAgeXNkay5nZXRQbGF5ZXIoeyBzaWduZWQ6IHRydWUgfSkudGhlbihfcGxheWVyID0+IHsNCiAgICAgICAgICBwbGF5ZXIgPSBfcGxheWVyOw0KICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICB9KTsNCiAgICAgICAgeXNkay5nZXRQYXltZW50cyh7IHNpZ25lZDogdHJ1ZSB9KS50aGVuKF9wYXltZW50cyA9PiB7DQogICAgICAgICAgcGF5bWVudHMgPSBfcGF5bWVudHM7DQogICAgICAgICAgY29uc29sZS5sb2coIlB1cmNoYXNpbmcgVHJ1ZSIpOw0KICAgICAgICAgIHBheW1lbnRzLmdldFB1cmNoYXNlcygpLnRoZW4ocHVyY2hhc2VzID0+IHsNCiAgICAgICAgICBpZiAocHVyY2hhc2VzLnNvbWUocHVyY2hhc2UgPT4gcHVyY2hhc2UucHJvZHVjdElEID09PSAncmVtb3ZlX2FkcycpKSB7DQogICAgICAgICAgICAgIFNIT1dfQURTID0gZmFsc2U7DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCg0KICAgICAgICB9KQ0KICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICB9KQ0KICAgICAgICBpZihTSE9XX0FEUyl7DQogICAgICAgICAgc2RrLmFkdi5zaG93RnVsbHNjcmVlbkFkdih7IGNhbGxiYWNrczoge30gfSk7DQogICAgICAgICAgc2RrLmFkdi5zaG93QmFubmVyQWR2KCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgc2RrLmFkdi5oaWRlQmFubmVyQWR2KCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KDQogICAgZnVuY3Rpb24gY2hlY2tDb20oKSB7DQogICAgICB2YXIgaXNDb20gPSAwOw0KICAgICAgdmFyIG91dHB1dDsNCg0KICAgICAgaWYgKHNkayAhPSBudWxsKSB7DQogICAgICAgIHZhciBvdXRwdXQgPSBzZGsuZW52aXJvbm1lbnQuaTE4bi50bGQ7DQogICAgICAgIGlmIChvdXRwdXQgPT0gImNvbSIpIHsNCiAgICAgICAgICBpc0NvbSA9IDE7DQogICAgICAgIH0gZWxzZSBpZiAob3V0cHV0ID09ICJjb20udHIiKSB7DQogICAgICAgICAgaXNDb20gPSAyOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGNvbnNvbGUubG9nKG91dHB1dCk7DQogICAgICBjb25zb2xlLmxvZyhpc0NvbSk7DQoNCiAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdHYW1lTWFuYWdlcicsICdJc0NvbScsIGlzQ29tKTsNCg0KICAgICAgaWYgKHBheW1lbnRzICE9IG51bGwpIHsNCiAgICAgICAgaW5pdFB1cmNoYXNpbmcoKTsNCiAgICAgICAgY2hlY2tTaG9wKCk7DQogICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcHVyY2hhc2VDb21wbGV0ZShpZCkgDQogICAgew0KICAgICAgICBpZihpZCA9PSAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBTSE9XX0FEUyA9IGZhbHNlOw0KICAgICAgICAgICAgc2RrLmFkdi5oaWRlQmFubmVyQWR2KCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGVja1Nob3AoKSANCiAgICB7DQogICAgICAgIHBheW1lbnRzLmdldFB1cmNoYXNlcygpLnRoZW4ocHVyY2hhc2VzID0+IHsNCiAgICAgICAgICBpZiAocHVyY2hhc2VzLnNvbWUocHVyY2hhc2UgPT4gcHVyY2hhc2UucHJvZHVjdElEID09PSAncmVtb3ZlX2FkcycpKSB7DQogICAgICAgICAgICAgIFNIT1dfQURTID0gZmFsc2U7DQogICAgICAgICAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdTREtQbGF0Zm9ybXMnLCAnU2hvcENvbXBsZXRlJywgMCk7DQogICAgICAgICAgICAgIHNkay5hZHYuaGlkZUJhbm5lckFkdigpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAocHVyY2hhc2VzLnNvbWUocHVyY2hhc2UgPT4gcHVyY2hhc2UucHJvZHVjdElEID09PSAnd2VhcG9uXzEnKSkgew0KICAgICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1Nob3BDb21wbGV0ZScsIDMpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAocHVyY2hhc2VzLnNvbWUocHVyY2hhc2UgPT4gcHVyY2hhc2UucHJvZHVjdElEID09PSAnd2VhcG9uXzInKSkgew0KICAgICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1Nob3BDb21wbGV0ZScsIDQpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCg0KICAgICAgICB9KQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGluaXRQdXJjaGFzaW5nKCkgew0KICAgICAgY29uc29sZS5sb2coJ0dldCBQdXJjaGFzaW5nIERhdGEuLi4uJyk7DQogICAgICBpZiAocGF5bWVudHMgIT0gbnVsbCkgew0KICAgICAgICB2YXIgZ2FtZVNob3AgPSBbXQ0KICAgICAgICBwYXltZW50cy5nZXRDYXRhbG9nKCkudGhlbihwcm9kdWN0cyA9PiB7DQogICAgICAgICAgZ2FtZVNob3AgPSBwcm9kdWN0czsNCiAgICAgICAgICBjb25zb2xlLmxvZygnR2V0IENhdGFsb2cgRGF0YS4uLi4nKTsNCiAgICAgICAgICBnYW1lU2hvcC5mb3JFYWNoKHByb2R1Y3QgPT4gew0KICAgICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ1NES1BsYXRmb3JtcycsICdQdXJjaGFzZURhdGFJZCcsIHByb2R1Y3QuaWQpOw0KICAgICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ1NES1BsYXRmb3JtcycsICdQdXJjaGFzZURhdGFQcmljZScsIHByb2R1Y3QucHJpY2VWYWx1ZSk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0LmlkICsgJyAnICsgcHJvZHVjdC5wcmljZSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgICBwYXltZW50cy5nZXRQdXJjaGFzZXMoKS50aGVuKHB1cmNoYXNlcyA9PiBwdXJjaGFzZXMuZm9yRWFjaChjb25zdW1lUHVyY2hhc2UpKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjb25zdW1lUHVyY2hhc2UocHVyY2hhc2UpIHsNCiAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdTREtQbGF0Zm9ybXMnLCAnUHVyY2hhc2VzQ29tcGxldGUnLCBwdXJjaGFzZS5pZCk7DQogICAgICBwYXltZW50cy5jb25zdW1lUHVyY2hhc2UocHVyY2hhc2UucHVyY2hhc2VUb2tlbikNCiAgICB9DQoNCg0KICAgIGZ1bmN0aW9uIGJ1eShpZF9idXkpIHsNCiAgICAgIGlmIChwYXltZW50cyAhPSBudWxsKSB7DQogICAgICAgIHBheW1lbnRzLnB1cmNoYXNlKHsgaWQ6IGlkX2J1eSB9KS50aGVuKHB1cmNoYXNlID0+IHsNCiAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1B1cmNoYXNlc0NvbXBsZXRlJywgaWRfYnV5KTsNCiAgICAgICAgICBpZiAoaWRfYnV5ICE9ICdyZW1vdmVfYWRzJykgDQogICAgICAgICAgew0KICAgICAgICAgICAgcGF5bWVudHMuY29uc3VtZVB1cmNoYXNlKHB1cmNoYXNlLnB1cmNoYXNlVG9rZW4pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KDQogICAgIGZ1bmN0aW9uIGNoZWNrU2F2ZSgpIHsNCiAgICAgICAgbG9hZERhdGEoKTsNCiAgICAgfQ0KDQogICAgZnVuY3Rpb24gY2hlY2tMYW5ndWFnZSgpIHsNCiAgICAgIHZhciBjdXJyZW50TGFuZ3VhZ2UgPSAwOw0KICAgICAgdmFyIG91dHB1dDsNCg0KICAgICAgaWYgKHNkayAhPSBudWxsKSB7DQogICAgICAgIHZhciBvdXRwdXQgPSBzZGsuZW52aXJvbm1lbnQuaTE4bi5sYW5nOw0KICAgICAgICBpZiAob3V0cHV0ID09ICJydSIgfHwgb3V0cHV0ID09ICJiZSIgfHwgb3V0cHV0ID09ICJrayIgfHwgb3V0cHV0ID09ICJ1ayIgfHwgb3V0cHV0ID09ICJ1eiIpDQogICAgICAgICAgY3VycmVudExhbmd1YWdlID0gMDsNCiAgICAgICAgZWxzZSBpZiAob3V0cHV0ID09ICJ0ciIpDQogICAgICAgICAgY3VycmVudExhbmd1YWdlID0gMjsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgIGN1cnJlbnRMYW5ndWFnZSA9IDE7DQogICAgICB9DQoNCiAgICAgIGNvbnNvbGUubG9nKG91dHB1dCk7DQogICAgICBjb25zb2xlLmxvZyhjdXJyZW50TGFuZ3VhZ2UpOw0KDQogICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnR2FtZU1hbmFnZXInLCAnU2V0TGFuZ3VhZ2UnLCBjdXJyZW50TGFuZ3VhZ2UpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGxvYWREYXRhKCkgew0KICAgICAgaWYgKHBsYXllciAhPSBudWxsKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJMb2FkaW5nLi4uLi4uIikNCiAgICAgICAgdmFyIHNhdmUxOw0KICAgICAgICB2YXIgc2F2ZTI7DQogICAgICAgIHBsYXllci5nZXREYXRhKFsic2F2ZTEiLCAic2F2ZTIiXSkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICBpZihkYXRhLnNhdmUxKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiTG9hZCIpDQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ0xvYWRDbG91ZEZpcnN0JywgZGF0YS5zYXZlMSk7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ0xvYWRDbG91ZCcsIGRhdGEuc2F2ZTIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBTYXZlJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coJ05vIFNhdmUnKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogIA0KICAgIH0NCiAgPC9zY3JpcHQ+DQoNCg0KDQogIDxzY3JpcHQ+DQogICAgZnVuY3Rpb24gc2F2ZUNsb3VkKGRhdGFTYXZlLCBkYXRhU2F2ZTIsIGNvdW50ZXJTYXZlKSB7DQogICAgICBjb25zb2xlLmxvZygiU2F2aW5nLi4uLi4uLiAiKTsNCiAgICAgIGlmIChwbGF5ZXIgIT0gbnVsbCkgew0KICAgICAgICBwbGF5ZXIuZ2V0RGF0YShbInNhdmUxIiwgImNvdW50ZXJGdW5ueTIiLCAic2F2ZTIiXSkudGhlbihkYXRhID0+IHsNCiAgICAgICAgICBpZiAoZGF0YS5jb3VudGVyRnVubnkyKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnQ291bnRlciAnICsgZGF0YS5jb3VudGVyRnVubnkyICsgIiAiICsgY291bnRlclNhdmUpOw0KICAgICAgICAgICAgaWYgKGRhdGEuY291bnRlckZ1bm55MiA8IGNvdW50ZXJTYXZlKSB7DQogICAgICAgICAgICAgIHBsYXllci5zZXREYXRhKHsNCiAgICAgICAgICAgICAgICBzYXZlMTogZGF0YVNhdmUsDQogICAgICAgICAgICAgICAgc2F2ZTI6IGRhdGFTYXZlMiwNCiAgICAgICAgICAgICAgICBjb3VudGVyRnVubnkyOiBjb3VudGVyU2F2ZSwNCiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhdGEgaXMgc2V0IC11cGRhdGUnKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgcGxheWVyLnNldERhdGEoew0KICAgICAgICAgICAgICBzYXZlMTogZGF0YVNhdmUsDQogICAgICAgICAgICAgIHNhdmUyOiBkYXRhU2F2ZTIsDQogICAgICAgICAgICAgIGNvdW50ZXJGdW5ueTI6IGNvdW50ZXJTYXZlLA0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhIGlzIHNldCAtZmlyc3QnKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHBsYXllci5zZXREYXRhKHsNCiAgICAgICAgICAgICBzYXZlMTogZGF0YVNhdmUsDQogICAgICAgICAgICAgc2F2ZTI6IGRhdGFTYXZlMiwNCiAgICAgICAgICAgICBjb3VudGVyRnVubnkyOiBjb3VudGVyU2F2ZSwNCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhIGlzIHNldCAtZmlyc3QnKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICA8L3NjcmlwdD4NCg0KDQogIDxzY3JpcHQ+DQogICAgZnVuY3Rpb24gc2hvd0Z1bGxzY3JlbkFkKCkgew0KICAgICAgc2RrLmFkdi5zaG93RnVsbHNjcmVlbkFkdih7DQogICAgICAgIGNhbGxiYWNrczoge30NCiAgICAgIH0pDQogICAgfQ0KICA8L3NjcmlwdD4NCg0KICA8c2NyaXB0Pg0KICAgIGZ1bmN0aW9uIHJhdGUoKSB7DQogICAgfQ0KICA8L3NjcmlwdD4NCg0KICA8c2NyaXB0Pg0KICAgIGZ1bmN0aW9uIHNob3dSZXdhcmRlZEFkKGlkKSB7DQogICAgICBzZGsuYWR2LnNob3dSZXdhcmRlZFZpZGVvKHsNCiAgICAgICAgY2FsbGJhY2tzOiB7DQogICAgICAgICAgb25PcGVuOiAoKSA9PiB7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ0F1ZGlvRW5hYmxlJywgMCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBvblJld2FyZGVkOiAoKSA9PiB7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ0F1ZGlvRW5hYmxlJywgMSk7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ0J1eUNvbXBsZXRlJywgaWQpOw0KICAgICAgICAgIH0sDQogICAgICAgICAgb25DbG9zZTogKCkgPT4gew0KICAgICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ1NES1BsYXRmb3JtcycsICdBdWRpb0VuYWJsZScsIDEpOw0KICAgICAgICAgIH0sDQogICAgICAgICAgb25FcnJvcjogKGUpID0+IHsNCiAgICAgICAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdTREtQbGF0Zm9ybXMnLCAnQXVkaW9FbmFibGUnLCAxKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICA8L3NjcmlwdD4NCiAgICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+DQogICAgPG1ldGEgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04IiBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiPg0KICAgIDxtZXRhIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8iIG5hbWU9InZpZXdwb3J0Ij4NCiAgICANCiAgPHNjcmlwdD4NCi8qIG1wLXN0YXJ0ICovDQoNCnZhciBfcGFyYW1zID0gZ2FkZ2V0cy51dGlsLmdldFVybFBhcmFtZXRlcnMoKTsNCmlmIChfcGFyYW1zWydleHBfcnBjX2pzJ10gIT0gMSkgew0KICB2YXIgdXJsID0gX3BhcmFtc1sncGFyZW50J10gKyAnL2lnL2lmcGNfcmVsYXknOw0KICBnYWRnZXRzLnJwYy5zZXRSZWxheVVybCgnLi4nLCB1cmwsIHRydWUpOw0KfQ0KLyogbXAtZW5kICovDQo8L3NjcmlwdD48c3R5bGUgdHlwZT0idGV4dC9jc3MiPiNidXR0b24gew0KICBkaXNwbGF5Om5vbmU7DQp9DQouaW1nYl92aXMgew0KICBhbmltYXRpb246IGltZ2ItYW5pbWF0aW9uIDdzIGxpbmVhcjsNCn0NCkBrZXlmcmFtZXMgaW1nYi1hbmltYXRpb24gew0KICAxMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsNCiAgfQ0KICAyMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDBweCk7DQogIH0NCiAgOTAlIHsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwcHgpOw0KICB9DQogIDEwMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsNCiAgfQ0KfTwvc3R5bGU+DQogIDwvc2NyaXB0PjxsaW5rIGhyZWY9Imh0dHBzOi8vcmF3Y2RuLmdpdGhhY2suY29tL2hpbGZpZzNyL2xvbHNob290ZXIyLzk3YTdiMzU0Mjg0MzQxOWRiNTIyMTY1MjJhODRhNGY2OGE2NWE5MDQvc3R5bGUuY3NzIiByZWw9InN0eWxlc2hlZXQiPg==";
