window.game = "DQoNCjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IA0KPCEtLSBGb3IgdGhlIHJlZ3VsYXJseSB1cGRhdGluZyBkb2MgZ28gdG8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xX0ZtSDNCbFNCUUk3RkdnQVFMNTktWlBlOGVDeHMzNXdlbDZKVXlWYUc4US8gLS0+DQoNCg0KDQoNCjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IA0KPCEtLSBGb3IgdGhlIHJlZ3VsYXJseSB1cGRhdGluZyBkb2MgZ28gdG8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xX0ZtSDNCbFNCUUk3RkdnQVFMNTktWlBlOGVDeHMzNXdlbDZKVXlWYUc4US8gLS0+DQoNCg0KDQo8aHRtbD48aGVhZD4NCiAgICA8dGl0bGU+UElDTy04IENhcnRyaWRnZTwvdGl0bGU+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgdXNlci1zY2FsYWJsZT1ubyI+DQogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIA0KICAgICAgICAvLyBEZWZhdWx0IHNoZWxsIGZvciBQSUNPLTggMC4yLjIgKGluY2x1ZGVzIEB3ZWVibGUncyBnYW1lcGFkIG1vZCAxLjApDQogICAgICAgIC8vIFRoaXMgZmlsZSBpcyBhdmFpbGFibGUgdW5kZXIgYSBDQzAgbGljZW5zZSBodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvc2hhcmUteW91ci13b3JrL3B1YmxpYy1kb21haW4vY2MwLw0KICAgICAgICAvLyAobm90ZTogInRoaXMgZmlsZSIgZG9lcyBub3QgaW5jbHVkZSBhbnkgY2FydHJpZGdlIG9yIGNhcnRyaWRnZSBhcnR3b3JrIGluamVjdGVkIGludG8gYSBkZXJpdmF0aXZlIGh0bWwgZmlsZSB3aGVuIHVzaW5nIHRoZSBQSUNPLTggaHRtbCBleHBvcnRlcikNCiAgICANCiAgICAgICAgLy8gb3B0aW9ucw0KICAgIA0KICAgICAgICAvLyBmdWxsc2NyZWVuLCBzb3VuZCwgY2xvc2UgYnV0dG9uIGF0IHRvcCB3aGVuIHBsYXlpbmcgb24gdG91Y2hzY3JlZW4NCiAgICAgICAgdmFyIHA4X2FsbG93X21vYmlsZV9tZW51ID0gdHJ1ZTsNCiAgICANCiAgICAgICAgLy8gcDhfYXV0b3BsYXkgdHJ1ZSB0byBib290IHRoZSBjYXJ0cmlkZ2UgYXV0b21hdGljYWxseSBhZnRlciBwYWdlIGxvYWQgd2hlbiBwb3NzaWJsZQ0KICAgICAgICAvLyBpZiB0aGUgYnJvd3NlciBjYW4gbm90IGNyZWF0ZSBhbiBhdWRpbyBjb250ZXh0IG91dHNpZGUgb2YgYSB1c2VyIGdlc3R1cmUgKGUuZy4gb24gaU9TKSwgcDhfYXV0b3BsYXkgaGFzIG5vIGVmZmVjdA0KICAgICAgICB2YXIgcDhfYXV0b3BsYXkgPSB0cnVlOw0KICAgIA0KICAgICAgICAvLyBXaGVuIHBpY284X3N0YXRlIGlzIGRlZmluZWQsIFBJQ08tOCB3aWxsIHNldCAuaXNfcGF1c2VkLCAuc291bmRfdm9sdW1lIGFuZCAuZnJhbWVfbnVtYmVyIGVhY2ggZnJhbWUgDQogICAgICAgIC8vICh1c2VkIGZvciBkZXRlcm1pbmluZyBidXR0b24gaWNvbnMpDQogICAgICAgIHZhciBwaWNvOF9zdGF0ZSA9IFtdOw0KICAgIA0KICAgICAgICAvLyBXaGVuIHBpY284X2J1dHRvbnMgaXMgZGVmaW5lZCwgUElDTy04IHJlYWRzIGVhY2ggaW50IGFzIGEgYml0ZmllbGQgaG9sZGluZyB0aGF0IHBsYXllcidzIGJ1dHRvbiBzdGF0ZXMNCiAgICAgICAgLy8gMHgxIGxlZnQsIDB4MiByaWdodCwgMHg0IHVwLCAweDggcmlnaHQsIDB4MTAgTywgMHgyMCBYLCAweDQwIG1lbnUNCiAgICAgICAgLy8gKHVzZWQgYnkgcDhfdXBkYXRlX2dhbWVwYWRzKQ0KICAgICAgICB2YXIgcGljbzhfYnV0dG9ucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsgLy8gbWF4IDggcGxheWVycw0KICAgIA0KICAgICAgICAvLyBXaGVuIHBpY284X21vdXNlIGlzIGRlZmluZWQsIFBJQ08tOCByZWFkcyB0aGUgMyBpbnRlZ2VycyBhcyBYLCBZIGFuZCBhIGJpdGZpZWxkIGZvciBidXR0b25zOiAweDEgTE1CLCAweDIgUk1CDQogICAgICAgIHZhciBwaWNvOF9tb3VzZSA9IFtdOw0KICAgIA0KICAgICAgICAvLyB1c2VkIHRvIGRpc3BsYXkgbnVtYmVyIG9mIGRldGVjdGVkIGpveXN0aWNrcw0KICAgICAgICB2YXIgcGljbzhfZ2FtZXBhZHMgPSB7fTsNCiAgICAgICAgcGljbzhfZ2FtZXBhZHMuY291bnQgPSAwOw0KICAgIA0KICAgICAgICAvLyBXaGVuIHBpY284X2dwaW8gaXMgZGVmaW5lZCwgcmVhZGluZyBhbmQgd3JpdGluZyB0byBncGlvIHBpbnMgd2lsbCByZWFkIGFuZCB3cml0ZSB0byB0aGVzZSB2YWx1ZXMNCiAgICAgICAgdmFyIHBpY284X2dwaW8gPSBuZXcgQXJyYXkoMTI4KTsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9hdWRpb19jb250ZXh0IGNvbnRleHQgaXMgZGVmaW5lZCwgdGhlIGh0bWwgc2hlbGwgKHRoaXMgZmlsZSkgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIGFuZCBtYW5hZ2luZyBpdC4NCiAgICAgICAgLy8gVGhpcyBtYWtlcyBzYXRpc2Z5aW5nIGJyb3dzZXIgcmVxdWlyZW1lbnRzIGVhc2llciAtLSBlLmcuIGluaXRpYWxpc2luZyBhdWRpbyBmcm9tIGEgc2hvcnQgc2NyaXB0IGluIHJlc3BvbnNlIHRvIGEgdXNlciBhY3Rpb24uDQogICAgICAgIC8vIE90aGVyd2lzZSBQSUNPLTggd2lsbCB0cnkgdG8gY3JlYXRlIGFuZCB1c2UgaXRzIG93biBjb250ZXh0Lg0KICAgIA0KICAgICAgICB2YXIgcGljbzhfYXVkaW9fY29udGV4dDsNCiAgICANCiAgICANCiAgICAgICAgLy8gbWVudSBidXR0b24gYW5kIGNvbnRyb2xsZXIgZ3JhcGhpY3MNCiAgICAgICAgcDhfZ2Z4X2RhdD17DQogICAgICAgICAgICAgICAgInA4Yl9wYXVzZTEiOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQU9VbEVRVlJJeDJOZ0dQYmcvOGNYLzBGNDZGdEFNNHZvYmdIVkxSb3dDNmhtMFlCYlFMRkZveGFNNEZRMGRIUHkwQzFOaDI2Tk51Z0JBQW5pek5pTWZ2YkdBQUFBQUVsRlRrU3VRbUNDIiwNCiAgICAicDhiX2NvbnRyb2xzIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQVEwbEVRVlJJeDJOZ0dBWEVnUDhmWC95bkJhYXA0WEJMaHFjRjFJeWZZV1FCclpMejBMRUFsenFxeFFGVkxjQW1UM01McUpxVGFXN0I0Q3FMYUY0ZmpJSUJCd0JML0IydnF0UFZJd0FBQUFCSlJVNUVya0pnZ2c9PSIsDQogICAgInA4Yl9mdWxsIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQU4wbEVRVlJJeDJOZ0dQTGcvOGNYLzJtSjZXY0JyVUptNEN3Z09TZ0dyUVZFQjhXb0JhTVdER01MaG01T0hucWw2ZEN0MFlZOEFBQTlvWm0rOVo5eFFBQUFBQUJKUlU1RXJrSmdnZz09IiwNCiAgICAicDhiX3BhdXNlMCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFLVWxFUVZSSXgyTmdHSGJnLzhjWC83RmhjdFdOV2pCcXdhZ0ZveGFNV2pCcXdhZ0Y1Rmt3NUFBQVBhR1p2c0lVdFhVQUFBQUFTVVZPUks1Q1lJST0iLA0KICAgICJwOGJfc291bmQwIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQU5rbEVRVlJJeDJOZ0dESGcvOGNYLzVIeDBMRUEzY0NoWXdFdWd3YXZCY1JHNHFnRm94WU1ad3VHZms0ZWZxWHA4S25SQmowQUFNejdjTERuRzRGZUFBQUFBRWxGVGtTdVFtQ0MiLA0KICAgICJwOGJfc291bmQxIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQVBVbEVRVlJJeDJOZ0dESGcvOGNYLzVIeDBMRUEzY0NoWXdFdWd3aFpRTFFEcUc0QnNaRklLTWhHTFJpMVlDaGJNUFJ6OHZBclRZZFBqVGJvQVFDU1ZncFhVV1FBTUFBQUFBQkpSVTVFcmtKZ2dnPT0iLA0KICAgICJwOGJfY2xvc2UiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBVTBsRVFWUkl4Mk5rb0RGZ3BKc0YveisrK0k4aXdTOUJrdVc0OUErY0JjUmFSRWdmL1N3ZzFTSmkxZEhmQWtJRzRFeU9PSUp5NEN3ZzFpSkNpV0RVQXZJdEdMcXBhT2ptNUtGZm1nNzlHbTNJdGlvQWwrbUFHVllJWlVVQUFBQUFTVVZPUks1Q1lJST0iLA0KICAgIA0KICAgICJjb250cm9sc19sZWZ0X3BhbmVsIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFTd0FBQUVzQ0FZQUFBQjVmWTUxQUFBRUkwbEVRVlI0MnUzZE1VN0RRQkNHMFRqYW05RFRjUDhqcEVtZnN3UzVpSEJoQXNMeGV2L2h2UVk2cEdYeVpSVFErblFDQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUhxYkhFRXRsK3Z0N2hTK2ZMeS9tWEhCUXF4RWkvNmFJL0FpRlc5U25CMkJXRGtEQkF0QXNBREJBaEFzQU1FQ0JBdEFzQUFFQ3hBc0FNRUNFQ3hBc0FBRUMwQ3dPTko4dFl2clhSQXNJbUsxOWowSUZzUEdTclFRTENKaU5WK2V0N3hBVDdRUUxJYU4xZHIzb29WZ01XeXNSQXZCSWlwV29vVmdFUlVyMFVLd2lJcVZhQ0ZZUk1WS3RCQXNvbUlsV2dnV1ViRVNMUVNMcUZpSkZvSkZWS3hFQzhFaUtsYWloV0FSRlN2UlFyRFlKU1NWZmhhQ0JTQllBSUlGQ0JiQUhwb2o0Qmwvc2NPR0JXREQ0bFg4aXdFMkxBREJBZ1FMUUxBQUJBc1FMQURCQWhBc1FMQUFCQXRBc0FEQkFoQXNBTUVDQkF0QXNBQUVDeEFzQU1FQ0VDeEFzQUFFQ3hBc0FNRUNFQ3hBc01oMXVkN3VUc0haVkRjWnlGbzhZdDVzVko2TnlVQWFTTkV5SXltYVh3WmVwSUtkNG13b1FiQUZDMEN3QU1FQ0VDd0F3UUlFQzBDd0FBUUxFQ3dBd1FJUUxFQ3dBQVFMUUxBQXdRSTRVSE1FMi8xMFFacTd1c3lCT2JCaFJRd3BtQlViMW5BRHVQYnVhVUQvcDJlek1IKzFhZG13aG9zVmZCY3hiMlNDSlZhSWxtQWhWb2lXWUlrVm9pVmFnaVZXaUpaZ2laVllJVnFDSlZhSWxtZ0psbGdoV29JbFZpQmFnaVZXaUpab0NaWllJVnFDSlZZZ1dvSWxWaUJhZ2dVSWxuYzBzUEVMbG1naFZtSWxXS0tGV0FtV2FJRllDWlpvSVZZSWxtZ2hWb0lsV2lCV2dpVmFpSlZnSVZxSWxXQ0pGb2lWWUlrV1lpVllpQlppSlZpaWhWaUoxWGJORVd5TDFtTVFSWXZmdklHSmxRMXJtRTBMeklvTnl5QmlEckJoQVlJRklGaUFZQUVJRm9CZ0FZSUZJRmdBZ2dVSUZvQmdBUWdXSUZnQWdnVWdXSUJnRGMrTm4xRC90ZEg4WXVwd2daeTVxRzR5a0tJbFZtWkRzRGpzaFNsYXpxUXFIN3A3OTNRMkNCYUFZQUdDQlNCWUFJSUZDQmFBWUFFSUZpQllBSUlGSUZpQVlBRUlGb0JnQVlJRklGZ0FnZ1VJRm9CZ0FRZ1dJRmdBZ2dVZ1dJQmdBUWdXd0VOekJLeFpQdWI5Q0o3V2pBMExzR0ZSVis5TjUrak5EaHNXZ0dBQmdnVWdXQUNDeFc1NmZnanVBM2NFaXo5Wi9uV3dSMGlXUDhQL1lDRllEQnN0c1VLd2lJaVdXQ0ZZUkVSTHJCQXNJcUlsVmdnV0VkRVNLd1NMaUdpSkZZSkZSTFRFQ3NFaUlscGloV0FSRVMyeFFyQ0lpSlpZSVZoRVJFdXNFQ3dpb2lWV0NCWXgwUklyQkl1b2FJa1ZyK1loRkhUWnRNQ0dCUWdXZ0dBQkNCWWdXQUNDQlNCWWdHQUJDQmFBWUFHQ0JTQllBSUlGQ0JiajJ1T1I4czZBRWJoZXhnc1dZcmkzU0toS2N6Y1hBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBTUEybitlMFVNRHpoM3lUQUFBQUFFbEZUa1N1UW1DQyIsDQogICAgDQogICAgDQogICAgImNvbnRyb2xzX3JpZ2h0X3BhbmVsIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFTd0FBQUZlQ0FZQUFBQS9seUsvQUFBS0hrbEVRVlI0MnUzZEFaS2FXQkFHWUUzdHZmQm1NQ2ZEbkd6V0pMaExISEJHQnQ3cmh1K3JTaVdiYkFrOHAzKzdVZUYwQWdBQUFBQUFBQUFBQU9BUXpwYUF6TjV2RGxPc053SUxoSlhRU3VJZlAvWW9aTUdjeFE5TGdMQnlmQUlMUUdBQkFndEFZQUVJTEVCZ0FRZ3NBSUVGQ0N3QWdRVWdzQUNCQlNDd0FBUVdJTEFBQkJZc3QvY0wzTG1BMy85Y2NSUkZUUnF1WklpZ3lsS3NyandLQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU1aMHRBWHowL3Y3ZUxpNnE4L25OQ2dvczJDS1ltdHR2bCtFL3V3MDJjWC9NNnkzSWZscHhnUVZMdTZmdVNjQzhIRElQNGZmMDhYVmh3Tk13dWYzcTN6OXF2elArZlRVZ2gxK1AraUhrQVA0TGk2bVFhaXJ0VHpPM1Q1NHRFRlJodTVtWnJrOXd3WUdEcW8wK2RzMTBYWUlMamhSVWpnT0kySjMwZXpxUnZjZGpBbUgxZHpleXU2S2VDQzdkRmlRdDVzTVU4bU13ZS9ZaFY5Y3gxamh1UUtlaHN3UldDS3ZtNEd2UkNDM0kwVlVZaFQ2R2x2TmFJS3lFRmlDc2hCWUlLNkVsdEtCdUFRb3Jhd1lLejlvQmF4V2N0K3VYcmFHUGYwQ2hZdXVkaDdHT2tLa3pVR1RyaHBaT0ZUWWNCWTB4MWhSMEE3cFdRRkY1TVlEREZKU3hwZEJvYURWZ3A5M1ZrM3NKem1tamRqRjc2ckxjK1ptcTNkWHZIOEtiS0NGMStuUG41c3ZEUDEySFgxT20vdjlmdWtoM2Q0NjIxcEMxdTJvRDdjdjQrdkR0d3NjSmVaL0JTT3NOS2J1cjJ1ZFZ0cnFsVnRUN0REcVhCUWxmN2FkdW8xVW9GUHNqcnp2b3JwYUZWZEdiT1V3RVpIUEV0WWVNWWRYVTZqWnFYemNxUW1pTjlzSEhTT0NGc2FRcHZOMG1TSWRUOVdvS28zVXdGa0xFa1NUYVpXdHFoNmV4RUlLK3VrZTl4dGE0MHpwS2x3dkd3YyszMlFmK05IMlZmVE1XUXNCUkpNTVhxMnQ5YmNaWUNGOHJrclowVVVZZWZXcDlPZmtlNXRsK2huNG9JMG9WU09uT1pmampyKy8wL1l5NkxzTytYV3VzVWExdFFvckFLandPcGhwNUtuVlp6bU5CN1lMTStCV1VHdnZzUEJZOEw0NWVJYzd1Yy9GdkFOeFArR2RhSitld0tPbTYwMjE5MitoYzFzVWFDU3dxanpzVnRuVk51RlRYMHV0Vlkzc0NpeXhkeE5zZXQ1VjFuek91a2NCaWJ6ckhzRjhDQzZFVmNDeEVZSUhBRWxnQUFndEFZQUVDQzBCZ0FRZ3NpT2RpQ1FRV3g5SUpMSUVGd3NveENDeFlXOFlMMDdtWW5zRGlZQVU1K2tKdnh0SHE4bkFNQWhJcWhWV3hxMm02Z04vWEE4c0YvT0NURHFLQUxtRUhjVitiNnc2ZkQwalpZYmtKUmFEOXpkaUo2ckFvcFN1OHZXdVdMbXQ4UzdJRFBDK1Fvb05vM1VoMWNoK3Iza2pWaVhkNEhpQnRoYUowcS9xWnRmRlRDWjkwUEpVQ29RKzRIdFgyelQwSjRlc2RUMU53bTgxb05Hd0Ryc1Y3aFcwM3hrRUlXaWpSUXV0aGY1b0syMitqbjl1RHc0NkZFVUppcXJPcXRSL0dRVWp3NnY0UVdqWE9HL1VCd3NvNENBc0twcSs4L1dMQk1XeXpEOUxoOWNaQlNEU1NUQVJJditHMjJwcGRuWEVRMWl2aU5zaCtySHBDZmdqRVRSNTdEK3NPdXF4MWc2dGZVdFRENC9UUmdtcFAzZFZaNlZBckpFNS92c2ZXbGJyKzB4ZjM2WEw2ZUJXRDYybitLZ3BULy84cDBuRkZYVytCUmJvdTYvY1A0VTNRUUQyZHZ2N2w0RzQ0bGpkckRUdnRzcUovMTI4bjY5dzdkd1VydmZKN20zM1Q5VzI4TXdpNkxOMFZLQ3E4R0VDU3NjVm9hRTFCTjZCckJUWXFNcUZsSFNIVkdLTXorRjZuYWhTRXdxR2w0S3dkS0R4ckJxeFpnTDBDWEJSV3psdUIwQkpXZ05BU1ZpQzBoQlZRcjBDOVhUOGRWajcrQVFsQ3F6L29HdlRDQ25KMkY0ZnB0bzU2M0tEVDBGa0N0UXQ1YjEzSHhPM0lqSUN3czZKT0gxeDdQQ1pndnR0SzI0M3M1VGlBaFFVZnZUdUpldU5Wb0Y1d2hSdXJKa1kvUVFXQzY0TnFYZGRNTnlXb2dFKzdtWHQ0dFJ0dnU1MEpLU2ZUWCtRdXNCeXk2eHIrMkUzODgvanZydWZ6K2Vjcm9YajYrN2IxczQrZitYYnhBbXYvaGZINkUrTUh1bGpuTlFxWmJvTk5kRXZDRDRIbGh4NHZOZ0xMV0dHc0FFSjJVazdjQXVHN0tXK05BOW1DeW9jUGdmQkI1ZXNkUVB5Z2NoeEF4TzdFSlVxQVZOMklpOEFCWVl2WlpYYUJGRjJIR3hrWUVVR25vYk1FMWc0ck4rTVVXcENpcXpBS25kenVISVNWMEFLRWxkQUNZWVhRZ21BRktLeXNHU2c4YXdlc1ZYRGVybCsyaGo3K0FZV0tyWGNleGpwQ3BzNUFrYTBiV2pwVjJIQVVOTVpZVTlBTjZGb0JSZVhGQUE1VFVNYVdRcU9oMVlCQTNkV2VpbkxOWTlGbHdZcmRWZFRIMjh1NjdHbHR5T3RIOXU1cStHTzMxbU9lYjdKM1d2ZDl2eC9MaXJxSGRRY2l2T0puN1NhMjNtOWRGanFzSU4xVjlrNXJ3ODVLbHdVWlh1bXpkQlFsOTFPWGhRN3J0WUs1ZjN6aHV2VzJNblJhaFRxcnNldkQ4d0FDNjRuTGx1TmdwdENxRUZiamRiOG9JUWc2a2tRYmhXcnVqN0VRSGRacjQyQlhldHVST3ExS25kV0hMc3RZaU1ENjJqaDRyYkh4Q0tFVklLekc2MjhzaE9pamlMSFVXSWdPNjZWeHBLWWFuVmFRemlyVTg0REFpdHhkaGZxd1lzblFDaGhXWVo4WEJGWW90NXA5TzFKb1JRMnJTTThEUk95d3dwNHoyV3Jmb3A4bmNoNExIZFp6MTZCZDMrcWRWdVF4TVByemdjQlNJQVZESzBsWUNTd0Uxa3dCcHppeHUwWm9KUXFyZE04UEFxdDBJTHdsMk1mRm9aVXRySng0UjJEdHdKTFF5dGhaZ2NBNllHZ0pLeEJZS1VKTFdJSEFTaEZhd2dvRVZvclFFbFlnc0ZLRWxyQUNnWlVtdElRVkNLendwa1pDUUdDRkRhdnpRR2lCd0FvZlZvOGpvZEFDZ1JVNnJJUVdDS3hVWVNXMFlPZUJsZW1xQUs5OGRDRnJhTGxLQXdKcnVxRGZraFh5eTUrenl0eHB1V29EQW12YVpZOWhsVGkwTHNvSVpvSWdlaUd2dFk5WnJwWHVtdTdvc09aMWUrMnNrbmRhblZKQ1lNMEhReHR3bjFiL2JtRDAwSExDSFlIMXZJRGZnaGJ1Wmw5a3p0QnBPZUVPVDhJaFV2R1cycCtJNTRxY3YwS0g5Ymx1S0pabXo1MVY5RTVydFA2ZE1rSmd6YnNPdjErT0VsWkJRK3Z5OEh3QUVVZVJvMi9mT0lnT0s4bFlHT0ZLb2JVN0xlTWd2Rmd3d3d0OGYrU3VvdGIrL0ZyM1lkT05uMFlJV0t4UlI2QWErMlVjeEVpNGZDeHNTeFJvN1RFd3luZzRXbS9qSUVSN3BmZWRQdDBWT3F3VVhWYW1XM0dWNkxSMFZ4RDBGVDlySjdIbGZ1dXUwR0d0MTJYMWF4Wm1sczZxVktjMVdsL2RGYXp4eXIvRzIreDc2U0xXUEk3UngwaDBWN0JDUWJWcmZTNXJUMFc1WW1EZFAzZmxjaktncUk3eFlnQk1qQzArZ1cxTlFUZWdhd1UyS2pLaFpSMGgxUmlqTS9oZXAyb1VoTUtocGVDc0hTZzhhd2FzV1lDOUFsd1VWczViZ2RBU1ZvRFFFbFlndElRVlVLOUF2VjAvSFZZKy9nRUpRcXMvNkJyMHdncHlkaGVINmJhT2V0eWcwOUJaQXJVTGVXOWR4OUJWR1FGaHgwV2RQcmoyZUV6QWZMZVZ0aHZaeTNFQUN3cytlbmN5ZEZTQ0NnUlgzTEZxWXZRVFZDQzRQcWpXZGMxMFU0SUsrTFNidVlkWHUvRzIyNW1RY2pLZHd6aGJndVVCTXZ5eG0vam44ZDlkeitmenoxZEM4ZmJiWmVheC92cTcyK08rZVNZUVdMemNlWTFDcHR0Z0U5MlM4QU9CeFpJdTdQVW5SdmNFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUN3d0wvY3ZCSWgwOStoSkFBQUFBQkpSVTVFcmtKZ2dnPT0iLA0KICAgIA0KICAgICAgICB9Ow0KICAgIA0KICAgIA0KICAgICAgICAvLyBhZGRlZCAwLjIuMTogd29yay1hcm91bmQgZm9yIGlPUy9TYWZhcmkgcnVubmluZyBmcm9tIGFuIGlGcmFtZSAoZS5nLiBmcm9tIGl0Y2guaW8gcGFnZSk6DQogICAgICAgIC8vIHRvdWNoIGV2ZW50cyBvbmx5IHJlZ2lzdGVyIGFmdGVyIGFkZGluZyBkdW1teSBsaXN0ZW5lcnMgb24gZG9jdW1lbnQuDQogICAgDQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB7fSk7DQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHt9KTsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB7fSk7DQogICAgDQogICAgDQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIC8vIHBpY28tOCAwLjIuMjogYWxsb3cgZHJvcHBpbmcgZmlsZXMNCiAgICAgICAgdmFyIHA4X2Ryb3BwZWRfY2FydCA9IG51bGw7DQogICAgICAgIHZhciBwOF9kcm9wcGVkX2NhcnRfbmFtZSA9ICIiOw0KICAgICAgICBmdW5jdGlvbiBwOF9kcm9wX2ZpbGUoZSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIkBAIGRyb3BwaW5nIGZpbGUuLi4iKTsNCiAgICAgICAgDQogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgIA0KICAgICAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyICYmIGUuZGF0YVRyYW5zZmVyLmZpbGVzICYmIGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIHJlYWQgZnJvbSBmaWxlDQogICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSAndW50aXRsZWQucDgnOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdLm5hbWUgIT09ICd1bmRlZmluZWQnKSBwOF9kcm9wcGVkX2NhcnRfbmFtZSA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdLm5hbWU7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZS5kYXRhVHJhbnNmZXIuZmlsZXNbMF0uZmlsZU5hbWUgIT09ICd1bmRlZmluZWQnKSBwOF9kcm9wcGVkX2NhcnRfbmFtZSA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdLmZpbGVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBwOF9kcm9wcGVkX2NhcnQgPSByZWFkZXIucmVzdWx0Ow0KICAgICAgICAgICAgICAgICAgICAvLyBkYXRhOmltYWdlL3BuZztiYXNlNjQNCiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgICAgICBjb2RvX2NvbW1hbmQgPSA5OyAvLyByZWFkIGRpcmVjdGx5IGZyb20gcDhfZHJvcHBlZF9jYXJ0IHdpdGggbGliYjY0IGRlY29kZXINCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyByZWFkIGZyb20gdXJsIChvciBkYXRhIHVybCkNCiAgICAgICAgICAgICAgICB0eHQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0Jyk7DQogICAgICAgICAgICAgICAgaWYgKHR4dCl7DQogICAgICAgICAgICAgICAgICAgIHA4X2Ryb3BwZWRfY2FydF9uYW1lID0gInVudGl0bGVkLnA4LnBuZyI7DQogICAgICAgICAgICAgICAgICAgIHA4X2Ryb3BwZWRfY2FydCA9IHR4dDsNCiAgICAgICAgICAgICAgICAgICAgY29kb19jb21tYW5kID0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbm9wKGV2dCkgew0KICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZHJhZ292ZXIoZXZ0KSB7DQogICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIE1vZHVsZS5waWNvOERyYWdPdmVyKCk7DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZHJhZ3N0b3AoZXZ0KSB7DQogICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgIE1vZHVsZS5waWNvOERyYWdTdG9wKCk7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgLy8gZG93bmxvYWQgKHBpY28tOCAwLjIuNGQgd2ViIGV4cG9ydHMgY2FuIHNhdmUgYSAud2F2IGZpbGUpDQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkX2Jyb3dzZXJfZmlsZShmaWxlbmFtZSwgY29udGVudHMpDQogICAgICAgIHsNCiAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICBpZiAoZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxlbmd0aCAtIDcpID09ICIucDgucG5nIikNCiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBlbmNvZGVVUklDb21wb25lbnQoY29udGVudHMpKTsNCiAgICAgICAgICBlbHNlIGlmIChmaWxlbmFtZS5zdWJzdHIoZmlsZW5hbWUubGVuZ3RoIC0gNCkgPT0gIi53YXYiKQ0KICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICdkYXRhOmF1ZGlvL3gtd2F2O2Jhc2U2NCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnRzKSk7DQogICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICdkYXRhOnRleHQvcGxhaW47Y2hhcnNldD11dGYtOCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnRzKSk7DQogICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgZmlsZW5hbWUpOw0KICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOw0KICAgICAgICAgIGVsZW1lbnQuY2xpY2soKTsNCiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpOw0KICAgICAgICB9DQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgDQogICAgDQogICAgICAgIHZhciBwOF9idXR0b25zX2hhc2ggPSAtMTsNCiAgICAgICAgZnVuY3Rpb24gcDhfdXBkYXRlX2J1dHRvbl9pY29ucygpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIGJ1dHRvbnMgb25seSBhcHBlYXIgd2hlbiBydW5uaW5nDQogICAgICAgICAgICBpZiAoIXA4X2lzX3J1bm5pbmcpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9idXR0b25faWNvbnMpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBpc19mdWxsc2NyZWVuPShkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIGhhc2ggYmFzZWQgb246IHBpY284X3N0YXRlLnNvdW5kX3ZvbHVtZSAgcGljbzhfc3RhdGUuaXNfcGF1c2VkIGJvdHRvbV9tYXJnaW4gbGVmdCBpc19mdWxsc2NyZWVuIHA4X3RvdWNoX2RldGVjdGVkDQogICAgICAgICAgICB2YXIgaGFzaCA9IDA7DQogICAgICAgICAgICBoYXNoID0gcGljbzhfc3RhdGUuc291bmRfdm9sdW1lOw0KICAgICAgICAgICAgaWYgKHBpY284X3N0YXRlLmlzX3BhdXNlZCkgaGFzaCArPSAweDEwMDsNCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCkgICAgIGhhc2ggKz0gMHgyMDA7DQogICAgICAgICAgICBpZiAoaXNfZnVsbHNjcmVlbikgICAgICAgICBoYXNoICs9IDB4NDAwOw0KICAgIA0KICAgICAgICAgICAgaWYgKHA4X2J1dHRvbnNfaGFzaCA9PSBoYXNoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHA4X2J1dHRvbnNfaGFzaCA9IGhhc2g7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiQEAgdXBkYXRpbmcgYnV0dG9uIGljb25zIik7DQogICAgDQogICAgICAgICAgICBlbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwOF9tZW51X2J1dHRvbicpOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBlbCA9IGVsc1tpXTsNCiAgICAgICAgICAgICAgICBpbmRleCA9IGVsLmlkOwkJCQ0KICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAncDhiX3NvdW5kJykgaW5kZXggKz0gKHBpY284X3N0YXRlLnNvdW5kX3ZvbHVtZSA9PSAwID8gIjAiIDogIjEiKTsgLy8gMSBpZiB1bmRlZmluZWQNCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gJ3A4Yl9wYXVzZScpIGluZGV4ICs9IChwaWNvOF9zdGF0ZS5pc19wYXVzZWQgPiAwID8gIjEiIDogIjAiKTsgICAgIC8vIDAgaWYgdW5kZWZpbmVkDQogICAgDQogICAgICAgICAgICAgICAgbmV3X3N0ciA9ICc8aW1nIHdpZHRoPTI0IGhlaWdodD0yNCBzdHlsZT0icG9pbnRlci1ldmVudHM6bm9uZSIgc3JjPSInK3A4X2dmeF9kYXRbaW5kZXhdKyciPic7DQogICAgICAgICAgICAgICAgaWYgKGVsLmlubmVySFRNTCAhPSBuZXdfc3RyKQ0KICAgICAgICAgICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBuZXdfc3RyOw0KICAgIA0KICAgIA0KICAgIA0KICAgIA0KICAgICAgICAgICAgICAgIC8vIGhpZGUgYWxsIGJ1dHRvbnMgZm9yIHRvdWNoIG1vZGUgKGNhbiBwYXVzZSB3aXRoIG1lbnUgYnV0dG9ucykNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgaXNfdmlzaWJsZSA9IHA4X2lzX3J1bm5pbmc7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKCghcDhfdG91Y2hfZGV0ZWN0ZWQgfHwgIXA4X2FsbG93X21vYmlsZV9tZW51KSAmJiBlbC5wYXJlbnRFbGVtZW50LmlkID09ICJwOF9tZW51X2J1dHRvbnNfdG91Y2giKQ0KICAgICAgICAgICAgICAgICAgICBpc192aXNpYmxlID0gZmFsc2U7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIGVsLnBhcmVudEVsZW1lbnQuaWQgPT0gInA4X21lbnVfYnV0dG9ucyIpDQogICAgICAgICAgICAgICAgICAgIGlzX3Zpc2libGUgPSBmYWxzZTsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAoaXNfZnVsbHNjcmVlbikgDQogICAgICAgICAgICAgICAgICAgIGlzX3Zpc2libGUgPSBmYWxzZTsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAoaXNfdmlzaWJsZSkNCiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheT0iIjsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9idXR0b25faWNvbnMpOw0KICAgICAgICB9DQogICAgDQogICAgDQogICAgDQogICAgICAgIGZ1bmN0aW9uIGFicyh4KQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4geCA8IDAgPyAteCA6IHg7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIHN0ZXAgMCBkb3duIDEgZHJhZyAyIHVwIChub3QgdXNlZCkNCiAgICAgICAgZnVuY3Rpb24gcGljbzhfYnV0dG9uc19ldmVudChlLCBzdGVwKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIXA4X2lzX3J1bm5pbmcpIHJldHVybjsNCiAgICAgICAgDQogICAgICAgICAgICBwaWNvOF9idXR0b25zWzBdID0gMDsNCiAgICANCiAgICAgICAgICAgIGlmIChzdGVwID09IDIgJiYgdHlwZW9mKHBpY284X21vdXNlKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcGljbzhfbW91c2VbMl0gPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbnVtID0gMDsNCiAgICAgICAgICAgIGlmIChlLnRvdWNoZXMpIG51bSA9IGUudG91Y2hlcy5sZW5ndGg7DQogICAgDQogICAgICAgICAgICBpZiAobnVtID09IDAgJiYgdHlwZW9mKHBpY284X21vdXNlKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gIG5vIGFjdGl2ZSB0b3VjaGVzOiByZWxlYXNlIG1vdXNlIGJ1dHRvbiBmcm9tIGFueXdoZXJlIG9uIHBhZ2UuIChtYXliZSByZWR1bmRhbnQ/IGJ1dCBqdXN0IGluIGNhc2UpDQogICAgICAgICAgICAgICAgcGljbzhfbW91c2VbMl0gPSAwOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1tpXTsNCiAgICAgICAgICAgICAgICB2YXIgeCA9IHRvdWNoLmNsaWVudFg7DQogICAgICAgICAgICAgICAgdmFyIHkgPSB0b3VjaC5jbGllbnRZOw0KICAgICAgICAgICAgICAgIHZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICAgICAgICAgICAgdmFyIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgDQogICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLm1pbih3LGgpIC8gMTI7DQogICAgICAgICAgICAgICAgaWYgKHIgPiA0MCkgciA9IDQwOw0KICAgIA0KICAgICAgICAgICAgICAgIC8vIG1vdXNlICgwLjEuMTJkKQ0KICAgIA0KICAgICAgICAgICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7DQogICAgICAgICAgICAgICAgaWYgKHA4X3RvdWNoX2RldGVjdGVkKQ0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocGljbzhfbW91c2UpICE9PSAndW5kZWZpbmVkJykNCiAgICAgICAgICAgICAgICBpZiAoY2FudmFzKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVjdC50b3AsIHJlY3QucmlnaHQsIHJlY3QuYm90dG9tLCByZWN0LmxlZnQsIHgsIHkpOw0KICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoeCA+PSByZWN0LmxlZnQgJiYgeCA8IHJlY3QucmlnaHQgJiYgeSA+PSByZWN0LnRvcCAmJiB5IDwgcmVjdC5ib3R0b20pDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBpY284X21vdXNlID0gWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKHggLSByZWN0LmxlZnQpICogMTI4IC8gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh5IC0gcmVjdC50b3ApICogMTI4IC8gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwIDwgMiA/IDEgOiAwDQogICAgICAgICAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuOyAvLyBjb21tZW50ZWQgLS0gYmxvY2tzIG92ZXJsYXBwaW5nIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGljbzhfbW91c2VbMl0gPSAwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgIA0KICAgIA0KICAgICAgICAgICAgICAgIC8vIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBiID0gMDsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAoeSA8IGggLSByKjgpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBubyBjb250cm9sbGVyIGJ1dHRvbnMgdXAgaGVyZTsgaW5jbHVkZXMgY2FudmFzIGFuZCBtZW51IGJ1dHRvbnMgYXQgdG9wIGluIHRvdWNoIG1vZGUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoKHkgPCBoIC0gcio2KSAmJiB5ID4gKGggLSByKjgpKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBtZW51IGJ1dHRvbjogaGFsZiBhcyBoaWdoIGFzIFggTyBidXR0b24NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0cmV0Y2ggYWNyb3NzIHJpZ2h0LWhhbmQgaGFsZiBhYm92ZSBYIE8gYnV0dG9ucw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPiB3IC0gciozKSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiIHw9IDB4NDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA8IHcvMiAmJiB4IDwgcio2KQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGljaw0KICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgbWFzayA9IDB4ZjsgLy8gZHBhZA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN4ID0gMCArIHIqMzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjeSA9IGggLSByKjM7DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICBkZWFkem9uZSA9IHIvMzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkeCA9IHggLSBjeDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkeSA9IHkgLSBjeTsNCiAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnMoZHgpID4gYWJzKGR5KSAqIDAuNikgLy8gaG9yaXpvbnRhbCANCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHggPCAtZGVhZHpvbmUpIGIgfD0gMHgxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkeCA+IGRlYWR6b25lKSBiIHw9IDB4MjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhYnMoZHkpID4gYWJzKGR4KSAqIDAuNikgLy8gdmVydGljYWwNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHkgPCAtZGVhZHpvbmUpIGIgfD0gMHg0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkeSA+IGRlYWR6b25lKSBiIHw9IDB4ODsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh4ID4gdyAtIHIqNikNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0dG9uOyBkaWFnb25hbCBzcGxpdCBmcm9tIGJvdHRvbSByaWdodCBjb3JuZXINCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBtYXNrID0gMHgzMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggb2YgW1hdLCBbT10NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKGgteSkgPiAody14KSAqIDAuOCkgYiB8PSAweDEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAody14KSA+IChoLXkpICogMC44KSBiIHw9IDB4MjA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAgICAgcGljbzhfYnV0dG9uc1swXSB8PSBiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICANCiAgICAgICAgLy8gcDhfdXBkYXRlX2xheW91dF9oYXNoIGlzIHVzZWQgdG8gZGVjaWRlIHdoZW4gdG8gdXBkYXRlIGxheW91dCAoZXhwZW5zaXZlIGVzcGVjaWFsbHkgd2hlbiBwYXJ0IG9mIGEgaGVhdnkgcGFnZSkNCiAgICAgICAgdmFyIHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCA9IC0xOw0KICAgICAgICB2YXIgbGFzdF93aW5kb3dlZF9jb250YWluZXJfaGVpZ2h0ID0gNTEyOw0KICAgICAgICB2YXIgcDhfbGF5b3V0X2ZyYW1lcyA9IDA7DQogICAgDQogICAgICAgIGZ1bmN0aW9uIHA4X3VwZGF0ZV9sYXlvdXQoKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KICAgICAgICAgICAgdmFyIHA4X3BsYXlhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3BsYXlhcmVhIik7DQogICAgICAgICAgICB2YXIgcDhfY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X2NvbnRhaW5lciIpOw0KICAgICAgICAgICAgdmFyIHA4X2ZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X2ZyYW1lIik7DQogICAgICAgICAgICB2YXIgY3NpemUgPSA1MTI7DQogICAgICAgICAgICB2YXIgbWFyZ2luX3RvcCA9IDA7DQogICAgICAgICAgICB2YXIgbWFyZ2luX2xlZnQgPSAwOw0KICAgIA0KICAgICAgICAgICAgLy8gcGFnZSBkaWRuJ3QgbG9hZCB5ZXQ/IGZpcnN0IGNhbGwgc2hvdWxkIGJlIGFmdGVyIHA4X2ZyYW1lIGlzIGNyZWF0ZWQgc28gdGhhdCBsYXlvdXQgZG9lc24ndCBqdW1wIGFyb3VuZC4NCiAgICAgICAgICAgIGlmICghY2FudmFzIHx8ICFwOF9wbGF5YXJlYSB8fCAhcDhfY29udGFpbmVyIHx8ICFwOF9mcmFtZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSAtMTsNCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2xheW91dCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgcDhfbGF5b3V0X2ZyYW1lcyArKzsNCiAgICANCiAgICAgICAgICAgIC8vIGFzc3VtZXMgZnJhbWUgZG9lc24ndCBoYXZlIHBhZGRpbmcNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGlzX2Z1bGxzY3JlZW49KGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbiB8fCBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICAgICAgICAgIHZhciBmcmFtZV93aWR0aCA9IHA4X2ZyYW1lLm9mZnNldFdpZHRoOw0KICAgICAgICAgICAgdmFyIGZyYW1lX2hlaWdodCA9IHA4X2ZyYW1lLm9mZnNldEhlaWdodDsNCiAgICANCiAgICAgICAgICAgIGlmIChpc19mdWxsc2NyZWVuKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIHNhbWUgYXMgd2luZG93DQogICAgICAgICAgICAgICAgZnJhbWVfd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgICAgICAgICAgICBmcmFtZV9oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIC8vIG5ldmVyIGxhcmdlciB0aGFuIHdpbmRvdyAgLy8gKGhhcHBlbnMgd2hlbiBhZGRyZXNzIGJhciBpcyBkb3duIGluIHBvcnRyYWlnaHQgbW9kZSBvbiBwaG9uZSkNCiAgICAgICAgICAgICAgICBmcmFtZV93aWR0aCAgPSBNYXRoLm1pbihmcmFtZV93aWR0aCwgd2luZG93LmlubmVyV2lkdGgpOw0KICAgICAgICAgICAgICAgIGZyYW1lX2hlaWdodCA9IE1hdGgubWluKGZyYW1lX2hlaWdodCwgd2luZG93LmlubmVySGVpZ2h0KTsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIC8vIGFzIGJpZyBhcyB3aWxsIGZpdCBpbiBhIGZyYW1lLi4NCiAgICAgICAgICAgIGNzaXplID0gIE1hdGgubWluKGZyYW1lX3dpZHRoLGZyYW1lX2hlaWdodCk7DQogICAgDQogICAgICAgICAgICAvLyAuLiBidXQgbmV2ZXIgbW9yZSB0aGFuIDIvMyBvZiBsb25nZXN0IHNpZGUgZm9yIHRvdWNoIChlLmcuIGxlYXZlIHNwYWNlIGZvciBjb250cm9scyBvbiBpUGFkKQ0KICAgICAgICAgICAgaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIHA4X2lzX3J1bm5pbmcpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGxvbmdlc3Rfc2lkZSA9IE1hdGgubWF4KHdpbmRvdy5pbm5lcldpZHRoLHdpbmRvdy5pbm5lckhlaWdodCk7DQogICAgICAgICAgICAgICAgY3NpemUgPSBNYXRoLm1pbihjc2l6ZSwgbG9uZ2VzdF9zaWRlICogMi8zKTsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIC8vIHBpeGVsIHBlcmZlY3Q6IHF1YW50aXplIHRvIGNsb3Nlc3QgbXVsdGlwbGUgb2YgMTI4DQogICAgICAgICAgICAvLyBvbmx5IHdoZW4gbGFyZ2UgZGlzcGxheSAoZGVza3RvcCkNCiAgICAgICAgICAgIGlmIChmcmFtZV93aWR0aCA+PSA1MTIgJiYgZnJhbWVfaGVpZ2h0ID49IDUxMikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjc2l6ZSA9IChjc2l6ZSsxKSAmIH4weDdmOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgLy8gY3NpemUgc2hvdWxkIG5ldmVyIGJlIGhpZ2hlciB0aGFuIHBhcmVudCBmcmFtZQ0KICAgICAgICAgICAgLy8gKG90aGVyd2lzZSBzdHJldGNoZWQgbGFyZ2Ugd2hlbiBmdWxsc2NyZWVuIGFuZCB0aGVuIHJldHVybikNCiAgICAgICAgICAgIGlmICghaXNfZnVsbHNjcmVlbiAmJiBwOF9mcmFtZSkgDQogICAgICAgICAgICAgICAgY3NpemUgPSBNYXRoLm1pbihjc2l6ZSwgbGFzdF93aW5kb3dlZF9jb250YWluZXJfaGVpZ2h0KTsgLy8gcDhfZnJhbWVfMCBwYXJlbnQNCiAgICAgICAgICAgIA0KICAgIA0KICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gYWx3YXlzIGNlbnRlciBob3Jpem9udGFsbHkNCiAgICAgICAgICAgICAgICBtYXJnaW5fbGVmdCA9IChmcmFtZV93aWR0aCAtIGNzaXplKS8yOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpbmRvdy5pbm5lckhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9ydHJhaXQ6IGtlZXAgYXQgeT00MCAoYXZvaWQgcm91bmRlZCB0b3AgY29ybmVycyAvIGNhbWVyYSBudWIgdGhpbmcgZXRjLikNCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbl90b3AgPSBNYXRoLm1pbig0MCwgZnJhbWVfaGVpZ2h0IC0gY3NpemUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGFuZHNjYXBlOiBwdXQgYSBsaXR0bGUgYWJvdmUgdmVydGljYWwgY2VudGVyDQogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5fdG9wID0gKGZyYW1lX2hlaWdodCAtIGNzaXplKS80Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICAgIC8vIG5vbi10b3VjaDogY2VudGVyIHZlcnRpY2FsbHkNCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luX3RvcCA9IChmcmFtZV9oZWlnaHQgLSBjc2l6ZSkvMjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBza2lwIGlmIHJlbGV2YW50IHN0YXRlIGhhcyBub3QgY2hhbmdlZA0KICAgIA0KICAgICAgICAgICAgdmFyIHVwZGF0ZV9oYXNoID0gY3NpemUgKyBtYXJnaW5fdG9wICogMTAwMC4zICsgbWFyZ2luX2xlZnQgKiAwLjAwMSArIGZyYW1lX3dpZHRoICogMzMzLjMzICsgZnJhbWVfaGVpZ2h0ICogNzcyLjE1MTM0Ow0KICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pIHVwZGF0ZV9oYXNoICs9IDAuMTIzNzsNCiAgICANCiAgICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdGhpbmdzIGNhbiBoYXBwZW4gaW4gdGhlIGZpcnN0IGZldyBzZWNvbmRzLCBzbyBqdXN0IGtlZXAgcmUtY2FsY3VsYXRpbmcgbGF5b3V0LiB3YXNtIHZlcnNpb24gYnJlYWtzIGxheW91dCBvdGhlcndpc2UuDQogICAgICAgICAgICAvLyBhbHNvOiBib251cyByZWZyZXNoIGF0IDUsIDggc2Vjb25kcyBqdXN0IGluIGNhc2UgLl8uDQogICAgICAgICAgICBpZiAocDhfbGF5b3V0X2ZyYW1lcyA8IDE4MCB8fCBwOF9sYXlvdXRfZnJhbWVzID09IDYwKjUgfHwgcDhfbGF5b3V0X2ZyYW1lcyA9PSA2MCo4ICkNCiAgICAgICAgICAgICAgICB1cGRhdGVfaGFzaCA9IHA4X2xheW91dF9mcmFtZXM7DQogICAgDQogICAgICAgICAgICBpZiAoIWlzX2Z1bGxzY3JlZW4pIC8vIGZ1bGxzY3JlZW46IHVwZGF0ZSBldmVyeSBmcmFtZSBmb3Igc2FmZXR5LiBzaG91bGQgYmUgY2hlYXAhDQogICAgICAgICAgICBpZiAoIXA4X3RvdWNoX2RldGVjdGVkKSAvLyBtb2JpbGU6IHVwZGF0ZSBldmVyeSBmcmFtZSBiZWNhdXNlIG5vdGhpbmcgY2FuIGJlIHRydXN0ZWQNCiAgICAgICAgICAgIGlmIChwOF91cGRhdGVfbGF5b3V0X2hhc2ggPT0gdXBkYXRlX2hhc2gpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygicDhfdXBkYXRlX2xheW91dCgpOiBza2lwcGluZyIpOw0KICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfbGF5b3V0KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSB1cGRhdGVfaGFzaDsNCiAgICANCiAgICAgICAgICAgIC8vIHJlY29yZCB0aGlzIGZvciByZXR1cm5pbmcgdG8gb3JpZ2luYWwgc2l6ZSBhZnRlciBmdWxsc2NyZWVuIHB1c2hlcyBvdXQgY29udGFpbmVyIGhlaWdodCAoYXJnaCkNCiAgICAgICAgICAgIGlmICghaXNfZnVsbHNjcmVlbiAmJiBwOF9mcmFtZSkNCiAgICAgICAgICAgICAgICBsYXN0X3dpbmRvd2VkX2NvbnRhaW5lcl9oZWlnaHQgPSBwOF9mcmFtZS5wYXJlbnROb2RlLnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0Ow0KICAgICAgICAgICAgDQogICAgDQogICAgICAgICAgICAvLyBtb2JpbGUgaW4gcG9ydHJhaXQgbW9kZTogcHV0IHNjcmVlbiBhdCB0b3AgKHcgLyBhIGxpdHRsZSBleHRyYSBzcGFjZSBmb3IgZnVsbHNjcmVlbiBidXR0b24gaWYgbmVlZGVkKQ0KICAgICAgICAgICAgLy8gKGRvbid0IGNhcnQgdG9vIGFib3V0IGJ1dHRvbnMgb3ZlcmxhcHBpbmcgc2NyZWVuKQ0KICAgICAgICAgICAgaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIHA4X2lzX3J1bm5pbmcgJiYgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KQ0KICAgICAgICAgICAgICAgIHA4X3BsYXlhcmVhLnN0eWxlLm1hcmdpblRvcCA9IHA4X2FsbG93X21vYmlsZV9tZW51ID8gMzIgOiA4Ow0KICAgICAgICAgICAgZWxzZSBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQgJiYgcDhfaXNfcnVubmluZykgLy8gbGFuZHNjYXBlOiBzbGlnaHRseSBhYm92ZSB2ZXJ0aWNhbCBjZW50ZXIgKG9ubHkgcmVsZXZhbnQgZm9yIGlQYWQgLyBoaWdocmVzIGRldmljZXMpDQogICAgICAgICAgICAgICAgcDhfcGxheWFyZWEuc3R5bGUubWFyZ2luVG9wID0gKGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0IC0gY3NpemUpIC8gNDsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBwOF9wbGF5YXJlYS5zdHlsZS5tYXJnaW5Ub3AgPSAiIjsNCiAgICANCiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IGNzaXplOw0KICAgICAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGNzaXplOw0KICAgIA0KICAgICAgICAgICAgLy8gdG8gZG86IHRoaXMgc2hvdWxkIGp1c3QgaGFwcGVuIGZyb20gY3NzIGxheW91dA0KICAgICAgICAgICAgY2FudmFzLnN0eWxlLm1hcmdpbkxlZnQgPSBtYXJnaW5fbGVmdDsNCiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5Ub3AgPSBtYXJnaW5fdG9wOw0KICAgIA0KICAgICAgICAgICAgcDhfY29udGFpbmVyLnN0eWxlLndpZHRoID0gY3NpemU7DQogICAgICAgICAgICBwOF9jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gY3NpemU7DQogICAgDQogICAgICAgICAgICAvLyBzZXQgbWVudSBidXR0b25zIHBvc2l0aW9uIHRvIGJvdHRvbSByaWdodA0KICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfbWVudV9idXR0b25zIik7DQogICAgICAgICAgICBlbC5zdHlsZS5tYXJnaW5Ub3AgPSBjc2l6ZSAtIGVsLm9mZnNldEhlaWdodDsNCiAgICANCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIHR1cm4gb2ZmIHBvaW50ZXIgZXZlbnRzIHRvIHByZXZlbnQgZG91YmxlLXRhcCB6b29tIGV0YyAod29ya3Mgb24gQW5kcm9pZCkNCiAgICAgICAgICAgICAgICAvLyBkb24ndCB3YW50IHRoaXMgZm9yIGRlc2t0b3AgYmVjYXVzZSBicmVha3MgbW91c2UgaW5wdXQgJiBjbGljay10by1mb2N1cyB3aGVuIHVzaW5nIGNvZG9fdGV4dGFyZWENCiAgICAgICAgICAgICAgICBjYW52YXMuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsNCiAgICANCiAgICAgICAgICAgICAgICBwOF9jb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gIjBweCI7DQogICAgDQogICAgICAgICAgICAgICAgLy8gYnV0dG9ucw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIHNhbWUgYXMgdG91Y2ggZXZlbnQgaGFuZGxpbmcNCiAgICAgICAgICAgICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICAgICAgICAgIHZhciBoID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5taW4odyxoKSAvIDEyOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmIChyID4gNDApIHIgPSA0MDsNCiAgICANCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250cm9sc19yaWdodF9wYW5lbCIpOw0KICAgICAgICAgICAgICAgIGVsLnN0eWxlLmxlZnQgPSB3LXIqNjsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS50b3AgPSBoLXIqNzsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IHIqNjsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSByKjc7DQogICAgICAgICAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgic3JjIikgIT0gcDhfZ2Z4X2RhdFsiY29udHJvbHNfcmlnaHRfcGFuZWwiXSkgLy8gb3B0aW1pc2F0aW9uOiBhdm9pZCByZWxvYWQ/IChicm93c2VyIHNob3VsZCBoYW5kbGUgdGhvdWdoKQ0KICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoInNyYyIsIHA4X2dmeF9kYXRbImNvbnRyb2xzX3JpZ2h0X3BhbmVsIl0pOw0KICAgIA0KICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRyb2xzX2xlZnRfcGFuZWwiKTsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gMDsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS50b3AgPSBoLXIqNjsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IHIqNjsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSByKjY7DQogICAgICAgICAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgic3JjIikgIT0gcDhfZ2Z4X2RhdFsiY29udHJvbHNfbGVmdF9wYW5lbCJdKSAvLyBvcHRpbWlzYXRpb246IGF2b2lkIHJlbG9hZD8gKGJyb3dzZXIgc2hvdWxkIGhhbmRsZSB0aG91Z2gpDQogICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgic3JjIiwgcDhfZ2Z4X2RhdFsiY29udHJvbHNfbGVmdF9wYW5lbCJdKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdG8gY2FydCAoY29tbWVudGVkOyB3YXMgYSBmYWlsZWQgYXR0ZW1wdCB0byBwcmV2ZW50IHNjcm9sbC1vbi1kcmFnIG9uIHNvbWUgYnJvd3NlcnMpDQogICAgICAgICAgICAgICAgLy8gcDhfZnJhbWUuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7DQogICAgDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvdWNoX2NvbnRyb2xzX2dmeCIpLnN0eWxlLmRpc3BsYXk9InRhYmxlIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG91Y2hfY29udHJvbHNfYmFja2dyb3VuZCIpLnN0eWxlLmRpc3BsYXk9InRhYmxlIjsNCiAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvdWNoX2NvbnRyb2xzX2dmeCIpLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19iYWNrZ3JvdW5kIikuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICBpZiAoIXA4X2lzX3J1bm5pbmcpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcDhfcGxheWFyZWEuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgICAgICAgICAgICAgcDhfY29udGFpbmVyLnN0eWxlLmRpc3BsYXk9ImZsZXgiOw0KICAgICAgICAgICAgICAgIHA4X2NvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3A9ImF1dG8iOw0KICAgIA0KICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3N0YXJ0X2J1dHRvbiIpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheT0iZmxleCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2xheW91dCk7DQogICAgICAgIH0NCiAgICANCiAgICANCiAgICAgICAgdmFyIHA4X3RvdWNoX2RldGVjdGVkID0gZmFsc2U7DQogICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoInRvdWNoc3RhcnQiLCBmdW5jdGlvbihldmVudCkNCiAgICAgICAgew0KICAgICAgICAgICAgcDhfdG91Y2hfZGV0ZWN0ZWQgPSB0cnVlOw0KICAgIA0KICAgICAgICAgICAgLy8gaGlkZSBjb2RvX3RleHRhcmVhIC0tIGNsaXBib2FyZCBzdXBwb3J0IG9uIG1vYmlsZSBpcyBub3QgZmVhc2libGUNCiAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvZG9fdGV4dGFyZWEiKTsNCiAgICAgICAgICAgIGlmIChlbCAmJiBlbC5zdHlsZS5kaXNwbGF5ICE9ICJub25lIil7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgIH0sICB7cGFzc2l2ZTogdHJ1ZX0pOw0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChwaWNvOF9hdWRpb19jb250ZXh0KSANCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBwaWNvOF9hdWRpb19jb250ZXh0LnJlc3VtZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjYXRjaChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIioqIHBpY284X2F1ZGlvX2NvbnRleHQucmVzdW1lKCkgZmFpbGVkIik7DQogICAgICAgICAgICAgICAgfQkNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICB2YXIgd2ViQXVkaW9BUEkgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgfHwgd2luZG93Lm1vekF1ZGlvQ29udGV4dCB8fCB3aW5kb3cub0F1ZGlvQ29udGV4dCB8fCB3aW5kb3cubXNBdWRpb0NvbnRleHQ7CQkJDQogICAgICAgICAgICBpZiAod2ViQXVkaW9BUEkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcGljbzhfYXVkaW9fY29udGV4dCA9IG5ldyB3ZWJBdWRpb0FQSTsNCiAgICANCiAgICAgICAgICAgICAgICAvLyB3YWtlIHVwIGlPUw0KICAgICAgICAgICAgICAgIGlmIChwaWNvOF9hdWRpb19jb250ZXh0KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdW1teV9zb3VyY2Vfc2Z4ID0gcGljbzhfYXVkaW9fY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bW15X3NvdXJjZV9zZnguYnVmZmVyID0gcGljbzhfYXVkaW9fY29udGV4dC5jcmVhdGVCdWZmZXIoMSwgMSwgMjIwNTApOyAvLyBkdW1teQ0KICAgICAgICAgICAgICAgICAgICAgICAgZHVtbXlfc291cmNlX3NmeC5jb25uZWN0KHBpY284X2F1ZGlvX2NvbnRleHQuZGVzdGluYXRpb24pOw0KICAgICAgICAgICAgICAgICAgICAgICAgZHVtbXlfc291cmNlX3NmeC5zdGFydCgxLCAwLjI1KTsgLy8gZ2l2ZXMgSW52YWxpZFN0YXRlRXJyb3IgLS0gd2h5PyBoYXNuJ3QgYmVlbiBwbGF5ZWQgYmVmb3JlIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy9kdW1teV9zb3VyY2Vfc2Z4Lm5vdGVPbigwKTsgLy8gZGVsZXRlbWUNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIqKiBkdW1teV9zb3VyY2Vfc2Z4LnN0YXJ0KDEsIDAuMjUpIGZhaWxlZCIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgDQogICAgICAgIGZ1bmN0aW9uIHA4X2Nsb3NlX2NhcnQoKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBqdXN0IHJlbG9hZCBwYWdlISB1c2VkIGZvciB0b3VjaCBidXR0b25zIC0tIGhhcmQgdG8gcm9sbCBiYWNrIHN0YXRlIA0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAiIjsgLy8gdHJpZ2dlcnMgcmVsb2FkDQogICAgICAgIH0NCiAgICANCiAgICAgICAgdmFyIHA4X2lzX3J1bm5pbmcgPSBmYWxzZTsNCiAgICAgICAgdmFyIHA4X3NjcmlwdCA9IG51bGw7DQogICAgICAgIHZhciBNb2R1bGUgPSBudWxsOw0KICAgICAgICBmdW5jdGlvbiBwOF9ydW5fY2FydCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChwOF9pc19ydW5uaW5nKSByZXR1cm47DQogICAgICAgICAgICBwOF9pc19ydW5uaW5nID0gdHJ1ZTsNCiAgICANCiAgICAgICAgICAgIC8vIHRvdWNoOiBoaWRlIGV2ZXJ5dGhpbmcgZXhjZXB0IHA4X2ZyYW1lXzANCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib2R5XzAiKTsNCiAgICAgICAgICAgICAgICBlbDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfZnJhbWVfMCIpOw0KICAgICAgICAgICAgICAgIGlmIChlbCAmJiBlbDIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5PSJub25lIjsNCiAgICAgICAgICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbDIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIC8vIGNyZWF0ZSBhdWRpbyBjb250ZXh0IGFuZCB3YWtlIGl0IHVwIChmb3IgaU9TIC0tIG5lZWRzIGhhcHBlbiBpbnNpZGUgdG91Y2ggZXZlbnQpCQkNCiAgICAgICAgICAgIHA4X2NyZWF0ZV9hdWRpb19jb250ZXh0KCk7DQogICAgDQogICAgICAgICAgICAvLyBzaG93IHRvdWNoIGVsZW1lbnRzDQogICAgICAgICAgICBlbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwOF9jb250cm9sbGVyX2FyZWEnKTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICAgICAgZWxzW2ldLnN0eWxlLmRpc3BsYXk9IiI7DQogICAgDQogICAgDQogICAgICAgICAgICAvLyBpbnN0YWxsIHRvdWNoIGV2ZW50cy4gVGhlc2UgYWxzbyBzZXJ2ZSB0byBibG9jayBzY3JvbGxpbmcgLyBwaW5jaGluZyAvIHpvb21pbmcgb24gcGhvbmVzIHdoZW4gcDhfaXNfcnVubmluZw0KICAgICAgICAgICAgICAgIC8vIG1vdmVkIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IGNhbGxzIGludG8gcGljbzhfYnV0dG9uc19ldmVudCgpICh3YW50IHRvIGxldCB0b3AgYnV0dG9ucyBwYXNzIHRocm91Z2gpDQogICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24oZXZlbnQpeyBwaWNvOF9idXR0b25zX2V2ZW50KGV2ZW50LCAwKTsgfSwge3Bhc3NpdmU6IGZhbHNlfSk7DQogICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLCAgZnVuY3Rpb24oZXZlbnQpeyBwaWNvOF9idXR0b25zX2V2ZW50KGV2ZW50LCAxKTsgfSwge3Bhc3NpdmU6IGZhbHNlfSk7DQogICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsICAgZnVuY3Rpb24oZXZlbnQpeyBwaWNvOF9idXR0b25zX2V2ZW50KGV2ZW50LCAyKTsgfSwge3Bhc3NpdmU6IGZhbHNlfSk7DQogICAgDQogICAgDQogICAgICAgICAgICAvLyBsb2FkIGFuZCBydW4gc2NyaXB0DQogICAgICAgICAgICBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICAgICAgICBwOF9zY3JpcHQgPSBlOw0KICAgICAgICAgICAgZS5vbmxvYWQgPSBmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIHNob3cgY2FudmFzIC8gbWVudSBidXR0b25zIG9ubHkgYWZ0ZXIgbG9hZGluZw0KICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3BsYXlhcmVhIik7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBlbC5zdHlsZS5kaXNwbGF5PSJ0YWJsZSI7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZihwOF91cGRhdGVfbGF5b3V0X2hhc2gpICE9PSAndW5kZWZpbmVkJykNCiAgICAgICAgICAgICAgICAgICAgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gLTc3Ow0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocDhfYnV0dG9uc19oYXNoKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICAgICAgICAgIHA4X2J1dHRvbnNfaGFzaCA9IC0zMzsNCiAgICANCiAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGUudHlwZSA9ICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0IjsNCiAgICAgICAgICAgIGUuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvVUdTLUFzc2V0c0AzMDc4MzgzMmQxZjg3YmViOWM5M2JmODI4MjRmNTllNjNlYzZjYjExL2hvbGxvdy5qcyI7DQogICAgICAgICAgICBlLmlkID0gImVfc2NyaXB0IjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTsgLy8gbG9hZCBhbmQgcnVuDQogICAgDQogICAgICAgICAgICAvLyBoaWRlIHN0YXJ0IGJ1dHRvbiBhbmQgc2hvdyBjYW52YXMgLyBtZW51IGJ1dHRvbnMuIGhpZGUgc3RhcnQgYnV0dG9uDQogICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9zdGFydF9idXR0b24iKTsNCiAgICAgICAgICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgDQogICAgICAgICAgICAvLyBhZGQgI3BsYXlpbmcgZm9yIHRvdWNoc2NyZWVuIGRldmljZXMgKGFsbG93cyBiYWNrIGJ1dHRvbiB0byBjbG9zZSkNCiAgICAgICAgICAgIC8vIFggYnV0dG9uIGNhbiBhbHNvIGJlIHVzZWQgdG8gdHJpZ2dlciB0aGlzIA0KICAgICAgICAgICAgaWYgKHA4X3RvdWNoX2RldGVjdGVkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gIiNwbGF5aW5nIjsNCiAgICAgICAgICAgICAgICB3aW5kb3cub25oYXNoY2hhbmdlID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNlYXJjaCgicGxheWluZyIpIDwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBpbnN0YWxsIGRyYWcmZHJvcCBsaXN0ZW5lcnMNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGlmIChjYW52YXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgZHJhZ292ZXIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZHJhZ292ZXIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyYWdzdG9wLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgbm9wLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgcDhfZHJvcF9maWxlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgDQogICAgICAgIA0KICAgICAgICAgICAgLy8gR2FtZXBhZCBjb2RlDQogICAgICAgIA0KICAgICAgICB2YXIgUDhfQlVUVE9OX08gPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDEwfTsNCiAgICAgICAgdmFyIFA4X0JVVFRPTl9YID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHgyMH07DQogICAgICAgIHZhciBQOF9EUEFEX0xFRlQgPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDF9Ow0KICAgICAgICB2YXIgUDhfRFBBRF9SSUdIVCA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4Mn07DQogICAgICAgIHZhciBQOF9EUEFEX1VQID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHg0fTsNCiAgICAgICAgdmFyIFA4X0RQQURfRE9XTiA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4OH07DQogICAgICAgIHZhciBQOF9NRU5VID0ge2FjdGlvbjonbWVudSd9Ow0KICAgICAgICB2YXIgUDhfTk9fQUNUSU9OID0ge2FjdGlvbjonbm9uZSd9Ow0KICAgIA0KICAgICAgICB2YXIgUDhfQlVUVE9OX01BUFBJTkcgPSBbDQogICAgICAgICAgICAvLyByZWY6IGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9nYW1lcGFkLyNyZW1hcHBpbmcNCiAgICAgICAgICAgIFA4X0JVVFRPTl9PLCAgICAgICAgICAvLyBCb3R0b20gZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X0JVVFRPTl9YLCAgICAgICAgICAvLyBSaWdodCBmYWNlIGJ1dHRvbg0KICAgICAgICAgICAgUDhfQlVUVE9OX1gsICAgICAgICAgIC8vIExlZnQgZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X0JVVFRPTl9PLCAgICAgICAgICAvLyBUb3AgZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBOZWFyIGxlZnQgc2hvdWxkZXIgYnV0dG9uIChMMSkNCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBOZWFyIHJpZ2h0IHNob3VsZGVyIGJ1dHRvbiAoUjEpDQogICAgICAgICAgICBQOF9OT19BQ1RJT04sICAgICAgICAgLy8gRmFyIGxlZnQgc2hvdWxkZXIgYnV0dG9uIChMMikNCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBGYXIgcmlnaHQgc2hvdWxkZXIgYnV0dG9uIChSMikNCiAgICAgICAgICAgIFA4X01FTlUsICAgICAgICAgICAgICAvLyBMZWZ0IGF1eGlsaWFyeSBidXR0b24gKHNlbGVjdCkNCiAgICAgICAgICAgIFA4X01FTlUsICAgICAgICAgICAgICAvLyBSaWdodCBhdXhpbGlhcnkgYnV0dG9uIChzdGFydCkNCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBMZWZ0IHN0aWNrIGJ1dHRvbg0KICAgICAgICAgICAgUDhfTk9fQUNUSU9OLCAgICAgICAgIC8vIFJpZ2h0IHN0aWNrIGJ1dHRvbg0KICAgICAgICAgICAgUDhfRFBBRF9VUCwgICAgICAgICAgIC8vIERwYWQgdXANCiAgICAgICAgICAgIFA4X0RQQURfRE9XTiwgICAgICAgICAvLyBEcGFkIGRvd24NCiAgICAgICAgICAgIFA4X0RQQURfTEVGVCwgICAgICAgICAvLyBEcGFkIGxlZnQNCiAgICAgICAgICAgIFA4X0RQQURfUklHSFQsICAgICAgICAvLyBEcGFkIHJpZ2h0DQogICAgICAgIF07DQogICAgDQogICAgICAgIC8vIFRyYWNrIHdoaWNoIHBsYXllciBpcyBjb250cm9sbGVyIGJ5IGVhY2ggZ2FtZXBhZC4gR2FtZXBhZCBpbmRleCBpIGNvbnRyb2xzIHRoZQ0KICAgICAgICAvLyBwbGF5ZXIgd2l0aCBpbmRleCBwaWNvOF9nYW1lcGFkc19tYXBwaW5nW2ldLiBHYW1lcGFkcyB3aXRoIG51bGwgcGxheWVyIGFyZQ0KICAgICAgICAvLyBjdXJyZW50bHkgdW5hc3NpZ25lZCAtIHRoZXkgZ2V0IGFzc2lnbmVkIHRvIGEgcGxheWVyIHdoZW4gYSBidXR0b24gaXMgcHJlc3NlZC4NCiAgICAgICAgdmFyIHBpY284X2dhbWVwYWRzX21hcHBpbmcgPSBbXTsNCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfdW5hc3NpZ25fZ2FtZXBhZChnYW1lcGFkX2luZGV4KSB7DQogICAgICAgICAgICBpZiAocGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tnYW1lcGFkX2luZGV4XSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcGljbzhfYnV0dG9uc1twaWNvOF9nYW1lcGFkc19tYXBwaW5nW2dhbWVwYWRfaW5kZXhdXSA9IDA7DQogICAgICAgICAgICBwaWNvOF9nYW1lcGFkc19tYXBwaW5nW2dhbWVwYWRfaW5kZXhdID0gbnVsbDsNCiAgICAgICAgfQ0KICAgIA0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9maXJzdF9wbGF5ZXJfd2l0aG91dF9nYW1lcGFkKG1heF9wbGF5ZXJzKSB7DQogICAgICAgICAgICB2YXIgYWxsb2NhdGVkX3BsYXllcnMgPSBwaWNvOF9nYW1lcGFkc19tYXBwaW5nLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9IG51bGw7IH0pOw0KICAgICAgICAgICAgdmFyIHNvcnRlZF9wbGF5ZXJzID0gQXJyYXkuZnJvbShhbGxvY2F0ZWRfcGxheWVycykuc29ydCgpOw0KICAgICAgICAgICAgZm9yICh2YXIgZGVzaXJlZCA9IDA7IGRlc2lyZWQgPCBzb3J0ZWRfcGxheWVycy5sZW5ndGggJiYgZGVzaXJlZCA8IG1heF9wbGF5ZXJzOyArK2Rlc2lyZWQpIHsNCiAgICAgICAgICAgICAgICBpZiAoZGVzaXJlZCAhPSBzb3J0ZWRfcGxheWVyc1tkZXNpcmVkXSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzaXJlZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc29ydGVkX3BsYXllcnMubGVuZ3RoIDwgbWF4X3BsYXllcnMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc29ydGVkX3BsYXllcnMubGVuZ3RoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfYXNzaWduX2dhbWVwYWRfdG9fcGxheWVyKGdhbWVwYWRfaW5kZXgsIHBsYXllcl9pbmRleCkgew0KICAgICAgICAgICAgcDhfdW5hc3NpZ25fZ2FtZXBhZChnYW1lcGFkX2luZGV4KTsNCiAgICAgICAgICAgIHBpY284X2dhbWVwYWRzX21hcHBpbmdbZ2FtZXBhZF9pbmRleF0gPSBwbGF5ZXJfaW5kZXg7DQogICAgICAgIH0NCiAgICANCiAgICANCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfY29udmVydF9zdGFuZGFyZF9nYW1lcGFkX3RvX2J1dHRvbl9zdGF0ZShnYW1lcGFkLCBheGlzX3RocmVzaG9sZCwgYnV0dG9uX3RocmVzaG9sZCkgew0KICAgICAgICAgICAgLy8gR2l2ZW4gYSBnYW1lcGFkIG9iamVjdCwgcmV0dXJuOg0KICAgICAgICAgICAgLy8gew0KICAgICAgICAgICAgLy8gICAgIGJ1dHRvbl9zdGF0ZTogdGhlIGJpbmFyeSBlbmNvZGVkIFBpY28gOCBidXR0b24gc3RhdGUNCiAgICAgICAgICAgIC8vICAgICBtZW51X2J1dHRvbjogdHJ1ZSBpZiBhbnkgbWVudS1tYXBwZWQgYnV0dG9uIHdhcyBwcmVzc2VkDQogICAgICAgICAgICAvLyAgICAgYW55X2J1dHRvbjogdHJ1ZSBpZiBhbnkgYnV0dG9uIHdhcyBwcmVzc2VkLCBpbmNsdWRpbmcgZC1wYWQNCiAgICAgICAgICAgIC8vICAgICAgICAgYnV0dG9ucyBhbmQgdW5tYXBwZWQgYnV0dG9ucw0KICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgaWYgKCFnYW1lcGFkIHx8ICFnYW1lcGFkLmF4ZXMgfHwgIWdhbWVwYWQuYnV0dG9ucykgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZTogMCwNCiAgICAgICAgICAgICAgICAgICAgbWVudV9idXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBhbnlfYnV0dG9uOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBidXR0b25fc3RhdGVfZnJvbV9heGlzKGF4aXMsIGxvd19zdGF0ZSwgaGlnaF9zdGF0ZSwgZGVmYXVsdF9zdGF0ZSkgew0KICAgICAgICAgICAgICAgIGlmIChheGlzICYmIGF4aXMgPCAtYXhpc190aHJlc2hvbGQpIHJldHVybiBsb3dfc3RhdGU7DQogICAgICAgICAgICAgICAgaWYgKGF4aXMgJiYgYXhpcyA+IGF4aXNfdGhyZXNob2xkKSByZXR1cm4gaGlnaF9zdGF0ZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdF9zdGF0ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBheGVzX2FjdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgYnV0dG9uX3N0YXRlX2Zyb21fYXhpcyhnYW1lcGFkLmF4ZXNbMF0sIFA4X0RQQURfTEVGVCwgUDhfRFBBRF9SSUdIVCwgUDhfTk9fQUNUSU9OKSwNCiAgICAgICAgICAgICAgICBidXR0b25fc3RhdGVfZnJvbV9heGlzKGdhbWVwYWQuYXhlc1sxXSwgUDhfRFBBRF9VUCwgUDhfRFBBRF9ET1dOLCBQOF9OT19BQ1RJT04pLA0KICAgICAgICAgICAgXTsNCiAgICANCiAgICAgICAgICAgIHZhciBidXR0b25fYWN0aW9ucyA9IGdhbWVwYWQuYnV0dG9ucy5tYXAoZnVuY3Rpb24gKGJ1dHRvbiwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICB2YXIgcHJlc3NlZCA9IGJ1dHRvbi52YWx1ZSA+IGJ1dHRvbl90aHJlc2hvbGQgfHwgYnV0dG9uLnByZXNzZWQ7DQogICAgICAgICAgICAgICAgaWYgKCFwcmVzc2VkKSByZXR1cm4gUDhfTk9fQUNUSU9OOw0KICAgICAgICAgICAgICAgIHJldHVybiBQOF9CVVRUT05fTUFQUElOR1tpbmRleF0gfHwgUDhfTk9fQUNUSU9OOw0KICAgICAgICAgICAgfSk7DQogICAgDQogICAgICAgICAgICB2YXIgYWxsX2FjdGlvbnMgPSBheGVzX2FjdGlvbnMuY29uY2F0KGJ1dHRvbl9hY3Rpb25zKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG1lbnVfYnV0dG9uID0gYnV0dG9uX2FjdGlvbnMuc29tZShmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBhY3Rpb24uYWN0aW9uID09ICdtZW51JzsgfSk7DQogICAgICAgICAgICB2YXIgYnV0dG9uX3N0YXRlID0gKGFsbF9hY3Rpb25zDQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5hY3Rpb24gPT0gJ2J1dHRvbic7IH0pDQogICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5jb2RlOyB9KQ0KICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgY29kZSkgeyByZXR1cm4gcmVzdWx0IHwgY29kZTsgfSwgMCkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB2YXIgYW55X2J1dHRvbiA9IGdhbWVwYWQuYnV0dG9ucy5zb21lKGZ1bmN0aW9uIChidXR0b24pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uLnZhbHVlID4gYnV0dG9uX3RocmVzaG9sZCB8fCBidXR0b24ucHJlc3NlZDsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgYW55X2J1dHRvbiB8PSBidXR0b25fc3RhdGU7IC8vand3OiBpbmNsdWRlIGF4ZXMgMCwxIGFzIG1pZ2h0IGJlIGZpcnN0IGludGVuZGVkIGFjdGlvbg0KICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBidXR0b25fc3RhdGUsDQogICAgICAgICAgICAgICAgbWVudV9idXR0b24sDQogICAgICAgICAgICAgICAgYW55X2J1dHRvbg0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICAvLyBqd3c6IHBpY28tOCAwLjIuMSB2ZXJzaW9uIGZvciB1bm1hcHBlZCBnYW1lcGFkcywgZm9sbG93aW5nIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUNCiAgICAgICAgLy8gYXhlcyAwLDEgJiBidXR0b25zIDAsMSwyLDMgYXJlIHJlYXNvbmFibHkgc2FmZS4gZG9uJ3QgdHJ5IHRvIHJlYWQgZHBhZC4NCiAgICAgICAgLy8gbWVudSBidXR0b25zIGFyZSB1bnByZWRpY3RhYmxlLCBidXQgdXNlIDYuLjggYW55d2F5IChiZXR0ZXIgdG8gaGF2ZSBhIHdlaXJkIG1lbnUgYnV0dG9uIHRoYW4gbm9uZSkNCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfY29udmVydF91bm1hcHBlZF9nYW1lcGFkX3RvX2J1dHRvbl9zdGF0ZShnYW1lcGFkLCBheGlzX3RocmVzaG9sZCwgYnV0dG9uX3RocmVzaG9sZCkgew0KICAgIA0KICAgICAgICAgICAgaWYgKCFnYW1lcGFkIHx8ICFnYW1lcGFkLmF4ZXMgfHwgIWdhbWVwYWQuYnV0dG9ucykgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZTogMCwNCiAgICAgICAgICAgICAgICAgICAgbWVudV9idXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBhbnlfYnV0dG9uOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICB2YXIgYnV0dG9uX3N0YXRlID0gMDsNCiAgICANCiAgICAgICAgICAgIGlmIChnYW1lcGFkLmF4ZXNbMF0gJiYgZ2FtZXBhZC5heGVzWzBdIDwgLWF4aXNfdGhyZXNob2xkKSBidXR0b25fc3RhdGUgfD0gMHgxOw0KICAgICAgICAgICAgaWYgKGdhbWVwYWQuYXhlc1swXSAmJiBnYW1lcGFkLmF4ZXNbMF0gPiBheGlzX3RocmVzaG9sZCkgIGJ1dHRvbl9zdGF0ZSB8PSAweDI7DQogICAgICAgICAgICBpZiAoZ2FtZXBhZC5heGVzWzFdICYmIGdhbWVwYWQuYXhlc1sxXSA8IC1heGlzX3RocmVzaG9sZCkgYnV0dG9uX3N0YXRlIHw9IDB4NDsNCiAgICAgICAgICAgIGlmIChnYW1lcGFkLmF4ZXNbMV0gJiYgZ2FtZXBhZC5heGVzWzFdID4gYXhpc190aHJlc2hvbGQpICBidXR0b25fc3RhdGUgfD0gMHg4Ow0KICAgIA0KICAgICAgICAgICAgLy8gYnV0dG9uczogZmlyc3QgNCB0YWtlbiB0byBiZSBPL1gsIDYuLjggdGFrZW4gdG8gYmUgbWVudSBidXR0b24NCiAgICANCiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBnYW1lcGFkLmJ1dHRvbnMubGVuZ3RoOyBqKyspDQogICAgICAgICAgICBpZiAoZ2FtZXBhZC5idXR0b25zW2pdLnZhbHVlID4gMCB8fCBnYW1lcGFkLmJ1dHRvbnNbal0ucHJlc3NlZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoaiA8IDQpDQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZSB8PSAoMHgxMCA8PCAoKChqKzEpLzIpJjEpKTsgLy8gMCAxIDEgMCAtLSBBLFggLT4gTyxYIG9uIHhib3gzNjANCiAgICAgICAgICAgICAgICBlbHNlIGlmIChqID49IDYgJiYgaiA8PSA4KQ0KICAgICAgICAgICAgICAgICAgICBidXR0b25fc3RhdGUgfD0gMHg0MDsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHZhciBtZW51X2J1dHRvbiA9IGJ1dHRvbl9zdGF0ZSAmIDB4NDA7DQogICAgDQogICAgICAgICAgICB2YXIgYW55X2J1dHRvbiA9IGdhbWVwYWQuYnV0dG9ucy5zb21lKGZ1bmN0aW9uIChidXR0b24pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uLnZhbHVlID4gYnV0dG9uX3RocmVzaG9sZCB8fCBidXR0b24ucHJlc3NlZDsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgYW55X2J1dHRvbiB8PSBidXR0b25fc3RhdGU7IC8vand3OiBpbmNsdWRlIGF4ZXMgMCwxIGFzIG1pZ2h0IGJlIGZpcnN0IGludGVuZGVkIGFjdGlvbg0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZSwNCiAgICAgICAgICAgICAgICBtZW51X2J1dHRvbiwNCiAgICAgICAgICAgICAgICBhbnlfYnV0dG9uDQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgDQogICAgICAgIA0KICAgICAgICAvLyBnYW1lcGFkICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2FtZXBhZF9BUEkvVXNpbmdfdGhlX0dhbWVwYWRfQVBJDQogICAgICAgIC8vIChzZXRzIGJpdHMgaW4gcGljbzhfYnV0dG9uc1tdKQ0KICAgICAgICBmdW5jdGlvbiBwOF91cGRhdGVfZ2FtZXBhZHMoKSB7DQogICAgICAgICAgICB2YXIgYXhpc190aHJlc2hvbGQgPSAwLjM7DQogICAgICAgICAgICB2YXIgYnV0dG9uX3RocmVzaG9sZCA9IDAuNTsgLy8gU2hvdWxkIGJlIHVubmVjZXNzYXJ5LCB3ZSBzaG91bGQgYmUgYWJsZSB0byB0cnVzdCAucHJlc3NlZA0KICAgICAgICAgICAgdmFyIG1heF9wbGF5ZXJzID0gODsNCiAgICAgICAgICAgIHZhciBncHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKTsNCiAgICANCiAgICAgICAgICAgIGlmICghZ3BzKSByZXR1cm47DQogICAgDQogICAgICAgICAgICAvLyBJbiBDaHJvbWUsIGdwcyBpcyBpdGVyYWJsZSBidXQgaXQncyBub3QgYW4gYXJyYXkuDQogICAgICAgICAgICBncHMgPSBBcnJheS5mcm9tKGdwcyk7DQogICAgDQogICAgICAgICAgICBwaWNvOF9nYW1lcGFkcy5jb3VudCA9IGdwcy5sZW5ndGg7DQogICAgICAgICAgICB3aGlsZSAoZ3BzLmxlbmd0aCA+IHBpY284X2dhbWVwYWRzX21hcHBpbmcubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcGljbzhfZ2FtZXBhZHNfbWFwcGluZy5wdXNoKG51bGwpOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgdmFyIG1lbnVfYnV0dG9uID0gZmFsc2U7DQogICAgICAgICAgICB2YXIgZ2FtZXBhZF9zdGF0ZXMgPSBncHMubWFwKGZ1bmN0aW9uIChncCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAoZ3AgJiYgZ3AubWFwcGluZyA9PSAic3RhbmRhcmQiKSA/DQogICAgICAgICAgICAgICAgICAgIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ3AsIGF4aXNfdGhyZXNob2xkLCBidXR0b25fdGhyZXNob2xkKSA6DQogICAgICAgICAgICAgICAgICAgIHA4X2NvbnZlcnRfdW5tYXBwZWRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ3AsIGF4aXNfdGhyZXNob2xkLCBidXR0b25fdGhyZXNob2xkKTsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgLy8gVW5hc3NpZ24gZGlzY29ubmVjdGVkIGdhbWVwYWRzLg0KICAgICAgICAgICAgLy8gZ3BzLmZvckVhY2goZnVuY3Rpb24gKGdwLCBpKSB7IGlmIChncCAmJiAhZ3AuY29ubmVjdGVkKSB7IHA4X3VuYXNzaWduX2dhbWVwYWQoaSk7IH19KTsNCiAgICAgICAgICAgIGdwcy5mb3JFYWNoKGZ1bmN0aW9uIChncCwgaSkgeyBpZiAoIWdwIHx8ICFncC5jb25uZWN0ZWQpIHsgcDhfdW5hc3NpZ25fZ2FtZXBhZChpKTsgfX0pOyAvLyBodHRwczovL3d3dy5sZXhhbG9mZmxlLmNvbS9iYnMvP3BpZD04NzEzMiNwDQogICAgDQogICAgDQogICAgICAgICAgICAvLyBBc3NpZ24gdW5hc3NpZ25lZCBnYW1lcGFkcyB3aGVuIGFueSBidXR0b24gaXMgcHJlc3NlZC4NCiAgICAgICAgICAgIGdhbWVwYWRfc3RhdGVzLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKHN0YXRlLmFueV9idXR0b24gJiYgcGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tpXSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdF9mcmVlX3BsYXllciA9IHA4X2ZpcnN0X3BsYXllcl93aXRob3V0X2dhbWVwYWQobWF4X3BsYXllcnMpOw0KICAgICAgICAgICAgICAgICAgICBwOF9hc3NpZ25fZ2FtZXBhZF90b19wbGF5ZXIoaSwgZmlyc3RfZnJlZV9wbGF5ZXIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgLy8gVXBkYXRlIHBpY284X2J1dHRvbnMgYXJyYXkuDQogICAgICAgICAgICBnYW1lcGFkX3N0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChnYW1lcGFkX3N0YXRlLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKHBpY284X2dhbWVwYWRzX21hcHBpbmdbaV0gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBwaWNvOF9idXR0b25zW3BpY284X2dhbWVwYWRzX21hcHBpbmdbaV1dID0gZ2FtZXBhZF9zdGF0ZS5idXR0b25fc3RhdGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgDQogICAgICAgICAgICAvLyBVcGRhdGUgbWVudSBidXR0b24uDQogICAgICAgICAgICAvLyBQaWNvIDggb25seSByZWNvZ25pc2VzIHRoZSBtZW51IGJ1dHRvbiBvbiB0aGUgZmlyc3QgcGxheWVyLCBzbyB3ZQ0KICAgICAgICAgICAgLy8gcHJlc3MgaXQgd2hlbiBhbnkgZ2FtZXBhZCBoYXMgcHJlc3NlZCBhIGJ1dHRvbiBtYXBwZWQgdG8gbWVudS4NCiAgICAgICAgICAgIGlmIChnYW1lcGFkX3N0YXRlcy5zb21lKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUubWVudV9idXR0b247IH0pKSB7DQogICAgICAgICAgICAgICAgcGljbzhfYnV0dG9uc1swXSB8PSAweDQwOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9nYW1lcGFkcyk7DQogICAgICAgIH0NCiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9nYW1lcGFkcyk7DQogICAgDQogICAgICAgIC8vIEVuZCBvZiBnYW1lcGFkIGNvZGUNCiAgICANCiAgICANCiAgICAgICAgLy8ga2V5IGJsb2NrZXIuIHByZXZlbnQgYnJvd3NlciBvcGVyYXRpb25zIHdoaWxlIHBsYXlpbmcgY2FydCBzbyB0aGF0IFBJQ08tOCBjYW4gdXNlIHRob3NlIGtleXMgZS5nLiBjdXJzb3JzIHRvIHNjcm9sbCwgY3RybC1yIHRvIHJlbG9hZA0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywNCiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsNCiAgICAgICAgICAgIGlmICghcDhfaXNfcnVubmluZykgcmV0dXJuOw0KICAgIA0KICAgICAgICAgICAgaWYgKHBpY284X3N0YXRlLmhhc19mb2N1cyA9PSAxKQ0KICAgICAgICAgICAgICAgIGlmIChbMzIsIDM3LCAzOCwgMzksIDQwLCA3NywgODIsIDgwLCA5XS5pbmRleE9mKGV2ZW50LmtleUNvZGUpID4gLTEpICAgICAgIC8vIGJsb2NrIG9ubHkgY3Vyc29ycywgTSBSIFAsIHRhYg0KICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgDQogICAgICAgIH0se3Bhc3NpdmU6IGZhbHNlfSk7DQogICAgDQogICAgICAgIC8vIHdoZW4gdXNpbmcgY29kb190ZXh0YXJlYSB0byBkZXRlcm1pbmUgZm9jdXMsIG5lZWQgdG8gZXhwbGljaXRseSBoYW5kIGZvY3VzIGJhY2sgd2hlbiBjbGlja2luZyBhIHA4X21lbnVfYnV0dG9uDQogICAgICAgIGZ1bmN0aW9uIHA4X2dpdmVfZm9jdXMoKQ0KICAgICAgICB7DQogICAgICAgICAgICBlbCA9ICh0eXBlb2YgY29kb190ZXh0YXJlYSA9PT0gJ3VuZGVmaW5lZCcpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvZG9fdGV4dGFyZWEiKSA6IGNvZG9fdGV4dGFyZWE7DQogICAgICAgICAgICBpZiAoZWwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWwuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICBlbC5zZWxlY3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9yZXF1ZXN0X2Z1bGxzY3JlZW4oKSB7DQogICAgDQogICAgICAgICAgICB2YXIgaXNfZnVsbHNjcmVlbj0oZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KICAgIA0KICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3BsYXlhcmVhIik7DQogICAgDQogICAgICAgICAgICBpZiAoIGVsLnJlcXVlc3RGdWxsc2NyZWVuICkgew0KICAgICAgICAgICAgICAgIGVsLnJlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKCBlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbiApIHsNCiAgICAgICAgICAgICAgICBlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICggZWwud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4gKSB7DQogICAgICAgICAgICAgICAgZWwud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4oIEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgIDwvc2NyaXB0Pg0KICAgIA0KICAgIDxTVFlMRSBUWVBFPSJ0ZXh0L2NzcyI+DQogICAgPCEtLQ0KICAgIC5wOF9tZW51X2J1dHRvbnsNCiAgICAgICAgb3BhY2l0eTowLjM7DQogICAgICAgIHBhZGRpbmc6NHB4Ow0KICAgICAgICBkaXNwbGF5OnRhYmxlOw0KICAgICAgICB3aWR0aDoyNHB4Ow0KICAgICAgICBoZWlnaHQ6MjRweDsNCiAgICAgICAgZmxvYXQ6cmlnaHQ7DQogICAgfQ0KICAgIA0KICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NTEycHgpIHsNCiAgICAgICAgLnA4X21lbnVfYnV0dG9uew0KICAgICAgICAgICAgd2lkdGg6MjRweDsgbWFyZ2luLWxlZnQ6OHB4OyBtYXJnaW4tYm90dG9tOjhweDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAucDhfbWVudV9idXR0b246aG92ZXJ7DQogICAgICAgIG9wYWNpdHk6MS4wOw0KICAgICAgICBjdXJzb3I6cG9pbnRlcjsNCiAgICB9DQogICAgDQogICAgY2FudmFzew0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IG9wdGltaXplU3BlZWQ7DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiAtd2Via2l0LW9wdGltaXplLWNvbnRyYXN0Ow0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IG9wdGltaXplLWNvbnRyYXN0Ow0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDsNCiAgICAgICAgLW1zLWludGVycG9sYXRpb24tbW9kZTogbmVhcmVzdC1uZWlnaGJvcjsNCiAgICAgICAgYm9yZGVyOiAwcHg7DQogICAgICAgIGN1cnNvcjogbm9uZTsNCiAgICB9DQogICAgDQogICAgDQogICAgLnA4X3N0YXJ0X2J1dHRvbnsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBjcmlzcC1lZGdlczsNCiAgICAgICAgY3Vyc29yOnBvaW50ZXI7DQogICAgICAgIGJhY2tncm91bmQ6dXJsKCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU1nQUFBRElDQUlBQUFBaU9qbkpBQUFBQkdkQlRVRUFBTEdQQy94aEJRQUFBaUpKUkVGVWVGN3QwSUVBQUFBQXc2RDVVeC9raFZCaHdJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0REd01ERFZsd0FCQldjU3JRQUFBQUJKUlU1RXJrSmdnZz09Iik7DQogICAgICAgIC1yZXBlYXQgY2VudGVyOw0KICAgICAgICAtd2Via2l0LWJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgLW1vei1iYWNrZ3JvdW5kLXNpemU6Y292ZXI7IC1vLWJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgYmFja2dyb3VuZC1zaXplOmNvdmVyOw0KICAgIH0NCiAgICANCiAgICAuYnV0dG9uX2dmeHsNCiAgICAgICAgc3Ryb2tlLXdpZHRoOjI7DQogICAgICAgIHN0cm9rZTogI2ZmZmZmZjsNCiAgICAgICAgc3Ryb2tlLW9wYWNpdHk6MC40Ow0KICAgICAgICBmaWxsLW9wYWNpdHk6MC4yOw0KICAgICAgICBmaWxsOmJsYWNrOw0KICAgIH0NCiAgICANCiAgICAuYnV0dG9uX2dmeF9pY29uew0KICAgICAgICBzdHJva2Utd2lkdGg6MzsNCiAgICAgICAgc3Ryb2tlOiAjOTA5MDkwOw0KICAgICAgICBzdHJva2Utb3BhY2l0eTowLjc7DQogICAgICAgIGZpbGw6bm9uZTsNCiAgICB9DQogICAgDQogICAgLS0+DQogICAgPC9TVFlMRT4NCiAgICANCiAgICA8L2hlYWQ+DQogICAgDQogICAgPGJvZHkgc3R5bGU9InBhZGRpbmc6MHB4OyBtYXJnaW46MHB4OyBjb2xvcjojY2NjIj4NCiAgICA8ZGl2IGlkPSJib2R5XzAiPiA8IS0tIGhpZGUgdGhpcyB3aGVuIHBsYXlpbmcgaW4gbW9iaWxlIChwOF90b3VjaF9kZXRlY3RlZCkgc28gdGhhdCBlbGVtZW50cyBkb24ndCBhZmZlY3QgbGF5b3V0IC0tPg0KICAgIA0KICAgIA0KICAgIDwhLS0gQWRkIGFueSBjb250ZW50IGFib3ZlIHRoZSBjYXJ0IGhlcmUgLS0+DQogICAgDQogICAgDQogICAgPGRpdiBpZD0icDhfZnJhbWVfMCIgc3R5bGU9Im1heC13aWR0aDo4MDBweDsgbWF4LWhlaWdodDo4MDBweDsgbWFyZ2luOmF1dG87Ij4gPCEtLSBkb3VibGUgZnVuY3Rpb246IGxpbWl0IHNpemUsIGFuZCBkaXNwbGF5IG9ubHkgdGhpcyBkaXYgZm9yIHRvdWNoIGRldmljZXMgLS0+DQogICAgPGRpdiBpZD0icDhfZnJhbWUiIHN0eWxlPSJkaXNwbGF5OmZsZXg7IHdpZHRoOjEwMCU7IG1heC13aWR0aDoxMDB2dzsgaGVpZ2h0OjEwMHZ3OyBtYXgtaGVpZ2h0OjEwMHZoOyBtYXJnaW46YXV0bzsiPg0KICAgIA0KICAgICAgICA8ZGl2IGlkPSJwOF9tZW51X2J1dHRvbnNfdG91Y2giIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgd2lkdGg6MTAwJTsgei1pbmRleDoxMDsgbGVmdDowcHg7Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InA4X21lbnVfYnV0dG9uIiBpZD0icDhiX2Z1bGwiICBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDoxMHB4IiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IHA4X3JlcXVlc3RfZnVsbHNjcmVlbigpOyI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgaWQ9InA4Yl9zb3VuZCIgc3R5bGU9ImZsb2F0OmxlZnQ7bWFyZ2luLWxlZnQ6MTBweCIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpOyBNb2R1bGUucGljbzhUb2dnbGVTb3VuZCgpOyI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgaWQ9InA4Yl9jbG9zZSIgc3R5bGU9ImZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweCIgb25DbGljaz0icDhfY2xvc2VfY2FydCgpOyI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIA0KICAgICAgICA8ZGl2IGlkPSJwOF9jb250YWluZXIiDQogICAgICAgICAgICBzdHlsZT0ibWFyZ2luOmF1dG87IGRpc3BsYXk6dGFibGU7Ig0KICAgICAgICAgICAgb25jbGljaz0icDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsgcDhfcnVuX2NhcnQoKTsiPg0KICAgIA0KICAgICAgICAgICAgPGRpdiBpZD0icDhfc3RhcnRfYnV0dG9uIiBjbGFzcz0icDhfc3RhcnRfYnV0dG9uIiBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGRpc3BsYXk6ZmxleDsiPg0KICAgICAgICAgICAgICAgIDxpbWcgd2lkdGg9ODAgaGVpZ2h0PTgwIHN0eWxlPSJtYXJnaW46YXV0bzsiDQogICAgICAgICAgICBzcmM9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRkFBQUFCUUNBWUFBQUNPRWZLdEFBQUJwa2xFUVZSNDJ1M2F1MjNEUUJDRVlVWE9YSUdLY3VqUVhVZ0Z1QTBYSUtnVzkwUTlvRUFnK0xqZDI3dmQyUnNDZjA1OGdFRHFob2ZQaitPQjZTTUNBUWxJUUFJeUFoS1FnQVJrQkFRRG5NNlhTUnNCNy8yZS90U0EwLy8xMmZDQUtzUVgzbnREQTRvUkZ3QlJJYzBBaXhFMzhCQWhUUUdMRUFzQlVTRE5BWGNSaFlEUklac0FQbHA5OVZFQ1JvWHNEcGdOMGcwd0M2UTdJRHBrR0VCVXlHNkEwK3ZLQnRrZE1CdWtHMkFXU0hkQWRNZ3dnS2lRNFFEUklNTUNva0NHQjR3T0NRUFlGVkt3MmNBQk5vY1VqbDZ3Z0UwZ0Zhc2hQS0FacEhKMlRRTllCVm14VzZjREZFTldEdjlwQVVzaENWZ0pTY0JLU0FJU2tEOWhQa1Q0R2tOQU1kemVweWo4S3llODUyRUJMZTUxQ1pISFdRSzRKY1RoRDFTbGNIUEVZWS8wYStBMG42U2tHWlY2dzZXWk5iM2c0SWQxYjdod2dHaHdZUUJSNGR3QjBlSGNBTFBBZFFmTUJoY09FQTB1RENBcW5Ec2dPcHdiWUJhNHBvQS8zMStyWllGckJyaUZwd0dNQ3RjRWNBOVBBaGdkemh5d0JLOEVFUVhPRkZDQ3R3YUlCbWNHS01XYkk2TENtUUJxOFI2aHc1a0FNZ0lTa0lBRUpDQWpJQUVKU0VCR1FJOXVrVjdsUm45bkQrZ0FBQUFBU1VWT1JLNUNZSUk9Ii8+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICANCiAgICAgICAgICAgIDxkaXYgaWQ9InA4X3BsYXlhcmVhIiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW46YXV0bzsNCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOyAtbW96LXVzZXItc2VsZWN0OiBub25lOyB1c2VyLXNlbGVjdDogbm9uZTsgLXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7DQogICAgICAgICAgICAiPg0KICAgIA0KICAgICAgICAgICAgICAgIDxkaXYgIGlkPSJ0b3VjaF9jb250cm9sc19iYWNrZ3JvdW5kIg0KICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSIgcG9pbnRlci1ldmVudHM6bm9uZTsgZGlzcGxheTpub25lOyBiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmZpeGVkOyB0b3A6MHB4OyBsZWZ0OjBweDsgYm9yZGVyOjA7IHdpZHRoOjEwMHZ3OyBoZWlnaHQ6MTAwdmgiPg0KICAgICAgICAgICAgICAgICAgICAmbmJzcA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgIA0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgcG9zaXRpb246cmVsYXRpdmUiPg0KICAgICAgICAgICAgICAgICAgICA8IS0tIHBvaW50ZXItZXZlbnRzIHR1cm5lZCBvZmYgZm9yIG1vYmlsZSBpbiBwOF91cGRhdGVfbGF5b3V0IGJlY2F1c2UgbmVlZCBmb3IgZGVza3RvcCBtb3VzZSAtLT4NCiAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBjbGFzcz0iZW1zY3JpcHRlbiIgaWQ9ImNhbnZhcyIgb25jb250ZXh0bWVudT0iZXZlbnQucHJldmVudERlZmF1bHQoKTsiID4NCiAgICAgICAgICAgICAgICAgICAgPC9jYW52YXM+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9cDhfbWVudV9idXR0b25zIGlkPSJwOF9tZW51X2J1dHRvbnMiIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MTI1cHgiIGlkPSJwOGJfY29udHJvbHMiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgTW9kdWxlLnBpY284VG9nZ2xlQ29udHJvbE1lbnUoKTsiPjwvZGl2PgkJCQkJDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206OTBweCIgaWQ9InA4Yl9wYXVzZSIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBNb2R1bGUucGljbzhUb2dnbGVQYXVzZWQoKTsgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gLTIyOyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206NTVweCIgaWQ9InA4Yl9zb3VuZCIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpOyBNb2R1bGUucGljbzhUb2dnbGVTb3VuZCgpOyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MjBweCIgaWQ9InA4Yl9mdWxsIiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IHA4X3JlcXVlc3RfZnVsbHNjcmVlbigpOyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgIA0KICAgIA0KICAgICAgICAgICAgICAgIDwhLS0gZGlzcGxheSBhZnRlciBmaXJzdCBsYXlvdXQgdXBkYXRlIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgIGlkPSJ0b3VjaF9jb250cm9sc19nZngiDQogICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IiBwb2ludGVyLWV2ZW50czpub25lOyBkaXNwbGF5OnRhYmxlOyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7IHRvcDowcHg7IGxlZnQ6MHB4OyBib3JkZXI6MDsgd2lkdGg6MTAwdnc7IGhlaWdodDoxMDB2aCI+DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iIiBpZD0iY29udHJvbHNfcmlnaHRfcGFuZWwiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgb3BhY2l0eTowLjU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIiIGlkPSJjb250cm9sc19sZWZ0X3BhbmVsIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7ICBvcGFjaXR5OjAuNTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIDwvZGl2PiA8IS0tIHRvdWNoX2NvbnRyb2xzX2dmeCAtLT4NCiAgICANCiAgICAgICAgICAgICAgICA8IS0tIHVzZWQgZm9yIGNsaXBib2FyZCBhY2Nlc3MgJiBrZXlib2FyZCBpbnB1dDsgZGlzcGxheWVkIGFuZCB1c2VkIGJ5IFBJQ08tOCBvbmx5IG9uY2UgbmVlZGVkLiBjYW4gYmUgc2FmZWx5IHJlbW92ZWQgaWYgY2xpcGJvYXJkIC8ga2V5IHByZXNzZXMgbm90IG5lZWRlZC4gLS0+DQogICAgICAgICAgICAgICAgPCEtLSAobmVlZHMgdG8gYmUgaW5zaWRlIHA4X3BsYXlhcmVhIHNvIHRoYXQgaXQgc3RpbGwgd29ya3MgdW5kZXIgQ2hyb21lIHdoZW4gZnVsbHNjcmVlbmVkKSAtLT4NCiAgICAgICAgICAgICAgICA8IS0tIDAuMi41OiBhZGRlZCAiZGlzcGxheTpub25lIjsgcGljbzguanMgc2hvd3Mgb24gZGVtYW5kIHRvIGF2b2lkIG1hYyBvc3ggYWNjZW50IGNoYXJhY3RlciBzZWxlY3RvciAvLyBodHRwczovL3d3dy5sZXhhbG9mZmxlLmNvbS9iYnMvP3RpZD00Nzc0MyAtLT4NCiAgICANCiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImNvZG9fdGV4dGFyZWEiIGNsYXNzPSJlbXNjcmlwdGVuIiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDotOTk5OXB4OyBoZWlnaHQ6MHB4OyBvdmVyZmxvdzpoaWRkZW4iPjwvdGV4dGFyZWE+DQogICAgDQogICAgICAgICAgICA8L2Rpdj4gPCEtLXA4X3BsYXlhcmVhIC0tPg0KICAgIA0KICAgICAgICA8L2Rpdj4gPCEtLSBwOF9jb250YWluZXIgLS0+DQogICAgDQogICAgPC9kaXY+IDwhLS0gcDhfZnJhbWUgLS0+DQogICAgPC9kaXY+IDwhLS0gcDhfZnJhbWVfMCBzaXplIGxpbWl0IC0tPg0KICAgIA0KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCiAgICANCiAgICAgICAgcDhfdXBkYXRlX2xheW91dCgpOw0KICAgICAgICBwOF91cGRhdGVfYnV0dG9uX2ljb25zKCk7DQogICAgDQogICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7DQogICAgICAgIE1vZHVsZSA9IHt9Ow0KICAgICAgICBNb2R1bGUuY2FudmFzID0gY2FudmFzOw0KICAgIA0KICAgICAgICAvLyBmcm9tIEB1bHRyYWJyaXRlJ3Mgc2hlbGw6IHRlc3QgaWYgYW4gQXVkaW9Db250ZXh0IGNhbiBiZSBjcmVhdGVkIG91dHNpZGUgb2YgYW4gZXZlbnQgY2FsbGJhY2suDQogICAgICAgIC8vIElmIGl0IGNhbid0IGJlIGNyZWF0ZWQsIHRoZW4gcmVxdWlyZSBwcmVzc2luZyB0aGUgc3RhcnQgYnV0dG9uIHRvIHJ1biB0aGUgY2FydHJpZGdlDQogICAgDQogICAgICAgIGlmIChwOF9hdXRvcGxheSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRlbXBfY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTsNCiAgICAgICAgICAgIHRlbXBfY29udGV4dC5vbnN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAodGVtcF9jb250ZXh0LnN0YXRlPT0ncnVubmluZycpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBwOF9ydW5fY2FydCgpOw0KICAgICAgICAgICAgICAgICAgICB0ZW1wX2NvbnRleHQuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgDQogICAgICAgIC8vIHBvaW50ZXIgbG9jayByZXF1ZXN0IG5lZWRzIHRvIGJlIGluc2lkZSBhIGNhbnZhcyBpbnRlcmFjdGlvbiBldmVudA0KICAgICAgICAvLyBwaWNvOF9zdGF0ZS5yZXF1ZXN0X3BvaW50ZXJfbG9jayBpcyB0cnVlIHdoZW4gMHg1ZjJkIGJpdCAwIGFuZCBiaXQgMiBhcmUgc2V0IC0tIHBva2UoMHg1ZjJkLDB4NSkgDQogICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgICAgICBpZiAocGljbzhfc3RhdGUucmVxdWVzdF9wb2ludGVyX2xvY2spDQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKTsNCiAgICAgICAgfSk7DQogICAgICAgIA0KICAgIDwvc2NyaXB0Pg0KICAgIA0KICAgIA0KICAgIA0KICAgIDwhLS0gQWRkIGNvbnRlbnQgYmVsb3cgdGhlIGNhcnQgaGVyZSAtLT4NCiAgICANCiAgICANCiAgICANCiAgICANCiAgICA8L2Rpdj4gPCEtLSBib2R5XzAgLS0+DQogICAgPC9ib2R5PjwvaHRtbD4NCiAgICANCiAgICA8c2NyaXB0IGRlZmVyIHNyYz0iIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0Pg0KICAgIA0K";
