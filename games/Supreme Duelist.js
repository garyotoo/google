window.game = "PCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPgoKPCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuLXVzIj4KCjxoZWFkPgogIDxiYXNlIGhyZWY9Imh0dHBzOi8vcmF3Y2RuLmdpdGhhY2suY29tL2J1YmJscy95b3V0dWJlLXBsYXlhYmxlcy9kODFhNzY4Mjg4NTU2OWExMWYzMjU4YzRkMWNhNjNkNTczMjhmN2E0L3N1cHJlbWUtZHVlbGlzdC8iPgogIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+CiAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgogIDxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iaWU9ZWRnZSI+CgogIDx0aXRsZT5ZVCBHYW1lIFdyYXBwZXIgV2ViR0wgVGVtcGxhdGU8L3RpdGxlPgogIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iVGVtcGxhdGVEYXRhL3N0eWxlLmNzcyIgbm9uY2U9IlMtYV82UmFDQ2hEajJScDhyVTFVeVEiPgogIDxzY3JpcHQgc3JjPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9idWJibHMveW91dHViZS1wbGF5YWJsZXMvbWFpbi95dGdhbWUuanMiIG5vbmNlPSJTLWFfNlJhQ0NoRGoyUnA4clUxVXlRIj4vLyBMb2FkIFlUIEdhbWUgQVBJIGNvZGU8L3NjcmlwdD4KPC9oZWFkPgoKPGJvZHk+CiAgPGRpdiBpZD0idW5pdHktY29udGFpbmVyIiBjbGFzcz0idW5pdHktZGVza3RvcCI+CiAgICA8Y2FudmFzIGlkPSJ1bml0eS1jYW52YXMiIHdpZHRoPTEwMCUgaGVpZ2h0PTEwMCUgdGFiaW5kZXg9Ii0xIj48L2NhbnZhcz4KICAgIDxkaXYgaWQ9InVuaXR5LWxvYWRpbmctYmFyIj4KICAgICAgPGRpdiBpZD0idW5pdHktbG9nbyI+PC9kaXY+CiAgICAgIDxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1lbXB0eSI+CiAgICAgICAgPGRpdiBpZD0idW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwiPjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0idW5pdHktd2FybmluZyI+IDwvZGl2PgogIDwvZGl2PgoKICA8c2NyaXB0IHNyYz0idW5hcmNoaXZlci5taW4uanMiIG5vbmNlPSJTLWFfNlJhQ0NoRGoyUnA4clUxVXlRIj4vLyB1c2VkIGZvciBkZWNvbXByZXNzaW9uIGlmIHppcCBmaWxlcyBhcmUgdXNlZDwvc2NyaXB0PgogIDxzY3JpcHQgbm9uY2U9IlMtYV82UmFDQ2hEajJScDhyVTFVeVEiPiAvLyBMb2dpYyBmb3IgVW5pdHkgY29udGlhbmVyCiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWNvbnRhaW5lciIpOwogICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jYW52YXMiKTsKICAgIHZhciBsb2FkaW5nQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWxvYWRpbmctYmFyIik7CiAgICB2YXIgcHJvZ3Jlc3NCYXJGdWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LXByb2dyZXNzLWJhci1mdWxsIik7CiAgICB2YXIgZnVsbHNjcmVlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1mdWxsc2NyZWVuLWJ1dHRvbiIpOwogICAgdmFyIGZ1bGxzY3JlZW5PdmVybGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LW92ZXJsYXktZnVsbHNjcmVlbi1idXR0b24iKTsKICAgIHZhciBxdWl0Y2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3F1aXQtY2FudmFzIik7CiAgICB2YXIgd2FybmluZ0Jhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS13YXJuaW5nIik7CgogICAgLy8gRm9yIFlUIGl0IGlzIHN0cm9uZ2x5IGVuY291cmFnZWQgdGhhdCBhbGwgd2FybmluZ3MgLyBlcnJvcnMgc2hvdyBpbgogICAgLy8gY29uc29sZSBhbmQgYmFubmVycyBzaG91bGQgYmUgaW4gZ2FtZSBhcyBuZWVkZWQgdG8gbm90IGNvbmZ1c2UgdXNlcnMuCiAgICAvLyAKICAgIC8vIElmIG5lZWRlZCBwbGVhc2UgdW5jb21tZW50IHNlY3Rpb24gYmVsb3cgdG8gc2hvdyBhIHRlbXBvcmFyeSBtZXNzYWdlIAogICAgLy8gYmFubmVyL3JpYmJvbiBmb3IgYSBmZXcgc2Vjb25kcywgb3IgYSBwZXJtYW5lbnQgZXJyb3IgbWVzc2FnZSBvbiB0b3AgCiAgICAvLyBvZiB0aGUgY2FudmFzIGlmIHR5cGU9PSdlcnJvcicuCiAgICBmdW5jdGlvbiB1bml0eVNob3dCYW5uZXIobXNnLCB0eXBlKSB7CiAgICAgIC8vIGZ1bmN0aW9uIHVwZGF0ZUJhbm5lclZpc2liaWxpdHkoKSB7CiAgICAgIC8vICAgd2FybmluZ0Jhbm5lci5zdHlsZS5kaXNwbGF5ID0gd2FybmluZ0Jhbm5lci5jaGlsZHJlbi5sZW5ndGggPyAnYmxvY2snIDogJ25vbmUnOwogICAgICAvLyB9CiAgICAgIC8vIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgLy8gZGl2LmlubmVySFRNTCA9IG1zZzsKICAgICAgLy8gd2FybmluZ0Jhbm5lci5hcHBlbmRDaGlsZChkaXYpOwogICAgICAvLyBpZiAodHlwZSA9PSAnZXJyb3InKSBkaXYuc3R5bGUgPSAnYmFja2dyb3VuZDogcmVkOyBwYWRkaW5nOiAxMHB4Oyc7CiAgICAgIC8vIGVsc2UgewogICAgICAvLyAgIGlmICh0eXBlID09ICd3YXJuaW5nJykgZGl2LnN0eWxlID0gJ2JhY2tncm91bmQ6IHllbGxvdzsgcGFkZGluZzogMTBweDsnOwogICAgICAvLyAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIC8vICAgICB3YXJuaW5nQmFubmVyLnJlbW92ZUNoaWxkKGRpdik7CiAgICAgIC8vICAgICB1cGRhdGVCYW5uZXJWaXNpYmlsaXR5KCk7CiAgICAgIC8vICAgfSwgNTAwMCk7CiAgICAgIC8vIH0KICAgICAgLy8gdXBkYXRlQmFubmVyVmlzaWJpbGl0eSgpOwogICAgfQoKICAgIHZhciBidWlsZFVybCA9ICJCdWlsZCI7CiAgICB2YXIgbG9hZGVyVXJsID0gYnVpbGRVcmwgKyAiL1lUUGxheWFibGVzLmxvYWRlci5qcyI7CiAgICB2YXIgY29uZmlnID0gewogICAgICBkYXRhVXJsOiBidWlsZFVybCArICIvWVRQbGF5YWJsZXMuZGF0YS5neiIsCiAgICAgIGZyYW1ld29ya1VybDogYnVpbGRVcmwgKyAiL1lUUGxheWFibGVzLmZyYW1ld29yay5qcy5neiIsCiAgICAgICAgY29kZVVybDogYnVpbGRVcmwgKyAiL1lUUGxheWFibGVzLndhc20uZ3oiLAogICAgICBzdHJlYW1pbmdBc3NldHNVcmw6ICJTdHJlYW1pbmdBc3NldHMiLAogICAgICBjb21wYW55TmFtZTogIk5lcm9uJ3MgQnJvdGhlciIsCiAgICAgIHByb2R1Y3ROYW1lOiAiU3VwcmVtZSBEdWVsaXN0IiwKICAgICAgcHJvZHVjdFZlcnNpb246ICIxLjAuMTQuMDEwOSIsCiAgICAgIHNob3dCYW5uZXI6IHVuaXR5U2hvd0Jhbm5lciwKICAgIH07CgogICAgLy8gQnkgZGVmYXVsdCwgVW5pdHkga2VlcHMgV2ViR0wgY2FudmFzIHJlbmRlciB0YXJnZXQgc2l6ZSBtYXRjaGVkIHdpdGgKICAgIC8vIHRoZSBET00gc2l6ZSBvZiB0aGUgY2FudmFzIGVsZW1lbnQgKHNjYWxlZCBieSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykKICAgIC8vIFNldCB0aGlzIHRvIGZhbHNlIGlmIHlvdSB3YW50IHRvIGRlY291cGxlIHRoaXMgc3luY2hyb25pemF0aW9uIGZyb20KICAgIC8vIGhhcHBlbmluZyBpbnNpZGUgdGhlIGVuZ2luZSwgYW5kIHlvdSB3b3VsZCBpbnN0ZWFkIGxpa2UgdG8gc2l6ZSB1cAogICAgLy8gdGhlIGNhbnZhcyBET00gc2l6ZSBhbmQgV2ViR0wgcmVuZGVyIHRhcmdldCBzaXplcyB5b3Vyc2VsZi4KICAgIC8vIGNvbmZpZy5tYXRjaFdlYkdMVG9DYW52YXNTaXplID0gZmFsc2U7CgogICAgaWYgKC9pUGhvbmV8aVBhZHxpUG9kfEFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7CiAgICAgIC8vIE1vYmlsZSBkZXZpY2Ugc3R5bGU6IGZpbGwgdGhlIHdob2xlIGJyb3dzZXIgY2xpZW50IGFyZWEgd2l0aCB0aGUgZ2FtZSBjYW52YXM6CgogICAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKTsKICAgICAgbWV0YS5uYW1lID0gJ3ZpZXdwb3J0JzsKICAgICAgbWV0YS5jb250ZW50ID0gJ3dpZHRoPWRldmljZS13aWR0aCwgaGVpZ2h0PWRldmljZS1oZWlnaHQsIGluaXRpYWwtc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vLCBzaHJpbmstdG8tZml0PXllcyc7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobWV0YSk7CiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAidW5pdHktbW9iaWxlIjsKICAgICAgY2FudmFzLmNsYXNzTmFtZSA9ICJ1bml0eS1tb2JpbGUiOwoKICAgICAgLy8gVG8gbG93ZXIgY2FudmFzIHJlc29sdXRpb24gb24gbW9iaWxlIGRldmljZXMgdG8gZ2FpbiBzb21lCiAgICAgIC8vIHBlcmZvcm1hbmNlLCB1bmNvbW1lbnQgdGhlIGZvbGxvd2luZyBsaW5lOgogICAgICAvLyBjb25maWcuZGV2aWNlUGl4ZWxSYXRpbyA9IDE7CgogICAgfSBlbHNlIHsKICAgICAgLy8gRGVza3RvcCBzdHlsZTogUmVuZGVyIHRoZSBnYW1lIGNhbnZhcyBpbiBhIHdpbmRvdyB0aGF0IGNhbiBiZSBtYXhpbWl6ZWQgdG8gZnVsbHNjcmVlbjoKICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgfQoKICAgIGxvYWRpbmdCYXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgogICAgLy8gbG9hZFJlc291cmNlcyBpcyBvbmx5IHVzZWQgaWYgeW91IG5lZWQgbG9hZCBaaXBwZWQgZmlsZXMgZm9yIC53YXNtLCAuanMsIG9yIC5kYXRhIGFuZCBuZWVkIAogICAgLy8gdGhlbSB0byBiZSBkZWNvbXByZXNzZWQuIElmIHRoZSBmaWxlIGlzIG5vdCB6aXBwZWQgd2UgYnlwYXNzIGRlY29tcHJlc3Npb24gc3RlcCBhdXRvbWF0aWNhbGx5LAogICAgLy8gaG93ZXZlciBpdHMgYmVzdCB0byBub3QgdHJpZ2dlciB0aGlzIGlmIHlvdSBkb250IHVzZWQgY29tcHJlc3Npb24uIAogICAgLy8gTk9URTogR1ppcCBkb2VzIG5vdCB3b3JrIEFUTS4gIElmIHRoaXMgaXMgbmVlZGVkIFVuYXJjaGl2ZXIgd2lsbCBuZWVkIHRvIGJlIHVwZGF0ZWQuCiAgICBsb2FkUmVzb3VyY2VzID0gKGNhbGxiYWNrKSA9PiB7CiAgICAgIGNvbnN0IHN1YlppcFN0ciA9ICcuemlwJzsKICAgICAgY29uc3Qgc3ViV0FTTVN0ciA9ICcud2FzbSc7CiAgICAgIGNvbnN0IHN1YkpTU3RyID0gJy5qcyc7CgogICAgICB2YXIgY29kZVVybCA9IGNvbmZpZy5jb2RlVXJsOwogICAgICB2YXIgc2hvdWxkRGVjb21wcmVzcyA9IHRydWU7CgogICAgICAvLyBjaGVjayBpZiAuemlwIGFscmVhZHkgZXhpc3RzIGluIHRoZSBVUkwsIGlmIGl0IGRvZXNudCBjaGVjayBpZiBhIC56aXAgZmlsZSBleGlzdHMKICAgICAgaWYgKCFjb2RlVXJsLmluY2x1ZGVzKHN1YlppcFN0cikpIHsKICAgICAgICBpZiAoVXJsRXhpc3RzKGNvZGVVcmwgKyBzdWJaaXBTdHIpKSB7CiAgICAgICAgICBjb2RlVXJsID0gY29kZVVybCArIHN1YlppcFN0cjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2hvdWxkRGVjb21wcmVzcyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gZGVjb21wcmVzcyBpZiB1c2luZyBhIHppcCBmaWxlLCBvdGhlcndpc2UganVzdCBsb2FkIHJlZ3VsYXIgd2FzbSBmaWxlCiAgICAgIGlmIChzaG91bGREZWNvbXByZXNzKSB7CiAgICAgICAgLy8gRGVjb21wcmVzcyB0aGUgZmlsZSBiYXNlZCBvbiB0aGUgdHlwZSwgV0FTTSwgSlMsIGV0Yy4KICAgICAgICAvLyBpZiB5b3UgbmVlZCBtb3JlIHR5cGVzIHBsZWFzZSBhZGQgYSBjb25zdCBhYm92ZSBhbmQgbW9kaWZ5IHRoZSB0eXBlIGxvZ2ljIGJlbG93LgogICAgICAgIHZhciBibG9iVHlwZSA9ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nOwogICAgICAgIGlmIChjb2RlVXJsLmluY2x1ZGVzKHN1YldBU01TdHIpKXsKICAgICAgICAgIGJsb2JUeXBlID0gJ2FwcGxpY2F0aW9uL3dhc20nOwogICAgICAgIH0gZWxzZSBpZiAoY29kZVVybC5pbmNsdWRlcyhzdWJKU1N0cikpewogICAgICAgICAgYmxvYlR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgRGVjb21wcmVzc0ZpbGUoY29kZVVybCwgYmxvYlR5cGUsIChmaWxlKSA9PiB7CiAgICAgICAgICBjb25maWcuY29kZVVybCA9IGZpbGU7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBGZXRjaC9Mb2FkIGEgZmlsZSB0aGVuIGNhbGwgb3VyIGNhbGxiYWNrIAogICAgbG9hZFppcERhdGEgPSAodXJsLCBjYWxsYmFjaykgPT4gewogICAgICBmZXRjaCh1cmwpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYmxvYigpKQogICAgICAgIC50aGVuKGJsb2IgPT4gewogICAgICAgICAgY2FsbGJhY2soYmxvYik7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gQ2hlY2sgaWYgVVJMIC8gRmlsZSBleGlzdHMKICAgIGZ1bmN0aW9uIFVybEV4aXN0cyh1cmxUb0NoZWNrKQogICAgewogICAgICAgIHZhciBodHRwUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgaHR0cFJlcS5vcGVuKCdIRUFEJywgdXJsVG9DaGVjaywgZmFsc2UpOwogICAgICAgIGh0dHBSZXEuc2VuZCgpOwogICAgICAgIHJldHVybiBodHRwUmVxLnN0YXR1cyE9NDA0OwogICAgfQoKICAgIC8vIGRlY29tcHJlc3MgZmlsZXMgYW5kIGNhbGwgY2FsbGJhY2sKICAgIC8vIFRPRE86IHRlc3QgYW5kIHBvdGVudGlhbGx5IHN3aXRjaCB0byBDb21wcmVzc2lvbiBTdHJlYW1zIEFQSQogICAgZnVuY3Rpb24gRGVjb21wcmVzc0ZpbGUoZmlsZSwgYmxvYk1pbWVUeXBlLCBjYWxsYmFjaykgewogICAgICBsZXQgZGVjb21wcmVzc2VkRmlsZTsKCiAgICAgIGxvYWRaaXBEYXRhKGZpbGUsIChmKSA9PiB7CiAgICAgICAgVW5hcmNoaXZlci5vcGVuKGYpLnRoZW4oYXN5bmMgZnVuY3Rpb24gKGFyY2hpdmUpIHsKICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGFyY2hpdmUuZW50cmllcykgewogICAgICAgICAgICBpZiAoZW50cnkuaXNfZmlsZSkgewogICAgICAgICAgICAgIGxldCBlbnRyeVJlYWQgPSBhd2FpdCBlbnRyeS5yZWFkKCk7CiAgICAgICAgICAgICAgbGV0IGVudHJ5RGF0YSA9IGF3YWl0IGVudHJ5UmVhZC5hcnJheUJ1ZmZlcigpOwogICAgICAgICAgICAgIGxldCBkYXRhQmxvYiA9IG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShlbnRyeURhdGEpXSwgeyB0eXBlOiBibG9iTWltZVR5cGUgfSk7CiAgICAgICAgICAgICAgZGVjb21wcmVzc2VkRmlsZSA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGFCbG9iKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgY2FsbGJhY2soZGVjb21wcmVzc2VkRmlsZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIHZhciB1bml0eUdhbWVJbnN0YW5jZSA9IG51bGw7CiAgICAvLyBTZXR1cCB0aGUgVW5pdHkgc2VjdGlvbiBvbmNlIHppcCBmaWxlIGlzIGRvd25sb2FkZWQgYW5kIGRlY29tcHJlc3NlZAogICAgZnVuY3Rpb24gSW5pdFVuaXR5U2VjdGlvbigpIHsKICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOwogICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4gewogICAgICAgIGNyZWF0ZVVuaXR5SW5zdGFuY2UoY2FudmFzLCBjb25maWcsIChwcm9ncmVzcykgPT4gewogICAgICAgICAgcHJvZ3Jlc3NCYXJGdWxsLnN0eWxlLndpZHRoID0gMTAwICogcHJvZ3Jlc3MgKyAiJSI7CiAgICAgICAgICB9KS50aGVuKCh1bml0eUluc3RhbmNlKSA9PiB7CiAgICAgICAgICAgIHVuaXR5R2FtZUluc3RhbmNlID0gdW5pdHlJbnN0YW5jZTsKICAgICAgICAgICAgbG9hZGluZ0Jhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgfSkuY2F0Y2goKG1lc3NhZ2UpID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsKICAgICAgICAgIH0pOwogICAgICB9OwoKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgfQoKCiAgICAKCiAgICBmdW5jdGlvbiBHZXRHemlwVXJsKHVybCkKICAgIHsKICAgICAgICByZXR1cm4gdXJsICsgImlwIjsKICAgIH0KICAgICAgICAKICAgIC8vCiAgICAvLyBEb2VzIG5vdCBsb2FkIC5qcyBwcm9wZXJseSwgc28gcmVuYW1lIGZyYW1ld29yayBhYm92ZSBXSVRIT1VUIC5neiBhbmQgZGVjb21wcmVzcwogICAgLy8KICAgIGZ1bmN0aW9uIERlY29tcHJlc3NHemlwRmlsZXMoY2FsbGJhY2spCiAgICB7CiAgICAgIGNvbnN0IHdhc21VcmwgPSBHZXRHemlwVXJsKGNvbmZpZy5jb2RlVXJsKTsKICAgICAgZmV0Y2god2FzbVVybCkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmJsb2IoKSkKICAgICAgICAgIC50aGVuKGJsb2IgPT4gewogICAgICAgICAgICAKICAgICAgICAgICAgY29uc29sZS5sb2coImd6aXBwZWQgYmxvYiBsb2FkZWQhISEgIiArIGJsb2IudHlwZSk7CgogICAgICAgICAgICBjb25zdCBkcyA9IG5ldyBEZWNvbXByZXNzaW9uU3RyZWFtKCJnemlwIik7CiAgICAgICAgICAgIGNvbnN0IGRlY29tcHJlc3NlZFN0cmVhbSA9IGJsb2Iuc3RyZWFtKCkucGlwZVRocm91Z2goZHMpOwoKICAgICAgICAgICAgbmV3IFJlc3BvbnNlKGRlY29tcHJlc3NlZFN0cmVhbSkuYmxvYigpCiAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgdW56aXBwZWRCbG9iID0+CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImd6aXAgc2hvdWxkIGJlIGRlY29tcHJlc3NlZCEiKTsKICAgICAgICAgICAgICAgIHVuemlwcGVkQmxvYi50eXBlID0gImFwcGxpY2F0aW9uL3dhc20iOwogICAgICAgICAgICAgICAgZGVjb21wcmVzc2VkVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodW56aXBwZWRCbG9iKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkZWNvbXByZXNzZWQgZ3ppcCBhdDogIiArIGRlY29tcHJlc3NlZFVybCk7CgogICAgICAgICAgICAgICAgLy8gSEFDSwogICAgICAgICAgICAgICAgY29uZmlnLmNvZGVVcmwgPSBkZWNvbXByZXNzZWRVcmw7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gR2V0R3ppcFVybChjb25maWcuZGF0YVVybCk7CiAgICAgICAgICAgICAgICBmZXRjaChkYXRhVXJsKQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmJsb2IoKSkKICAgICAgICAgICAgICAgICAgICAudGhlbihibG9iID0+IHsKICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImd6aXBwZWQgYmxvYiBsb2FkZWQhISEiKTsKICAgICAgICAgICAgICAgICAgICAgIGJsb2IudHlwZSA9ICJhcHBsaWNhdGlvbi94LWd6aXAtY29tcHJlc3NlZCI7CgogICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHMgPSBuZXcgRGVjb21wcmVzc2lvblN0cmVhbSgiZ3ppcCIpOwogICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVjb21wcmVzc2VkU3RyZWFtID0gYmxvYi5zdHJlYW0oKS5waXBlVGhyb3VnaChkcyk7CgogICAgICAgICAgICAgICAgICAgICAgbmV3IFJlc3BvbnNlKGRlY29tcHJlc3NlZFN0cmVhbSkuYmxvYigpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIHVuemlwcGVkQmxvYiA9PgogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImd6aXAgc2hvdWxkIGJlIGRlY29tcHJlc3NlZCEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB1bnppcHBlZEJsb2IudHlwZSA9ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iOwogICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29tcHJlc3NlZFVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHVuemlwcGVkQmxvYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRlY29tcHJlc3NlZCBnemlwIGF0OiAiICsgZGVjb21wcmVzc2VkVXJsKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSEFDSwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5kYXRhVXJsID0gZGVjb21wcmVzc2VkVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIC8qLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1ld29ya1VybCA9IEdldEd6aXBVcmwoY29uZmlnLmZyYW1ld29ya1VybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImZyYW1ld29ya1VybCIgKyBmcmFtZXdvcmtVcmwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goZnJhbWV3b3JrVXJsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5ibG9iKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGJsb2IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJnemlwcGVkIGJsb2IgbG9hZGVkISEhIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRzID0gbmV3IERlY29tcHJlc3Npb25TdHJlYW0oImd6aXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWNvbXByZXNzZWRTdHJlYW0gPSBibG9iLnN0cmVhbSgpLnBpcGVUaHJvdWdoKGRzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInN0YXJ0aW5nIGRlb21jb21wcmVzc2lvbiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVzcG9uc2UoZGVjb21wcmVzc2VkU3RyZWFtKS5ibG9iKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIHVuemlwcGVkQmxvYiA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZ3ppcCBzaG91bGQgYmUgZGVjb21wcmVzc2VkISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnppcHBlZEJsb2IudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvbXByZXNzZWRVcmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh1bnppcHBlZEJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZGVjb21wcmVzc2VkIGd6aXAgYXQ6ICIgKyBkZWNvbXByZXNzZWRVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSEFDSwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuZnJhbWV3b3JrVXJsID0gZGVjb21wcmVzc2VkVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiY29uZmlnLmZyYW1ld29ya1VybCBhdDogIiArIGNvbmZpZy5mcmFtZXdvcmtVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZ3ppcCBkZWNvbXByZXNzIGVycm9yOiAiICsgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWFsIHdpdGggdGhlIGZhY3QgdGhlIGNoYWluIGZhaWxlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImd6aXAgZGVjb21wcmVzcyBlcnJvcjogIiArIGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWFsIHdpdGggdGhlIGZhY3QgdGhlIGNoYWluIGZhaWxlZAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZ3ppcCBkZWNvbXByZXMgZXJyb3I6ICIgKyBlcnIpOwogICAgICAgICAgICAgICAgICAvLyBEZWFsIHdpdGggdGhlIGZhY3QgdGhlIGNoYWluIGZhaWxlZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIElmIGNvbXByZXNzZWQgZmlsZXMgYXJlIGZvdW5kLCBkZWNvbXByZXNzIGJlZm9yZSBpbml0CiAgICAgIGlmIChjb25maWcuZGF0YVVybC5pbmNsdWRlcygiLmd6IikpIHsKICAgICAgICAvLyBQYXRoIDE6IFVzZSB0aGlzIHBhdGggaWYgeW91ciAud2FzbSBhbmQgLmRhdGEgZmlsZXMgYXJlIGd6aXBwZWQgICAgCiAgICAgICAgRGVjb21wcmVzc0d6aXBGaWxlcyhJbml0VW5pdHlTZWN0aW9uKTsgIC8vIFVuY29tbWVudCB0aGlzIGxpbmUgdG8gc3RhcnQgVW5pdHkgYnkgbG9hZGluZyBnemlwIGNvbXByZXNzZWQgZmlsZXMKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICAvLyBQYXRoIDI6IEp1c3QgaW5pdCBpZiBubyBkZWNvbXByZXNzaW9uIG9mIHlvdXIgLndhc20sIC5kYXRhLCAuanMgZmlsZXMgd2FzIG5lZWRlZAogICAgICAgIEluaXRVbml0eVNlY3Rpb24oKTsKCiAgICAgIH0KCiAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=";
