window.game = "DQoNCjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IA0KPCEtLSBGb3IgdGhlIHJlZ3VsYXJseSB1cGRhdGluZyBkb2MgZ28gdG8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xX0ZtSDNCbFNCUUk3RkdnQVFMNTktWlBlOGVDeHMzNXdlbDZKVXlWYUc4US8gLS0+DQoNCg0KDQoNCjwvc2NyaXB0PjwvaGVhZD48Ym9keSBkaXI9Imx0ciIgZGF0YS1uZXctZ3ItYy1zLWNoZWNrLWxvYWRlZD0iMTQuMTIwOS4wIiBkYXRhLWdyLWV4dC1pbnN0YWxsZWQ9IiI+DQo8ZGl2IGlkPSJ1bml0eS1jb250YWluZXIiPg0KPGNhbnZhcyBoZWlnaHQ9IjYwMCIgaWQ9InVuaXR5LWNhbnZhcyIgdGFiaW5kZXg9Ii0xIiB3aWR0aD0iOTYwIiBzdHlsZT0iYmFja2dyb3VuZDogdXJsKCZxdW90O2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9jbzZjb2hhZC9tY0BtYWluL1RlbXBsYXRlRGF0YS9iYWNrZ3JvdW5kLnBuZyZxdW90OykgY2VudGVyIGNlbnRlciAvIGNvdmVyOyI+PC9jYW52YXM+DQo8ZGl2IGlkPSJ1bml0eS1sb2FkaW5nLWJhciIgc3R5bGU9ImRpc3BsYXk6IGJsb2NrOyI+DQo8ZGl2IGlkPSJ1bml0eS1sb2dvIj48L2Rpdj4NCjxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1lbXB0eSI+DQo8ZGl2IGlkPSJ1bml0eS1wcm9ncmVzcy1iYXItZnVsbCIgc3R5bGU9IndpZHRoOiAwJTsiPjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCjxkaXYgaWQ9InVuaXR5LXdhcm5pbmciPiA8L2Rpdj4NCjwvZGl2Pg0KPHNjcmlwdD4NCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICgic2VydmljZVdvcmtlciIgaW4gbmF2aWdhdG9yKSB7DQogICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvY282Y29oYWQvbWNAbWFpbi9TZXJ2aWNlV29ya2VyLmpzIik7DQogICAgICB9DQogICAgfSk7DQoNCiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWNvbnRhaW5lciIpOw0KICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY2FudmFzIik7DQogICAgdmFyIGxvYWRpbmdCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktbG9hZGluZy1iYXIiKTsNCiAgICB2YXIgcHJvZ3Jlc3NCYXJGdWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LXByb2dyZXNzLWJhci1mdWxsIik7DQogICAgdmFyIHdhcm5pbmdCYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktd2FybmluZyIpOw0KDQogICAgLy8gU2hvd3MgYSB0ZW1wb3JhcnkgbWVzc2FnZSBiYW5uZXIvcmliYm9uIGZvciBhIGZldyBzZWNvbmRzLCBvcg0KICAgIC8vIGEgcGVybWFuZW50IGVycm9yIG1lc3NhZ2Ugb24gdG9wIG9mIHRoZSBjYW52YXMgaWYgdHlwZT09J2Vycm9yJy4NCiAgICAvLyBJZiB0eXBlPT0nd2FybmluZycsIGEgeWVsbG93IGhpZ2hsaWdodCBjb2xvciBpcyB1c2VkLg0KICAgIC8vIE1vZGlmeSBvciByZW1vdmUgdGhpcyBmdW5jdGlvbiB0byBjdXN0b21pemUgdGhlIHZpc3VhbGx5IHByZXNlbnRlZA0KICAgIC8vIHdheSB0aGF0IG5vbi1jcml0aWNhbCB3YXJuaW5ncyBhbmQgZXJyb3IgbWVzc2FnZXMgYXJlIHByZXNlbnRlZCB0byB0aGUNCiAgICAvLyB1c2VyLg0KICAgIGZ1bmN0aW9uIHVuaXR5U2hvd0Jhbm5lcihtc2csIHR5cGUpIHsNCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbm5lclZpc2liaWxpdHkoKSB7DQogICAgICAgIHdhcm5pbmdCYW5uZXIuc3R5bGUuZGlzcGxheSA9IHdhcm5pbmdCYW5uZXIuY2hpbGRyZW4ubGVuZ3RoID8gJ2Jsb2NrJyA6ICdub25lJzsNCiAgICAgIH0NCiAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgIGRpdi5pbm5lckhUTUwgPSBtc2c7DQogICAgICB3YXJuaW5nQmFubmVyLmFwcGVuZENoaWxkKGRpdik7DQogICAgICBpZiAodHlwZSA9PSAnZXJyb3InKSBkaXYuc3R5bGUgPSAnYmFja2dyb3VuZDogcmVkOyBwYWRkaW5nOiAxMHB4Oyc7DQogICAgICBlbHNlIHsNCiAgICAgICAgaWYgKHR5cGUgPT0gJ3dhcm5pbmcnKSBkaXYuc3R5bGUgPSAnYmFja2dyb3VuZDogeWVsbG93OyBwYWRkaW5nOiAxMHB4Oyc7DQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHdhcm5pbmdCYW5uZXIucmVtb3ZlQ2hpbGQoZGl2KTsNCiAgICAgICAgICB1cGRhdGVCYW5uZXJWaXNpYmlsaXR5KCk7DQogICAgICAgIH0sIDUwMDApOw0KICAgICAgfQ0KICAgICAgdXBkYXRlQmFubmVyVmlzaWJpbGl0eSgpOw0KICAgIH0NCg0KICAgIHZhciBidWlsZFVybCA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvY282Y29oYWQvbWNAbWFpbi9CdWlsZC8iOw0KICAgIHZhciBsb2FkZXJVcmwgPSBidWlsZFVybCArICIvTWluZVNob290ZXJfWWFuZGV4LmxvYWRlci5qcyI7DQogICAgdmFyIGNvbmZpZyA9IHsNCiAgICAgIGRhdGFVcmw6IGJ1aWxkVXJsICsgIi9NaW5lU2hvb3Rlcl9ZYW5kZXguZGF0YS51bml0eXdlYiIsDQogICAgICBmcmFtZXdvcmtVcmw6IGJ1aWxkVXJsICsgIi9NaW5lU2hvb3Rlcl9ZYW5kZXguZnJhbWV3b3JrLmpzLnVuaXR5d2ViIiwNCiAgICAgIGNvZGVVcmw6IGJ1aWxkVXJsICsgIi9NaW5lU2hvb3Rlcl9ZYW5kZXgud2FzbS51bml0eXdlYiIsDQogICAgICBzdHJlYW1pbmdBc3NldHNVcmw6ICJTdHJlYW1pbmdBc3NldHMiLA0KICAgICAgY29tcGFueU5hbWU6ICJHb0dvTWFuIiwNCiAgICAgIHByb2R1Y3ROYW1lOiAiTWluZWNyYWZ0IFNob290ZXIiLA0KICAgICAgcHJvZHVjdFZlcnNpb246ICIwLjEiLA0KICAgICAgc2hvd0Jhbm5lcjogdW5pdHlTaG93QmFubmVyLA0KICAgIH07DQoNCiAgICAvLyBCeSBkZWZhdWx0IFVuaXR5IGtlZXBzIFdlYkdMIGNhbnZhcyByZW5kZXIgdGFyZ2V0IHNpemUgbWF0Y2hlZCB3aXRoDQogICAgLy8gdGhlIERPTSBzaXplIG9mIHRoZSBjYW52YXMgZWxlbWVudCAoc2NhbGVkIGJ5IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKQ0KICAgIC8vIFNldCB0aGlzIHRvIGZhbHNlIGlmIHlvdSB3YW50IHRvIGRlY291cGxlIHRoaXMgc3luY2hyb25pemF0aW9uIGZyb20NCiAgICAvLyBoYXBwZW5pbmcgaW5zaWRlIHRoZSBlbmdpbmUsIGFuZCB5b3Ugd291bGQgaW5zdGVhZCBsaWtlIHRvIHNpemUgdXANCiAgICAvLyB0aGUgY2FudmFzIERPTSBzaXplIGFuZCBXZWJHTCByZW5kZXIgdGFyZ2V0IHNpemVzIHlvdXJzZWxmLg0KICAgIC8vIGNvbmZpZy5tYXRjaFdlYkdMVG9DYW52YXNTaXplID0gZmFsc2U7DQoNCiAgICBpZiAoL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsNCiAgICAgIC8vIE1vYmlsZSBkZXZpY2Ugc3R5bGU6IGZpbGwgdGhlIHdob2xlIGJyb3dzZXIgY2xpZW50IGFyZWEgd2l0aCB0aGUgZ2FtZSBjYW52YXM6DQogICAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKTsNCiAgICAgIG1ldGEubmFtZSA9ICd2aWV3cG9ydCc7DQogICAgICBtZXRhLmNvbnRlbnQgPSAnd2lkdGg9ZGV2aWNlLXdpZHRoLCBoZWlnaHQ9ZGV2aWNlLWhlaWdodCwgaW5pdGlhbC1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8sIHNocmluay10by1maXQ9eWVzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobWV0YSk7DQogICAgICBjb25maWcuZGV2aWNlUGl4ZWxSYXRpbyA9IDE7DQogICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA9IDE7DQogICAgfQ0KDQogICAgY2FudmFzLnN0eWxlLmJhY2tncm91bmQgPSAidXJsKCdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvY282Y29oYWQvbWNAbWFpbi9UZW1wbGF0ZURhdGEvYmFja2dyb3VuZC5wbmcnKSBjZW50ZXIgLyBjb3ZlciI7DQoNCiAgICBsb2FkaW5nQmFyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgIHNjcmlwdC5zcmMgPSBsb2FkZXJVcmw7DQogICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgIGNyZWF0ZVVuaXR5SW5zdGFuY2UoY2FudmFzLCBjb25maWcsIChwcm9ncmVzcykgPT4gew0KICAgICAgICBwcm9ncmVzc0JhckZ1bGwuc3R5bGUud2lkdGggPSAxMDAgKiBwcm9ncmVzcyArICIlIjsNCiAgICAgIH0pLnRoZW4oKHVuaXR5SW5zdGFuY2UpID0+IHsNCiAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UgPSB1bml0eUluc3RhbmNlOw0KICAgICAgICBsb2FkaW5nQmFyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICB9KS5jYXRjaCgobWVzc2FnZSkgPT4gew0KICAgICAgICBhbGVydChtZXNzYWdlKTsNCiAgICAgIH0pOw0KICAgIH07DQogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICA8L3NjcmlwdD48c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2NvNmNvaGFkL21jQG1haW4vQnVpbGQvL01pbmVTaG9vdGVyX1lhbmRleC5sb2FkZXIuanMiPjwvc2NyaXB0Pg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIHZhciBwbGF5ZXIgPSBudWxsOw0KICAgIHZhciBzZGs7DQogICAgdmFyIGFkdiA9IGZhbHNlOw0KICAgIHZhciBwYXltZW50cyA9IG51bGw7DQogICAgdmFyIF9fUHVyY2hhc2UgPSBudWxsOw0KDQogICAgWWFHYW1lcy5pbml0KHsNCiAgICAgIGFkdjogew0KICAgICAgICBvbkFkdkNsb3NlOiB3YXNTaG93biA9PiB7DQogICAgICAgICAgY29uc29sZS5pbmZvKCdhZHYgY2xvc2VkIScpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSkNCiAgICAgIC50aGVuKHlzZGsgPT4gew0KICAgICAgICBzZGsgPSB5c2RrOw0KICAgICAgICB5c2RrLmdldFBsYXllcih7DQogICAgICAgICAgc2lnbmVkOiB0cnVlDQogICAgICAgIH0pLnRoZW4oX3BsYXllciA9PiB7DQogICAgICAgICAgcGxheWVyID0gX3BsYXllcjsNCiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsgfSk7DQoNCiAgICAgICAgc2RrLmFkdi5zaG93RnVsbHNjcmVlbkFkdih7DQogICAgICAgICAgY2FsbGJhY2tzOiB7fQ0KICAgICAgICB9KTsNCg0KICAgICAgICB5c2RrLmdldFBheW1lbnRzKHsNCiAgICAgICAgICBzaWduZWQ6IHRydWUNCiAgICAgICAgfSkudGhlbihfcGF5bWVudHMgPT4gew0KICAgICAgICAgIHBheW1lbnRzID0gX3BheW1lbnRzOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCJQdXJjaGFzaW5nIFRydWUiKTsNCiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsgfSk7DQoNCiAgICAgIH0pOw0KDQogICAgZnVuY3Rpb24gY2hlY2tDb20oKSB7DQogICAgICB2YXIgaXNDb20gPSAwOw0KICAgICAgdmFyIG91dHB1dDsNCg0KICAgICAgaWYgKHBheW1lbnRzICE9IG51bGwpIHsNCiAgICAgICAgaW5pdFB1cmNoYXNpbmcoKTsNCiAgICAgICAgY2hlY2tTaG9wKCk7DQogICAgICB9DQoNCiAgICAgIGlmIChzZGsgIT0gbnVsbCkgew0KICAgICAgICB2YXIgb3V0cHV0ID0gc2RrLmVudmlyb25tZW50LmkxOG4udGxkOw0KICAgICAgICBpZiAob3V0cHV0ID09ICJjb20iKSB7DQogICAgICAgICAgaXNDb20gPSAxOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGNvbnNvbGUubG9nKG91dHB1dCk7DQogICAgICBjb25zb2xlLmxvZyhpc0NvbSk7DQoNCiAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdHYW1lTWFuYWdlcicsICdJc0NvbScsIGlzQ29tKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGVja0xhbmd1YWdlKCkgew0KICAgICAgdmFyIGN1cnJlbnRMYW5ndWFnZSA9IDE7DQogICAgICB2YXIgb3V0cHV0Ow0KDQogICAgICBpZiAoc2RrICE9IG51bGwpIHsNCiAgICAgICAgdmFyIG91dHB1dCA9IHNkay5lbnZpcm9ubWVudC5pMThuLmxhbmc7DQogICAgICAgIGlmIChvdXRwdXQgPT0gInVrIiB8fCBvdXRwdXQgPT0gImJlIiB8fCBvdXRwdXQgPT0gImtrIiB8fCBvdXRwdXQgPT0gInVrIiB8fCBvdXRwdXQgPT0gInV6IikNCiAgICAgICAgICBjdXJyZW50TGFuZ3VhZ2UgPSAxOw0KICAgICAgICBlbHNlDQogICAgICAgICAgY3VycmVudExhbmd1YWdlID0gMDsNCiAgICAgIH0NCg0KICAgICAgY29uc29sZS5sb2cob3V0cHV0KTsNCiAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRMYW5ndWFnZSk7DQoNCiAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdHYW1lTWFuYWdlcicsICdTZXRMYW5ndWFnZScsIGN1cnJlbnRMYW5ndWFnZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2hlY2tMYW5ndWFnZVlhKCkgew0KICAgICAgdmFyIGN1cnJlbnRMYW5ndWFnZSA9IDE7DQogICAgICB2YXIgb3V0cHV0Ow0KDQogICAgICBpZiAoc2RrICE9IG51bGwpIHsNCiAgICAgICAgdmFyIG91dHB1dCA9IHNkay5lbnZpcm9ubWVudC5pMThuLmxhbmc7DQogICAgICAgIGlmIChvdXRwdXQgPT0gInVrIiB8fCBvdXRwdXQgPT0gImJlIiB8fCBvdXRwdXQgPT0gImtrIiB8fCBvdXRwdXQgPT0gInVrIiB8fCBvdXRwdXQgPT0gInV6IikNCiAgICAgICAgICBjdXJyZW50TGFuZ3VhZ2UgPSAxOw0KICAgICAgICBlbHNlDQogICAgICAgICAgY3VycmVudExhbmd1YWdlID0gMDsNCiAgICAgIH0NCg0KICAgICAgY29uc29sZS5sb2cob3V0cHV0KTsNCiAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRMYW5ndWFnZSk7DQoNCiAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdHYW1lTWFuYWdlcicsICdTZXRMYW5ndWFnZScsIGN1cnJlbnRMYW5ndWFnZSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbG9hZERhdGEoKSB7DQogICAgICBpZiAocGxheWVyICE9IG51bGwpIHsNCiAgICAgICAgcGxheWVyLmdldERhdGEoWyJsZXZlbHMiLCAic291bmRzIiwgInJ1c3NpYW4iLCAic2Vuc2l2aXR5IiwgImJ1eXMxIiwgImJ1eXMyIiwgImJ1eXMzIiwgImJ1eXM0IiwgImJ1eXM1IiwgImJ1eXM2Il0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgaWYgKGRhdGEubGV2ZWxzKSB7DQogICAgICAgICAgICB2YXIgc291bmRzOw0KICAgICAgICAgICAgdmFyIHJ1czsNCiAgICAgICAgICAgIHZhciBidXllZDE7DQogICAgICAgICAgICB2YXIgYnV5ZWQyOw0KICAgICAgICAgICAgdmFyIGJ1eWVkMzsNCiAgICAgICAgICAgIHZhciBidXllZDQ7DQogICAgICAgICAgICB2YXIgYnV5ZWQ1Ow0KICAgICAgICAgICAgdmFyIGJ1eWVkNjsNCiAgICAgICAgICAgIGlmIChkYXRhLnNvdW5kcykgew0KICAgICAgICAgICAgICBzb3VuZHMgPSAxOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgc291bmRzID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkYXRhLnJ1c3NpYW4pIHsNCiAgICAgICAgICAgICAgcnVzID0gMTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHJ1cyA9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChkYXRhLmJ1eXMxKSB7DQogICAgICAgICAgICAgIGJ1eWVkMSA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgYnV5ZWQxID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkYXRhLmJ1eXMyKSB7DQogICAgICAgICAgICAgIGJ1eWVkMiA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgYnV5ZWQyID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkYXRhLmJ1eXMzKSB7DQogICAgICAgICAgICAgIGJ1eWVkMyA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgYnV5ZWQzID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkYXRhLmJ1eXM0KSB7DQogICAgICAgICAgICAgIGJ1eWVkNCA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgYnV5ZWQ0ID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkYXRhLmJ1eXM1KSB7DQogICAgICAgICAgICAgIGJ1eWVkNSA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgYnV5ZWQ1ID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChkYXRhLmJ1eXM2KSB7DQogICAgICAgICAgICAgIGJ1eWVkNiA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgYnV5ZWQ2ID0gMDsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICB2YXIgZGF0YVN0ciA9IGRhdGEubGV2ZWxzICsgJyAnICsgc291bmRzICsgJyAnICsgcnVzICsgJyAnICsgZGF0YS5zZW5zaXZpdHkgKyAnICcgKyBidXllZDEgKyAnICcgKyBidXllZDIgKyAnICcgKyBidXllZDMgKyAnICcgKyBidXllZDQgKyAnICcgKyBidXllZDUgKyAnICcgKyBidXllZDY7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnR2V0IERhdGEgJywgZGF0YVN0cik7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ0xvYWRDbG91ZCcsIGRhdGFTdHIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBEYXRhJyk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0NCiAgPC9zY3JpcHQ+DQo8c2NyaXB0Pg0KICAgIGZ1bmN0aW9uIHNhdmVEYXRhKGxldmVsLCBpc1NvdW5kLCBpc1J1c3NpYW4sIHNlbnNpdGl2aXR5LCBidXkxLCBidXkyLCBidXkzLCBidXk0LCBidXk1LCBidXk2KSB7DQogICAgICBjb25zb2xlLmxvZygnU2F2aW5nLi4uLicpOw0KICAgICAgaWYgKHBsYXllciAhPSBudWxsKSB7DQogICAgICAgIHBsYXllci5nZXREYXRhKFsibGV2ZWxzIiwgInNvdW5kcyIsICJydXNzaWFuIiwgInNlbnNpdml0eSIsICJidXlzMSIsICJidXlzMiIsICJidXlzMyIsICJidXlzNCIsICJidXlzNSIsICJidXlzNiJdKS50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIGlmIChkYXRhLmxldmVscykgew0KICAgICAgICAgICAgaWYgKGRhdGEubGV2ZWxzIDw9IGxldmVsKSB7DQogICAgICAgICAgICAgIHBsYXllci5zZXREYXRhKHsNCiAgICAgICAgICAgICAgICBsZXZlbHM6IGxldmVsLA0KICAgICAgICAgICAgICAgIHNvdW5kczogaXNTb3VuZCwNCiAgICAgICAgICAgICAgICBydXNzaWFuOiBpc1J1c3NpYW4sDQogICAgICAgICAgICAgICAgc2Vuc2l2aXR5OiBzZW5zaXRpdml0eSwNCiAgICAgICAgICAgICAgICBidXlzMTogYnV5MSwNCiAgICAgICAgICAgICAgICBidXlzMjogYnV5MiwNCiAgICAgICAgICAgICAgICBidXlzMzogYnV5MywNCiAgICAgICAgICAgICAgICBidXlzNDogYnV5NCwNCiAgICAgICAgICAgICAgICBidXlzNTogYnV5NSwNCiAgICAgICAgICAgICAgICBidXlzNjogYnV5Ng0KICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGF0YSBpcyBzZXQgLXVwZGF0ZScpOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcGxheWVyLnNldERhdGEoew0KICAgICAgICAgICAgICBsZXZlbHM6IGxldmVsLA0KICAgICAgICAgICAgICBzb3VuZHM6IGlzU291bmQsDQogICAgICAgICAgICAgIHJ1c3NpYW46IGlzUnVzc2lhbiwNCiAgICAgICAgICAgICAgc2Vuc2l2aXR5OiBzZW5zaXRpdml0eSwNCiAgICAgICAgICAgICAgYnV5czE6IGJ1eTEsDQogICAgICAgICAgICAgIGJ1eXMyOiBidXkyLA0KICAgICAgICAgICAgICBidXlzMzogYnV5MywNCiAgICAgICAgICAgICAgYnV5czQ6IGJ1eTQsDQogICAgICAgICAgICAgIGJ1eXM1OiBidXk1LA0KICAgICAgICAgICAgICBidXlzNjogYnV5Ng0KICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhIGlzIHNldCAtZmlyc3QnKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCg0KICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgcGxheWVyLnNldERhdGEoew0KICAgICAgICAgICAgbGV2ZWxzOiBsZXZlbCwNCiAgICAgICAgICAgIHNvdW5kczogaXNTb3VuZCwNCiAgICAgICAgICAgIHJ1c3NpYW46IGlzUnVzc2lhbiwNCiAgICAgICAgICAgIHNlbnNpdml0eTogc2Vuc2l0aXZpdHksDQogICAgICAgICAgICBidXlzMTogYnV5MSwNCiAgICAgICAgICAgIGJ1eXMyOiBidXkyLA0KICAgICAgICAgICAgYnV5czM6IGJ1eTMsDQogICAgICAgICAgICBidXlzNDogYnV5NCwNCiAgICAgICAgICAgIGJ1eXM1OiBidXk1LA0KICAgICAgICAgICAgYnV5czY6IGJ1eTYNCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhIGlzIHNldCAtZmlyc3QnKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICA8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCiAgICBmdW5jdGlvbiBzaG93RnVsbHNjcmVuQWQoKSB7DQogICAgICAvLyBUYW0gZWtyYW4gcmVrbGFtIGfDtnN0ZXJpbWluaSBwYXNpZiBoYWxlIGdldGlyaXlvcnV6LCBmb25rc2l5b251biBpw6dpIGJvxZ8gYsSxcmFrxLFsxLF5b3INCiAgICAgIGNvbnNvbGUubG9nKCdzaG93RnVsbHNjcmVuQWQgZm9ua3NpeW9udSBwYXNpZiBoYWxlIGdldGlyaWxkaS4nKTsNCiAgICB9DQo8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCiAgICBmdW5jdGlvbiBwdXJjaGFzZUNvbXBsZXRlKGlkKSB7DQogICAgICBpZiAoaWQgPT0gMCkgew0KICAgICAgICBTSE9XX0FEUyA9IGZhbHNlOw0KICAgICAgICBzZGsuYWR2LmhpZGVCYW5uZXJBZHYoKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiByYXRlKCkgew0KDQogICAgfQ0KICAgIGZ1bmN0aW9uIGNoZWNrU2hvcCgpIHsNCiAgICAgIHBheW1lbnRzLmdldFB1cmNoYXNlcygpLnRoZW4ocHVyY2hhc2VzID0+IHsNCiAgICAgICAgaWYgKHB1cmNoYXNlcy5zb21lKHB1cmNoYXNlID0+IHB1cmNoYXNlLnByb2R1Y3RJRCA9PT0gJ3dlYXBvbl8wJykpIHsNCiAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1Nob3BDb21wbGV0ZScsIDApOw0KICAgICAgICB9DQogICAgICAgIGlmIChwdXJjaGFzZXMuc29tZShwdXJjaGFzZSA9PiBwdXJjaGFzZS5wcm9kdWN0SUQgPT09ICd3ZWFwb25fMScpKSB7DQogICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ1NES1BsYXRmb3JtcycsICdTaG9wQ29tcGxldGUnLCAxKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocHVyY2hhc2VzLnNvbWUocHVyY2hhc2UgPT4gcHVyY2hhc2UucHJvZHVjdElEID09PSAnd2VhcG9uXzInKSkgew0KICAgICAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdTREtQbGF0Zm9ybXMnLCAnU2hvcENvbXBsZXRlJywgMik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHB1cmNoYXNlcy5zb21lKHB1cmNoYXNlID0+IHB1cmNoYXNlLnByb2R1Y3RJRCA9PT0gJ3dlYXBvbl8zJykpIHsNCiAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1Nob3BDb21wbGV0ZScsIDMpOw0KICAgICAgICB9DQogICAgICAgIGlmIChwdXJjaGFzZXMuc29tZShwdXJjaGFzZSA9PiBwdXJjaGFzZS5wcm9kdWN0SUQgPT09ICd3ZWFwb25fNCcpKSB7DQogICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ1NES1BsYXRmb3JtcycsICdTaG9wQ29tcGxldGUnLCA0KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAocHVyY2hhc2VzLnNvbWUocHVyY2hhc2UgPT4gcHVyY2hhc2UucHJvZHVjdElEID09PSAnd2VhcG9uXzUnKSkgew0KICAgICAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdTREtQbGF0Zm9ybXMnLCAnU2hvcENvbXBsZXRlJywgNSk7DQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQoNCiAgICAgIH0pDQogICAgfQ0KDQogICAgZnVuY3Rpb24gaW5pdFB1cmNoYXNpbmcoKSB7DQogICAgICBjb25zb2xlLmxvZygnR2V0IFB1cmNoYXNpbmcgRGF0YS4uLi4nKTsNCiAgICAgIGlmIChwYXltZW50cyAhPSBudWxsKSB7DQogICAgICAgIHZhciBnYW1lU2hvcCA9IFtdDQogICAgICAgIHBheW1lbnRzLmdldENhdGFsb2coKS50aGVuKHByb2R1Y3RzID0+IHsNCiAgICAgICAgICBnYW1lU2hvcCA9IHByb2R1Y3RzOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCdHZXQgQ2F0YWxvZyBEYXRhLi4uLicpOw0KICAgICAgICAgIGdhbWVTaG9wLmZvckVhY2gocHJvZHVjdCA9PiB7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1B1cmNoYXNlRGF0YUlkJywgcHJvZHVjdC5pZCk7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlJbnN0YW5jZS5TZW5kTWVzc2FnZSgnU0RLUGxhdGZvcm1zJywgJ1B1cmNoYXNlRGF0YVByaWNlJywgcHJvZHVjdC5wcmljZVZhbHVlKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2R1Y3QuaWQgKyAnICcgKyBwcm9kdWN0LnByaWNlKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYnV5KGlkX2J1eSkgew0KICAgICAgaWYgKHBheW1lbnRzICE9IG51bGwpIHsNCiAgICAgICAgcGF5bWVudHMucHVyY2hhc2UoeyBpZDogaWRfYnV5IH0pLnRoZW4ocHVyY2hhc2UgPT4gew0KICAgICAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlLlNlbmRNZXNzYWdlKCdTREtQbGF0Zm9ybXMnLCAnUHVyY2hhc2VzQ29tcGxldGUnLCBpZF9idXkpOw0KICAgICAgICAgIHBsc1NlbmRHb2FsKGlkX2J1eSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJhdGUoKSB7DQogICAgfQ0KICA8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCiAgICBmdW5jdGlvbiBzaG93UmV3YXJkZWRBZChpZCkgew0KICAgICAgLy8gUmVrbGFtIGfDtnN0ZXJpbWluaSBwYXNpZiBoYWxlIGdldGlyaXlvcnV6LCBmb25rc2l5b251biBpw6dpIGJvxZ8gYsSxcmFrxLFsxLF5b3INCiAgICAgIGNvbnNvbGUubG9nKCdzaG93UmV3YXJkZWRBZCBmb25rc2l5b251IHBhc2lmIGhhbGUgZ2V0aXJpbGRpLicpOw0KICAgIH0NCjwvc2NyaXB0Pg0KDQoNCg0KDQo8L2h0bWw+";
