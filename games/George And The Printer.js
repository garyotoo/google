window.game = "DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KDQoNCjxodG1sIGxhbmc9ImVuLXVzIj4NCjxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvVUdTLUFzc2V0c0BtYWluL2dlb3JnZWFuZHByaW50ZXIvIj4gDQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+DQogIDx0aXRsZT5Vbml0eSBXZWJHTCBQbGF5ZXIgfCBHZW9yZ2UgYW5kIHRoZSBQcmludGVyPC90aXRsZT4NCiAgPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSJUZW1wbGF0ZURhdGEvZmF2aWNvbi5pY28iPg0KICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9IlRlbXBsYXRlRGF0YS9zdHlsZS5jc3MiPg0KICA8c2NyaXB0IHNyYz0iVGVtcGxhdGVEYXRhL1VuaXR5UHJvZ3Jlc3MuanMiPjwvc2NyaXB0Pg0KICA8c2NyaXB0IHNyYz0iQnVpbGQvVW5pdHlMb2FkZXIuanMiPjwvc2NyaXB0Pg0KICA8c2NyaXB0Pg0KICAgIC8vIC0tLSB1dGlsaXR5IHRvIG1lcmdlIHNwbGl0IHBhcnRzIC0tLQ0KICAgIGZ1bmN0aW9uIG1lcmdlRmlsZXMoZmlsZVBhcnRzKSB7DQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICBsZXQgYnVmZmVycyA9IFtdOw0KICAgICAgICBmdW5jdGlvbiBmZXRjaFBhcnQoaSkgew0KICAgICAgICAgIGlmIChpID49IGZpbGVQYXJ0cy5sZW5ndGgpIHsNCiAgICAgICAgICAgIGxldCBtZXJnZWRCbG9iID0gbmV3IEJsb2IoYnVmZmVycyk7DQogICAgICAgICAgICByZXNvbHZlKG1lcmdlZEJsb2IpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCiAgICAgICAgICBmZXRjaChmaWxlUGFydHNbaV0pDQogICAgICAgICAgICAudGhlbihyID0+IHIuYXJyYXlCdWZmZXIoKSkNCiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICBidWZmZXJzLnB1c2goZGF0YSk7DQogICAgICAgICAgICAgIGZldGNoUGFydChpICsgMSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7DQogICAgICAgIH0NCiAgICAgICAgZmV0Y2hQYXJ0KDApOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0UGFydHMoZmlsZSwgc3RhcnQsIGVuZCkgew0KICAgICAgbGV0IGFyciA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7DQogICAgICAgIGFyci5wdXNoKGZpbGUgKyAiLnBhcnQiICsgaSk7DQogICAgICB9DQogICAgICByZXR1cm4gYXJyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlc2l6ZVVuaXR5Q29udGFpbmVyKCkgew0KICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJnYW1lQ29udGFpbmVyIik7DQogICAgICBpZiAoY29udGFpbmVyKSB7DQogICAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICsgInB4IjsNCiAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCArICJweCI7DQogICAgICB9DQogICAgfQ0KDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZVVuaXR5Q29udGFpbmVyKTsNCg0KICAgIC8vIE1pbmltYWwgVW5pdHlQcm9ncmVzcyBzdHViDQogICAgZnVuY3Rpb24gVW5pdHlQcm9ncmVzcyhnYW1lSW5zdGFuY2UsIHByb2dyZXNzKSB7DQogICAgICB0cnkgew0KICAgICAgICBpZiAocHJvZ3Jlc3MgPT09ICdjb21wbGV0ZScpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdmFyIHBjdCA9IDA7DQogICAgICAgIGlmICh0eXBlb2YgcHJvZ3Jlc3MgPT09ICdudW1iZXInKSBwY3QgPSBwcm9ncmVzczsNCiAgICAgICAgZWxzZSBpZiAocHJvZ3Jlc3MgJiYgcHJvZ3Jlc3MubG9hZGVkICYmIHByb2dyZXNzLnRvdGFsKSBwY3QgPSBwcm9ncmVzcy5sb2FkZWQgLyBwcm9ncmVzcy50b3RhbDsNCiAgICAgICAgdmFyIHR4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLXRleHQnKTsNCiAgICAgICAgaWYgKHR4dCkgdHh0LnRleHRDb250ZW50ID0gJ0xvYWRpbmcuLi4gJyArIE1hdGgucm91bmQocGN0ICogMTAwKSArICclJzsNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgLy8gc3dhbGxvdyBlcnJvcnMgZnJvbSB0aGUgcHJvZ3Jlc3Mgc3R1Yg0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIC0tLS0gTUFJTiBMT0FERVIgLS0tLQ0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgZnVuY3Rpb24gKCkgew0KICAgICAgLy8gU3RvcmUgbWVyZ2VkIGJsb2JzIGdsb2JhbGx5DQogICAgICB3aW5kb3cudW5pdHlNZXJnZWRGaWxlcyA9IHt9Ow0KICAgICAgDQogICAgICAvLyAxLiBMb2FkIHRoZSBvcmlnaW5hbCBKU09OIGNvbmZpZw0KICAgICAgZmV0Y2goIkJ1aWxkL1dlYkdMLmpzb24iKQ0KICAgICAgICAudGhlbihyID0+IHIuanNvbigpKQ0KICAgICAgICAudGhlbihjb25maWcgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJPcmlnaW5hbCBjb25maWc6IiwgY29uZmlnKTsNCiAgICAgICAgICANCiAgICAgICAgICAvLyAyLiBNZXJnZSBzcGxpdCBmaWxlcw0KICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbDQogICAgICAgICAgICBtZXJnZUZpbGVzKGdldFBhcnRzKCJCdWlsZC9XZWJHTC5kYXRhLnVuaXR5d2ViIiwgMSwgMykpLA0KICAgICAgICAgICAgbWVyZ2VGaWxlcyhnZXRQYXJ0cygiQnVpbGQvV2ViR0wud2FzbS5jb2RlLnVuaXR5d2ViIiwgMSwgMSkpLCANCiAgICAgICAgICAgIG1lcmdlRmlsZXMoZ2V0UGFydHMoIkJ1aWxkL1dlYkdMLndhc20uZnJhbWV3b3JrLnVuaXR5d2ViIiwgMSwgMSkpDQogICAgICAgICAgXSkudGhlbigoW2RhdGFCbG9iLCB3YXNtQ29kZUJsb2IsIHdhc21GcmFtZXdvcmtCbG9iXSkgPT4gew0KICAgICAgICAgICAgLy8gU3RvcmUgdGhlIG9yaWdpbmFsIGZpbGVuYW1lcyBhcyBrZXlzDQogICAgICAgICAgICB3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1snV2ViR0wuZGF0YS51bml0eXdlYiddID0gZGF0YUJsb2I7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1snV2ViR0wud2FzbS5jb2RlLnVuaXR5d2ViJ10gPSB3YXNtQ29kZUJsb2I7DQogICAgICAgICAgICB3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1snV2ViR0wud2FzbS5mcmFtZXdvcmsudW5pdHl3ZWInXSA9IHdhc21GcmFtZXdvcmtCbG9iOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zb2xlLmxvZygiTWVyZ2VkIGZpbGVzIHJlYWR5OiIsIE9iamVjdC5rZXlzKHdpbmRvdy51bml0eU1lcmdlZEZpbGVzKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEtlZXAgb3JpZ2luYWwgY29uZmlnIC0gZG9uJ3QgbW9kaWZ5IFVSTHMNCiAgICAgICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGNvbmZpZyldLCB7IHR5cGU6ICJhcHBsaWNhdGlvbi9qc29uIiB9KTsNCiAgICAgICAgICAgIGxldCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCg0KICAgICAgICAgICAgLy8gSW50ZXJjZXB0IFhNTEh0dHBSZXF1ZXN0IHRvIHNlcnZlIG91ciBtZXJnZWQgYmxvYnMNCiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsT3BlbiA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuOw0KICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTZW5kID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7DQogICAgICAgICAgICANCiAgICAgICAgICAgIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIC4uLmFyZ3MpIHsNCiAgICAgICAgICAgICAgdGhpcy5fdXJsID0gdXJsOw0KICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxPcGVuLmNhbGwodGhpcywgbWV0aG9kLCB1cmwsIC4uLmFyZ3MpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiguLi5hcmdzKSB7DQogICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSByZXF1ZXN0IGZvciBvbmUgb2Ygb3VyIG1lcmdlZCBmaWxlcw0KICAgICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLl91cmw7DQogICAgICAgICAgICAgIGlmICh1cmwgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHVybC5zcGxpdCgnLycpLnBvcCgpOw0KICAgICAgICAgICAgICAgIGlmICh3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1tmaWxlbmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJJbnRlcmNlcHRpbmcgcmVxdWVzdCBmb3I6IiwgZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgRmlsZVJlYWRlciB0byByZWFkIHRoZSBibG9iDQogICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gd2luZG93LnVuaXR5TWVyZ2VkRmlsZXNbZmlsZW5hbWVdOw0KICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IHhociA9IHRoaXM7DQogICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gTWFudWFsbHkgdHJpZ2dlciB0aGUgWEhSIGV2ZW50cyB3aXRoIG91ciBibG9iIGRhdGENCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHhociwgJ3Jlc3BvbnNlJywgeyB2YWx1ZTogcmVhZGVyLnJlc3VsdCwgd3JpdGFibGU6IGZhbHNlIH0pOw0KICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoeGhyLCAncmVzcG9uc2VUZXh0JywgeyB2YWx1ZTogcmVhZGVyLnJlc3VsdCwgd3JpdGFibGU6IGZhbHNlIH0pOw0KICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoeGhyLCAncmVhZHlTdGF0ZScsIHsgdmFsdWU6IDQsIHdyaXRhYmxlOiBmYWxzZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHhociwgJ3N0YXR1cycsIHsgdmFsdWU6IDIwMCwgd3JpdGFibGU6IGZhbHNlIH0pOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5vbmxvYWQpIHhoci5vbmxvYWQoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UpIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UoKTsNCiAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh4aHIub25lcnJvcikgeGhyLm9uZXJyb3IoKTsNCiAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTsNCiAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbFNlbmQuYXBwbHkodGhpcywgYXJncyk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyA1LiBJbnN0YW50aWF0ZSBVbml0eSB3aXRoIGJsb2IgVVJMDQogICAgICAgICAgICB3aW5kb3cuZ2FtZUluc3RhbmNlID0gVW5pdHlMb2FkZXIuaW5zdGFudGlhdGUoImdhbWVDb250YWluZXIiLCBibG9iVXJsLCB7DQogICAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IFVuaXR5UHJvZ3Jlc3MsDQogICAgICAgICAgICAgIE1vZHVsZTogew0KICAgICAgICAgICAgICAgIG9uUnVudGltZUluaXRpYWxpemVkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICByZXNpemVVbml0eUNvbnRhaW5lcigpOw0KICAgICAgICAgICAgICAgICAgbGV0IGxvYWRpbmdUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2xvYWRpbmctdGV4dCIpOw0KICAgICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdUZXh0KSBsb2FkaW5nVGV4dC5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgIFVuaXR5UHJvZ3Jlc3Mod2luZG93LmdhbWVJbnN0YW5jZSwgJ2NvbXBsZXRlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcigiVW5pdHkgbG9hZCBmYWlsZWQ6IiwgZXJyKTsNCiAgICAgICAgICBsZXQgdHh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctdGV4dCcpOw0KICAgICAgICAgIGlmICh0eHQpIHR4dC50ZXh0Q29udGVudCA9ICdMb2FkaW5nIGZhaWxlZDogJyArIGVyci5tZXNzYWdlOw0KICAgICAgICB9KTsNCiAgICB9KTsNCiAgPC9zY3JpcHQ+DQo8L2hlYWQ+DQoNCjxib2R5Pg0KICA8ZGl2IGNsYXNzPSJ3ZWJnbC1jb250ZW50Ij4NCiAgICA8ZGl2IGlkPSJnYW1lQ29udGFpbmVyIiBzdHlsZT0id2lkdGg6IDk2MHB4OyBoZWlnaHQ6IDYwMHB4Ij4NCiAgICAgIDxwIGlkPSJsb2FkaW5nLXRleHQiPkxvYWRpbmcuLi48L3A+DQogICAgPC9kaXY+DQogICAgPGRpdiBjbGFzcz0iZm9vdGVyIj4NCiAgICAgIDxkaXYgY2xhc3M9IndlYmdsLWxvZ28iPjwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0iZnVsbHNjcmVlbiIgb25jbGljaz0id2luZG93LmdhbWVJbnN0YW5jZSAmJiB3aW5kb3cuZ2FtZUluc3RhbmNlLlNldEZ1bGxzY3JlZW4oMSkiPjwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0idGl0bGUiPkdlb3JnZSBhbmQgdGhlIFByaW50ZXI8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgPC9kaXY+DQo8L2JvZHk+DQoNCjwvaHRtbD4=";
