window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KDQoNCgk8aHRtbCBsYW5nPSJlbiI+DQo8YmFzZSBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL1VHUy1Bc3NldHNAYmEwZDM5MTBiZDdkZGUyZjYxNzFjNTdkNjU4MTEzZjlkZjY5ZGQ3Ny9rYXJhdGUlMjBicm9zLyI+DQoJPGhlYWQ+DQoNCgkgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4NCg0KCSAgPHRpdGxlPkthcmF0ZSBCcm9zIHwgSGkteWFoITwvdGl0bGU+DQoNCgkgIDxtZXRhIG5hbWU9ImRlc2NyaXB0aW9uIiBjb250ZW50PSJPbmxpbmUgbXVsdGlwbGF5ZXIgS0FSQVRFISBDaG9wIHVwIHlvdXIgYnJvcyEiIC8+DQoJICA8bWV0YSBpZD0idmlld3BvcnQiIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4NCgkgIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBocmVmPSIuL2Zhdmljb24ucG5nIj4NCg0KCSAgPG1ldGEgbmFtZT0iS2V5d29yZHMiIGNvbnRlbnQ9IkthcmF0ZSwgUGxheSwgRnJlZSwgT25saW5lLCBNdWx0aXBsYXllciwgR2FtZXMsIElPLCBGaWdodGluZywgU2xhbSwgU2Nyb2xsaW5nLCBGcmllbmRzIj4NCgkgIDxtZXRhIG5hbWU9ImF1dGhvciIgY29udGVudD0iQmx1ZSBXaXphcmQgRGlnaXRhbCI+DQoNCgkgIDxtZXRhIHByb3BlcnR5PSJvZzp0eXBlIiBjb250ZW50PSJ3ZWJzaXRlIiAvPg0KCSAgPG1ldGEgcHJvcGVydHk9Im9nOnVybCIgY29udGVudD0iaHR0cHM6Ly9rYXJhdGVicm9zLmlvIiAvPg0KCSAgPG1ldGEgcHJvcGVydHk9Im9nOnRpdGxlIiBjb250ZW50PSJLYXJhdGUgQnJvcyIgLz4NCgkgIDxtZXRhIHByb3BlcnR5PSJvZzpkZXNjcmlwdGlvbiIgY29udGVudD0iT25saW5lIG11bHRpcGxheWVyIEthcmF0ZSEgQ2hvcCB5b3VyIGJyb3MtIEhJWUFIISIgLz4NCgkgIDxtZXRhIHByb3BlcnR5PSJvZzppbWFnZSIgY29udGVudD0iaHR0cHM6Ly9iYXNrZXRicm9zLmlvL2thcmF0ZS9zcGxhc2gyLmpwZyIgLz4NCgkgIDxsaW5rIHJlbD0ibWFuaWZlc3QiIGhyZWY9Im1hbmlmZXN0Lmpzb24iPg0KDQoNCg0KCSAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iLi9LYXJhdGVCcm9zLmpzP3RoPTIzIj48L3NjcmlwdD4NCg0KCSAgPHNjcmlwdD4NCgkgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsIGZ1bmN0aW9uKGV2ZW50KSB7DQoJICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkgICAgfSwgew0KCSAgICAgIGNhcHR1cmU6IGZhbHNlLA0KCSAgICAgIHBhc3NpdmU6IGZhbHNlDQoJICAgIH0pOw0KCSAgICBpZiAodHlwZW9mIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMikgew0KCSAgICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpZXdwb3J0Iik7DQoJICAgICAgbWV0YS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCAnd2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPScgKyAoMiAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSArICcsIHVzZXItc2NhbGFibGU9bm8nKTsNCgkgICAgfQ0KCSAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsNCgkgICAgICBpZiAoKGUua2V5Q29kZSA9PSAzMiB8fCBlLmtleUNvZGUgPT0gMzggfHwgZS5rZXlDb2RlID09IDQwKSAmJiBlLnRhcmdldCA9PSBkb2N1bWVudC5ib2R5KSB7DQoJICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQoJICAgICAgfQ0KCSAgICB9KTsNCg0KCSAgICB2YXIgZGVmZXJyZWRQcm9tcHQ7DQoJICAgIHZhciB0ZXN0ZWRQV0EgPSBmYWxzZTsNCgkgICAgdmFyIGNhblByb2Nlc3NQV0EgPSBmYWxzZTsNCgkgIDwvc2NyaXB0Pg0KDQoJICA8c3R5bGU+DQoJICAgIGh0bWwsDQoJICAgIGJvZHkgew0KCSAgICAgIG1hcmdpbjogMDsNCgkgICAgICBwYWRkaW5nOiAwOw0KCSAgICAgIGhlaWdodDogMTAwJTsNCgkgICAgICBiYWNrZ3JvdW5kOiAjMDAwMDAwOw0KCSAgICAgIGNvbG9yOiBvcmFuZ2U7DQoJICAgICAgaGVpZ2h0OiAxMDAlOw0KCSAgICAgIHdpZHRoOiAxMDAlOw0KCSAgICAgIGhlaWdodDogMTAwdmg7DQoJICAgICAgd2lkdGg6IDEwMHZ3Ow0KCSAgICAgIG1hcmdpbjogMDsNCgkgICAgICBwYWRkaW5nOiAwOw0KCSAgICB9DQoNCgkgICAgLmJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCgkgICAgICAvKiBXZWJLaXQgKi8NCgkgICAgICB3aWR0aDogMHB4Ow0KCSAgICB9DQoNCgkgICAgI29wZW5mbC1jb250ZW50IHsNCgkgICAgICBiYWNrZ3JvdW5kOiAjMDAwMDAwOw0KCSAgICAgIHdpZHRoOiAxMDAlOw0KCSAgICAgIGhlaWdodDogMTAwJTsNCgkgICAgfQ0KDQoJICAgICNzcGlubmVyIHsNCgkgICAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7DQoJICAgICAgLW1vei10cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOw0KCSAgICAgIC1vLXRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7DQoJICAgICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTsNCgkgICAgICB3aWR0aDogODJweDsNCgkgICAgICBoZWlnaHQ6IDgxcHg7DQoJICAgICAgLXdlYmtpdC1hbmltYXRpb246IHNwaW4xIDJzIGluZmluaXRlIGxpbmVhcjsNCgkgICAgICAtbW96LWFuaW1hdGlvbjogc3BpbjEgMnMgaW5maW5pdGUgbGluZWFyOw0KCSAgICAgIC1vLWFuaW1hdGlvbjogc3BpbjEgMnMgaW5maW5pdGUgbGluZWFyOw0KCSAgICAgIC1tcy1hbmltYXRpb246IHNwaW4xIDJzIGluZmluaXRlIGxpbmVhcjsNCgkgICAgICBhbmltYXRpb246IHNwaW4xIDJzIGluZmluaXRlIGxpbmVhcjsNCgkgICAgfQ0KCSAgPC9zdHlsZT4NCg0KDQoJICA8IS0tIEdvb2dsZSB0YWcgKGd0YWcuanMpIC0tPg0KCSAgPHNjcmlwdCBhc3luYyBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9Ry1GSkdEUVM3WDFNIj48L3NjcmlwdD4NCgkgIDxzY3JpcHQ+DQoJICAgIHdpbmRvdy5kYXRhTGF5ZXIgPSB3aW5kb3cuZGF0YUxheWVyIHx8IFtdOw0KDQoJICAgIGZ1bmN0aW9uIGd0YWcoKSB7DQoJICAgICAgZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTsNCgkgICAgfQ0KCSAgICBndGFnKCdqcycsIG5ldyBEYXRlKCkpOw0KCSAgICBndGFnKCdjb25maWcnLCAnRy1GSkdEUVM3WDFNJywgew0KCSAgICAgIGNvb2tpZV9mbGFnczogJ3NlY3VyZTtzYW1lc2l0ZT1ub25lJw0KCSAgICB9KTsNCgkgIDwvc2NyaXB0Pg0KDQoJICA8c2NyaXB0Pg0KCSAgICAvL0ludGVyc3RpdGlhbCBhZCBhdmFpbGFibGUgZXZlbnQNCgkgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiYWlwX2ludGVyc3RpdGlhbGFkYXZhaWxhYmxlIiwgZnVuY3Rpb24oZSkgew0KCSAgICAgIGNvbnNvbGUubG9nKCJBbiBpbnRlcnN0aXRpYWwgYWQgaXMgYXZhaWxhYmxlIik7DQoJICAgIH0pOw0KCSAgPC9zY3JpcHQ+DQoJICA8c2NyaXB0IHNyYz0iLy9hcGkuYWRpbnBsYXkuY29tL2xpYnMvYWlwdGFnL3B1Yi9TU0sva2FyYXRlYnJvcy5pby90YWcubWluLmpzIj48L3NjcmlwdD4NCg0KCSAgPHNjcmlwdD4NCgkgICAgdmFyIGFpcHRhZyA9IGFpcHRhZyB8fCB7fTsNCgkgICAgYWlwdGFnLmNtZCA9IGFpcHRhZy5jbWQgfHwgW107DQoJICAgIGFpcHRhZy5jbWQuZGlzcGxheSA9IGFpcHRhZy5jbWQuZGlzcGxheSB8fCBbXTsNCgkgICAgYWlwdGFnLmNtZC5wbGF5ZXIgPSBhaXB0YWcuY21kLnBsYXllciB8fCBbXTsNCgkgICAgLy8gU2V0dGluZ3MNCgkgICAgYWlwdGFnLmNvbnNlbnRlZCA9IGZhbHNlOyAvLyBHRFBSIHNldHRpbmcsIHBsZWFzZSBzZXQgdGhpcyB2YWx1ZSB0byBmYWxzZSBpZiBhbiBFVSB1c2VyIGhhcyBkZWNsaW5lZCBvciBub3QgeWV0IGFjY2VwdGVkIG1hcmtldGluZyBjb29raWVzLCBmb3IgdXNlcnMgb3V0c2lkZSB0aGUgRVUgcGxlYXNlIHVzZSB0cnVlIGFuZCBmb3IgdXNlcnMgYWNjZXB0ZWQgdGhlIEdEUFIgYWxzbyB1c2UgdHJ1ZQ0KDQoNCg0KCSAgICBhaXB0YWcuY21kLnBsYXllci5wdXNoKGZ1bmN0aW9uKCkgew0KCSAgICAgIGFkcGxheWVyID0gbmV3IGFpcFBsYXllcih7DQoJICAgICAgICBBSVBfQURCUkVBS19DT01QTEVURTogZnVuY3Rpb24oKSB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCJBZGJyZWFrIENvbXBsZXRlZCIpOw0KCSAgICAgICAgICBNYWluLkRvbmVJbnRlcnN0aXRpYWxBZChmYWxzZSk7DQoJICAgICAgICB9LA0KCSAgICAgICAgQURfV0lEVEg6IDk2MCwNCgkgICAgICAgIEFEX0hFSUdIVDogNTQwLA0KCSAgICAgICAgQURfRElTUExBWTogJ2RlZmF1bHQnLCAvL2RlZmF1bHQsIGZ1bGxzY3JlZW4sIGNlbnRlciwgZmlsbA0KCSAgICAgICAgVFJVU1RFRDogdHJ1ZSwNCgkgICAgICAgIExPQURJTkdfVEVYVDogJ2xvYWRpbmcgYWR2ZXJ0aXNlbWVudCcsDQoJICAgICAgICBQUkVST0xMX0VMRU06IGZ1bmN0aW9uKCkgew0KCSAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXJvbGwnKQ0KCSAgICAgICAgfSwNCgkgICAgICAgIEFJUF9DT01QTEVURTogZnVuY3Rpb24oc3RhdGUpIHsNCgkgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioNCgkgICAgICAgICAgICoqKioqIFdBUk5JTkcgKioqKioNCgkgICAgICAgICAgKioqKioqKioqKioqKioqKioqKg0KCSAgICAgICAgICBQbGVhc2UgZG8gbm90IHJlbW92ZSB0aGUgUFJFUk9MTF9FTEVNDQoJICAgICAgICAgIGZyb20gdGhlIHBhZ2UsIGl0IHdpbGwgYmUgaGlkZGVuIGF1dG9tYXRpY2x5Lg0KCSAgICAgICAgICBJZiB5b3UgZG8gd2FudCB0byByZW1vdmUgaXQgdXNlIHRoZSBBSVBfUkVNT1ZFIGNhbGxiYWNrLg0KCSAgICAgICAgICAqLw0KCSAgICAgICAgICBNYWluLkRvbmVWaWRlb0FkKCk7DQoJICAgICAgICAgIHdpbmRvdy5mb2N1cygpOw0KCSAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW5mbC1jb250ZW50JykuZm9jdXMoKTsNCgkgICAgICAgICAgaWYgKHN0YXRlID09IG51bGwpIHN0YXRlID0gJ251bGwnOw0KCSAgICAgICAgICBjb25zb2xlLmxvZygnVmlkZW8gQWQgQ29tcGxldGU6ICcgKyBzdGF0ZSk7DQoJICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnZG9uZXZpZGVvLScgKyBsYXN0VW5pdFBsYXllZCArICItIiArIHN0YXRlKTsNCgkgICAgICAgIH0sDQoJICAgICAgICBBSVBfUkVNT1ZFOiBmdW5jdGlvbigpIHsNCgkgICAgICAgICAgLy8gSGVyZSBpdCdzIHNhZmUgdG8gcmVtb3ZlIHRoZSBQUkVST0xMX0VMRU0gZnJvbSB0aGUgcGFnZSBpZiB5b3Ugd2FudC4gQnV0IGl0J3Mgbm90IHJlY29tbWVuZC4NCgkgICAgICAgIH0NCgkgICAgICB9KTsNCgkgICAgfSk7DQoNCg0KCSAgICBmdW5jdGlvbiBTZXR1cE1TTm90aWZpY2F0aW9uKCkgew0KCSAgICAgIGNvbnNvbGUubG9nKCJub3RpZnlpbmciKTsNCgkgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgY29uc29sZS5sb2coIm5vdGlmeWluZzIiKTsNCgkgICAgICAgIHZhciBpZCA9IGJ0b2EoImh0dHBzOi8va2FyYXRlYnJvcy5pby93YnJvc18zNjR4MTgwLnBuZyIpOw0KCSAgICAgICAgJG1zc3RhcnQuc2NoZWR1bGVOb3RpZmljYXRpb25Bc3luYyh7DQoJICAgICAgICAgIHRpdGxlOiAnVW5sb2NrIG5ldyBicm9zIG5vdyEnLA0KCSAgICAgICAgICBkZXNjcmlwdGlvbjogJ1lvdSBhcmUganVzdCBhYm91dCB0byB1bmxvY2sgYSBuZXcgQnJvISBXaG8gd2lsbCBpdCBiZT8nLA0KCSAgICAgICAgICB0eXBlOiAxLA0KCSAgICAgICAgICBtaW5EZWxheUluU2Vjb25kczogMjQgKiA2MCAqIDYwDQoJICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCgkgICAgICAgICAgY29uc29sZS5sb2coIm5vdGlmaWNhdGlvbiByZXNwb25zZTogIiArIHJlc3BvbnNlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgICAgJG1zc3RhcnQuc2NoZWR1bGVOb3RpZmljYXRpb25Bc3luYyh7DQoJICAgICAgICAgIHRpdGxlOiAnR2V0IG1vcmUgYnJvcyEnLA0KCSAgICAgICAgICBkZXNjcmlwdGlvbjogJ05ldyBicm9zIGp1c3Qgd2FpdGluZyB0byBzY29yZSBnb2FscyBmb3IgeW91IScsDQoJICAgICAgICAgIHR5cGU6IDEsDQoJICAgICAgICAgIG1pbkRlbGF5SW5TZWNvbmRzOiAyNCAqIDcgKiA2MCAqIDYwDQoJICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCgkgICAgICAgICAgY29uc29sZS5sb2coIm5vdGlmaWNhdGlvbiByZXNwb25zZTogIiArIHJlc3BvbnNlKTsNCgkgICAgICAgIH0pOw0KDQoJICAgICAgfQ0KCSAgICB9DQoNCgkgICAgdmFyIG1zQWRJRDsNCg0KCSAgICBmdW5jdGlvbiBMb2FkVmlkZW8oKSB7DQoJICAgICAgaWYgKHR5cGVvZiAkbXNzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgICRtc3N0YXJ0LmxvYWRBZHNBc3luYygpLnRoZW4oYWRJbnN0YW5jZSA9PiB7DQoJICAgICAgICAgIC8vIFVzZSB0aGUgYWRJbnN0YW5jZS5pbnN0YW5jZUlkIHRvIG1ha2UgYSBjYWxsIHRvIHNob3dBZHNBc3luYw0KCSAgICAgICAgICBtc0FkSUQgPSBhZEluc3RhbmNlLmluc3RhbmNlSWQ7DQoJICAgICAgICB9KTsNCg0KCSAgICAgICAgU2V0dXBNU05vdGlmaWNhdGlvbigpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIGZ1bmN0aW9uIFNob3dWaWRlbyh0aGVVbml0TmFtZSA9ICJwcmVyb2xsIiwgZm9yY2VhaXAgPSBmYWxzZSkgew0KCSAgICAgIGNvbnNvbGUubG9nKCdTSE9XX1ZJREVPJyk7DQoJICAgICAgdmFyIGFVbml0TmFtZSA9ICIiOw0KCSAgICAgIGlmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7DQoJICAgICAgICB2YXIgbCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlcm9sbCcpOw0KCSAgICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuOw0KCSAgICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KCSAgICAgICAgbC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7DQoJICAgICAgICB3aW5kb3cuZm9jdXMoKTsNCgkgICAgICAgIHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlbmZsLWNvbnRlbnQnKS5mb2N1cygpOw0KCSAgICAgICAgTWFpbi5Eb25lVmlkZW9BZCgpOw0KCSAgICAgICAgcmV0dXJuOw0KCSAgICAgIH0NCg0KCSAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnICYmIGZvcmNlYWlwID09IGZhbHNlKSB7DQoJICAgICAgICAkbXNzdGFydC5zaG93QWRzQXN5bmMobXNBZElEKS50aGVuKGFkSW5zdGFuY2UgPT4gew0KCSAgICAgICAgICAvLyBVc2UgdGhlIGFkSW5zdGFuY2Uuc2hvd0Fkc0NvbXBsZXRlZEFzeW5jIHRvIGJlIG5vdGlmaWVkIG9mIHRoZSBjb21wbGV0aW9uIG9mIHNob3dpbmcgdGhlIGFkdmVydGlzZW1lbnQNCgkgICAgICAgICAgYWRJbnN0YW5jZS5zaG93QWRzQ29tcGxldGVkQXN5bmMudGhlbigodmFsKSA9PiB7DQoJICAgICAgICAgICAgY29uc29sZS5sb2coJ01TIFZpZGVvIEFkIENvbXBsZXRlJyk7DQoJICAgICAgICAgICAgTWFpbi5Eb25lVmlkZW9BZCgpOw0KCSAgICAgICAgICAgIHdpbmRvdy5mb2N1cygpOw0KCSAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlbmZsLWNvbnRlbnQnKS5mb2N1cygpOw0KCSAgICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfdmlkZW9fc2hvd24yJyk7DQoJICAgICAgICAgICAgTG9hZFZpZGVvKCk7DQoJICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsNCgkgICAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX3ZpZGVvX25vdF9jb21wbGV0ZWQnKTsNCgkgICAgICAgICAgICBMb2FkVmlkZW8oKTsNCgkgICAgICAgICAgfSk7DQoJICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCdNcyBWaWRlbyBBZCBFcnJvciwgc2hvd2luZyBhaXAnKTsNCgkgICAgICAgICAgLy9NYWluLkRvbmVWaWRlb0FkKCk7DQoJICAgICAgICAgIHdpbmRvdy5mb2N1cygpOw0KCSAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW5mbC1jb250ZW50JykuZm9jdXMoKTsNCgkgICAgICAgICAgU2VuZEV2ZW50KCdldmVudCcsICdtc192aWRlb19zaG93X2Vycm9yMicpOw0KCSAgICAgICAgICBMb2FkVmlkZW8oKTsNCgkgICAgICAgICAgU2hvd1ZpZGVvKHRoZVVuaXROYW1lLCB0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KDQoJICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB7DQoJICAgICAgICAgIGFkRmluaXNoZWQ6ICgpID0+IE1haW4uRG9uZVZpZGVvQWQoKSwNCgkgICAgICAgICAgYWRFcnJvcjogKGVycm9yKSA9PiBNYWluLkRvbmVWaWRlb0FkKCksDQoJICAgICAgICAgIGFkU3RhcnRlZDogKCkgPT4gY29uc29sZS5sb2coIlN0YXJ0IG1pZGdhbWUgYWQiKSwNCgkgICAgICAgIH07DQoJICAgICAgICB3aW5kb3cuQ3JhenlHYW1lcy5TREsuYWQucmVxdWVzdEFkKCJtaWRnYW1lIiwgY2FsbGJhY2tzKTsNCg0KCSAgICAgICAgLy8JCQl3aW5kb3cuQ3JhenlHYW1lcy5TREsuYWRkRXZlbnRMaXN0ZW5lcigiYWRGaW5pc2hlZCIsIE1haW4uRG9uZVZpZGVvQWQpOyAvLyByZWVuYWJsZSBzb3VuZCwgZW5hYmxlIHVpDQoJICAgICAgICAvLwkJCXdpbmRvdy5DcmF6eUdhbWVzLlNESy5hZGRFdmVudExpc3RlbmVyKCJhZEVycm9yIiwgTWFpbi5Eb25lVmlkZW9BZCk7IC8vIHJlZW5hYmxlIHNvdW5kLCBlbmFibGUgdWkNCgkgICAgICAgIC8vCQkJd2luZG93LkNyYXp5R2FtZXMuU0RLLnJlcXVlc3RBZCgpOwkJDQoJICAgICAgICBjb25zb2xlLmxvZygnQ0dfQURfUkVRVUVTVEVEJyk7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2NndmlkZW8nKTsNCgkgICAgICAgIHJldHVybjsNCgkgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhZHBsYXllciA9PT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIE1haW4uRG9uZVZpZGVvQWQodHJ1ZSk7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ3ZpZGVvX2FkYmxvY2tlZCcpOw0KCSAgICAgICAgY29uc29sZS5sb2coJ1ZJREVPX0FEQkxPQ0tFRCcpOw0KDQoJICAgICAgfSBlbHNlIHsNCgkgICAgICAgIHZhciBhU3RyID0gJ3ByZXJvbGwnOw0KCSAgICAgICAgaWYgKHRoZVVuaXROYW1lICE9IG51bGwpIGFTdHIgPSB0aGVVbml0TmFtZTsNCgkgICAgICAgIGxhc3RVbml0UGxheWVkID0gYVN0cjsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnc3RhcnR2aWRlby0nICsgYVN0cik7DQoNCg0KCSAgICAgICAgYWlwdGFnLmNtZC5wbGF5ZXIucHVzaChmdW5jdGlvbigpIHsNCgkgICAgICAgICAgYWRwbGF5ZXIuc3RhcnRQcmVSb2xsKHRoZVVuaXROYW1lKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0NCgkgICAgfQ0KCSAgPC9zY3JpcHQ+DQoJPC9oZWFkPg0KDQoJPGJvZHkgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjsiPg0KCSAgPG5vc2NyaXB0PkVuYWJsZSBKYXZhU2NyaXB0IGJybyE8L25vc2NyaXB0Pg0KCSAgPGRpdiBpZD0ibG9hZGluZyIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogMTU7IHRvcDogNjAlOyBsZWZ0OiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApOyBiYWNrZ3JvdW5kOiBibGFjazsiPg0KCSAgICA8Y2VudGVyPjxpbWcgc3JjPSJhc3NldHMvbG9hZGluZzQucG5nIj48YnIgLz4NCgkgICAgICA8aW1nIHNyYz0iYXNzZXRzL2Zicm8ucG5nIj4NCgkgICAgICA8aW1nIHNyYz0iYXNzZXRzL3Nicm8ucG5nIj4NCgkgICAgICA8aW1nIHNyYz0iYXNzZXRzL3dicm8ucG5nIj4NCgkgICAgICA8aW1nIHNyYz0iYXNzZXRzL2Jicm8ucG5nIj4NCgkgICAgPC9jZW50ZXI+DQoJICA8L2Rpdj4NCg0KCSAgPGRpdiBpZD0iZ2FtZTIiIHN0eWxlPSJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyAiPg0KCSAgICA8ZGl2IGlkPSJvcGVuZmwtY29udGVudCIgb25ibHVyPSJ3aW5kb3cuZm9jdXMoKTsiIHN0eWxlPSJ3aWR0aDogY2FsYygxMDAlKTsgZmxvYXQ6bGVmdDsiPg0KCSAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCgkgICAgICAgIGxpbWUuZW1iZWQoIkthcmF0ZUJyb3MiLCAib3BlbmZsLWNvbnRlbnQiLCAwLCAwLCB7DQoJICAgICAgICAgIHBhcmFtZXRlcnM6IHt9DQoJICAgICAgICB9KTsNCgkgICAgICA8L3NjcmlwdD4NCgkgICAgPC9kaXY+DQoJICAgIDxkaXYgaWQ9InByZXJvbGwiIHN0eWxlPSJ3aWR0aDogOTYwcHg7IGhlaWdodDogNTQwcHg7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgei1pbmRleDogMTAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsiPg0KCSAgICA8L2Rpdj4NCg0KCSAgICA8ZGl2IGlkPSJrYXJhdGVicm9zLWlvXzMwMHgyNTAiIHN0eWxlPSJ3aWR0aDogMzAwcHg7IGhlaWdodDogMjUwcHg7IHZpc2liaWxpdHk6aGlkZGVuOyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMzBweDsgbGVmdDogMzBweDsgei1pbmRleDogMTAwOyI+DQoJICAgIDwvZGl2Pg0KCSAgICA8ZGl2IGlkPSJrYXJhdGVicm9zLWlvXzMwMHgyNTBfMiIgc3R5bGU9IndpZHRoOiAzMDBweDsgaGVpZ2h0OiAyNTBweDsgdmlzaWJpbGl0eTpoaWRkZW47IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAzMHB4OyBsZWZ0OiAzMHB4OyB6LWluZGV4OiAxMDA7ICI+DQoJICAgIDwvZGl2Pg0KCSAgICA8ZGl2IGlkPSJrYXJhdGVicm9zLWlvXzcyOHg5MCIgc3R5bGU9InZpc2liaWxpdHk6aGlkZGVuOyB3aWR0aDogNzI4cHg7IGhlaWdodDogOTBweDsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDMwcHg7IGxlZnQ6IDMwcHg7IHotaW5kZXg6IDEwMDsiPg0KCSAgICA8L2Rpdj4NCgkgICAgPGRpdiBpZD0ia2FyYXRlYnJvcy1pb183Mjh4OTBfbSIgc3R5bGU9InZpc2liaWxpdHk6aGlkZGVuOyB3aWR0aDogNzI4cHg7IGhlaWdodDogOTBweDsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDMwcHg7IGxlZnQ6IDMwcHg7IHotaW5kZXg6IDEwMDsiPg0KCSAgICA8L2Rpdj4NCgkgICAgPGRpdiBpZD0ia2FyYXRlYnJvcy1pb185NzB4MjUwIiBzdHlsZT0idmlzaWJpbGl0eTpoaWRkZW47IHdpZHRoOiA5NzBweDsgaGVpZ2h0OiAyNTBweDsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDMwcHg7IGxlZnQ6IDMwcHg7IHotaW5kZXg6IDEwMDsiPg0KCSAgICA8L2Rpdj4NCgkgICAgPGRpdiBpZD0ia2FyYXRlYnJvcy1pb18xNjB4NjAwIiBzdHlsZT0id2lkdGg6IDE2MHB4OyBoZWlnaHQ6IDYwMHB4OyB2aXNpYmlsaXR5OmhpZGRlbjsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDMwcHg7IGxlZnQ6IDMwcHg7IHotaW5kZXg6IDEwMDsiPg0KCSAgICA8L2Rpdj4NCgkgICAgPGRpdiBpZD0ia2FyYXRlYnJvcy1pb18xNjB4NjAwXzIiIHN0eWxlPSJ3aWR0aDogMTYwcHg7IGhlaWdodDogNjAwcHg7IHZpc2liaWxpdHk6aGlkZGVuOyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMzBweDsgbGVmdDogMzBweDsgei1pbmRleDogMTAwOyAiPg0KCSAgICA8L2Rpdj4NCg0KDQoJICA8L2Rpdj4NCgkgIDxiciAvPg0KCSAgPGRpdiBpZD0ibW9yZSI+DQoJICAgIDxkaXYgY2xhc3M9Im5vdGNoLXRvcC1sZWZ0IiBzdHlsZT0iLS1ub3RjaC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1jb2xvcikiPjwvZGl2Pg0KCSAgICA8ZGl2IGNsYXNzPSJpbmZvLWJveCI+DQoJICAgICAgPGgzPkFib3V0IEthcmF0ZSBCcm9zPC9oMz4NCgkgICAgICA8cD5LaWNrLCBjaG9wLCBhbmQgdGhyb3cgZG93biB3aXRoIHlvdXIgZG9qbyBpbiB0aGlzIGZyZWUga2FyYXRlIGJyb3dzZXIgZ2FtZSBmcm9tIEJsdWUgV2l6YXJkISBTcGFyIGFnYWluc3QgeW91ciBmcmllbmRzIG9ubGluZSBvciBjaGFsbGVuZ2UgdGhlIENQVSB0byB1bmxvY2sgbmV3IGZpZ2h0ZXJzIGFuZCBnZWFyLiBTdGVwIGludG8gdGhlIHVsdGltYXRlIG1hcnRpYWwgYXJ0cyBzaG93ZG93biEgUGVyZm9ybSBoaWdoLWZseWluZyBraWNrcywgc3dlZXAgeW91ciBvcHBvbmVudCBvZmYgdGhlaXIgZmVldCwgb3IgYnJlYWsgYm9hcmRzIHdpdGggc3R5bGUhIEJlc3Qgb2YgYWxsLCB5b3UgY2FuIGNvbXBldGUgb25saW5lIHdpdGggeW91ciBmcmllbmRzLCBzZW5zZWkhIPCfpYvwn5GKPC9wPg0KCSAgICAgIDxwPlRoZSBjb250cm9scyBhcmUgdmVyeSBzaW1wbGU6IFVzZSBlaXRoZXIgdGhlIGFycm93IGtleXMgb3Igd2FzZCB0byBjb250cm9sIHlvdXIgYnJvLiBKdW1wIGJ5IHByZXNzaW5nIHRoZSB1cCBhcnJvdyB5b3Ugd2lsbCBzZWUgaGludHMgZHVyaW5nIHBsYXkgZm9yIGVhY2ggbW92ZS48L3A+DQoJICAgICAgPHA+QmUgc3VyZSB0byBzaWduIHVwIGZvciBvdXIgbmV3c2xldHRlciB0byBrbm93IGFsdCBsaW5rcyBhbmQgbmV3IHVwZGF0ZXMgdG8gS2FyYXRlIEJyb3MhPC9wPg0KCSAgICA8L2Rpdj4NCgkgICAgPGRpdiBjbGFzcz0iaW5mby1ib3giPg0KCSAgICAgIDxoMz5GQVE8L2gzPg0KCSAgICAgIDxiPldoeSBpc24ndCB0aGUgZ2FtZSBsb2FkaW5nPzwvYj4NCgkgICAgICA8cD5Zb3Ugc2hvdWxkIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbiBhbmQgbWFrZSBzdXJlIG91ciBzaXRlIGlzbid0IGJsb2NrZWQuIEFsc28sIGRpc2FibGUgYWxsIGFkIGJsb2NrZXJzLjwvcD4NCgkgICAgICA8Yj5Ib3cgZG8gSSBwbGF5PzwvYj4NCgkgICAgICA8cD5KdXN0IGhvcCBpbiBhbmQgc3RhcnQgc3VwbGV4aW5nIHlvdXIgYnJvcyE8L3A+DQoJICAgICAgPGI+V2hpY2ggYnJvd3NlciBzaG91bGQgSSB1c2U/PC9iPg0KCSAgICAgIDxwPllvdSBzaG91bGQgdXNlIGNocm9tZS4gSXQgaXMgdGhlIG9ubHkgYnJvd3NlciBndWFyYW50ZWVkIHRvIHdvcmsuIEthcmF0ZSBCcm9zIGhhcyBhbHNvIGJlZW4gdGVzdGVkIHRvIHdvcmsgb24gRmlyZUZveCBhbmQgU2FmYXJpLCBidXQgbm90IGd1YXJhbnRlZWQuPC9wPg0KCSAgICAgIDxiPkFyZSB0aGVyZSBtb3JlIEJyb3MgZ2FtZXM/PC9iPg0KCSAgICAgIDxwPlllcyEgT3VyIG5ld2VzdCBpcyA8YSBocmVmPSJodHRwczovL2Zvb3RiYWxsYnJvcy5pbyI+Rm9vdGJhbGwgQnJvczwvYT4gd2hpY2ggaXMgc3RpbGwgaW4gZGV2ZWxvcG1lbnQuIEJ1dCB3ZSBhbHNvIGhhdmUgPGEgaHJlZj0iaHR0cHM6Ly9zb2NjZXJicm9zLmdnIj5Tb2NjZXIgQnJvczwvYT4gYW5kIDxhIGhyZWY9Imh0dHBzOi8vYmFza2V0YnJvcy5pbyI+QmFza2V0IEJyb3M8L2E+LjwvcD4NCgkgICAgPC9kaXY+DQoJICA8L2Rpdj4NCgkgIDxkaXYgY2xhc3M9InNlY3Rpb24iPg0KCSAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogcm93OyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbjogMTBweDsgcGFkZGluZzogMnB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsiPg0KCSAgICAgIDxkaXYgY2xhc3M9InBhcnRuZXIiPg0KCSAgICAgICAgPHNjcmlwdD4NCgkgICAgICAgICAgLypmdW5jdGlvbiBnZXRQYXJ0bmVyKHkpIHsNCgkJCQkJCQl2YXIgcmVmZXJyZXIgPSBkb2N1bWVudC5yZWZlcnJlcjsNCgkJCQkJCQlpZihyZWZlcnJlci5pbmNsdWRlcygnY3JhenlnYW1lcycpKQ0KCQkJCQkJCXsNCgkJCQkJCQkJcmV0dXJuICc8Y2VudGVyPjxicj48ZGl2IHN0eWxlPSJ0cmFuc2Zvcm06dHJhbnNsYXRlKCcrJy01MCcrJ3B4LCcreSsncHgpOyB3aWR0aD03MCU7IHotaW5kZXg6IDEwMTsgdGV4dC1hbGlnbjpyaWdodDs+PGZvbnQgc3R5bGU9ImZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LWZhbWlseTpBcmlhbDtjb2xvcjojMDEwMTAxO2ZvbnQtc2l6ZToyMHB4OyI+PGEgaHJlZj0iaHR0cHM6Ly9jcmF6eWdhbWVzLmNvbSIgdGFyZ2V0PSJfYmxhbmsiPkNyYXp5IEdhbWVzPC9hPjwvZm9udD48YnI+PC9kaXY+PC9jZW50ZXI+JzsNCgkJCQkJCQl9DQoJCQkJCQkJZWxzZSBpZiAocmVmZXJyZXIuaW5jbHVkZXMoJ2lvZ2FtZXMuc3BhY2UnKSkNCgkJCQkJCQl7DQoJCQkJCQkJCXJldHVybiAnPGNlbnRlcj48YnI+PGRpdiBzdHlsZT0idHJhbnNmb3JtOnRyYW5zbGF0ZSgnKyctNTAnKydweCwnK3krJ3B4KTsgd2lkdGg9NzAlOyB6LWluZGV4OiAxMDE7IHRleHQtYWxpZ246cmlnaHQ7Pjxmb250IHN0eWxlPSJmb250LXdlaWdodDpub3JtYWw7Zm9udC1mYW1pbHk6QXJpYWw7Y29sb3I6IzAxMDEwMTtmb250LXNpemU6MjBweDsiPjxhIGhyZWY9Imh0dHBzOi8vaW9nYW1lcy5zcGFjZSIgdGFyZ2V0PSJfYmxhbmsiPklPIEdhbWVzPC9hPjwvZm9udD48YnI+PC9kaXY+PC9jZW50ZXI+JzsNCgkJCQkJCQl9DQoJCQkJCQkJZWxzZSBpZihyZWZlcnJlci5pbmNsdWRlcygncG9raScpKQ0KCQkJCQkJCXsNCgkJCQkJCQkJcmV0dXJuICc8Y2VudGVyPjxicj48ZGl2IHN0eWxlPSJ0cmFuc2Zvcm06dHJhbnNsYXRlKCcrJy01MCcrJ3B4LCcreSsncHgpOyB3aWR0aD03MCU7IHotaW5kZXg6IDEwMTsgdGV4dC1hbGlnbjpyaWdodDs+PGZvbnQgc3R5bGU9ImZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LWZhbWlseTpBcmlhbDtjb2xvcjojMDEwMTAxO2ZvbnQtc2l6ZToyMHB4OyI+Q2hlY2sgb3V0IG91ciBmcmllbmRzIGF0IDxhIGhyZWY9Imh0dHBzOi8vcG9raS5jb20iIHRhcmdldD0iX2JsYW5rIj5Qb2tpPC9hPjwvZm9udD48YnI+PC9kaXY+PC9jZW50ZXI+JzsNCgkJCQkJCQl9DQoJCQkJCQkJZWxzZSBpZihyZWZlcnJlci5pbmNsdWRlcygnc2lsdmVyJykpDQoJCQkJCQkJew0KCQkJCQkJCQlyZXR1cm4gJzxjZW50ZXI+PGJyPjxkaXYgc3R5bGU9InRyYW5zZm9ybTp0cmFuc2xhdGUoJysnLTUwJysncHgsJyt5KydweCk7IHdpZHRoPTcwJTsgei1pbmRleDogMTAxOyB0ZXh0LWFsaWduOnJpZ2h0Oz48Zm9udCBzdHlsZT0iZm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtZmFtaWx5OkFyaWFsO2NvbG9yOiMwMTAxMDE7Zm9udC1zaXplOjIwcHg7Ij48YSBocmVmPSJodHRwczovL3NpbHZlcmdhbWVzLmNvbSIgdGFyZ2V0PSJfYmxhbmsiPlNpbHZlciBHYW1lczwvYT48L2ZvbnQ+PGJyPjwvZGl2PjwvY2VudGVyPic7DQoJCQkJCQkJfQ0KCQkJCQkJCWVsc2UgaWYocmVmZXJyZXIgPT0gJycpDQoJCQkJCQkJew0KCQkJCQkJCQlyZXR1cm4gJzxjZW50ZXI+PGJyPjxkaXYgc3R5bGU9InRyYW5zZm9ybTp0cmFuc2xhdGUoJysnLTUwJysncHgsJyt5KydweCk7IHdpZHRoPTcwJTsgei1pbmRleDogMTAxOyB0ZXh0LWFsaWduOnJpZ2h0Oz48Zm9udCBzdHlsZT0iZm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtZmFtaWx5OkFyaWFsO2NvbG9yOiMwMTAxMDE7Zm9udC1zaXplOjIwcHg7Ij48YSBocmVmPSJodHRwczovL2ZyZWVnYW1lcy5pby9nYW1lL3dyZXN0bGUtYnJvcyIgdGFyZ2V0PSJfYmxhbmsiPldyZXN0bGUgQnJvcyBhdCBGcmVlZ2FtZXMuaW88L2E+PGJyLz48YSBocmVmPSJodHRwczovL2NyYXp5Z2FtZXMuY29tIiB0YXJnZXQ9Il9ibGFuayI+Q3JhenkgR2FtZXM8L2E+PC9mb250Pjxicj48L2Rpdj48L2NlbnRlcj4nOw0KCQkJCQkJCX0NCgkJCQkJCQllbHNlDQoJCQkJCQkJew0KCQkJCQkJCQlyZXR1cm4gJzxjZW50ZXI+PGJyPjxkaXYgc3R5bGU9InRyYW5zZm9ybTp0cmFuc2xhdGUoJysnLTUwJysncHgsJyt5KydweCk7IHdpZHRoPTcwJTsgei1pbmRleDogMTAxOyB0ZXh0LWFsaWduOnJpZ2h0Oz48Zm9udCBzdHlsZT0iZm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtZmFtaWx5OkFyaWFsO2NvbG9yOiMwMTAxMDE7Zm9udC1zaXplOjIwcHg7Ij48YSBocmVmPSJodHRwczovL2ZyZWVnYW1lcy5pby9nYW1lL3dyZXN0bGUtYnJvcyIgdGFyZ2V0PSJfYmxhbmsiPldyZXN0bGUgQnJvcyBhdCBGcmVlZ2FtZXMuaW88L2E+PC9mb250Pjxicj48L2Rpdj48L2NlbnRlcj4nOw0KCQkJCQkJCX0NCgkJCQkJCQlyZXR1cm4gIiI7DQoJCQkJCQl9DQoJCQkJCQlkb2N1bWVudC53cml0ZShnZXRQYXJ0bmVyKDApKTsqLw0KCSAgICAgICAgPC9zY3JpcHQ+DQoNCgkgICAgICA8L2Rpdj4NCgkgICAgICA8YnIgLz4NCgkgICAgICA8YnIgLz4NCg0KCSAgICAgIDwhLS0gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFydG5lciBkZWZhdWx0c2hvdyBoaWRlY3JhenlnYW1lcyI+DQogICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vaW9nYW1lcy5zcGFjZS8iIHRhcmdldD0iX2JsYW5rIj5Nb3JlIElPIEdhbWVzPC9hPg0KICAgICAgICAgICAgICAgIDwvZGl2PiAtLT4NCgkgICAgICA8IS0tICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhcnRuZXIgIGRlZmF1bHRzaG93IGhpZGVjcmF6eWdhbWVzIj4NCiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9zaWx2ZXJnYW1lcy5jb20vIiB0YXJnZXQ9Il9ibGFuayI+U2lsdmVyIEdhbWVzPC9hPg0KICAgICAgICAgICAgICAgIDwvZGl2PiAtLT4NCgkgICAgPC9kaXY+DQoJICA8L2Rpdj4NCgkgIDxkaXYgY2xhc3M9InNlY3Rpb24iPg0KCSAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogcm93OyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbjogMTBweDsgcGFkZGluZzogMnB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsiPg0KCSAgICAgIDxkaXYgY2xhc3M9InBhcnRuZXIiPg0KCSAgICAgIDwvZGl2Pg0KDQoJICAgIDwvZGl2Pg0KCSAgPC9kaXY+DQoNCgkgIDwvZGl2Pg0KCSAgPHNjcmlwdD4NCgkgICAgdmFyIGxhc3RSZWZyZXNoID0gMDsNCg0KCSAgICBmdW5jdGlvbiBTaG93QWQxKGZvcmNlYWlwID0gZmFsc2UpIHsNCgkgICAgICBjb25zb2xlLmxvZygnU2hvd0FkMScpOw0KCSAgICAgIExvYWRWaWRlbygpOw0KCSAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIHZpZGVvIGFkJyk7DQoJICAgICAgaWYgKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsNCgkgICAgICAgIHJldHVybjsNCgkgICAgICB9DQoNCgkgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ID09PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgdmFyIGwgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thcmF0ZWJyb3MtaW9fMTYweDYwMCcpOw0KCSAgICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuOw0KCSAgICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJyc7DQoJICAgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoNCgkgICAgICAgIGwgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thcmF0ZWJyb3MtaW9fMTYweDYwMCcpOw0KCSAgICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuOw0KCSAgICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJyc7DQoJICAgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoJICAgICAgfQ0KDQoNCgkgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJyAmJiBmb3JjZWFpcCA9PSBmYWxzZSkgew0KCSAgICAgICAgY29uc29sZS5sb2coJ01TIFRvd2VyJyk7DQoJICAgICAgICAkbXNzdGFydC5zaG93RGlzcGxheUFkc0FzeW5jKCdyaWdodDoxNjB4NjAwJykudGhlbihyZXNwb25zZSA9PiB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCcxNjB4MTAwIHJlcXVlc3RlZC4nKQ0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9zaG93bicpOw0KCSAgICAgICAgfSkuY2F0Y2godGhlRXJyb3IgPT4gew0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9ub2ZpbGwnKTsNCgkgICAgICAgICAgU2hvd0FkMSh0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgICAgJG1zc3RhcnQuc2hvd0Rpc3BsYXlBZHNBc3luYygnbGVmdDoxNjB4NjAwJykudGhlbihyZXNwb25zZSA9PiB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCcxNjB4MTAwIHJlcXVlc3RlZC4nKQ0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9zaG93bicpOw0KCSAgICAgICAgfSkuY2F0Y2godGhlRXJyb3IgPT4gew0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9ub2ZpbGwnKTsNCgkgICAgICAgICAgU2hvd0FkMSh0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOw0KCSAgICAgICAgdmFyIG1zID0gZC5nZXRUaW1lKCk7DQoJICAgICAgICBpZiAobXMgLSBsYXN0UmVmcmVzaCA+IDEwMDAwKSB7DQoJICAgICAgICAgIHdpbmRvdy5DcmF6eUdhbWVzLlNESy5iYW5uZXIucmVxdWVzdFJlc3BvbnNpdmVCYW5uZXIoWyJrYXJhdGVicm9zLWlvXzE2MHg2MDAiXSk7DQoJICAgICAgICAgIGxhc3RSZWZyZXNoID0gbXM7DQoJICAgICAgICB9DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWlwRGlzcGxheVRhZyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIGFpcERpc3BsYXlUYWcucmVmcmVzaCgna2FyYXRlYnJvcy1pb18xNjB4NjAwJyk7DQoJICAgICAgICBhaXBEaXNwbGF5VGFnLnJlZnJlc2goJ2thcmF0ZWJyb3MtaW9fMTYweDYwMF8yJyk7DQoNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYWlwX2Jhbm5lcl9yZXF1ZXN0ZWQnKTsNCgkgICAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnKSBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgfSBlbHNlIHsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYmFubmVyX2FkYmxvY2tlZCcpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIHZhciBsYXN0UmVmcmVzaDYgPSAwOw0KDQoJICAgIGZ1bmN0aW9uIFNob3dBZDYoZm9yY2VhaXAgPSBmYWxzZSkgew0KCSAgICAgIGNvbnNvbGUubG9nKCdTaG93QWQ2Jyk7DQoNCgkgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMjAwKSByZXR1cm47DQoNCgkgICAgICBpZiAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KCSAgICAgICAgcmV0dXJuOw0KCSAgICAgIH0NCgkgICAgICB2YXIgbCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2FyYXRlYnJvcy1pb18zMDB4MjUwJyk7DQoJICAgICAgaWYgKGwgPT0gbnVsbCkgew0KCSAgICAgICAgcmV0dXJuOw0KCSAgICAgIH0NCgkgICAgICBsLnN0eWxlLmRpc3BsYXkgPSAnJzsNCgkgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoNCgkgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJyAmJiBmb3JjZWFpcCA9PSBmYWxzZSkgew0KCSAgICAgICAgY29uc29sZS5sb2coIm1zIHN0YXJ0IHNob3dhZDYiKTsNCgkgICAgICAgICRtc3N0YXJ0LnNob3dEaXNwbGF5QWRzQXN5bmMoJ3JpZ2h0OjMwMHgyNTAnKS50aGVuKHJlc3BvbnNlID0+IHsNCgkgICAgICAgICAgY29uc29sZS5sb2coJzMwMHgyNTAgcmVxdWVzdGVkLicpDQoJICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfYmFubmVyX3Nob3duJyk7DQoJICAgICAgICB9KS5jYXRjaCh0aGVFcnJvciA9PiB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCJzaG93YWQ2IG5vZmlsbCIpOw0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9ub2ZpbGwnKTsNCgkgICAgICAgICAgU2hvd0FkNih0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOw0KCSAgICAgICAgdmFyIG1zID0gZC5nZXRUaW1lKCk7DQoJICAgICAgICBpZiAobXMgLSBsYXN0UmVmcmVzaDYgPiAxMDAwMCkgew0KCSAgICAgICAgICAvL2huZGxlZCBieSB0aGUgZmlyc3QgYmFubmVyIHJlcXVlc3QNCgkgICAgICAgICAgLy93aW5kb3cuQ3JhenlHYW1lcy5TREsucmVxdWVzdEJhbm5lcihbe2NvbnRhaW5lcklkOiAna2FyYXRlYnJvcy1pb18zMDB4MjUwJyxzaXplOiAnMzAweDI1MCcsfV0pOw0KCSAgICAgICAgICAvL3dpbmRvdy5DcmF6eUdhbWVzLlNESy5yZXF1ZXN0UmVzcG9uc2l2ZUJhbm5lcihbImthcmF0ZWJyb3MtaW9fMzAweDI1MCJdKTsNCgkgICAgICAgICAgbGFzdFJlZnJlc2g2ID0gbXM7DQoJICAgICAgICB9DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWlwRGlzcGxheVRhZyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIGFpcERpc3BsYXlUYWcucmVmcmVzaCgna2FyYXRlYnJvcy1pb18zMDB4MjUwJyk7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJykgU2VuZEV2ZW50KCdldmVudCcsICdtc19haXBfYmFubmVyX3JlcXVlc3RlZCcpOw0KCSAgICAgIH0gZWxzZSB7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2Jhbm5lcl9hZGJsb2NrZWQnKTsNCgkgICAgICB9DQoJICAgIH0NCg0KCSAgICB2YXIgbGFzdFJlZnJlc2gyID0gMDsNCg0KCSAgICBmdW5jdGlvbiBTaG93QWQyKGZvcmNlYWlwID0gZmFsc2UpIHsNCgkgICAgICBjb25zb2xlLmxvZygnU2hvd0FkMicpOw0KDQoJICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgMTIwMCkgcmV0dXJuOw0KDQoJICAgICAgaWYgKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsNCgkgICAgICAgIHJldHVybjsNCgkgICAgICB9DQoJICAgICAgdmFyIGwgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thcmF0ZWJyb3MtaW9fMzAweDI1MF8yJyk7DQoJICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuOw0KCSAgICAgIGwuc3R5bGUuZGlzcGxheSA9ICcnOw0KCSAgICAgIGwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsNCg0KCSAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnICYmIGZvcmNlYWlwID09IGZhbHNlKSB7DQoJICAgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsNCgkgICAgICAgICRtc3N0YXJ0LnNob3dEaXNwbGF5QWRzQXN5bmMoJ2xlZnQ6MzAweDI1MCcpLnRoZW4ocmVzcG9uc2UgPT4gew0KCSAgICAgICAgICBjb25zb2xlLmxvZygnbGVmdCAzMDB4MjUwIHJlcXVlc3RlZC4nKQ0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9zaG93bicpOw0KCSAgICAgICAgfSkuY2F0Y2godGhlRXJyb3IgPT4gew0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9ub2ZpbGwnKTsNCgkgICAgICAgICAgU2hvd0FkMih0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOw0KCSAgICAgICAgdmFyIG1zID0gZC5nZXRUaW1lKCk7DQoJICAgICAgICBpZiAobXMgLSBsYXN0UmVmcmVzaDIgPiAxMDAwMCkgew0KCSAgICAgICAgICAvL2huZGxlZCBieSB0aGUgZmlyc3QgYmFubmVyIHJlcXVlc3QNCgkgICAgICAgICAgLy93aW5kb3cuQ3JhenlHYW1lcy5TREsucmVxdWVzdEJhbm5lcihbe2NvbnRhaW5lcklkOiAna2FyYXRlYnJvcy1pb18zMDB4MjUwXzInLHNpemU6ICczMDB4MjUwJyx9XSk7DQoJICAgICAgICAgIHdpbmRvdy5DcmF6eUdhbWVzLlNESy5iYW5uZXIucmVxdWVzdFJlc3BvbnNpdmVCYW5uZXIoWyJrYXJhdGVicm9zLWlvXzMwMHgyNTAiLCAia2FyYXRlYnJvcy1pb18zMDB4MjUwXzIiXSk7DQoNCgkgICAgICAgICAgbGFzdFJlZnJlc2gyID0gbXM7DQoJICAgICAgICB9DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWlwRGlzcGxheVRhZyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIGFpcERpc3BsYXlUYWcucmVmcmVzaCgna2FyYXRlYnJvcy1pb18zMDB4MjUwXzInKTsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYWlwX2Jhbm5lcl9yZXF1ZXN0ZWQnKTsNCgkgICAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnKSBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgfSBlbHNlIHsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYmFubmVyX2FkYmxvY2tlZCcpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIGZ1bmN0aW9uIFNob3dBZDMoZm9yY2VhaXAgPSBmYWxzZSkgew0KCSAgICAgIGNvbnNvbGUubG9nKCdTaG93QWQzJyk7DQoNCgkgICAgICBpZiAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KCSAgICAgICAgcmV0dXJuOw0KCSAgICAgIH0NCgkgICAgICB2YXIgbCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2FyYXRlYnJvcy1pb183Mjh4OTAnKTsNCgkgICAgICBpZiAobCA9PSBudWxsKSByZXR1cm47DQoJICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJyc7DQoJICAgICAgbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KCSAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnICYmIGZvcmNlYWlwID09IGZhbHNlKSB7DQoJICAgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsNCgkgICAgICAgICRtc3N0YXJ0LnNob3dEaXNwbGF5QWRzQXN5bmMoJ2JvdHRvbTo3Mjh4OTAnKS50aGVuKHJlc3BvbnNlID0+IHsNCgkgICAgICAgICAgY29uc29sZS5sb2coJ2JvdHRvbTo3Mjh4OTAgcmVxdWVzdGVkLicpDQoJICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfYmFubmVyX3Nob3duJyk7DQoJICAgICAgICB9KS5jYXRjaCh0aGVFcnJvciA9PiB7DQoJICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfYmFubmVyX25vZmlsbCcpOw0KCSAgICAgICAgICBTaG93QWQzKHRydWUpOw0KCSAgICAgICAgfSk7DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93LkNyYXp5R2FtZXMgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICB3aW5kb3cuQ3JhenlHYW1lcy5TREsuYmFubmVyLnJlcXVlc3RSZXNwb25zaXZlQmFubmVyKFsia2FyYXRlYnJvcy1pb183Mjh4OTAiXSk7DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWlwRGlzcGxheVRhZyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIGFpcERpc3BsYXlUYWcucmVmcmVzaCgna2FyYXRlYnJvcy1pb183Mjh4OTAnKTsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYWlwX2Jhbm5lcl9yZXF1ZXN0ZWQnKTsNCgkgICAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnKSBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgfSBlbHNlIHsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYmFubmVyX2FkYmxvY2tlZCcpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIGZ1bmN0aW9uIFNob3dBZDQoZm9yY2VhaXAgPSBmYWxzZSkgew0KCSAgICAgIGNvbnNvbGUubG9nKCdTaG93QWQ0Jyk7DQoNCgkgICAgICBpZiAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KCSAgICAgICAgcmV0dXJuOw0KCSAgICAgIH0NCgkgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCAxMjAwKSByZXR1cm47DQoJICAgICAgdmFyIGwgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thcmF0ZWJyb3MtaW9fcGxheWVyXzMwMHg2MDAnKTsNCgkgICAgICBpZiAobCA9PSBudWxsKSByZXR1cm47DQoJICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJyc7DQoJICAgICAgbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KDQoJICAgICAgaWYgKHR5cGVvZiAkbXNzdGFydCAhPT0gJ3VuZGVmaW5lZCcgJiYgZm9yY2VhaXAgPT0gZmFsc2UpIHsNCgkgICAgICAgIGwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsNCgkgICAgICAgICRtc3N0YXJ0LnNob3dEaXNwbGF5QWRzQXN5bmMoJ2JvdHRvbTo3Mjh4OTAnKS50aGVuKHJlc3BvbnNlID0+IHsNCgkgICAgICAgICAgY29uc29sZS5sb2coJ2JvdHRvbTo3Mjh4OTAgcmVxdWVzdGVkLicpDQoJICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfYmFubmVyX3Nob3duJyk7DQoJICAgICAgICB9KS5jYXRjaCh0aGVFcnJvciA9PiB7DQoJICAgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfYmFubmVyX25vZmlsbCcpOw0KCSAgICAgICAgICBTaG93QWQ0KHRydWUpOw0KCSAgICAgICAgfSk7DQoJICAgICAgfQ0KCSAgICAgIGlmICh0eXBlb2Ygd2luZG93LkNyYXp5R2FtZXMgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICB3aW5kb3cuQ3JhenlHYW1lcy5TREsuYmFubmVyLnJlcXVlc3RSZXNwb25zaXZlQmFubmVyKFsia2FyYXRlYnJvcy1pb19wbGF5ZXJfMzAweDYwMCJdKTsNCgkgICAgICAgIC8vd2luZG93LkNyYXp5R2FtZXMuU0RLLnJlcXVlc3RCYW5uZXIoW3tjb250YWluZXJJZDogJ2thcmF0ZWJyb3MtaW9fcGxheWVyXzMwMHg2MDAnLHNpemU6ICczMDB4NjAwJyx9XSk7DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWlwRGlzcGxheVRhZyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIGFpcERpc3BsYXlUYWcucmVmcmVzaCgna2FyYXRlYnJvcy1pb19wbGF5ZXJfMzAweDYwMCcpOw0KCSAgICAgICAgU2VuZEV2ZW50KCdldmVudCcsICdhaXBfYmFubmVyX3JlcXVlc3RlZCcpOw0KCSAgICAgICAgaWYgKHR5cGVvZiAkbXNzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIFNlbmRFdmVudCgnZXZlbnQnLCAnbXNfYWlwX2Jhbm5lcl9yZXF1ZXN0ZWQnKTsNCgkgICAgICB9IGVsc2Ugew0KCSAgICAgICAgU2VuZEV2ZW50KCdldmVudCcsICdiYW5uZXJfYWRibG9ja2VkJyk7DQoJICAgICAgfQ0KCSAgICB9DQoNCgkgICAgZnVuY3Rpb24gU2hvd0FkNyhmb3JjZWFpcCA9IGZhbHNlKSB7DQoJICAgICAgY29uc29sZS5sb2coJ1Nob3dBZDcnKTsNCg0KCSAgICAgIGlmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7DQoJICAgICAgICByZXR1cm47DQoJICAgICAgfQ0KCSAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDEyMDApIHJldHVybjsNCgkgICAgICB2YXIgbCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2FyYXRlYnJvcy1pb18zMDB4NjAwX20nKTsNCgkgICAgICBpZiAobCA9PSBudWxsKSByZXR1cm47DQoJICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJyc7DQoJICAgICAgbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KCSAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnICYmIGZvcmNlYWlwID09IGZhbHNlKSB7DQoJICAgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoJICAgICAgICAkbXNzdGFydC5zaG93RGlzcGxheUFkc0FzeW5jKCdyaWdodDozMDB4NjAwJykudGhlbihyZXNwb25zZSA9PiB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCdyaWdodDozMDB4NjAwIHJlcXVlc3RlZC4nKQ0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9zaG93bicpOw0KCSAgICAgICAgfSkuY2F0Y2godGhlRXJyb3IgPT4gew0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9ub2ZpbGwnKTsNCgkgICAgICAgICAgU2hvd0FkNyh0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgd2luZG93LkNyYXp5R2FtZXMuU0RLLmJhbm5lci5yZXF1ZXN0UmVzcG9uc2l2ZUJhbm5lcihbImthcmF0ZWJyb3MtaW9fcGxheWVyXzMwMHg2MDAiXSk7DQoJICAgICAgICAvL3dpbmRvdy5DcmF6eUdhbWVzLlNESy5yZXF1ZXN0QmFubmVyKFt7Y29udGFpbmVySWQ6ICdrYXJhdGVicm9zLWlvX3BsYXllcl8zMDB4NjAwJyxzaXplOiAnMzAweDYwMCcsfV0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFpcERpc3BsYXlUYWcgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICBhaXBEaXNwbGF5VGFnLnJlZnJlc2goJ2thcmF0ZWJyb3MtaW9fMzAweDYwMF9tJyk7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJykgU2VuZEV2ZW50KCdldmVudCcsICdtc19haXBfYmFubmVyX3JlcXVlc3RlZCcpOw0KCSAgICAgIH0gZWxzZSB7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2Jhbm5lcl9hZGJsb2NrZWQnKTsNCgkgICAgICB9DQoJICAgIH0NCg0KCSAgICBmdW5jdGlvbiBTaG93QWQ4KGZvcmNlYWlwID0gZmFsc2UpIHsNCgkgICAgICBjb25zb2xlLmxvZygnU2hvd0FkOCcpOw0KDQoJICAgICAgaWYgKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsNCgkgICAgICAgIHJldHVybjsNCgkgICAgICB9DQoJICAgICAgdmFyIGwgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thcmF0ZWJyb3MtaW9fNzI4eDkwX20nKTsNCgkgICAgICBpZiAobCA9PSBudWxsKSByZXR1cm47DQoJICAgICAgbC5zdHlsZS5kaXNwbGF5ID0gJyc7DQoJICAgICAgbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KCSAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnICYmIGZvcmNlYWlwID09IGZhbHNlKSB7DQoJICAgICAgICBsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7DQoJICAgICAgICAkbXNzdGFydC5zaG93RGlzcGxheUFkc0FzeW5jKCdib3R0b206NzI4eDkwJykudGhlbihyZXNwb25zZSA9PiB7DQoJICAgICAgICAgIGNvbnNvbGUubG9nKCdib3R0b206NzI4eDkwIHJlcXVlc3RlZC4nKQ0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9zaG93bicpOw0KCSAgICAgICAgfSkuY2F0Y2godGhlRXJyb3IgPT4gew0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9ub2ZpbGwnKTsNCgkgICAgICAgICAgU2hvd0FkOCh0cnVlKTsNCgkgICAgICAgIH0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgd2luZG93LkNyYXp5R2FtZXMuU0RLLmJhbm5lci5yZXF1ZXN0UmVzcG9uc2l2ZUJhbm5lcihbImthcmF0ZWJyb3MtaW9fNzI4eDkwIl0pOw0KCSAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFpcERpc3BsYXlUYWcgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICBhaXBEaXNwbGF5VGFnLnJlZnJlc2goJ2thcmF0ZWJyb3MtaW9fNzI4eDkwX20nKTsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYWlwX2Jhbm5lcl9yZXF1ZXN0ZWQnKTsNCgkgICAgICAgIGlmICh0eXBlb2YgJG1zc3RhcnQgIT09ICd1bmRlZmluZWQnKSBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgfSBlbHNlIHsNCgkgICAgICAgIFNlbmRFdmVudCgnZXZlbnQnLCAnYmFubmVyX2FkYmxvY2tlZCcpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIGZ1bmN0aW9uIFNob3dBZDkoZm9yY2VhaXAgPSBmYWxzZSkgew0KCSAgICAgIGNvbnNvbGUubG9nKCdTaG93QWQ5Jyk7DQoNCgkgICAgICBpZiAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KCSAgICAgICAgcmV0dXJuOw0KCSAgICAgIH0NCgkgICAgICB2YXIgbCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2FyYXRlYnJvcy1pb185NzB4MjUwJyk7DQoJICAgICAgaWYgKGwgPT0gbnVsbCkgcmV0dXJuOw0KCSAgICAgIGwuc3R5bGUuZGlzcGxheSA9ICcnOw0KCSAgICAgIGwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsNCgkgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJyAmJiBmb3JjZWFpcCA9PSBmYWxzZSkgew0KCSAgICAgICAgbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOw0KCSAgICAgICAgJG1zc3RhcnQuc2hvd0Rpc3BsYXlBZHNBc3luYygnYm90dG9tOjk3MHgyNTAnKS50aGVuKHJlc3BvbnNlID0+IHsNCgkgICAgICAgICAgY29uc29sZS5sb2coJ2JvdHRvbTo5NzB4MjUwIHJlcXVlc3RlZC4nKQ0KCSAgICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ21zX2Jhbm5lcl9zaG93bicpOw0KCSAgICAgICAgfSkuY2F0Y2godGhlRXJyb3IgPT4gew0KCSAgICAgICAgICBjb25zb2xlLmxvZygnYm90dG9tOjk3MHgyNTAgbm9maWxsJykNCgkgICAgICAgICAgU2VuZEV2ZW50KCdldmVudCcsICdtc19iYW5uZXJfbm9maWxsJyk7DQoJICAgICAgICAgIFNob3dBZDkodHJ1ZSk7DQoJICAgICAgICB9KTsNCgkgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cuQ3JhenlHYW1lcyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIHdpbmRvdy5DcmF6eUdhbWVzLlNESy5iYW5uZXIucmVxdWVzdFJlc3BvbnNpdmVCYW5uZXIoWyJrYXJhdGVicm9zLWlvXzk3MHgyNTAiXSk7DQoJICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWlwRGlzcGxheVRhZyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIGFpcERpc3BsYXlUYWcucmVmcmVzaCgna2FyYXRlYnJvcy1pb185NzB4MjUwJyk7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2FpcF9iYW5uZXJfcmVxdWVzdGVkJyk7DQoJICAgICAgICBpZiAodHlwZW9mICRtc3N0YXJ0ICE9PSAndW5kZWZpbmVkJykgU2VuZEV2ZW50KCdldmVudCcsICdtc19haXBfYmFubmVyX3JlcXVlc3RlZCcpOw0KCSAgICAgIH0gZWxzZSB7DQoJICAgICAgICBTZW5kRXZlbnQoJ2V2ZW50JywgJ2Jhbm5lcl9hZGJsb2NrZWQnKTsNCgkgICAgICB9DQoJICAgIH0NCg0KDQoNCg0KDQoNCgkgICAgZnVuY3Rpb24gcmlnaHQoc3RyLCBjaHIpIHsNCgkgICAgICByZXR1cm4gc3RyLnNsaWNlKHN0ci5sZW5ndGggLSBjaHIsIHN0ci5sZW5ndGgpOw0KCSAgICB9DQoNCgkgICAgZnVuY3Rpb24gU2V0Q0dJbnZpdGVMaW5rKCkgew0KCSAgICAgIGlmICh0eXBlb2Ygd2luZG93LkNyYXp5R2FtZXMgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjZ2xpbmsiKTsNCgkgICAgICAgIHZhciBhU3RyID0gbWV0YS52YWx1ZTsNCgkgICAgICAgIGFTdHIgPSByaWdodChhU3RyLCA4KTsNCgkgICAgICAgIHZhciBhQ0dMaW5rID0gd2luZG93LkNyYXp5R2FtZXMuU0RLLmdhbWUuaW52aXRlTGluayh7DQoJICAgICAgICAgIHJvb21JZDogYVN0cg0KCSAgICAgICAgfSk7DQoJICAgICAgICBtZXRhLnZhbHVlID0gYUNHTGluazsNCgkgICAgICAgIG1ldGEuc2VsZWN0DQoJICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnQ29weScpDQoJICAgICAgICBjb25zb2xlLmxvZygiQ09QSUVEIENHIFVSTCIpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIGZ1bmN0aW9uIFNob3dBZEJyZWFrKCkgew0KCSAgICAgIC8vY2hlY2sgaWYgdGhlIGFkc2xpYiBpcyBsb2FkZWQgY29ycmVjdGx5IG9yIGJsb2NrZWQgYnkgYWRibG9ja2VycyBldGMuDQoJICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3JhenlHYW1lcyAhPT0gJ3VuZGVmaW5lZCcpIHsNCgkgICAgICAgIE1haW4uRG9uZUludGVyc3RpdGlhbEFkKGZhbHNlKTsNCgkgICAgICAgIHJldHVybjsNCgkgICAgICB9DQoNCgkgICAgICBpZiAodHlwZW9mIGFkcGxheWVyID09PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgTWFpbi5Eb25lSW50ZXJzdGl0aWFsQWQodHJ1ZSk7DQoJICAgICAgICByZXR1cm47DQoJICAgICAgfQ0KCSAgICAgIGFpcHRhZy5jbWQucGxheWVyLnB1c2goZnVuY3Rpb24oKSB7DQoJICAgICAgICBhZHBsYXllci5zdGFydEFkQnJlYWsoKTsNCgkgICAgICB9KTsNCgkgICAgfQ0KDQoNCgkgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9wZW5mbC1jb250ZW50IikuYWRkRXZlbnRMaXN0ZW5lcigid2hlZWwiLCBkb1Njcm9sbCk7DQoJICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb3JlIikuYWRkRXZlbnRMaXN0ZW5lcigid2hlZWwiLCBkb1Njcm9sbCk7DQoNCgkgICAgZnVuY3Rpb24gZG9TY3JvbGwoZXZlbnQpIHsNCgkgICAgICB3aW5kb3cuc2Nyb2xsKDAsIHdpbmRvdy5zY3JvbGxZICsgZXZlbnQuZGVsdGFZKTsNCgkgICAgfQ0KDQoNCgkgICAgLypzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IA0KCSAgICAJdmFyIGwgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXJvbGwnKTsNCgkgICAgCWlmKGwgIT0gbnVsbCAmJiB0eXBlb2YgbC5zdHlsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbC5zdHlsZS52aXNpYmlsaXR5ICE9PSAndmlzaWJsZScpIHsNCgkgICAgCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlbmZsLWNvbnRlbnQnKS5mb2N1cygpOw0KCSAgICAJCWlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSUZyYW1lRWxlbWVudCkNCgkgICAgCQl7DQoJICAgIAkJCS8vZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCSAgICAJCQl3aW5kb3cuZm9jdXMoKTsNCgkgICAgCQkJd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuZmwtY29udGVudCcpLmZvY3VzKCk7DQoJICAgIAkJfQ0KCSAgICAJfQ0KCSAgICB9LCAxMDAwKTsqLw0KDQoNCgkgICAgLyoJCXNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgDQoJICAgIAkJCXZhciBsID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYXJhdGVicm9zLWlvXzE2MHg2MDAnKTsNCgkgICAgCQkJaWYobCAhPSBudWxsICYmIHR5cGVvZiBsLnN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiBsLnN0eWxlLnZpc2liaWxpdHkgPT0gJ3Zpc2libGUnKSB7DQoJICAgIAkJCQlTaG93QWQ1KCk7DQoJICAgIAkJCX0NCgkgICAgCQl9LCAzMDAwMCk7DQoNCgkgICAgCQlzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IA0KCSAgICAJCQl2YXIgbCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2FyYXRlYnJvcy1pb18xNjB4NjAwXzInKTsNCgkgICAgCQkJaWYobCAhPSBudWxsICYmIHR5cGVvZiBsLnN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiBsLnN0eWxlLnZpc2liaWxpdHkgPT0gJ3Zpc2libGUnKSB7DQoJICAgIAkJCQlTaG93QWQxKCk7DQoJICAgIAkJCX0NCgkgICAgCQl9LCAzMjAwMCk7Ki8NCg0KCSAgICB2YXIgc2lkID0gJ251c2I1amhvNjc4aGg5Zjg0cWxmaWczN3AwJw0KDQoJICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXR1cyhmcm9tRXZlbnQgPSBmYWxzZSkgew0KCSAgICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KCSAgICAgIHZhciBhU3RyID0gInJlY29yZHNlc3Npb24ucGhwP3M9IiArIHNpZDsNCgkgICAgICBpZiAoZnJvbUV2ZW50ID09IHRydWUpIGFTdHIgPSBhU3RyICsgIiZlPTEiDQoJICAgICAgcmVxLm9wZW4oIkdFVCIsIGFTdHIpOw0KCSAgICAgIHJlcS5zZW5kKCk7DQoJICAgIH0NCg0KCSAgICBmdW5jdGlvbiBTZW5kRXZlbnQodGhlRXZlbnQsIHRoZUFjdGlvbiwgdGhlUGFybXMgPSAnJykgew0KCSAgICAgIGlmICh0aGVQYXJtcyA9PSAnJykgew0KCSAgICAgICAgZ3RhZyh0aGVFdmVudCwgdGhlQWN0aW9uKTsNCgkgICAgICB9IGVsc2Ugew0KCSAgICAgICAgZ3RhZyh0aGVFdmVudCwgdGhlQWN0aW9uLCB0aGVQYXJtcyk7DQoJICAgICAgfQ0KCSAgICAgIHVwZGF0ZVN0YXR1cyh0cnVlKTsNCgkgICAgICAvL2NvbnNvbGUubG9nKCJTZW5kaW5nIGV2ZW50OiAiICsgdGhlRXZlbnQgKyAiLyIgKyB0aGVBY3Rpb24gKyAiLyIgKyB0aGVQYXJtcyk7DQoJICAgIH0NCgkgICAgLy9zZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgdXBkYXRlU3RhdHVzLCA0KjYwKjEwMDApOwkJCQ0KCSAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsNCgkgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7DQoJICAgIH0sIDIwMDApOw0KCSAgICB1cGRhdGVTdGF0dXModHJ1ZSk7DQoNCgkgICAgLy8JCXNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgDQoJICAgIC8vCQkJY29uc29sZS5sb2coImFjdGl2ZSBlbGVtZW50OiIgKyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlkKTsNCgkgICAgLy8JCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlbmZsLWNvbnRlbnQnKS5mb2N1cygpOw0KCSAgICAvLwkJfSwgMTAwMCk7DQoNCgkgICAgLy9zZXRJbnRlcnZhbChDbGVhckFkcywgMjAwMCk7CQkNCg0KCSAgICBmdW5jdGlvbiBFbWFpbFNpZ251cCgpIHsNCgkgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ251cCIpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZWxldGVtZSIpKSByZXR1cm47DQoJICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7DQoJICAgICAgaWZyYW1lLnNyYyA9ICJodHRwczovL2JsdWV3aXphcmQuY29tL3N1YnNjcmliZS10by1iYnJvcy8iOw0KDQoJICAgICAgLy8JCQlpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoJICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gIjU1MHB4IjsNCgkgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gIiIgKyB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDAgKyAicHgiOw0KCSAgICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7DQoJICAgICAgaWZyYW1lLnN0eWxlLnRvcCA9ICI1MHB4IjsNCgkgICAgICBpZnJhbWUuc3R5bGUubGVmdCA9ICI1MCUiOw0KCSAgICAgIGlmcmFtZS5zdHlsZVsibWFyZ2luLWxlZnQiXSA9ICItMjI1cHgiOw0KCSAgICAgIC8vaWZyYW1lLnN0eWxlWyJtYXJnaW4tcmlnaHQiXSA9ICItMjc1cHgiOw0KCSAgICAgIGlmcmFtZS5zdHlsZVsibWF4LXdpZHRoIl0gPSAiMTAwJSI7DQoJICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgiaWQiLCAic2lnbnVwIik7DQoNCgkgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7DQoJICAgIH0NCg0KCSAgICBmdW5jdGlvbiBHYW1lUGxheVN0YXJ0KCkgew0KCSAgICAgIGlmICh0eXBlb2Ygd2luZG93LkNyYXp5R2FtZXMgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICBjb25zb2xlLmxvZygiR2FtZVBsYXlTdGFydCIpOw0KCSAgICAgICAgd2luZG93LkNyYXp5R2FtZXMuU0RLLmdhbWUuZ2FtZXBsYXlTdGFydCgpOw0KCSAgICAgIH0NCgkgICAgfQ0KDQoJICAgIGZ1bmN0aW9uIEdhbWVQbGF5U3RvcCgpIHsNCgkgICAgICBpZiAodHlwZW9mIHdpbmRvdy5DcmF6eUdhbWVzICE9PSAndW5kZWZpbmVkJykgew0KCSAgICAgICAgY29uc29sZS5sb2coIkdhbWVQbGF5U3RvcCIpOw0KCSAgICAgICAgd2luZG93LkNyYXp5R2FtZXMuU0RLLmdhbWUuZ2FtZXBsYXlTdG9wKCk7DQoJICAgICAgfQ0KCSAgICB9DQoNCgkgICAgZnVuY3Rpb24gSGFwcHlUaW1lKCkgew0KCSAgICAgIGlmICh0eXBlb2Ygd2luZG93LkNyYXp5R2FtZXMgIT09ICd1bmRlZmluZWQnKSB7DQoJICAgICAgICBjb25zb2xlLmxvZygiaGFwcHl0aW1lIik7DQoJICAgICAgICB3aW5kb3cuQ3JhenlHYW1lcy5TREsuZ2FtZS5oYXBweXRpbWUoKTsNCgkgICAgICB9DQoJICAgIH0NCgkgIDwvc2NyaXB0Pg0KDQoJPC9ib2R5Pg0KDQoJPC9odG1sPg==";
