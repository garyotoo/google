window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KDQoNCjxodG1sIGxhbmc9ImVuLXVzIj4NCjxoZWFkPg0KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ii8+DQogICAgPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiLz4NCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIvPg0KICAgIDx0aXRsZT5nb29nbGUuY29tPC90aXRsZT4NCiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvcm9ib2JzQG1haW4vc3R5bGUuY3NzIi8+DQogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2J1YmJscy9yb2JvYnNAbWFpbi9XZWIlMjBBdWRpbyUyMFBsdWdpbi9ob3dsZXIubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL3JvYm9ic0BiNjg1ZjUzMjU5MDQ0OWU4ZWQ5ZmE1MTU4ZmZkMzdmYTdkN2MxYTBkL1dlYiUyMEF1ZGlvJTIwUGx1Z2luL1dlYkF1ZGlvLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgICAgIHdpbmRvdy5TREtfT1BUSU9OUyA9IHsNCiAgICAgICAgICAgIGdhbWVJZDogImpwMTEybzNvNGh6Z3JuYzd6YWV3amtyZmsyODJwdWw4IiwNCiAgICAgICAgICAgIG9uRXZlbnQ6IGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChhLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiU0RLX0dBTUVfUEFVU0UiOg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk95dW4gZHVyYWtsYXTEsWxkxLEsIHNlcyBrYXBhdMSxbMSxeW9yLi4uIik7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG15R2FtZUluc3RhbmNlICE9PSAndW5kZWZpbmVkJyAmJiBteUdhbWVJbnN0YW5jZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCdBdWRpb01hbmFnZXInLCAnTXV0ZUF1ZGlvJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiU0RLX0dBTUVfU1RBUlQiOg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlJla2xhbSBiaXR0aSwgb3l1biBkZXZhbSBlZGl5b3IuLi4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXlHYW1lSW5zdGFuY2UgIT09ICd1bmRlZmluZWQnICYmIG15R2FtZUluc3RhbmNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlHYW1lSW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ0F1ZGlvTWFuYWdlcicsICdVbm11dGVBdWRpbycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgIlNES19SRUFEWSI6DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU0RLIGhhesSxci4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgICAgKGZ1bmN0aW9uIChhLCBiLCBjKSB7DQogICAgICAgICAgICB2YXIgZCA9IGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYilbMF07DQogICAgICAgICAgICBhLmdldEVsZW1lbnRCeUlkKGMpIHx8IChhID0gYS5jcmVhdGVFbGVtZW50KGIpLCBhLmlkID0gYywgYS5zcmMgPSAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL3Rlc3RhbWFsYW1lL3NlZkBtYWluL3NlZGsuanMiLCBkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsIGQpKTsNCiAgICAgICAgfSkoZG9jdW1lbnQsICJzY3JpcHQiLCAiZ2FtZW1vbmV0aXplLXNkayIpOw0KICAgIDwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCiAgICAgICAgY2FudmFzOmZvY3VzIHsNCiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgaHRtbCwgYm9keSB7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsNCiAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICAgICAgICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICAgICAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYmEoMCwwLDAsMCk7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHkgY2xhc3M9ImRhcmsiPmINCiAgICA8ZGl2IGlkPSJ1bml0eS1jb250YWluZXIiIGNsYXNzPSJ1bml0eS1kZXNrdG9wIj4NCiAgICAgICAgPGNhbnZhcyBpZD0idW5pdHktY2FudmFzIiB0YWJpbmRleD0iLTEiPjwvY2FudmFzPg0KICAgIDwvZGl2Pg0KICAgIDxkaXYgaWQ9ImxvYWRpbmctY292ZXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCiAgICAgICAgPGRpdiBpZD0idW5pdHktbG9hZGluZy1iYXIiPg0KICAgICAgICAgICAgPGRpdiBpZD0idW5pdHktbG9nbyI+PGltZyBzcmM9IiIvPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0idW5pdHktcHJvZ3Jlc3MtYmFyLWVtcHR5IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1mdWxsIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3Bpbm5lciI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGNvbnN0IGhpZGVGdWxsU2NyZWVuQnV0dG9uID0gIiI7DQogICAgICAgIGNvbnN0IGJ1aWxkVXJsID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvcm9ib2JzQG1haW4vQnVpbGQvIjsNCg0KICAgICAgICBjb25zdCBkYXRhUGFydHMgPSBbDQogICAgICAgICAgICAiRmFtZUdhbWUuZGF0YS5nei5wYXJ0MDAwLmd6IiwNCiAgICAgICAgICAgICJGYW1lR2FtZS5kYXRhLmd6LnBhcnQwMDEuZ3oiLA0KICAgICAgICAgICAgIkZhbWVHYW1lLmRhdGEuZ3oucGFydDAwMi5neiINCiAgICAgICAgXS5tYXAocGFydCA9PiBidWlsZFVybCArICIvIiArIHBhcnQpOw0KDQogICAgICAgIGNvbnN0IHdhc21QYXJ0cyA9IFsNCiAgICAgICAgICAgICJGYW1lR2FtZS53YXNtLmd6LnBhcnQwMDAuZ3oiLA0KICAgICAgICAgICAgIkZhbWVHYW1lLndhc20uZ3oucGFydDAwMS5neiIsDQogICAgICAgICAgICAiRmFtZUdhbWUud2FzbS5nei5wYXJ0MDAyLmd6IiwNCiAgICAgICAgICAgICJGYW1lR2FtZS53YXNtLmd6LnBhcnQwMDMuZ3oiDQogICAgICAgIF0ubWFwKHBhcnQgPT4gYnVpbGRVcmwgKyAiLyIgKyBwYXJ0KTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjb21iaW5lUGFydHMocGFydHMpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVycyA9IGF3YWl0IFByb21pc2UuYWxsKA0KICAgICAgICAgICAgICAgICAgICBwYXJ0cy5tYXAocGFydCA9Pg0KICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2gocGFydCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCAke3BhcnR9YCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFNpemUgPSBidWZmZXJzLnJlZHVjZSgoc3VtLCBidWZmZXIpID0+IHN1bSArIGJ1ZmZlci5ieXRlTGVuZ3RoLCAwKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb21iaW5lZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxTaXplKTsNCiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkQXJyYXkuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlciksIG9mZnNldCk7DQogICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBidWZmZXIuYnl0ZUxlbmd0aDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb21iaW5lZEFycmF5XSwgeyB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUGFydCBiaXJsZcWfdGlybWUgaGF0YXPEsToiLCBlcnJvcik7DQogICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBjb25zdCBjb25maWcgPSB7DQogICAgICAgICAgICBkYXRhVXJsOiAiIiwNCiAgICAgICAgICAgIGZyYW1ld29ya1VybDogYnVpbGRVcmwgKyAiL0ZhbWVHYW1lLmZyYW1ld29yay5qcyIsDQogICAgICAgICAgICBjb2RlVXJsOiAiIiwNCiAgICAgICAgICAgIHN0cmVhbWluZ0Fzc2V0c1VybDogImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvcm9ib2JzQHRyZWUvbWFpbi9TdHJlYW1pbmdBc3NldHMiLA0KICAgICAgICAgICAgY29tcGFueU5hbWU6ICJEZWZhdWx0Q29tcGFueSIsDQogICAgICAgICAgICBwcm9kdWN0TmFtZTogIkhaIiwNCiAgICAgICAgICAgIHByb2R1Y3RWZXJzaW9uOiAiMC4xIg0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnN0IGxvYWRlclVybCA9IGJ1aWxkVXJsICsgIi9GYW1lR2FtZS5sb2FkZXIuanMiOw0KDQogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jb250YWluZXIiKTsNCiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWNhbnZhcyIpOw0KICAgICAgICBjb25zdCBsb2FkaW5nQ292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbG9hZGluZy1jb3ZlciIpOw0KICAgICAgICBjb25zdCBwcm9ncmVzc0JhckVtcHR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LXByb2dyZXNzLWJhci1lbXB0eSIpOw0KICAgICAgICBjb25zdCBwcm9ncmVzc0JhckZ1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwiKTsNCiAgICAgICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJyk7DQoNCiAgICAgICAgbGV0IGlzQWRTaG93biA9IGZhbHNlOw0KDQogICAgICAgIGZ1bmN0aW9uIHNob3dBZE9uQ2xpY2soKSB7DQogICAgICAgICAgICBpZiAoIWlzQWRTaG93biAmJiB0eXBlb2Ygc2RrICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc2RrLnNob3dCYW5uZXIgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgc2RrLnNob3dCYW5uZXIoKTsNCiAgICAgICAgICAgICAgICBpc0FkU2hvd24gPSB0cnVlOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJSZWtsYW0gw6dhxJ9yxLFsZMSxLiIpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlNESyB2ZXlhIHNob3dCYW5uZXIgdGFuxLFtbMSxIGRlxJ9pbC4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICJ1bml0eS1tb2JpbGUiOw0KICAgICAgICB9DQoNCiAgICAgICAgbG9hZGluZ0NvdmVyLnN0eWxlLmJhY2tncm91bmQgPSAidXJsKCdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvY2xhc3Nyb29tcy0xL29oYW5nYW5hbWFyYW5lc0BtYWluL2JhY2tncm91bmQuanBnJykgY2VudGVyIC8gY292ZXIiOw0KICAgICAgICBsb2FkaW5nQ292ZXIuc3R5bGUuZGlzcGxheSA9ICIiOw0KDQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKSk7DQoNCiAgICAgICAgZnVuY3Rpb24gRm9jdXNHYW1lKCkgew0KICAgICAgICAgICAgd2luZG93LmZvY3VzKCk7DQogICAgICAgICAgICBjYW52YXMuZm9jdXMoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIEZvY3VzR2FtZSk7DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgRm9jdXNHYW1lKTsNCg0KICAgICAgICBsZXQgU3RhcnRVbml0eUluc3RhbmNlOw0KICAgICAgICBsZXQgbXlHYW1lSW5zdGFuY2U7DQogICAgICAgIGxldCB5c2RrID0gbnVsbDsNCg0KICAgICAgICBsZXQgZW52aXJvbm1lbnREYXRhID0gew0KICAgICAgICAgICAgbGFuZ3VhZ2U6ICJlbiIsDQogICAgICAgICAgICBkb21haW46ICJkZWZhdWx0X2RvbWFpbiIsDQogICAgICAgICAgICBkZXZpY2VUeXBlOiAiZGVza3RvcCIsDQogICAgICAgICAgICBpc01vYmlsZTogZmFsc2UsDQogICAgICAgICAgICBpc0Rlc2t0b3A6IHRydWUsDQogICAgICAgICAgICBpc1RhYmxldDogZmFsc2UsDQogICAgICAgICAgICBpc1RWOiBmYWxzZSwNCiAgICAgICAgICAgIGFwcElEOiAiZGVmYXVsdF9hcHBfaWQiLA0KICAgICAgICAgICAgYnJvd3Nlckxhbmc6IG5hdmlnYXRvci5sYW5ndWFnZSB8fCAiZW4iLA0KICAgICAgICAgICAgcGF5bG9hZDogbnVsbCwNCiAgICAgICAgICAgIHByb21wdENhblNob3c6IGZhbHNlLA0KICAgICAgICAgICAgcmV2aWV3Q2FuU2hvdzogZmFsc2UsDQogICAgICAgICAgICBwbGF0Zm9ybTogbmF2aWdhdG9yLnBsYXRmb3JtLA0KICAgICAgICAgICAgYnJvd3NlcjogKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGxldCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50Ow0KICAgICAgICAgICAgICAgIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoIllhQnJvd3NlciIpKSByZXR1cm4gIllhbmRleCI7DQogICAgICAgICAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcygiT1BSIikgfHwgdXNlckFnZW50LmluY2x1ZGVzKCJPcGVyYSIpKSByZXR1cm4gIk9wZXJhIjsNCiAgICAgICAgICAgICAgICBpZiAodXNlckFnZW50LmluY2x1ZGVzKCJGaXJlZm94IikpIHJldHVybiAiRmlyZWZveCI7DQogICAgICAgICAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcygiTVNJRSIpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcygiVHJpZGVudCIpKSByZXR1cm4gIklFIjsNCiAgICAgICAgICAgICAgICBpZiAodXNlckFnZW50LmluY2x1ZGVzKCJFZGdlIikpIHJldHVybiAiRWRnZSI7DQogICAgICAgICAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcygiQ2hyb21lIikpIHJldHVybiAiQ2hyb21lIjsNCiAgICAgICAgICAgICAgICBpZiAodXNlckFnZW50LmluY2x1ZGVzKCJTYWZhcmkiKSkgcmV0dXJuICJTYWZhcmkiOw0KICAgICAgICAgICAgICAgIHJldHVybiAiT3RoZXIiOw0KICAgICAgICAgICAgfSkoKQ0KICAgICAgICB9Ow0KDQogICAgICAgIGxldCBjbG91ZFNhdmVzID0gJ25vRGF0YSc7DQogICAgICAgIGxldCBwYXltZW50c0RhdGEgPSAnbm9uZSc7DQogICAgICAgIGxldCBwbGF5ZXJEYXRhID0gJ25vRGF0YSc7DQogICAgICAgIGxldCBwbGF5ZXIgPSBudWxsOw0KICAgICAgICBsZXQgcGF5bWVudHMgPSBudWxsOw0KICAgICAgICBsZXQgaW5pdEdhbWUgPSBmYWxzZTsNCiAgICAgICAgbGV0IG5vd0Z1bGxBZE9wZW4gPSBmYWxzZTsNCg0KICAgICAgICBmdW5jdGlvbiBHZXRQYXltZW50cygpIHsgY29uc29sZS53YXJuKCJHZXRQYXltZW50cyBpcyBub3QgaW1wbGVtZW50ZWQiKTsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgibm9uZSIpOyB9DQogICAgICAgIGZ1bmN0aW9uIEJ1eVBheW1lbnRzKCkgeyBjb25zb2xlLndhcm4oIkdldFBheW1lbnRzIGlzIG5vdCBpbXBsZW1lbnRlZCIpOyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCJub25lIik7IH0NCiAgICAgICAgZnVuY3Rpb24gU2F2ZUNsb3VkKCkgeyBjb25zb2xlLndhcm4oIlNhdmVDbG91ZCBpcyBub3QgaW1wbGVtZW50ZWQiKTsgfQ0KICAgICAgICBmdW5jdGlvbiBMb2FkQ2xvdWQoKSB7IGNvbnNvbGUud2FybigiTG9hZENsb3VkIGlzIG5vdCBpbXBsZW1lbnRlZCIpOyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCJub0RhdGEiKTsgfQ0KICAgICAgICBmdW5jdGlvbiBJbml0UGxheWVyKCkgeyBjb25zb2xlLndhcm4oIkluaXRQbGF5ZXIgaXMgbm90IGltcGxlbWVudGVkIik7IHJldHVybiBQcm9taXNlLnJlc29sdmUoIm5vRGF0YSIpOyB9DQoNCiAgICAgICAgZnVuY3Rpb24gRnVsbEFkU2hvdygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKCFub3dGdWxsQWRPcGVuKSB7DQogICAgICAgICAgICAgICAgICAgIG5vd0Z1bGxBZE9wZW4gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdEdhbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCJZYW5kZXhHYW1lIiwgIk9wZW5GdWxsQWQiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vd0Z1bGxBZE9wZW4gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0R2FtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCJZYW5kZXhHYW1lIiwgIkNsb3NlRnVsbEFkIiwgInRydWUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIEZvY3VzR2FtZSgpOw0KICAgICAgICAgICAgICAgICAgICB9LCA1MDApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gUmV3YXJkZWRTaG93KHJld2FyZElkKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCJZYW5kZXhHYW1lIiwgIlJld2FyZFZpZGVvIiwgcmV3YXJkSWQpOw0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsb3NlUmV3YXJkZWRBZCgpIHsNCiAgICAgICAgICAgICAgICAgICAgbXlHYW1lSW5zdGFuY2UuU2VuZE1lc3NhZ2UoIllhbmRleEdhbWUiLCAiQ2xvc2VSZXdhcmRWaWRlbyIpOw0KICAgICAgICAgICAgICAgICAgICBGb2N1c0dhbWUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2xvc2VSZXdhcmRlZEFkKCk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge30NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIFN0aWNreUFkQWN0aXZpdHkoKSB7IGNvbnNvbGUud2FybigiU3RpY2t5QWRBY3Rpdml0eSBpcyBub3QgaW1wbGVtZW50ZWQiKTsgfQ0KICAgICAgICBmdW5jdGlvbiBSZXZpZXcoKSB7IGNvbnNvbGUud2FybigiUmV2aWV3IGlzIG5vdCBpbXBsZW1lbnRlZCIpOyB9DQogICAgICAgIGZ1bmN0aW9uIFByb21wdFNob3coKSB7IGNvbnNvbGUud2FybigiUHJvbXB0U2hvdyBpcyBub3QgaW1wbGVtZW50ZWQiKTsgfQ0KICAgICAgICBmdW5jdGlvbiBJbml0TGVhZGVyYm9hcmRzKCkgeyBjb25zb2xlLndhcm4oIkluaXRMZWFkZXJib2FyZHMgaXMgbm90IGltcGxlbWVudGVkIik7IH0NCiAgICAgICAgZnVuY3Rpb24gR2V0TGVhZGVyYm9hcmRTY29yZXMoKSB7IGNvbnNvbGUud2FybigiR2V0TGVhZGVyYm9hcmRTY29yZXMgaXMgbm90IGltcGxlbWVudGVkIik7IH0NCiAgICAgICAgZnVuY3Rpb24gU2V0TGVhZGVyYm9hcmRTY29yZXMoKSB7IGNvbnNvbGUud2FybigiU2V0TGVhZGVyYm9hcmRTY29yZXMgaXMgbm90IGltcGxlbWVudGVkIik7IH0NCiAgICAgICAgZnVuY3Rpb24gQ29uc3VtZVB1cmNoYXNlKCkgeyBjb25zb2xlLndhcm4oIkNvbnN1bWVQdXJjaGFzZSBpcyBub3QgaW1wbGVtZW50ZWQiKTsgfQ0KICAgICAgICBmdW5jdGlvbiBDb25zdW1lUHVyY2hhc2VzKCkgeyBjb25zb2xlLndhcm4oIkNvbnN1bWVQdXJjaGFzZXMgaXMgbm90IGltcGxlbWVudGVkIik7IH0NCg0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICAgICAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOw0KICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25maWcuZGF0YVVybCA9IGF3YWl0IGNvbWJpbmVQYXJ0cyhkYXRhUGFydHMpOw0KICAgICAgICAgICAgICAgICAgICBjb25maWcuY29kZVVybCA9IGF3YWl0IGNvbWJpbmVQYXJ0cyh3YXNtUGFydHMpOw0KICAgICAgICAgICAgICAgICAgICBTdGFydFVuaXR5SW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVVbml0eUluc3RhbmNlKGNhbnZhcywgY29uZmlnLCAocHJvZ3Jlc3MpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXJFbXB0eS5zdHlsZS5kaXNwbGF5ID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXJGdWxsLnN0eWxlLndpZHRoID0gYCR7MTAwICogcHJvZ3Jlc3N9JWA7DQogICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCh1bml0eUluc3RhbmNlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlHYW1lSW5zdGFuY2UgPSB1bml0eUluc3RhbmNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdDb3Zlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE95dW4gecO8a2xlbmRpxJ9pbmRlIHTEsWtsYW1hIG9sYXnEsW7EsSBla2xlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgc2hvd0FkT25DbGljayk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzaG93QWRPbkNsaWNrKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbG9iIFVSTCdsZXJpIHRlbWl6bGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGNvbmZpZy5kYXRhVXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGNvbmZpZy5jb2RlVXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChtZXNzYWdlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiVW5pdHkgecO8a2xlbWUgaGF0YXPEsToiLCBtZXNzYWdlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICBTdGFydFVuaXR5SW5zdGFuY2UoKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJQYXJ0IGJpcmxlxZ90aXJtZSBzxLFyYXPEsW5kYSBoYXRhOiIsIGVycm9yKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQmHFn2xhdG1hIHPEsXJhc8SxbmRhIGhhdGE6IiwgZXJyb3IpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gSW5pdEdhbWUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbml0IEdhbWUgU3VjY2VzcycpOw0KICAgICAgICAgICAgICAgIGluaXRHYW1lID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBpZiAobm93RnVsbEFkT3BlbiA9PT0gdHJ1ZSAmJiBteUdhbWVJbnN0YW5jZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCdZYW5kZXhHYW1lJywgJ09wZW5GdWxsQWQnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkluaXRHYW1lIHPEsXJhc8SxbmRhIGhhdGE6IiwgZXJyb3IpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInVuaGFuZGxlZHJlamVjdGlvbiIsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICBjb25zb2xlLndhcm4oIkhhdGEgZXMgZ2XDp2lsZGk6IiwgZXZlbnQucmVhc29uKTsNCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIH0pOw0KICAgIDwvc2NyaXB0Pg0KPC9ib2R5Pg0KPC9odG1sPg==";
