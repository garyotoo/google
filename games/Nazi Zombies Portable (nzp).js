window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KDQo8aHRtbCBsYW5nPSJlbi11cyI+DQo8aGVhZD4NCiAgICA8YmFzZSBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL3Vnc3NAbWFpbi9uenAtLyI+DQoNCjxoZWFkPg0KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4NCiAgICA8dGl0bGU+Tlo6IFBvcnRhYmxlPC90aXRsZT4NCiAgICA8bGluayByZWw9Imljb24iIGhyZWY9Im56cG9ydGFibGUuaWNvIj4NCiAgICA8c3R5bGU+DQogICAgICAgIGh0bWwsDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDsNCiAgICAgICAgICAgIGNvbG9yOiAjODA4MDgwOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmVtc2NyaXB0ZW4gew0KICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMDsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvOw0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgIH0NCg0KICAgICAgICBkaXYuZW1zY3JpcHRlbiB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogdGhlIGNhbnZhcyAqbXVzdCBub3QqIGhhdmUgYW55IGJvcmRlciBvciBwYWRkaW5nLCBvciBtb3VzZSBjb29yZHMgd2lsbCBiZSB3cm9uZyAqLw0KICAgICAgICBjYW52YXMuZW1zY3JpcHRlbiB7DQogICAgICAgICAgICBib3JkZXI6IDBweCBub25lOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCjwvaGVhZD4NCg0KPGJvZHkgb25kcm9wPSJnb3Rkcm9wKGV2ZW50KTsiIG9uZHJhZ292ZXI9ImV2ZW50LnByZXZlbnREZWZhdWx0KCkiPg0KICAgIDxkaXYgY2xhc3M9ImVtc2NyaXB0ZW4iIGlkPSJzdGF0dXMiPlBsZWFzZSBhbGxvdy91bmJsb2NrIG91ciBqYXZhc2NyaXB0IHRvIHBsYXkuPC9kaXY+DQogICAgPGRpdiBpZD0iZHJvcHpvbmUiIG9uZHJvcD0iZ290ZHJvcChldmVudCk7IiBvbmRyYWdvdmVyPSJldmVudC5wcmV2ZW50RGVmYXVsdCgpIiBoaWRkZW49MT5Ecm9wIFpvbmU8L2Rpdj4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iYmVnaW4oKSIgaWQ9ImJlZ2luIiBoaWRkZW49MT5DbGljayBUbyBCZWdpbiE8L2J1dHRvbj4NCiAgICA8ZGl2IGNsYXNzPSJlbXNjcmlwdGVuIj4NCiAgICAgICAgPHByb2dyZXNzIHZhbHVlPSIwIiBtYXg9IjEwMCIgaWQ9InByb2dyZXNzIiBoaWRkZW49MT48L3Byb2dyZXNzPg0KICAgIDwvZGl2Pg0KICAgIDxjYW52YXMgY2xhc3M9ImVtc2NyaXB0ZW4iIGlkPSJjYW52YXMiIG9uY29udGV4dG1lbnU9ImV2ZW50LnByZXZlbnREZWZhdWx0KCkiIGhpZGRlbj0xPjwvY2FudmFzPg0KICAgIDxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0Jz4NCiAgICAgICAgd2luZG93Lm1lcmdlZEJsb2JVcmxzID0ge307DQogICAgICAgIHdpbmRvdy5hc3NldHNSZWFkeSA9IGZhbHNlOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIG1lcmdlU3BsaXRGaWxlKGZpbGVVcmxCYXNlLCBudW1QYXJ0cyA9IDMpIHsNCiAgICAgICAgICAgIGNvbnN0IHBhcnRVcmxzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogbnVtUGFydHMgfSwgKF8sIGkpID0+IA0KICAgICAgICAgICAgICAgIGAke2ZpbGVVcmxCYXNlfS5wYXJ0JHtpICsgMX1gDQogICAgICAgICAgICApOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKA0KICAgICAgICAgICAgICAgICAgICBwYXJ0VXJscy5tYXAodXJsID0+IGZldGNoKHVybCkpDQogICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZXMuc29tZShyID0+ICFyLm9rKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGF3YWl0IFByb21pc2UuYWxsKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZXMubWFwKHIgPT4gci5hcnJheUJ1ZmZlcigpKQ0KICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjb21iaW5lZEJsb2IgPSBuZXcgQmxvYihwYXJ0cywgew0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbWJpbmVkQmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHByZXBhcmVHYW1lQXNzZXRzKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWREYXRhID0gYXdhaXQgbWVyZ2VTcGxpdEZpbGUoJ256cC9nYW1lLnBrMycsIDMpOw0KICAgICAgICAgICAgICAgIGlmIChtZXJnZWREYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIE1vZHVsZS5maWxlc1sibnpwL2dhbWUucGszIl0gPSBtZXJnZWREYXRhOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB3aW5kb3cuYXNzZXRzUmVhZHkgPSB0cnVlOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cuYXNzZXRzUmVhZHkgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gY29ubmVjdCB0byBjYW52YXMNCiAgICAgICAgdmFyIE1vZHVsZSA9IHsNCiAgICAgICAgICAgIGZpbGVzOiB7DQogICAgICAgICAgICAgICAgImRlZmF1bHQuZm1mIjogImRlZmF1bHQuZm1mIiwNCiAgICAgICAgICAgICAgICAibnpwL2dhbWUucGszIjogIm56cC9nYW1lLnBrMyIsDQogICAgICAgICAgICAgICAgIm56cC9wcm9ncy5wazMiOiAibnpwL3Byb2dzLnBrMyINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBwcmludDogZnVuY3Rpb24gKG1zZykgeyAvL3N0ZG91dC4uLg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcHJpbnRFcnI6IGZ1bmN0aW9uICh0ZXh0KSB7IC8vc3RkZXJyLi4uDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGV4dCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgY2FudmFzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyksIC8vZm9yIHdlYmdsIHRvIGF0dGFjaCB0bw0KICAgICAgICAgICAgc2V0U3RhdHVzOiBmdW5jdGlvbiAodGV4dCkgeyAvL2dldHMgc3BhbW1lZCBzb21lIHByaW50cyBkdXJpbmcgc3RhcnR1cC4gYmxhbWUgZW1zY3JpcHRlbi4NCiAgICAgICAgICAgICAgICBpZiAoTW9kdWxlLnNldFN0YXR1cy5pbnRlcnZhbCkgY2xlYXJJbnRlcnZhbChNb2R1bGUuc2V0U3RhdHVzLmludGVydmFsKTsNCiAgICAgICAgICAgICAgICB2YXIgbSA9IHRleHQubWF0Y2goLyhbXihdKylcKChcZCsoXC5cZCspPylcLyhcZCspXCkvKTsNCiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKTsNCiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3NFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzJyk7DQogICAgICAgICAgICAgICAgaWYgKG0pIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IG1bMV07DQogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzRWxlbWVudC52YWx1ZSA9IHBhcnNlSW50KG1bMl0pICogMTAwOw0KICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0VsZW1lbnQubWF4ID0gcGFyc2VJbnQobVs0XSkgKiAxMDA7DQogICAgICAgICAgICAgICAgICAgIHByb2dyZXNzRWxlbWVudC5oaWRkZW4gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0VsZW1lbnQudmFsdWUgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0VsZW1lbnQubWF4ID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbGVtZW50LmhpZGRlbiA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHN0YXR1c0VsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDsNCiAgICAgICAgICAgICAgICBzdGF0dXNFbGVtZW50LmhpZGRlbiA9IHRleHQubGVuZ3RoID09IDA7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLy8JcHJlUnVuOiBbXSwNCiAgICAgICAgICAgIHRvdGFsRGVwZW5kZW5jaWVzOiAwLA0KICAgICAgICAgICAgbW9uaXRvclJ1bkRlcGVuZGVuY2llczogZnVuY3Rpb24gKGxlZnQpIHsgLy9wcm9ncmVzcyBpcyBwcm9ncmVzcy4uLg0KICAgICAgICAgICAgICAgIHRoaXMudG90YWxEZXBlbmRlbmNpZXMgPSBNYXRoLm1heCh0aGlzLnRvdGFsRGVwZW5kZW5jaWVzLCBsZWZ0KTsNCiAgICAgICAgICAgICAgICBNb2R1bGUuc2V0U3RhdHVzKGxlZnQgPyAnUHJlcGFyaW5nLi4uICgnICsgKHRoaXMudG90YWxEZXBlbmRlbmNpZXMgLSBsZWZ0KSArICcvJyArIHRoaXMudG90YWxEZXBlbmRlbmNpZXMgKyAnKScgOiAnQWxsIGRvd25sb2FkcyBjb21wbGV0ZS4nKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAvLwlvblJ1bnRpbWVJbml0aWFsaXplZDogZnVuY3Rpb24oKXt9LA0KICAgICAgICAgICAgcG9zdFJ1bjogWyAvL2VhY2ggb2YgdGhlc2UgYXJlIGNhbGxlZCBhZnRlciBtYWluIHdhcyBydW4uIHdlIHNob3VsZCBoYXZlIG91ciBtYWlubG9vcCBzZXQgdXAgbm93DQogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoTW9kdWxlWyJzY2hlZCJdID09PSB1bmRlZmluZWQpIHsgLy9vdXIgbWFpbiBmdW5jdGlvbiBmYWlsZWQgdG8gc2V0IHVwIHRoZSBtYWluIGxvb3AuIGllOiBtYWluIGRpZG4ndCBnZXQgY2FsbGVkLiBwYW5pYy4NCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJVbmFibGUgdG8gaW5pdGlhbGlzZS4gWW91IG1heSBuZWVkIHRvIHJlc3RhcnQgeW91ciBicm93c2VyLiBJZiB5b3UgZ2V0IHRoaXMgb2Z0ZW4gYW5kIGluY29uc2lzdGVudGx5LCBjb25zaWRlciB1c2luZyBhIDY0Yml0IGJyb3dzZXIgaW5zdGVhZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIE1vZHVsZS5zZXRTdGF0dXMoIkluaXRpYWxpc2F0aW9uIEZhaWx1cmUiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF0sDQogICAgICAgIH07DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gYmVnaW4oKSB7DQogICAgICAgICAgICBpZiAoTW9kdWxlLmJlZ2FuKSByZXR1cm47DQogICAgICAgICAgICBNb2R1bGUuYmVnYW4gPSB0cnVlOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3B6b25lJykuaGlkZGVuID0gdHJ1ZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZWdpbicpLmhpZGRlbiA9IHRydWU7DQogICAgICAgICAgICBNb2R1bGUuc2V0U3RhdHVzKCdNZXJnaW5nIGZpbGVzLi4uJyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGF3YWl0IHByZXBhcmVHYW1lQXNzZXRzKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIE1vZHVsZS5zZXRTdGF0dXMoJ0Rvd25sb2FkaW5nLi4uJyk7DQogICAgICAgICAgICAvLyBtYWtlIGEgc2NyaXB0LiBkbyBpdCB0aGUgaGFyZCB3YXkgZm9yIHRoZSBlcnJvci4NCiAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7DQogICAgICAgICAgICAvLyBzZXQgaXQgdXANCiAgICAgICAgICAgIHMuc2V0QXR0cmlidXRlKCdzcmMnLCAiZnRld2ViZ2wuanMiKTsNCiAgICAgICAgICAgIHMuc2V0QXR0cmlidXRlKCd0eXBlJywgInRleHQvamF2YXNjcmlwdCIpOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoJ2NoYXJzZXQnLCAidXRmLTgiKTsNCiAgICAgICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk9oIG5vZXMhIHdlIGdvdCBhbiBlcnJvciEiKTsNCiAgICAgICAgICAgICAgICBNb2R1bGUuc2V0U3RhdHVzKCJVbmFibGUgdG8gZG93bmxvYWQgZW5naW5lIGphdmFzY3JpcHQiKTsNCiAgICAgICAgICAgIH0sIGZhbHNlKTsNCiAgICAgICAgICAgIC8vIGFkZCB0byBET00NCiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7DQogICAgICAgIH0NCiAgICAgICAgLy9zdHVmZiB0byBmYWNpbGl0YXRlIG91ciBkcmFnK2Ryb3AgZmlsZXN5c3RlbSBzdXBwb3J0DQogICAgICAgIGZ1bmN0aW9uIGZpeHVwZmlsZXBhdGgoZm5hbWUsIHBhdGgpIHsgLy93ZSBqdXN0IGhhdmUgYSBmaWxlbmFtZSwgdHJ5IHRvIGd1ZXNzIHdoZXJlIHRvIHB1dCBpdC4NCiAgICAgICAgICAgIGlmIChwYXRoICE9ICIiKSByZXR1cm4gcGF0aCArIGZuYW1lOyAvL2FscmVhZHkgaGFzIGEgcGF0aC4gdXNlIGl0LiB0aGlzIGFsbG93cyBwZW9wbGUgdG8gZHJhZytkcm9wIGdhbWVkaXJzLg0KICAgICAgICAgICAgdmFyIGV4dCA9IGZuYW1lLnN1YnN0cihmbmFtZS5sYXN0SW5kZXhPZignLicpICsgMSk7DQogICAgICAgICAgICBpZiAoZXh0ID09ICdmbWYnIHx8IGV4dCA9PSAna3BmJykgLy90aGVzZSBhcmUgdGhlIG9ubHkgZmlsZXMgdGhhdCByZWFsbHkgbWFrZSBzZW5zZSBpbiB0aGUgcm9vdC4NCiAgICAgICAgICAgICAgICByZXR1cm4gZm5hbWU7DQogICAgICAgICAgICBpZiAoZXh0ID09ICdic3AnIHx8IGV4dCA9PSAnbWFwJyB8fCBleHQgPT0gJ2xpdCcgfHwgZXh0ID09ICdsdXgnKSByZXR1cm4gImlkMS9tYXBzLyIgKyBmbmFtZTsgLy9ic3BzIGdldCB0aGVpciBvd24gZXh0cmEgc3ViZGlyDQogICAgICAgICAgICByZXR1cm4gImlkMS8iICsgZm5hbWU7IC8vcHJvYmFibHkgYSBwYWsuIG1heWJlIGEgY2ZnLCBubyBpZGVhIHJlYWxseS4NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHNob3dmaWxlcygpIHsgLy9wcmludCB0aGUgcGVuZGluZyBmaWxlIGxpc3QgaW4gc29tZSBwcmV0dHkgd2F5DQogICAgICAgICAgICBpZiAoTW9kdWxlLmJlZ2FuKSByZXR1cm47DQogICAgICAgICAgICBNb2R1bGUuc2V0U3RhdHVzKCcnKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wem9uZScpLmhpZGRlbiA9IGZhbHNlOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlZ2luJykuaGlkZGVuID0gZmFsc2U7DQogICAgICAgICAgICB2YXIgbnQgPSAiRHJhZyBnYW1lZGlycyBvciBpbmRpdmlkdWFsIHBhY2thZ2UgZmlsZXMgaGVyZSB0byBtYWtlIHRoZW0gYXZhaWxhYmxlITxici8+QWN0aXZlIEZpbGVzOjxici8+PHByZT4iOw0KICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhNb2R1bGUuZmlsZXMpOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKE1vZHVsZS5maWxlc1trZXlzW2ldXSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBzeiA9IE1vZHVsZS5maWxlc1trZXlzW2ldXS5ieXRlTGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc3ogPiA1MTIgKiAxMDI0KSBzeiA9IChzeiAvICgxMDI0ICogMTAyNCkpICsgIm1iIjsNCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3ogPiA1MTIpIHN6ID0gKHN6IC8gMTAyNCkgKyAia2IiOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIHN6ID0gKHN6KSArICIgYnl0ZXMiOw0KICAgICAgICAgICAgICAgICAgICBudCArPSAiICAgICIgKyBrZXlzW2ldICsgIiAoIiArIHN6ICsgIik8YnIvPiI7DQogICAgICAgICAgICAgICAgfSBlbHNlIG50ICs9ICIgICAgIiArIGtleXNbaV0gKyAiPGJyLz4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbnQgKz0gIjwvcHJlPigiICsga2V5cy5sZW5ndGggKyAiIGZpbGVzKSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcHpvbmUnKS5pbm5lckhUTUwgPSBudDsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHNjYW5maWxlcyhpdGVtLCBwYXRoKSB7IC8vZm9yIGRpcmVjdG9yeSBkcm9wcw0KICAgICAgICAgICAgaWYgKGl0ZW0uaXNGaWxlKSB7DQogICAgICAgICAgICAgICAgaXRlbS5maWxlKGZ1bmN0aW9uIChmKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBuID0gZml4dXBmaWxlcGF0aChmLm5hbWUsIHBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBNb2R1bGUuZmlsZXNbbl0gPSBmLmFycmF5QnVmZmVyKCk7IC8vYWN0dWFsbHkgYSBwcm9taXNlLi4uDQogICAgICAgICAgICAgICAgICAgIE1vZHVsZS5maWxlc1tuXS50aGVuKGJ1ZiA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBNb2R1bGUuZmlsZXNbbl0gPSBidWY7DQogICAgICAgICAgICAgICAgICAgICAgICBzaG93ZmlsZXMoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7IC8vdHJ5IGFuZCByZXNvbHZlIGl0IG5vdy4NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pc0RpcmVjdG9yeSkgew0KICAgICAgICAgICAgICAgIC8vIEdldCBmb2xkZXIgY29udGVudHMNCiAgICAgICAgICAgICAgICB2YXIgZGlyUmVhZGVyID0gaXRlbS5jcmVhdGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgICBkaXJSZWFkZXIucmVhZEVudHJpZXMoZnVuY3Rpb24gKGVudHJpZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSBzY2FuZmlsZXMoZW50cmllc1tpXSwgcGF0aCArIGl0ZW0ubmFtZSArICIvIik7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBnb3Rkcm9wKGV2KSB7IC8vdXNlciBkcmFnK2Ryb3BwZWQgc29tZXRoaW5nLiANCiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2LmRhdGFUcmFuc2Zlci5pdGVtcy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICBpZiAoZXYuZGF0YVRyYW5zZmVyLml0ZW1zW2ldLndlYmtpdEdldEFzRW50cnkpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBldi5kYXRhVHJhbnNmZXIuaXRlbXNbaV0ud2Via2l0R2V0QXNFbnRyeSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZCkgc2NhbmZpbGVzKGQsICIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChldi5kYXRhVHJhbnNmZXIuaXRlbXNbaV0ua2luZCA9PT0gJ2ZpbGUnKSB7DQogICAgICAgICAgICAgICAgdmFyIGYgPSBldi5kYXRhVHJhbnNmZXIuaXRlbXNbaV0uZ2V0QXNGaWxlKCk7DQogICAgICAgICAgICAgICAgdmFyIG4gPSBmaXh1cGZpbGVwYXRoKGYubmFtZSk7DQogICAgICAgICAgICAgICAgTW9kdWxlLmZpbGVzW25dID0gZi5hcnJheUJ1ZmZlcigpOyAvL2FjdHVhbGx5IGEgcHJvbWlzZS4uLg0KICAgICAgICAgICAgICAgIE1vZHVsZS5maWxlc1tuXS50aGVuKGJ1ZiA9PiB7DQogICAgICAgICAgICAgICAgICAgIE1vZHVsZS5maWxlc1tuXSA9IGJ1ZjsNCiAgICAgICAgICAgICAgICAgICAgc2hvd2ZpbGVzKCk7DQogICAgICAgICAgICAgICAgfSk7IC8vdHJ5IGFuZCByZXNvbHZlIGl0IG5vdy4NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNob3dmaWxlcygpOw0KICAgICAgICB9DQogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCAhPSAiIiB8fCBPYmplY3Qua2V5cyhNb2R1bGUuZmlsZXMpLmxlbmd0aCkgYmVnaW4oKTsgLy9pZiB0aGUgdXJsIGhhcyBhICNmb28uZm1mIHRoZW4ganVzdCBiZWdpbiBpbnN0YW50bHksIA0KICAgICAgICBlbHNlIHNob3dmaWxlcygpOyAvL290aGVyd2lzZSBzaG93IG91ciBsYW1lIGZpbGUgZHJvcHBlciBhbmQgd2FpdCBmb3IgdGhlIHVzZXIgdG8gY2xpY2sgJ2dvJy4NCiAgICA8L3NjcmlwdD4NCiAgICA8aW1nIHNyYz0iaHR0cHM6Ly9oaXRzLnNoL2hpdHMuc2gvbnpwLXRlYW0uZ2l0aHViLmlvL2xhdGVzdC9nYW1lLmh0bWwvaGl0cy5zdmciIHN0eWxlPSJvcGFjaXR5OjA7d2lkdGg6MHB4OyI+DQo8L2JvZHk+DQoNCjwvaHRtbD4=";
