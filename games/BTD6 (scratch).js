window.game = "PCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPgoKCjwhRE9DVFlQRSBodG1sPgo8IS0tIENyZWF0ZWQgd2l0aCBodHRwczovL3BhY2thZ2VyLnR1cmJvd2FycC5vcmcvIC0tPgo8aHRtbD4KPGhlYWQ+CiAgPGJhc2UgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2dlbml6eS9nb29nbGUtY2xhc3NAbGF0ZXN0L2J0ZDYvIj4KICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CiAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIj4KICA8IS0tIFdlIG9ubHkgaW5jbHVkZSB0aGlzIHRvIGV4cGxpY2l0bHkgbG9vc2VuIHRoZSBDU1Agb2YgdmFyaW91cyBwYWNrYWdlciBlbnZpcm9ubWVudHMuIEl0IGRvZXMgbm90IHByb3ZpZGUgYW55IHNlY3VyaXR5LiAtLT4KICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVNlY3VyaXR5LVBvbGljeSIgY29udGVudD0iZGVmYXVsdC1zcmMgKiAnc2VsZicgJ3Vuc2FmZS1pbmxpbmUnICd1bnNhZmUtZXZhbCcgZGF0YTogYmxvYjoiPgogIDx0aXRsZT5CbG9vbnMgVEQ2PC90aXRsZT4KICA8c3R5bGU+CiAgICBib2R5IHsKICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICB9CiAgICA6cm9vdCwgYm9keS5pcy1mdWxsc2NyZWVuIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDsKICAgIH0KICAgIFtoaWRkZW5dIHsKICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogICAgfQogICAgaDEgewogICAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgfQogICAgYSB7CiAgICAgIGNvbG9yOiBpbmhlcml0OwogICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQoKICAgICNhcHAsICNsb2FkaW5nLCAjZXJyb3IsICNsYXVuY2ggewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMDsKICAgICAgbGVmdDogMDsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgIH0KICAgIC5zY3JlZW4gewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOwogICAgfQogICAgI2xhdW5jaCB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQogICAgLmdyZWVuLWZsYWcgewogICAgICB3aWR0aDogODBweDsKICAgICAgaGVpZ2h0OiA4MHB4OwogICAgICBwYWRkaW5nOiAxNnB4OwogICAgICBib3JkZXItcmFkaXVzOiAxMDAlOwogICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpOwogICAgICBib3JkZXI6IDNweCBzb2xpZCBoc2xhKDAsIDEwMCUsIDEwMCUsIDEpOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIH0KICAgICNsb2FkaW5nIHsKICAgICAgCiAgICB9CiAgICAucHJvZ3Jlc3MtYmFyLW91dGVyIHsKICAgICAgYm9yZGVyOiAxcHggc29saWQgY3VycmVudENvbG9yOwogICAgICBoZWlnaHQ6IDEwcHg7CiAgICAgIHdpZHRoOiAyMDBweDsKICAgICAgbWF4LXdpZHRoOiAyMDBweDsKICAgIH0KICAgIC5wcm9ncmVzcy1iYXItaW5uZXIgewogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIHdpZHRoOiAwOwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7CiAgICB9CiAgICAubG9hZGluZy10ZXh0LCBub3NjcmlwdCB7CiAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICAgIGZvbnQtc2l6ZTogMzZweDsKICAgICAgbWFyZ2luOiAwIDAgMTZweDsKICAgIH0KICAgIC5sb2FkaW5nLWltYWdlIHsKICAgICAgbWFyZ2luOiAwIDAgMTZweDsKICAgIH0KICAgICNlcnJvci1tZXNzYWdlLCAjZXJyb3Itc3RhY2sgewogICAgICBmb250LWZhbWlseTogbW9ub3NwYWNlOwogICAgICBtYXgtd2lkdGg6IDYwMHB4OwogICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICAgIHVzZXItc2VsZWN0OiB0ZXh0OwogICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiB0ZXh0OwogICAgfQogICAgI2Vycm9yLXN0YWNrIHsKICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgbWF4LWhlaWdodDogMjAwcHg7CiAgICAgIG92ZXJmbG93OiBhdXRvOwogICAgfQogICAgLmNvbnRyb2wtYnV0dG9uIHsKICAgICAgd2lkdGg6IDJyZW07CiAgICAgIGhlaWdodDogMnJlbTsKICAgICAgcGFkZGluZzogMC4zNzVyZW07CiAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTsKICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwogICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBib3JkZXI6IDA7CiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIH0KICAgIC5jb250cm9sLWJ1dHRvbi1oaWdobGlnaHQ6aG92ZXIgewogICAgICBiYWNrZ3JvdW5kOiAjZmY0YzRjMjY7CiAgICB9CiAgICAuY29udHJvbC1idXR0b24taGlnaGxpZ2h0LmFjdGl2ZSB7CiAgICAgIGJhY2tncm91bmQ6ICNmZjRjNGM1OTsKICAgIH0KICAgIC5mdWxsc2NyZWVuLWJ1dHRvbiB7CiAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgfQogICAgLnN0YW5kYWxvbmUtZnVsbHNjcmVlbi1idXR0b24gewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMDsKICAgICAgcmlnaHQ6IDA7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsKICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDAgNHB4OwogICAgICBwYWRkaW5nOiA0cHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIH0KICAgIC5zYy1jYW52YXMgewogICAgICBjdXJzb3I6IGF1dG87CiAgICB9CiAgICAuc2MtbW9uaXRvci1yb290W2RhdGEtb3Bjb2RlXj0iZGF0YV8iXSAuc2MtbW9uaXRvci12YWx1ZS1jb2xvciB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZjhjMWE7CiAgICB9CiAgICAuc2MtbW9uaXRvci1yb3ctdmFsdWUtb3V0ZXIgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmM2NjJjOwogICAgfQogICAgLnNjLW1vbml0b3Itcm93LXZhbHVlLWVkaXRpbmcgLnNjLW1vbml0b3Itcm93LXZhbHVlLW91dGVyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2UyNWIyNzsKICAgIH0KICAgIAogIDwvc3R5bGU+CiAgPG1ldGEgbmFtZT0idGhlbWUtY29sb3IiIGNvbnRlbnQ9IiMwMDAwMDAiPgogIAo8L2hlYWQ+Cjxib2R5PgogIDxkaXYgaWQ9ImFwcCI+PC9kaXY+CgogIDxkaXYgaWQ9ImxhdW5jaCIgY2xhc3M9InNjcmVlbiIgaGlkZGVuIHRpdGxlPSJDbGljayB0byBzdGFydCI+CiAgICA8ZGl2IGNsYXNzPSJncmVlbi1mbGFnIj4KICAgICAgPHN2ZyB2aWV3Qm94PSIwIDAgMTYuNjMgMTcuNSIgd2lkdGg9IjQyIiBoZWlnaHQ9IjQ0Ij4KICAgICAgICA8ZGVmcz48c3R5bGU+LmNscy0xLC5jbHMtMntmaWxsOiM0Y2JmNTY7c3Ryb2tlOiM0NTk5M2Q7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO30uY2xzLTJ7c3Ryb2tlLXdpZHRoOjEuNXB4O308L3N0eWxlPjwvZGVmcz4KICAgICAgICA8cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0uNzUsMkE2LjQ0LDYuNDQsMCwwLDEsOC40NCwyaDBhNi40NCw2LjQ0LDAsMCwwLDcuNjksMFYxMi40YTYuNDQsNi40NCwwLDAsMS03LjY5LDBoMGE2LjQ0LDYuNDQsMCwwLDAtNy42OSwwIi8+CiAgICAgICAgPGxpbmUgY2xhc3M9ImNscy0yIiB4MT0iMC43NSIgeTE9IjE2Ljc1IiB4Mj0iMC43NSIgeTI9IjAuNzUiLz4KICAgICAgPC9zdmc+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBpZD0ibG9hZGluZyIgY2xhc3M9InNjcmVlbiI+CiAgICA8bm9zY3JpcHQ+RW5hYmxlIEphdmFTY3JpcHQ8L25vc2NyaXB0PgogICAgCiAgICAKICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLWJhci1vdXRlciI+PGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyLWlubmVyIiBpZD0ibG9hZGluZy1pbm5lciI+PC9kaXY+PC9kaXY+CiAgPC9kaXY+CgogIDxkaXYgaWQ9ImVycm9yIiBjbGFzcz0ic2NyZWVuIiBoaWRkZW4+CiAgICA8aDE+RXJyb3I8L2gxPgogICAgPGRldGFpbHM+CiAgICAgIDxzdW1tYXJ5IGlkPSJlcnJvci1tZXNzYWdlIj48L3N1bW1hcnk+CiAgICAgIDxwIGlkPSJlcnJvci1zdGFjayI+PC9wPgogICAgPC9kZXRhaWxzPgogIDwvZGl2PgoKICA8c2NyaXB0IHNyYz0ic2NyaXB0LmpzIj48L3NjcmlwdD4KICA8c2NyaXB0PgogICAgY29uc3QgYXBwRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKTsKICAgIGNvbnN0IGxhdW5jaFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXVuY2gnKTsKICAgIGNvbnN0IGxvYWRpbmdTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZycpOwogICAgY29uc3QgbG9hZGluZ0lubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctaW5uZXInKTsKICAgIGNvbnN0IGVycm9yU2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yJyk7CiAgICBjb25zdCBlcnJvclNjcmVlbk1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3ItbWVzc2FnZScpOwogICAgY29uc3QgZXJyb3JTY3JlZW5TdGFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvci1zdGFjaycpOwoKICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBpZiAoIWVycm9yU2NyZWVuLmhpZGRlbikgcmV0dXJuOwogICAgICBlcnJvclNjcmVlbi5oaWRkZW4gPSBmYWxzZTsKICAgICAgZXJyb3JTY3JlZW5NZXNzYWdlLnRleHRDb250ZW50ID0gJycgKyBlcnJvcjsKICAgICAgbGV0IGRlYnVnID0gZXJyb3IgJiYgZXJyb3Iuc3RhY2sgfHwgJ25vIHN0YWNrJzsKICAgICAgZGVidWcgKz0gJ1xuVXNlciBhZ2VudDogJyArIG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICAgIGVycm9yU2NyZWVuU3RhY2sudGV4dENvbnRlbnQgPSBkZWJ1ZzsKICAgIH07CiAgICBjb25zdCBzZXRQcm9ncmVzcyA9IChwcm9ncmVzcykgPT4gewogICAgICBpZiAobG9hZGluZ0lubmVyKSBsb2FkaW5nSW5uZXIuc3R5bGUud2lkdGggPSBwcm9ncmVzcyAqIDEwMCArICclJzsKICAgIH07CiAgICBjb25zdCBpbnRlcnBvbGF0ZSA9IChhLCBiLCB0KSA9PiBhICsgdCAqIChiIC0gYSk7CgogICAgdHJ5IHsKICAgICAgc2V0UHJvZ3Jlc3MoMC4xKTsKCiAgICAgIGNvbnN0IHNjYWZmb2xkaW5nID0gbmV3IFNjYWZmb2xkaW5nLlNjYWZmb2xkaW5nKCk7CiAgICAgIHNjYWZmb2xkaW5nLndpZHRoID0gNDgwOwogICAgICBzY2FmZm9sZGluZy5oZWlnaHQgPSAzNjA7CiAgICAgIHNjYWZmb2xkaW5nLnJlc2l6ZU1vZGUgPSAicHJlc2VydmUtcmF0aW8iOwogICAgICBzY2FmZm9sZGluZy5lZGl0YWJsZUxpc3RzID0gZmFsc2U7CiAgICAgIHNjYWZmb2xkaW5nLnVzZVBhY2thZ2VkUnVudGltZSA9IHRydWU7CiAgICAgIHNjYWZmb2xkaW5nLnNldHVwKCk7CiAgICAgIHNjYWZmb2xkaW5nLmFwcGVuZFRvKGFwcEVsZW1lbnQpOwoKICAgICAgY29uc3Qgdm0gPSBzY2FmZm9sZGluZy52bTsKICAgICAgd2luZG93LnNjYWZmb2xkaW5nID0gc2NhZmZvbGRpbmc7CiAgICAgIHdpbmRvdy52bSA9IHNjYWZmb2xkaW5nLnZtOwogICAgICB3aW5kb3cuU2NyYXRjaCA9IHsKICAgICAgICB2bSwKICAgICAgICByZW5kZXJlcjogdm0ucmVuZGVyZXIsCiAgICAgICAgYXVkaW9FbmdpbmU6IHZtLnJ1bnRpbWUuYXVkaW9FbmdpbmUsCiAgICAgICAgYml0bWFwQWRhcHRlcjogdm0ucnVudGltZS52MkJpdG1hcEFkYXB0ZXIsCiAgICAgICAgdmlkZW9Qcm92aWRlcjogdm0ucnVudGltZS5pb0RldmljZXMudmlkZW8ucHJvdmlkZXIKICAgICAgfTsKCiAgICAgIHNjYWZmb2xkaW5nLnNldFVzZXJuYW1lKCJwbGF5ZXIjIyMjIi5yZXBsYWNlKC8jL2csICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSkpOwogICAgICBzY2FmZm9sZGluZy5zZXRBY2NlbnRDb2xvcigiI2ZmNGM0YyIpOwoKICAgICAgdHJ5IHsKICAgICAgICBzY2FmZm9sZGluZy5hZGRDbG91ZFByb3ZpZGVyKG5ldyBTY2FmZm9sZGluZy5DbG91ZC5XZWJTb2NrZXRQcm92aWRlcihbIndzczovL2Nsb3VkZGF0YS50dXJib3dhcnAub3JnIiwid3NzOi8vY2xvdWRkYXRhLnR1cmJvd2FycC54eXoiXSwgInA0LUBwcm9qZWN0LnNiMyIpKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfQoKICAgICAgdm0uc2V0VHVyYm9Nb2RlKGZhbHNlKTsKICAgICAgaWYgKHZtLnNldEludGVycG9sYXRpb24pIHZtLnNldEludGVycG9sYXRpb24oZmFsc2UpOwogICAgICBpZiAodm0uc2V0RnJhbWVyYXRlKSB2bS5zZXRGcmFtZXJhdGUoMzApOwogICAgICBpZiAodm0ucmVuZGVyZXIuc2V0VXNlSGlnaFF1YWxpdHlSZW5kZXIpIHZtLnJlbmRlcmVyLnNldFVzZUhpZ2hRdWFsaXR5UmVuZGVyKGZhbHNlKTsKICAgICAgaWYgKHZtLnNldFJ1bnRpbWVPcHRpb25zKSB2bS5zZXRSdW50aW1lT3B0aW9ucyh7CiAgICAgICAgZmVuY2luZzogdHJ1ZSwKICAgICAgICBtaXNjTGltaXRzOiB0cnVlLAogICAgICAgIG1heENsb25lczogMzAwLAogICAgICB9KTsKICAgICAgaWYgKHZtLnNldENvbXBpbGVyT3B0aW9ucykgdm0uc2V0Q29tcGlsZXJPcHRpb25zKHsKICAgICAgICBlbmFibGVkOiB0cnVlLAogICAgICAgIHdhcnBUaW1lcjogZmFsc2UKICAgICAgfSk7CiAgICAgIGlmICh2bS5yZW5kZXJlci5zZXRNYXhUZXh0dXJlRGltZW5zaW9uKSB2bS5yZW5kZXJlci5zZXRNYXhUZXh0dXJlRGltZW5zaW9uKDIwNDgpOwoKICAgICAgLy8gZW5mb3JjZVByaXZhY3kgdGhyZWF0IG1vZGVsIG9ubHkgbWFrZXMgc2Vuc2UgaW4gdGhlIGVkaXRvcgogICAgICBpZiAodm0ucnVudGltZS5zZXRFbmZvcmNlUHJpdmFjeSkgdm0ucnVudGltZS5zZXRFbmZvcmNlUHJpdmFjeShmYWxzZSk7CgogICAgICBpZiAodHlwZW9mIFNjYWZmb2xkaW5nQWRkb25zICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIFNjYWZmb2xkaW5nQWRkb25zLnJ1bihzY2FmZm9sZGluZywgeyJnYW1lcGFkIjpmYWxzZSwicG9pbnRlcmxvY2siOmZhbHNlLCJzcGVjaWFsQ2xvdWRCZWhhdmlvcnMiOmZhbHNlLCJ1bnNhZmVDbG91ZEJlaGF2aW9ycyI6ZmFsc2UsInBhdXNlIjpmYWxzZX0pOwogICAgICB9CgogICAgICBzY2FmZm9sZGluZy5zZXRFeHRlbnNpb25TZWN1cml0eU1hbmFnZXIoewogICAgICAgIGdldFNhbmRib3hNb2RlOiAoKSA9PiAndW5zYW5kYm94ZWQnLAogICAgICAgIGNhbkxvYWRFeHRlbnNpb25Gcm9tUHJvamVjdDogKCkgPT4gdHJ1ZQogICAgICB9KTsKICAgICAgZm9yIChjb25zdCBleHRlbnNpb24gb2YgW10pIHsKICAgICAgICB2bS5leHRlbnNpb25NYW5hZ2VyLmxvYWRFeHRlbnNpb25VUkwoZXh0ZW5zaW9uKTsKICAgICAgfQoKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaGFuZGxlRXJyb3IoZSk7CiAgICB9CiAgPC9zY3JpcHQ+CiAgCiAgCiAgICA8c2NyaXB0PgogICAgICBjb25zdCBnZXRQcm9qZWN0RGF0YSA9IChmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBzdG9yYWdlID0gc2NhZmZvbGRpbmcuc3RvcmFnZTsKICAgICAgICBzdG9yYWdlLm9ucHJvZ3Jlc3MgPSAodG90YWwsIGxvYWRlZCkgPT4gewogICAgICAgICAgc2V0UHJvZ3Jlc3MoaW50ZXJwb2xhdGUoMC4yLCAwLjk4LCBsb2FkZWQgLyB0b3RhbCkpOwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgc3RvcmFnZS5hZGRXZWJTdG9yZSgKICAgICAgICAgIFsKICAgICAgICAgICAgc3RvcmFnZS5Bc3NldFR5cGUuSW1hZ2VWZWN0b3IsCiAgICAgICAgICAgIHN0b3JhZ2UuQXNzZXRUeXBlLkltYWdlQml0bWFwLAogICAgICAgICAgICBzdG9yYWdlLkFzc2V0VHlwZS5Tb3VuZCwKICAgICAgICAgICAgc3RvcmFnZS5Bc3NldFR5cGUuRm9udAogICAgICAgICAgXS5maWx0ZXIoaSA9PiBpKSwKICAgICAgICAgIChhc3NldCkgPT4gbmV3IFVSTCgnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2dlbml6eS9nb29nbGUtY2xhc3NAbWFpbi9idGQ2L2Fzc2V0cy8nICsgYXNzZXQuYXNzZXRJZCArICcuJyArIGFzc2V0LmRhdGFGb3JtYXQpLmhyZWYKICAgICAgICApOwogICAgICAgIHJldHVybiAoKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTsKICAgICAgICB9OwogICAgICAgIHhoci5vbmVycm9yID0gKCkgPT4gewogICAgICAgICAgaWYgKGxvY2F0aW9uLnByb3RvY29sID09PSAnZmlsZTonKSB7CiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1ppcCBlbnZpcm9ubWVudCBtdXN0IGJlIHVzZWQgb24gYSB3ZWJzaXRlLCBub3Qgb24gYSBsb2NhbCBmaWxlLiBUbyBmaXggdGhpcyBlcnJvciwgdXNlIHRoZSAiUGxhaW4gSFRNTCIgZW52aXJvbm1lbnQgaW5zdGVhZC4nKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZXF1ZXN0IHRvIGxvYWQgcHJvamVjdCBkYXRhIGZhaWxlZC4nKSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB4aHIub25wcm9ncmVzcyA9IChlKSA9PiB7CiAgICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7CiAgICAgICAgICAgIHNldFByb2dyZXNzKGludGVycG9sYXRlKDAuMSwgMC4yLCBlLmxvYWRlZCAvIGUudG90YWwpKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInOwogICAgICAgIHhoci5vcGVuKCdHRVQnLCAiYXNzZXRzL3Byb2plY3QuanNvbiIpOwogICAgICAgIHhoci5zZW5kKCk7CiAgICAgIH0pOwogICAgICB9KSgpOwogICAgPC9zY3JpcHQ+CiAgPHNjcmlwdD4KICAgIGNvbnN0IHJ1biA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgcHJvamVjdERhdGEgPSBhd2FpdCBnZXRQcm9qZWN0RGF0YSgpOwogICAgICBhd2FpdCBzY2FmZm9sZGluZy5sb2FkUHJvamVjdChwcm9qZWN0RGF0YSk7CiAgICAgIHNldFByb2dyZXNzKDEpOwogICAgICBsb2FkaW5nU2NyZWVuLmhpZGRlbiA9IHRydWU7CiAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgc2NhZmZvbGRpbmcuc3RhcnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsYXVuY2hTY3JlZW4uaGlkZGVuID0gZmFsc2U7CiAgICAgICAgbGF1bmNoU2NyZWVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgbGF1bmNoU2NyZWVuLmhpZGRlbiA9IHRydWU7CiAgICAgICAgICBzY2FmZm9sZGluZy5zdGFydCgpOwogICAgICAgIH0pOwogICAgICAgIGxhdW5jaFNjcmVlbi5mb2N1cygpOwogICAgICB9CiAgICB9OwogICAgcnVuKCkuY2F0Y2goaGFuZGxlRXJyb3IpOwogIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K";
