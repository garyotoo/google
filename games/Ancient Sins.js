window.game = "PCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCjwhLS10aGlzIGlzIGEgaG9ycm9yIGdhbWUgd2hlcmUgdGhlIG1vbnN0ZXIgbW92ZXMgd2hlbiB5b3UgZG9udCBsb29rIGF0IGhpbS4gVXNlcyBqc2RlbGl2ciBhbmQgcmF3LmdpdGh1YnVzZXJjb250ZW50LS0hPg0KDQo8aHRtbCBsYW5nPSJlbi11cyI+PGhlYWQ+DQogIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4NCiAgPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiPg0KICA8dGl0bGU+QW5jaWVudCBTaW5zPC90aXRsZT4NCjwvaGVhZD4NCg0KPGJvZHk+DQogIDxkaXYgaWQ9InVuaXR5LWNvbnRhaW5lciIgY2xhc3M9InVuaXR5LWRlc2t0b3AiPg0KICAgIDxjYW52YXMgaWQ9InVuaXR5LWNhbnZhcyIgd2lkdGg9IjE2MjUiIGhlaWdodD0iODY0IiB0YWJpbmRleD0iLTEiIHN0eWxlPSJ3aWR0aDogMTMwMHB4OyBoZWlnaHQ6IDY5MXB4OyBjdXJzb3I6IGRlZmF1bHQ7Ij48L2NhbnZhcz4NCiAgPC9kaXY+DQogIDxzdHlsZT4NCiAgICBib2R5LA0KICAgIGh0bWwgew0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICB9DQoNCiAgICBjYW52YXMgew0KICAgICAgd2lkdGg6IDEwMHZ3ICFpbXBvcnRhbnQ7DQogICAgICBoZWlnaHQ6IDEwMHZoICFpbXBvcnRhbnQ7DQogICAgfQ0KICA8L3N0eWxlPg0KDQogIDxzY3JpcHQ+DQogICAgLy8gRW5zdXJlIHRoYXQgYW55IHF1ZXJ5IHBhcmFtZXRlcnMgdXNlZCB0byBsb2FkIHRoZSBwYWdlIGFyZW4ndCBhdmFpbGFibGUgdG8gdGhlIGdhbWUgcnVudGltZQ0KICAgIC8vIFRoaXMgaXMgbWFpbmx5IHRvIGFkZHJlc3MgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGFjY2Vzc190b2tlbiBmb3IgcHJpdmF0ZSBnYW1lcw0KICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpOw0KICA8L3NjcmlwdD4NCg0KICA8c2NyaXB0Pg0KICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jb250YWluZXIiKTsNCiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY2FudmFzIik7DQogIDwvc2NyaXB0Pg0KDQogIDxzY3JpcHQ+DQogICAgLy8gSGFja3kgc29sdXRpb24gZm9yIG1hbmFnaW5nIGF1ZGlvIHZvbHVtZSBvZiB0aGUgZ2FtZSBwbGF5ZXIgZHluYW1pY2FsbHkNCiAgICB3aW5kb3cuYXVkaW9TdHJlYW0gPSBbXTsNCiAgICB3aW5kb3cuQXVkaW9Db250ZXh0T3JpZ2luID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0Ow0KICAgIHdpbmRvdy5BdWRpb0NvbnRleHQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCBhYyA9IG5ldyB3aW5kb3cuQXVkaW9Db250ZXh0T3JpZ2luKCk7DQogICAgICBjb25zdCBkZXN0ID0gYWMuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpOw0KICAgICAgY29uc3QgYmFzZU1lcmdlID0gYWMuY3JlYXRlR2FpbigpOw0KDQogICAgICB3aW5kb3cuZ2xvYmFsR2FpbiA9IGFjLmNyZWF0ZUdhaW4oKTsNCiAgICAgIHdpbmRvdy5nbG9iYWxHYWluLmdhaW4udmFsdWUgPSAxOw0KICAgICAgd2luZG93Lmdsb2JhbEdhaW4uY29ubmVjdChhYy5kZXN0aW5hdGlvbik7DQogICAgICANCiAgICAgIC8vIEludGVyY2VwdCBjb25uZWN0KCkgc28gdGhhdCBhbGwgbm9kZXMgZ28gdGhyb3VnaCBnbG9iYWxHYWluIGF0IHRoZSBlbmQNCiAgICAgIGNvbnN0IG9yaWdpbmFsQ29ubmVjdCA9IEF1ZGlvTm9kZS5wcm90b3R5cGUuY29ubmVjdDsNCiAgICAgIEF1ZGlvTm9kZS5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgLi4uYXJncykgew0KICAgICAgICBpZiAoZGVzdGluYXRpb24gPT09IGFjLmRlc3RpbmF0aW9uKSB7DQogICAgICAgICAgLy8gSW5zdGVhZCBvZiBjb25uZWN0aW5nIGRpcmVjdGx5IHRvIGRlc3RpbmF0aW9uLCBnbyB0aHJvdWdoIGdsb2JhbEdhaW4NCiAgICAgICAgICByZXR1cm4gb3JpZ2luYWxDb25uZWN0LmNhbGwodGhpcywgd2luZG93Lmdsb2JhbEdhaW4sIC4uLmFyZ3MpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBvcmlnaW5hbENvbm5lY3QuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbiwgLi4uYXJncyk7DQogICAgICB9Ow0KICAgICAgcmV0dXJuIGFjOw0KICAgIH07DQogIDwvc2NyaXB0Pg0KDQogIDxzY3JpcHQ+DQogICAgZnVuY3Rpb24gc2VuZFBhcmVudE1lc3NhZ2UoZXZlbnQsIGRhdGEpIHsNCiAgICAgIDwhLS13aW5kb3cudG9wLnBvc3RNZXNzYWdlKHsgZXZlbnQ6IGV2ZW50LCBtZXNzYWdlOiBkYXRhIH0sICdodHRwczovL3BsYXkudW5pdHkuY29tJyk7LS0+DQogICAgICB3aW5kb3cudG9wLnBvc3RNZXNzYWdlKHsgZXZlbnQ6IGV2ZW50LCBtZXNzYWdlOiBkYXRhIH0sICcqJyk7DQogICAgfQ0KICA8L3NjcmlwdD4NCg0KICA8c2NyaXB0Pg0KICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRTY3JpcHQodXJsKSB7DQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICBjb25zdCBkeW5hbWljU2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgICAgICBkeW5hbWljU2NyaXB0RWxlbWVudC5zcmMgPSB1cmw7DQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHluYW1pY1NjcmlwdEVsZW1lbnQpOw0KDQogICAgICAgIGR5bmFtaWNTY3JpcHRFbGVtZW50Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgIH07DQoNCiAgICAgICAgZHluYW1pY1NjcmlwdEVsZW1lbnQub25lcnJvciA9IChlcnJvcikgPT4gew0KICAgICAgICAgIHJlamVjdChlcnJvcik7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCiAgPC9zY3JpcHQ+DQoNCiAgPHNjcmlwdD4NCiAgICBmdW5jdGlvbiBzdGFydFJlY29yZGluZ0NhbnZhcygpIHsNCiAgICAgIHdpbmRvdy5yZWNvcmRlZEJsb2JzID0gW107DQogICAgICBjb25zdCBhdmFpbGFibGVSZWNvcmRpbmdPcHRpb25zID0gWyd2aWRlby93ZWJtO2NvZGVjcz1oMjY0JywgJ3ZpZGVvL3dlYm07Y29kZWNzPXZwOCxvcHVzJywgJ3ZpZGVvL3dlYm0nXTsNCiAgICAgIGxldCByZWNvcmRpbmdPcHRpb25JbmRleCA9IDA7DQoNCiAgICAgIHdoaWxlIChhdmFpbGFibGVSZWNvcmRpbmdPcHRpb25zW3JlY29yZGluZ09wdGlvbkluZGV4XSAmJiAhTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQoYXZhaWxhYmxlUmVjb3JkaW5nT3B0aW9uc1tyZWNvcmRpbmdPcHRpb25JbmRleF0pKSB7DQogICAgICAgIHJlY29yZGluZ09wdGlvbkluZGV4Kys7DQogICAgICB9DQoNCiAgICAgIGxldCByZWNvcmRpbmdPcHRpb24gPSBhdmFpbGFibGVSZWNvcmRpbmdPcHRpb25zW3JlY29yZGluZ09wdGlvbkluZGV4XTsNCg0KICAgICAgaWYgKCFyZWNvcmRpbmdPcHRpb24pIHsNCiAgICAgICAgY29uc29sZS5lcnJvcignVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgcmVjb3JkaW5nIHZpYSBhbnkgc3VwcG9ydCBlbmNvZGVyJyk7DQogICAgICB9DQoNCiAgICAgIHdpbmRvdy5tZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoY2FudmFzLmNhcHR1cmVTdHJlYW0oKSwgeyBtaW1lVHlwZTogcmVjb3JkaW5nT3B0aW9uIH0pOw0KDQogICAgICBtZWRpYVJlY29yZGVyLm9uc3RvcCA9ICgpID0+IHsNCiAgICAgICAgb25SZWNvcmRpbmdDb21wbGV0ZWQod2luZG93LnJlY29yZGVkQmxvYnMpOw0KICAgICAgfTsNCg0KICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZXZlbnQpID0+IHsNCiAgICAgICAgaWYgKGV2ZW50LmRhdGEgJiYgZXZlbnQuZGF0YS5zaXplID4gMCkgew0KICAgICAgICAgIHJlY29yZGVkQmxvYnMucHVzaChldmVudC5kYXRhKTsNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgxMCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gb25SZWNvcmRpbmdDb21wbGV0ZWQoYmxvYnMpIHsNCiAgICAgIHNlbmRQYXJlbnRNZXNzYWdlKCdyZWNvcmRpbmcucmVhZHknLCB7IHJlY29yZGluZ0Jsb2JzOiBibG9icyB9KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzdG9wUmVjb3JkaW5nQ2FudmFzKCkgew0KICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKCk7DQogICAgfQ0KICA8L3NjcmlwdD4NCg0KICA8c2NyaXB0Pg0KICAgIC8vIFBhdGNoIGNhbnZhcyByZXF1ZXN0UG9pbnRlckxvY2sNCiAgICBjYW52YXMuX3JlcXVlc3RQb2ludGVyTG9jayA9IGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2s7DQogICAgY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jayA9IGFzeW5jICgpID0+IHsNCiAgICAgIHRyeSB7DQogICAgICAgIHJldHVybiBhd2FpdCBjYW52YXMuX3JlcXVlc3RQb2ludGVyTG9jayh7DQogICAgICAgICAgdW5hZGp1c3RlZE1vdmVtZW50OiB0cnVlLA0KICAgICAgICB9KTsNCiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogc3dhbGxvdyBwb2ludGVyIGxvY2sgZXJyb3JzICovIH0NCiAgICB9Ow0KDQogICAgaWYgKG5hdmlnYXRvciAmJiAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgew0KICAgICAgY29uc3QgbWV0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKTsNCiAgICAgIG1ldGEubmFtZSA9ICd2aWV3cG9ydCc7DQogICAgICBtZXRhLmNvbnRlbnQgPSAnd2lkdGg9ZGV2aWNlLXdpZHRoLCBoZWlnaHQ9ZGV2aWNlLWhlaWdodCwgaW5pdGlhbC1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8sIHNocmluay10by1maXQ9eWVzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobWV0YSk7DQogICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gInVuaXR5LW1vYmlsZSI7DQogICAgICBjYW52YXMuY2xhc3NOYW1lID0gInVuaXR5LW1vYmlsZSI7DQogICAgfSBlbHNlIHsNCiAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9ICI5NjBweCI7DQogICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gIjYwMHB4IjsNCiAgICB9DQoNCiAgICBsZXQgZ2FtZUluc3RhbmNlOw0KDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoDQogICAgICAnbWVzc2FnZScsDQogICAgICAoeyBkYXRhLCBvcmlnaW4gfSkgPT4gew0KICAgICAgICBpZiAob3JpZ2luICE9PSAnaHR0cHM6Ly9wbGF5LnVuaXR5LmNvbScpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWdhbWVJbnN0YW5jZSkgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIGNvbnN0IHsgZXZlbnQsIG1lc3NhZ2UgfSA9IGRhdGE7DQoNCiAgICAgICAgc3dpdGNoIChldmVudCkgew0KICAgICAgICAgIGNhc2UgJ211dGUuZGlzYWJsZSc6DQogICAgICAgICAgICB3aW5kb3cuZ2xvYmFsR2Fpbi5nYWluLnZhbHVlID0gMTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ211dGUuZW5hYmxlJzoNCiAgICAgICAgICAgIHdpbmRvdy5nbG9iYWxHYWluLmdhaW4udmFsdWUgPSAwOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAnZnVsbHNjcmVlbi5lbmFibGUnOg0KICAgICAgICAgICAgZ2FtZUluc3RhbmNlLlNldEZ1bGxzY3JlZW4odHJ1ZSk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICdmdWxsc2NyZWVuLmRpc2FibGUnOg0KICAgICAgICAgICAgZ2FtZUluc3RhbmNlLlNldEZ1bGxzY3JlZW4oZmFsc2UpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAncmVjb3JkaW5nLnN0YXJ0JzoNCiAgICAgICAgICAgIHN0YXJ0UmVjb3JkaW5nQ2FudmFzKCk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICdyZWNvcmRpbmcuc3RvcCc6DQogICAgICAgICAgICBzdG9wUmVjb3JkaW5nQ2FudmFzKCk7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICk7DQoNCiAgICBjb25zdCBidW5kbGVGb3JtYXQgPSAiMyINCg0KICAgIGNvbnN0IGxlZ2FjeUdhbWVQcm9wZXJ0aWVzID0gew0KICAgICAgcHJvZHVjdFZlcnNpb246ICIxLjAiLA0KICAgICAgZ3JhcGhpY3NBUEk6IFsiV2ViR0wgMS4wIl0sDQogICAgICB3ZWJnbENvbnRleHRBdHRyaWJ1dGVzOiB7IHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UgfSwNCiAgICAgIHNwbGFzaFNjcmVlblN0eWxlOiAiRGFyayIsDQogICAgICBiYWNrZ3JvdW5kQ29sb3I6ICIjMjMxRjIwIiwNCiAgICAgIGRldmVsb3BtZW50QnVpbGQ6IGZhbHNlLA0KICAgICAgbXVsdGl0aHJlYWRpbmc6IGZhbHNlLA0KICAgICAgdW5pdHlWZXJzaW9uOiAiMjAxOS4zLjE1ZjEiLA0KICAgICAgTW9kdWxlOiB7IHNwbGFzaFNjcmVlblN0eWxlOiAiRGFyayIsIHByZVJ1bjogW10gfQ0KICAgIH07DQoNCiAgICBsZXQgY29uZmlnOw0KICAgIGxldCBsb2FkZXJVcmw7DQogICAgbGV0IGNvbmZpZ0Jsb2JVcmw7DQogICAgbGV0IGVuY29kZWRDb25maWc7DQogICAgbGV0IGNvbmZpZ0Jsb2I7DQoNCiAgICBzd2l0Y2ggKGJ1bmRsZUZvcm1hdCkgew0KICAgICAgY2FzZSAiMSI6DQogICAgICAgIGxvYWRlclVybCA9ICIiDQoNCiAgICAgICAgY29uZmlnID0gew0KICAgICAgICAgIGRhdGFVcmw6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3RpbmthbGlzdGljL2p1bmsvcmVmcy9oZWFkcy9tYWluL2FuY2llbnRzaW5zL0J1aWxkL2dhbWUuZGF0YS5iciIsDQogICAgICAgICAgd2FzbUZyYW1ld29ya1VybDogImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9TdGlua2FsaXN0aWMvanVua0BtYWluL2FuY2llbnRzaW5zL0J1aWxkL2ZyYW1ld29yay5qcyIsDQogICAgICAgICAgYXNtQ29kZVVybDogIiIsDQogICAgICAgICAgYXNtTWVtb3J5VXJsOiAiIiwNCiAgICAgICAgICBhc21GcmFtZXdvcmtVcmw6ICIiLA0KICAgICAgICAgIHN0cmVhbWluZ0Fzc2V0c1VybDogImh0dHBzOi8vcGxheS51bml0eS5jb20vYXBpL3YxL2dhbWVzL2dhbWUvNDdmZDgzN2UtMDJkNi00NjE4LWJhNjYtZTNmNjM5ZjVkYTdkL2J1aWxkLzY2ZmZkMDdjLTgzOGYtNDU4YS04ODY1LTE5YjhmNzE1ODJmYi9zdHJlYW1pbmciLA0KICAgICAgICAgIGNvbXBhbnlOYW1lOiAicGxheS51bml0eS5jb20iLA0KICAgICAgICAgIHByb2R1Y3ROYW1lOiAiVW5pdHkgUGxheSBQcm9qZWN0IiwNCiAgICAgICAgICAuLi5sZWdhY3lHYW1lUHJvcGVydGllcw0KICAgICAgICB9Ow0KDQogICAgICAgIGVuY29kZWRDb25maWcgPSBKU09OLnN0cmluZ2lmeShjb25maWcpOw0KICAgICAgICBjb25maWdCbG9iID0gbmV3IEJsb2IoW2VuY29kZWRDb25maWddLCB7IHR5cGU6ICJhcHBsaWNhdGlvbi9qc29uIiB9KTsNCiAgICAgICAgY29uZmlnQmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoY29uZmlnQmxvYik7DQogICAgICAgIGJyZWFrOw0KICAgICAgY2FzZSAiMiI6DQogICAgICAgIGxvYWRlclVybCA9ICIiDQoNCiAgICAgICAgY29uZmlnID0gew0KICAgICAgICAgIGRhdGFVcmw6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3RpbmthbGlzdGljL2p1bmsvcmVmcy9oZWFkcy9tYWluL2FuY2llbnRzaW5zL0J1aWxkL2dhbWUuZGF0YS5iciIsDQogICAgICAgICAgd2FzbUZyYW1ld29ya1VybDogImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9TdGlua2FsaXN0aWMvanVua0BtYWluL2FuY2llbnRzaW5zL0J1aWxkL2ZyYW1ld29yay5qcyIsDQogICAgICAgICAgd2FzbUNvZGVVcmw6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3RpbmthbGlzdGljL2p1bmsvcmVmcy9oZWFkcy9tYWluL2FuY2llbnRzaW5zL0J1aWxkL2dhbWUud2FzbS53YXNtIiwNCiAgICAgICAgICBzdHJlYW1pbmdBc3NldHNVcmw6ICJodHRwczovL3BsYXkudW5pdHkuY29tL2FwaS92MS9nYW1lcy9nYW1lLzQ3ZmQ4MzdlLTAyZDYtNDYxOC1iYTY2LWUzZjYzOWY1ZGE3ZC9idWlsZC82NmZmZDA3Yy04MzhmLTQ1OGEtODg2NS0xOWI4ZjcxNTgyZmIvc3RyZWFtaW5nIiwNCiAgICAgICAgICBjb21wYW55TmFtZTogInBsYXkudW5pdHkuY29tIiwNCiAgICAgICAgICBwcm9kdWN0TmFtZTogIlVuaXR5IFBsYXkgUHJvamVjdCIsDQogICAgICAgICAgLi4ubGVnYWN5R2FtZVByb3BlcnRpZXMNCiAgICAgICAgfTsNCg0KICAgICAgICBlbmNvZGVkQ29uZmlnID0gSlNPTi5zdHJpbmdpZnkoY29uZmlnKTsNCiAgICAgICAgY29uZmlnQmxvYiA9IG5ldyBCbG9iKFtlbmNvZGVkQ29uZmlnXSwgeyB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIgfSk7DQogICAgICAgIGNvbmZpZ0Jsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGNvbmZpZ0Jsb2IpOw0KICAgICAgICBicmVhazsNCiAgICAgIGNhc2UgIjMiOg0KICAgICAgZGVmYXVsdDoNCiAgICAgICAgbG9hZGVyVXJsID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9TdGlua2FsaXN0aWMvanVua0BtYWluL2FuY2llbnRzaW5zL0J1aWxkL2xvYWRlci5qcyI7DQoNCiAgICAgICAgY29uZmlnID0gew0KICAgICAgICAgIGRhdGFVcmw6ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3RpbmthbGlzdGljL2p1bmsvcmVmcy9oZWFkcy9tYWluL2FuY2llbnRzaW5zL0J1aWxkL2dhbWUuZGF0YS5iciIsDQogICAgICAgICAgZnJhbWV3b3JrVXJsOiAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL1N0aW5rYWxpc3RpYy9qdW5rQG1haW4vYW5jaWVudHNpbnMvQnVpbGQvZnJhbWV3b3JrLmpzIiwNCiAgICAgICAgICBjb2RlVXJsOiAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1N0aW5rYWxpc3RpYy9qdW5rL3JlZnMvaGVhZHMvbWFpbi9hbmNpZW50c2lucy9CdWlsZC9nYW1lLndhc20ud2FzbSIsDQogICAgICAgICAgc3RyZWFtaW5nQXNzZXRzVXJsOiAiaHR0cHM6Ly9wbGF5LnVuaXR5LmNvbS9hcGkvdjEvZ2FtZXMvZ2FtZS80N2ZkODM3ZS0wMmQ2LTQ2MTgtYmE2Ni1lM2Y2MzlmNWRhN2QvYnVpbGQvNjZmZmQwN2MtODM4Zi00NThhLTg4NjUtMTliOGY3MTU4MmZiL3N0cmVhbWluZyIsDQogICAgICAgICAgY29tcGFueU5hbWU6ICJwbGF5LnVuaXR5LmNvbSIsDQogICAgICAgICAgcHJvZHVjdE5hbWU6ICJVbml0eSBQbGF5IFByb2plY3QiLA0KICAgICAgICAgIHByb2R1Y3RWZXJzaW9uOiAiMS4wIiwNCiAgICAgICAgfTsNCiAgICAgICAgYnJlYWs7DQogICAgfQ0KDQogICAgYXN5bmMgZnVuY3Rpb24gbG9hZEZlYXR1cmVzKCkgew0KICAgICAgY29uc3QgYXZhaWxhYmxlRmVhdHVyZXMgPSAiIi5zcGxpdCgnLCcpLm1hcCh4ID0+IHgudHJpbSgpKTsNCg0KICAgICAgaWYgKGF2YWlsYWJsZUZlYXR1cmVzLmluY2x1ZGVzKCd3ZWJncHUnKSkgew0KICAgICAgICBjb25zdCB3ZWJHUFVDYWNoZUxvYWRlclVybCA9ICIiOw0KICAgICAgICBjb25zdCB3ZWJHUFVDYWNoZURhdGFVcmwgPSAiIjsNCg0KICAgICAgICBjb25zb2xlLmxvZyhgTG9hZGluZyBXZWJHUFUgY2FjaGUgZGF0YS4uLmApOw0KICAgICAgICBhd2FpdCBsb2FkU2NyaXB0KHdlYkdQVUNhY2hlRGF0YVVybCk7DQoNCiAgICAgICAgY29uc29sZS5sb2coYExvYWRpbmcgV2ViR1BVIGNhY2hlIGxvYWRlci4uLmApOw0KICAgICAgICBhd2FpdCBsb2FkU2NyaXB0KHdlYkdQVUNhY2hlTG9hZGVyVXJsKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpbnN0YW50aWF0ZVVzaW5nVW5pdHlMb2FkZXIoKSB7DQogICAgICBjb25zdCByZXMgPSBVbml0eUxvYWRlci5pbnN0YW50aWF0ZSgidW5pdHktY29udGFpbmVyIiwgY29uZmlnQmxvYlVybCwgew0KICAgICAgICBvblByb2dyZXNzOiAoaW5zdGFuY2UsIHByb2dyZXNzKSA9PiB7DQogICAgICAgICAgZ2FtZUluc3RhbmNlID0gaW5zdGFuY2U7DQogICAgICAgICAgc2VuZFBhcmVudE1lc3NhZ2UoJ3Byb2dyZXNzJywgeyBwcm9ncmVzczogcHJvZ3Jlc3MgfSk7DQoNCiAgICAgICAgICAvLyBUaGlzIGxvYWRlciBkb2Vzbid0IGhhdmUgYW4gZXZlbnQgZm9yIGNvbXBsZXRpb24gYXMgZmFyIGFzIEkgY2FuIHRlbGwsIGJ1dCBpdCBkb2VzIGZpbmlzaCB0aGUgcHJvZ3Jlc3MgbG9hZCBvbiAwLjkNCiAgICAgICAgICBpZiAocHJvZ3Jlc3MgPT09IDAuOSkgew0KICAgICAgICAgICAgc2VuZFBhcmVudE1lc3NhZ2UoJ3JlYWR5Jywge30pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgTW9kdWxlOiB7DQogICAgICAgICAgcmVzb2x2ZUJ1aWxkVXJsOiAoZSkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGU7DQogICAgICAgICAgfSwNCiAgICAgICAgICBsb2NhdGVGaWxlOiAoZSkgPT4gew0KICAgICAgICAgICAgaWYgKGUgPT09ICdidWlsZC53YXNtJykgew0KICAgICAgICAgICAgICByZXR1cm4gY29uZmlnWyd3YXNtQ29kZVVybCddOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gZTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBpbnN0YW50aWF0ZVVzaW5nQ3JlYXRlVW5pdHlJbnN0YW5jZSgpIHsNCiAgICAgIGNyZWF0ZVVuaXR5SW5zdGFuY2UoY2FudmFzLCBjb25maWcsIChwcm9ncmVzcykgPT4gew0KICAgICAgICBzZW5kUGFyZW50TWVzc2FnZSgncHJvZ3Jlc3MnLCB7IHByb2dyZXNzOiBwcm9ncmVzcyB9KTsNCiAgICAgIH0pLnRoZW4oaW5zdGFuY2UgPT4gew0KICAgICAgICBnYW1lSW5zdGFuY2UgPSBpbnN0YW5jZTsNCiAgICAgICAgc2VuZFBhcmVudE1lc3NhZ2UoJ3JlYWR5Jywge30pOw0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICBzZW5kUGFyZW50TWVzc2FnZSgnZXJyb3InLCB7IGVycm9yOiBlcnJvciB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHBhdGNoVW5pdHlMb2FkZXIobG9hZGVyU291cmNlKSB7DQogICAgICAvLyBPbGRlciB2ZXJzaW9ucyBvZiB0aGUgbG9hZGVyIHdpbGwgb25seSBpZGVudGlmeSBhbmQgcmVzcGVjdCBjb21wcmVzc2lvbiBpZiB0aGUgZmlsZSBlbmRzIGluIC51bml0eXdlYg0KICAgICAgLy8gQmVjYXVzZSB0aGlzIGZvcm1hdCBoYXMgY2hhbmdlZCwgd2UgbmVlZCB0byBwYXRjaCB0aGUgb2xkIGxvYWRlcnMgdG8gYWx3YXlzIHJlc3BlY3QgY29tcHJlc3Npb24NCg0KICAgICAgaWYgKGxvYWRlclNvdXJjZS5pbmRleE9mKCdlLndhc21Db2RlVXJsLmVuZHNXaXRoKCIudW5pdHl3ZWIiKScpICE9PSAtMSkgew0KICAgICAgICByZXR1cm4gbG9hZGVyU291cmNlLnJlcGxhY2UoJ2Uud2FzbUNvZGVVcmwuZW5kc1dpdGgoIi51bml0eXdlYiIpJywgJyhlLndhc21Db2RlVXJsLmVuZHNXaXRoKCIudW5pdHl3ZWIiKSB8fCB0cnVlKScpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGxvYWRlclNvdXJjZTsNCiAgICB9DQoNCiAgICBhc3luYyBmdW5jdGlvbiBnZXRQYXRjaGVkVW5pdHlMb2FkZXJVcmwoKSB7DQogICAgICBjb25zdCBsb2FkZXJTb3VyY2VSZXNwb25zZSA9IGF3YWl0IGZldGNoKGxvYWRlclVybCk7DQogICAgICBjb25zdCBsb2FkZXJTb3VyY2UgPSBhd2FpdCBsb2FkZXJTb3VyY2VSZXNwb25zZS50ZXh0KCk7DQogICAgICBjb25zdCBwYXRjaGVkTG9hZGVyU291cmNlID0gcGF0Y2hVbml0eUxvYWRlcihsb2FkZXJTb3VyY2UpOw0KICAgICAgY29uc3QgcGF0Y2hlZExvYWRlckJsb2IgPSBuZXcgQmxvYihbcGF0Y2hlZExvYWRlclNvdXJjZV0sIHsgdHlwZTogImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiIH0pOw0KICAgICAgY29uc3QgcGF0Y2hlZExvYWRlclVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwocGF0Y2hlZExvYWRlckJsb2IpOw0KDQogICAgICByZXR1cm4gcGF0Y2hlZExvYWRlclVybDsNCiAgICB9DQoNCiAgICBhc3luYyBmdW5jdGlvbiBpbnN0YW50aWF0ZVVuaXR5TG9hZGVyKCkgew0KICAgICAgY29uc3QgcGF0Y2hlZFVuaXR5TG9hZGVyVXJsID0gYXdhaXQgZ2V0UGF0Y2hlZFVuaXR5TG9hZGVyVXJsKCk7DQoNCiAgICAgIGF3YWl0IGxvYWRTY3JpcHQocGF0Y2hlZFVuaXR5TG9hZGVyVXJsKTsNCg0KICAgICAgc3dpdGNoIChidW5kbGVGb3JtYXQpIHsNCiAgICAgICAgY2FzZSAiMSI6DQogICAgICAgIGNhc2UgIjIiOg0KICAgICAgICAgIGluc3RhbnRpYXRlVXNpbmdVbml0eUxvYWRlcigpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICIzIjoNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICBpbnN0YW50aWF0ZVVzaW5nQ3JlYXRlVW5pdHlJbnN0YW5jZSgpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCAoKSA9PiB7DQogICAgICBsb2FkRmVhdHVyZXMoKS50aGVuKCgpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coYEluaXRpYWxpemluZyBVbml0eSBsb2FkZXIuLi5gKTsNCiAgICAgICAgaW5zdGFudGlhdGVVbml0eUxvYWRlcigpOw0KICAgICAgfSkuY2F0Y2goZSA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGZlYXR1cmVzIC0gJHtlfWApOw0KICAgICAgfSk7DQogICAgfSk7DQogIDwvc2NyaXB0Pg0KDQoNCjxzY3JpcHQgc3JjPSJibG9iOmh0dHBzOi8vcGxheS51bml0eS5jb20vZTRkYzQ0YTQtNjI4My00YjQ3LWI1MmYtMTdiNjg2ZGVhMDUxIj48L3NjcmlwdD48c2NyaXB0IHNyYz0iaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL3VuaXR5LXBsYXktcHJkLXJlc291cmNlLWJ1Y2tldC9nYW1lcy80N2ZkODM3ZS0wMmQ2LTQ2MTgtYmE2Ni1lM2Y2MzlmNWRhN2QvNjZmZmQwN2MtODM4Zi00NThhLTg4NjUtMTliOGY3MTU4MmZiL2ZyYW1ld29yay5qcy5icj9Hb29nbGVBY2Nlc3NJZD11bml0eS1wbGF5LXByZC1hcGktc2ElNDB1bml0eS1wbGF5LXdlYi1zaXRlLXByZC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSZhbXA7RXhwaXJlcz0xNzQ4MDUyMzQ2JmFtcDtTaWduYXR1cmU9YTMwRnMwVUZPeTdNSUdSZ0pMRmxlOHRTdXl5UXIxMWtMRzdjZGJLN2VpVE92TzdDUHZURlFrdGZwNHkyYVNuS095c0RWZldMRmZLZWJORmwzb0k3U2FzUlVuMzMlMkJyeWUzS1FCeDRBeERYeFI5eCUyRjE3aGxxT0hSbjMyMXZYJTJCeXptYUhoVHZDUFp2eTNsTnpSSzdhRzJNcGxjVDhoM0ZSSmlxJTJCYm5hR0olMkZUMHU5amU0c0xkRVUxSSUyQjBHbXFWMW1CMlZVVU1adTUxOWFpWjZOOW5PUGtialhlUkFSaXZWSXBiWVhqWjI2MDFKZWtZN1EwWktLdnhtOWk5TlpXRDg4a0hJRFRVRSUyRk9vJTJGZUlKVHhkM21KVnZQbDJuYUpFJTJCOWR2WUw0RTJ0Rkl4UGtXYkpRcXNSWkc2eVllQkE2OTlydERhS0pLOWRrbGdRRVZmU2ZyZ2NpbFFnJTNEJTNEIj48L3NjcmlwdD48L2JvZHk+PC9odG1sPg==";
