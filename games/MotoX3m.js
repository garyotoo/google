window.game = "DQo8IS0tIFVsdGltYXRlIEdhbWUgU3Rhc2ggZmlsZS0tPiANCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPg0KDQoNCg0KPGh0bWw+PGhlYWQ+PGJhc2UgdGFyZ2V0PSJfYmxhbmsiPg0KDQoNCiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogICAgPHN0eWxlPg0KICAgICAgICBodG1sLCBib2R5IHsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdzogaGlkZGVuOyBmb250LWZhbWlseTogIkdpbGwgU2FucyIsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyB9DQogICAgICAgIC5nYW1lLWVtYmVkLWNvbnRhaW5lciB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjc0ZTEzOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGNvbG9yOiB3aGl0ZTsgdGV4dC1hbGlnbjogY2VudGVyOyB9DQogICAgICAgIC5idXR0b24td3JhcHBlciB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMjVweDsgcGFkZGluZzogMjBweDsgd2lkdGg6IDEwMCU7IG1heC13aWR0aDogNTUwcHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0NCiAgICAgICAgLmxvZ28tdGV4dCB7IGZvbnQtZmFtaWx5OiAiR2lsbCBTYW5zIiwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAyLjVyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2ZmZmZmZjsgdGV4dC1zaGFkb3c6IDJweCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC42KTsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0NCiAgICAgICAgLmJ1dHRvbi1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDE1cHg7IHdpZHRoOiAxMDAlOyB9DQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgeyAuYnV0dG9uLWdyaWQgeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgfSAubG9nby10ZXh0IHsgZm9udC1zaXplOiAycmVtOyB9IH0NCiAgICAgICAgLmMtYnV0dG9uIHsgbWluLWhlaWdodDogNTBweDsgYXBwZWFyYW5jZTogbm9uZTsgYm9yZGVyOiAycHggc29saWQgcmdiYSgwLDAsMCwwLjIpOyBib3JkZXItcmFkaXVzOiA4cHg7IGNvbG9yOiAjZmZmZmZmOyBwYWRkaW5nOiAxMHB4IDE1cHg7IGZvbnQtc2l6ZTogMThweDsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLWluLW91dDsgdGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0NCiAgICAgICAgLmJ0bi1wcmltYXJ5IHsgYmFja2dyb3VuZDogIzZhYTg0ZjsgfQ0KICAgICAgICAuYnRuLXByaW1hcnk6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjOGZiYzhmOyBib3JkZXItY29sb3I6ICNhMmQxYTI7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsgfQ0KICAgICAgICAuYnRuLWFsdCB7IGJhY2tncm91bmQ6ICMwNzM3NjM7IH0NCiAgICAgICAgLmJ0bi1hbHQ6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjM2Q4NWM2OyBib3JkZXItY29sb3I6ICM2ZjlhYzQ7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsgfQ0KICAgICAgICAuYy1idXR0b246Zm9jdXMgeyBvdXRsaW5lOiBub25lOyBib3gtc2hhZG93OiAwIDAgMCA0cHggI2NiZDZlZTsgfQ0KICAgICAgICAuYy1idXR0b246ZGlzYWJsZWQgeyBiYWNrZ3JvdW5kOiAjNTU1OyBjdXJzb3I6IG5vdC1hbGxvd2VkOyB9DQogICAgICAgIC5nYW1lLWVtYmVkLWNvbnRhaW5lciBpZnJhbWUgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBib3JkZXI6IG5vbmU7IH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHkgZGF0YS1uZXctZ3ItYy1zLWxvYWRlZD0iMTQuMTI1NS4wIj4NCiAgICA8ZGl2IGlkPSJnYW1lQ29udGFpbmVyIiBjbGFzcz0iZ2FtZS1lbWJlZC1jb250YWluZXIiPjxpZnJhbWUgc3JjPSJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYnc3X3pHMDJaTVhuUFNkd0N4MENjbU44ZVhfMEJrMzcxNVRTUC1FZ2xiMUR5VmhwN1J4U2h1WHE0cUo4UTJzN2NuVy9leGVjIj48L2lmcmFtZT48L2Rpdj4NCiAgICA8c2NyaXB0Pg0KICAgICAgICBjb25zdCBnYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVDb250YWluZXInKTsNCiAgICAgICAgY29uc3QgYnV0dG9uV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b25XcmFwcGVyJyk7DQogICAgICAgIGNvbnN0IGdvb2dsZVNjcmlwdFVybCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYnc3X3pHMDJaTVhuUFNkd0N4MENjbU44ZVhfMEJrMzcxNVRTUC1FZ2xiMUR5VmhwN1J4U2h1WHE0cUo4UTJzN2NuVy9leGVjIjsNCiAgICAgICAgY29uc3QgZ2FtZVhtbFVybCA9ICJodHRwczovLzEyMDE2NDIxOC0xMDE0NTE2MTY5MzQ3Nzk1MTYucHJldmlldy5lZGl0bXlzaXRlLmNvbS91cGxvYWRzL2IvMTM5ODkwMTI5LTYyNDA2OTEyMDExNDYyNjEzNi9maWxlcy9tM20ueG1sIjsNCiAgICAgICAgY29uc3QgZmF2aWNvblVybCA9ICJodHRwczovL3NzbC5nc3RhdGljLmNvbS9jbGFzc3Jvb20vZmF2aWNvbi5wbmciOw0KICAgICAgICBjb25zdCBwYWdlVGl0bGUgPSAiY2xhc3Nyb29tLmdvb2dsZS5jb20iOw0KICAgICAgICBjb25zdCBwbGF5UHJpbWFyeUlubGluZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5UHJpbWFyeUlubGluZScpOw0KICAgICAgICBjb25zdCBwbGF5UHJpbWFyeUZ1bGxzY3JlZW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheVByaW1hcnlGdWxsc2NyZWVuJyk7DQogICAgICAgIHBsYXlQcmltYXJ5SW5saW5lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgZ2FtZUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOw0KICAgICAgICAgICAgaWZyYW1lLnNyYyA9IGdvb2dsZVNjcmlwdFVybDsNCiAgICAgICAgICAgIGdhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTsNCiAgICAgICAgfSk7DQogICAgICAgIHBsYXlQcmltYXJ5RnVsbHNjcmVlbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IG5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJyk7DQogICAgICAgICAgICBpZiAoIW5ld1dpbmRvdykgcmV0dXJuIGFsZXJ0KCJQbGVhc2UgYWxsb3cgcG9wLXVwcy4iKTsNCiAgICAgICAgICAgIG5ld1dpbmRvdy5kb2N1bWVudC53cml0ZShgPCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+PHRpdGxlPiR7cGFnZVRpdGxlfTwvdGl0bGU+PGxpbmsgcmVsPSJpY29uIiBocmVmPSIke2Zhdmljb25Vcmx9Ij48c3R5bGU+Ym9keSxodG1se21hcmdpbjowO3BhZGRpbmc6MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbjt9aWZyYW1le3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjpub25lO308L3N0eWxlPjwvaGVhZD48Ym9keT48aWZyYW1lIHNyYz0iJHtnb29nbGVTY3JpcHRVcmx9IiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+PC9ib2R5PjwvaHRtbD5gKTsNCiAgICAgICAgICAgIG5ld1dpbmRvdy5kb2N1bWVudC5jbG9zZSgpOw0KICAgICAgICB9KTsNCiAgICAgICAgY29uc3QgcGxheUFsdElubGluZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5QWx0SW5saW5lJyk7DQogICAgICAgIGNvbnN0IHBsYXlBbHRGdWxsc2NyZWVuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXlBbHRGdWxsc2NyZWVuJyk7DQogICAgICAgIGxldCByZWFkeUh0bWxDb250ZW50ID0gbnVsbDsNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUdhbWVDb250ZW50KCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goZ2FtZVhtbFVybCk7DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIFhNTDogJHtyZXNwLnN0YXR1c30gJHtyZXNwLnN0YXR1c1RleHR9YCk7DQogICAgICAgICAgICAgICAgY29uc3QgeG1sVGV4dCA9IGF3YWl0IHJlc3AudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB4bWxEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHhtbFRleHQsICJhcHBsaWNhdGlvbi94bWwiKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50Tm9kZSA9IHhtbERvYy5xdWVyeVNlbGVjdG9yKCJDb250ZW50Iik7DQogICAgICAgICAgICAgICAgaWYgKCFjb250ZW50Tm9kZSkgdGhyb3cgbmV3IEVycm9yKCI8Q29udGVudD4gbm90IGZvdW5kIGluIFhNTCIpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gY29udGVudE5vZGUudGV4dENvbnRlbnQ7DQogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sQ29udGVudCwgJ3RleHQvaHRtbCcpOw0KICAgICAgICAgICAgICAgIGlmICghZG9jLmhlYWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZEVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2hlYWQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmRvY3VtZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoaGVhZEVsLCBkb2MuZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsZXQgdGl0bGVUYWcgPSBkb2MucXVlcnlTZWxlY3RvcigndGl0bGUnKTsNCiAgICAgICAgICAgICAgICBpZiAoIXRpdGxlVGFnKSB7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlVGFnID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RpdGxlJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKHRpdGxlVGFnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGl0bGVUYWcudGV4dENvbnRlbnQgPSBwYWdlVGl0bGU7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmYXZpY29uTGluayA9IGRvYy5jcmVhdGVFbGVtZW50KCdsaW5rJyk7DQogICAgICAgICAgICAgICAgZmF2aWNvbkxpbmsucmVsID0gJ2ljb24nOw0KICAgICAgICAgICAgICAgIGZhdmljb25MaW5rLmhyZWYgPSBmYXZpY29uVXJsOw0KICAgICAgICAgICAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKGZhdmljb25MaW5rKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbmplY3RlZEhvc3QgPSBKU09OLnN0cmluZ2lmeSh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluamVjdGVkSHJlZiA9IEpTT04uc3RyaW5naWZ5KHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzaGltQ29kZSA9IGAoZnVuY3Rpb24oKXtjb25zdCBpbmplY3RlZERvbWFpbj0ke2luamVjdGVkSG9zdH0saW5qZWN0ZWRIcmVmPSR7aW5qZWN0ZWRIcmVmfSx0YXJnZXRIb3N0cz1bImFwaS5nYW1lbW9uZXRpemUuY29tIiwiZ2FtZW1vbmV0aXplLmNvbSIsImdhbWVkaXN0cmlidXRpb24uY29tIiwiYWRzLmdhbWVkaXN0cmlidXRpb24uY29tIl07dHJ5e3dpbmRvdy5mdWxsZG9tYWluPWluamVjdGVkSHJlZix3aW5kb3cuX2luamVjdGVkX3JlYWxfaG9zdD1pbmplY3RlZERvbWFpbn1jYXRjaChlKXt9ZnVuY3Rpb24gc2hvdWxkUGF0Y2godXJsKXt0cnl7cmV0dXJuISF1cmwmJnRhcmdldEhvc3RzLnNvbWUoaD0+LTEhPT11cmwuaW5kZXhPZihoKSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIHJlcGxhY2VEb21haW5QYXJhbSh1KXt0cnl7Y29uc3QgdmFsPXUuc2VhcmNoUGFyYW1zLmdldCgiZG9tYWluIik7cmV0dXJuIXZhbHx8IiI9PT12YWwudHJpbSgpfHx2YWwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCJibG9iIik/KHUuc2VhcmNoUGFyYW1zLnNldCgiZG9tYWluIixpbmplY3RlZERvbWFpbiksITApOiExfWNhdGNoKGUpe3JldHVybiExfX10cnl7Y29uc3QgX2ZldGNoPXdpbmRvdy5mZXRjaDt3aW5kb3cuZmV0Y2g9ZnVuY3Rpb24oaW5wdXQsaW5pdCl7dHJ5e2xldCB1cmxTdHI9bnVsbDsic3RyaW5nIj09dHlwZW9mIGlucHV0P3VybFN0cj1pbnB1dDppbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QmJih1cmxTdHI9aW5wdXQudXJsKTtpZih1cmxTdHImJnNob3VsZFBhdGNoKHVybFN0cikpe2NvbnN0IHV1PW5ldyBVUkwodXJsU3RyLGxvY2F0aW9uLmhyZWYpO3JlcGxhY2VEb21haW5QYXJhbSh1dSksInN0cmluZyI9PXR5cGVvZiBpbnB1dD9pbnB1dD11dS50b1N0cmluZygpOmlucHV0PW5ldyBSZXF1ZXN0KHV1LnRvU3RyaW5nKCksaW5wdXQpfX1jYXRjaChlKXt9cmV0dXJuIF9mZXRjaC5jYWxsKHRoaXMsaW5wdXQsaW5pdCl9fWNhdGNoKGUpe310cnl7Y29uc3QgX29wZW49WE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW4sX3NlbmQ9WE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7WE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24obWV0aG9kLHVybCxhc3luYyx1c2VyLHBhc3Mpe3RyeXt0aGlzLl9zaGltX3VybD11cmwsdGhpcy5fc2hpbV9tZXRob2Q9bWV0aG9kfWNhdGNoKGUpe31yZXR1cm4gX29wZW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihib2R5KXt0cnl7aWYodGhpcy5fc2hpbV91cmwmJnNob3VsZFBhdGNoKHRoaXMuX3NoaW1fdXJsKSl7Y29uc3QgdXU9bmV3IFVSTCh0aGlzLl9zaGltX3VybCxsb2NhdGlvbi5ocmVmKTtyZXBsYWNlRG9tYWluUGFyYW0odXUpLF9vcGVuLmNhbGwodGhpcyx0aGlzLl9zaGltX21ldGhvZHx8IkdFVCIsdXUudG9TdHJpbmcoKSwhMCl9fWNhdGNoKGUpe31yZXR1cm4gX3NlbmQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1jYXRjaChlKXt9dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwicmVmZXJyZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaW5qZWN0ZWRIcmVmfSxjb25maWd1cmFibGU6ITB9KX1jYXRjaChlKXt0cnl7ZG9jdW1lbnQucmVmZXJyZXI9aW5qZWN0ZWRIcmVmfWNhdGNoKGUpe319fSkoKTtgOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNoaW1TY3JpcHRUYWcgPSBkb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7DQogICAgICAgICAgICAgICAgc2hpbVNjcmlwdFRhZy50ZXh0Q29udGVudCA9IHNoaW1Db2RlOw0KICAgICAgICAgICAgICAgIGRvYy5oZWFkLnByZXBlbmQoc2hpbVNjcmlwdFRhZyk7DQogICAgICAgICAgICAgICAgY29uc3QgYWxsU2NyaXB0cyA9IEFycmF5LmZyb20oZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdFtzcmNdJykpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVTY3JpcHRzID0gYWxsU2NyaXB0cy5maWx0ZXIocyA9PiAhcy5zcmMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaW1hc2RrLmdvb2dsZWFwaXMuY29tJykgJiYgIXMuc3JjLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Nkbi5qc2RlbGl2ci5uZXQnKSAmJiAhcy5zcmMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ29vZ2xldGFnbWFuYWdlcicpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtYWluU2NyaXB0VGFnID0gZ2FtZVNjcmlwdHMucG9wKCk7DQogICAgICAgICAgICAgICAgaWYgKCFtYWluU2NyaXB0VGFnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUYWcgPSBkb2MuY3JlYXRlRWxlbWVudCgnYmFzZScpOw0KICAgICAgICAgICAgICAgICAgICBiYXNlVGFnLmhyZWYgPSBnYW1lWG1sVXJsLnN1YnN0cmluZygwLCBnYW1lWG1sVXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmhlYWQucHJlcGVuZChiYXNlVGFnKTsNCiAgICAgICAgICAgICAgICAgICAgcmVhZHlIdG1sQ29udGVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IG1haW5Kc1VybCA9IG1haW5TY3JpcHRUYWcuc3JjOw0KICAgICAgICAgICAgICAgIGxldCBtYWluSnNUZXh0ID0gYXdhaXQgKGF3YWl0IGZldGNoKG1haW5Kc1VybCkpLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBydW50aW1lTGlzdFJlZ2V4ID0gL3J1bnRpbWVTY3JpcHRMaXN0XHMqOlxzKlxbXHMqWyInXShbXiInXSspWyInXVxzKlxdLzsNCiAgICAgICAgICAgICAgICBjb25zdCBydW50aW1lTWF0Y2ggPSBtYWluSnNUZXh0Lm1hdGNoKHJ1bnRpbWVMaXN0UmVnZXgpOw0KICAgICAgICAgICAgICAgIGlmIChydW50aW1lTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgbWFpbkpzVGV4dCA9IG1haW5Kc1RleHQucmVwbGFjZSgnc2NyaXB0Rm9sZGVyOiJzY3JpcHRzLyInLCAnc2NyaXB0Rm9sZGVyOiIiJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGMzUnVudGltZVVybCA9IHJ1bnRpbWVNYXRjaFsxXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGMzUnVudGltZVRleHQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goYzNSdW50aW1lVXJsKSkudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICBjM1J1bnRpbWVUZXh0ID0gYzNSdW50aW1lVGV4dC5yZXBsYWNlKCduZXcgVVJMKGZ1bGxkb21haW4pLmhvc3RuYW1lLnNwbGl0KCIuIiknLCAnKGZ1bGxkb21haW4gJiYgIWZ1bGxkb21haW4uc3RhcnRzV2l0aCgiYmxvYjoiKSA/IG5ldyBVUkwoZnVsbGRvbWFpbikuaG9zdG5hbWUgOiAibG9jYWxob3N0Iikuc3BsaXQoIi4iKScpOw0KICAgICAgICAgICAgICAgICAgICBjM1J1bnRpbWVUZXh0ID0gYzNSdW50aW1lVGV4dC5yZXBsYWNlKCdkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGltZyk7JywgJ2lmIChkb2N1bWVudC5ib2R5KSB7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW1nKTsgfSBlbHNlIHsgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCAoKSA9PiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGltZykpOyB9Jyk7DQogICAgICAgICAgICAgICAgICAgIG1haW5Kc1RleHQgPSBtYWluSnNUZXh0LnJlcGxhY2UocnVudGltZUxpc3RSZWdleCwgJ3J1bnRpbWVTY3JpcHRMaXN0OltdJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGMzUnVudGltZVNjcmlwdFRhZyA9IGRvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsNCiAgICAgICAgICAgICAgICAgICAgYzNSdW50aW1lU2NyaXB0VGFnLnRleHRDb250ZW50ID0gYzNSdW50aW1lVGV4dDsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoYzNSdW50aW1lU2NyaXB0VGFnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbWFpblNjcmlwdFRhZy5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBuZXdNYWluU2NyaXB0VGFnID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOw0KICAgICAgICAgICAgICAgIGlmIChtYWluU2NyaXB0VGFnLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnbW9kdWxlJykgbmV3TWFpblNjcmlwdFRhZy50eXBlID0gJ21vZHVsZSc7DQogICAgICAgICAgICAgICAgbmV3TWFpblNjcmlwdFRhZy50ZXh0Q29udGVudCA9IG1haW5Kc1RleHQ7DQogICAgICAgICAgICAgICAgKGRvYy5ib2R5IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKG5ld01haW5TY3JpcHRUYWcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUYWcgPSBkb2MuY3JlYXRlRWxlbWVudCgnYmFzZScpOw0KICAgICAgICAgICAgICAgIGJhc2VUYWcuaHJlZiA9IGdhbWVYbWxVcmwuc3Vic3RyaW5nKDAsIGdhbWVYbWxVcmwubGFzdEluZGV4T2YoJy8nKSArIDEpOw0KICAgICAgICAgICAgICAgIGRvYy5oZWFkLnByZXBlbmQoYmFzZVRhZyk7DQogICAgICAgICAgICAgICAgcmVhZHlIdG1sQ29udGVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgZ2FtZUNvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iY29sb3I6cmVkO3BhZGRpbmc6MjBweDsiPkVycm9yOiAke2Vyci5tZXNzYWdlfTwvZGl2PmA7DQogICAgICAgICAgICAgICAgcGxheUFsdElubGluZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgcGxheUFsdEZ1bGxzY3JlZW5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHByZXBhcmVHYW1lQ29udGVudCgpOw0KICAgICAgICBmdW5jdGlvbiBsYXVuY2hBbHRHYW1lKGlzSW5saW5lKSB7DQogICAgICAgICAgICBpZiAoIXJlYWR5SHRtbENvbnRlbnQpIHJldHVybiBhbGVydCgnR2FtZSBpcyBub3QgcmVhZHkgeWV0LiBQbGVhc2Ugd2FpdC4nKTsNCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcmVhZHlIdG1sQ29udGVudF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSk7DQogICAgICAgICAgICBjb25zdCBnYW1lVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGlmIChpc0lubGluZSkgew0KICAgICAgICAgICAgICAgIGdhbWVDb250YWluZXIuaW5uZXJIVE1MID0gJyc7DQogICAgICAgICAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7DQogICAgICAgICAgICAgICAgaWZyYW1lLnNyYyA9IGdhbWVVcmw7DQogICAgICAgICAgICAgICAgZ2FtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpZnJhbWUpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCBuZXdXaW4gPSB3aW5kb3cub3BlbihnYW1lVXJsLCAnX2JsYW5rJyk7DQogICAgICAgICAgICAgICAgaWYgKCFuZXdXaW4pIGFsZXJ0KCdQbGVhc2UgYWxsb3cgcG9wdXBzIGZvciB0aGlzIHNpdGUuJyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcGxheUFsdElubGluZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGxhdW5jaEFsdEdhbWUodHJ1ZSkpOw0KICAgICAgICBwbGF5QWx0RnVsbHNjcmVlbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGxhdW5jaEFsdEdhbWUoZmFsc2UpKTsNCiAgICA8L3NjcmlwdD4NCg0KPC9ib2R5PjxncmFtbWFybHktZGVza3RvcC1pbnRlZ3JhdGlvbiBkYXRhLWdyYW1tYXJseS1zaGFkb3ctcm9vdD0idHJ1ZSI+PC9ncmFtbWFybHktZGVza3RvcC1pbnRlZ3JhdGlvbj48L2h0bWw+";
