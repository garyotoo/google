window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCiANCg0KDQoNCjwhRE9DVFlQRSBodG1sPg0KPGJhc2UgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2dlbml6eS9jZy1yaXBAbWFpbi9ncm93ZGVuLmlvLyI+DQo8aHRtbCBsYW5nPSJlbi11cyI+PGhlYWQ+PG1ldGEgY2hhcnNldD0idXRmLTgiPjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xLG1heGltdW0tc2NhbGU9MSx1c2VyLXNjYWxhYmxlPW5vIj48bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiPjxiYXNlIGhyZWY9Ii8iPjx0aXRsZT5Hcm93IGEgR2FyZGVuIGluIEdyb3dkZW4uaW8gfCBGcmVlIEdhcmRlbiBHYW1lPC90aXRsZT48bWV0YSBuYW1lPSJkZXNjcmlwdGlvbiIgY29udGVudD0iR3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCB0aGUgZnJlZSBvbmxpbmUgZ2FyZGVuIGdhbWUgYW5kIGZhcm1pbmcgc2ltdWxhdG9yLiBQbGFudCwgZ3JvdywgYW5kIGhhcnZlc3Qgd2l0aCBmcmllbmRzIHdvcmxkd2lkZS4iPjxtZXRhIG5hbWU9ImtleXdvcmRzIiBjb250ZW50PSJHcm93IGEgZ2FyZGVuLCBHcm93ZGVuLmlvLCBHcm93ZGVuLCBpbyBnYW1lcywgc2ltdWxhdG9yLCBnYXJkZW4gZ2FtZSwgZmFybWluZyBnYW1lLCBmYXJtLCBnYXJkZW4sIEdyb3dkZW4gaW8sIG9ubGluZSBnYXJkZW5pbmcsIHBsYW50IGdyb3dpbmcgZ2FtZSwgbXVsdGlwbGF5ZXIgZmFybWluZyI+PG1ldGEgbmFtZT0iYXV0aG9yIiBjb250ZW50PSJMZWdpb24gUGxhdGZvcm1zIj48bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9ImluZGV4LCBmb2xsb3ciPjxtZXRhIG5hbWU9InRoZW1lLWNvbG9yIiBjb250ZW50PSIjMmU3ZDMyIj48bWV0YSBuYW1lPSJ0b3VjaC1hY3Rpb24iIGNvbnRlbnQ9Im1hbmlwdWxhdGlvbiI+PGxpbmsgcmVsPSJkbnMtcHJlZmV0Y2giIGhyZWY9Imh0dHBzOi8vZmlsZXMuZ3Jvd2Rlbi5pby8iPjxsaW5rIHJlbD0iY2Fub25pY2FsIiBocmVmPSJodHRwczovL2dyb3dkZW4uaW8vIj48bGluayByZWw9Imljb24iIGhyZWY9Imh0dHBzOi8vZ3Jvd2Rlbi5pby9mYXZpY29uL2Zhdmljb24uaWNvIiB0eXBlPSJpbWFnZS94LWljb24iPjxtZXRhIHByb3BlcnR5PSJvZzp0eXBlIiBjb250ZW50PSJ3ZWJzaXRlIj48bWV0YSBwcm9wZXJ0eT0ib2c6dGl0bGUiIGNvbnRlbnQ9Ikdyb3cgYSBHYXJkZW4gaW4gR3Jvd2Rlbi5pbyB8IEZyZWUgR2FyZGVuIEdhbWUiPjxtZXRhIHByb3BlcnR5PSJvZzpkZXNjcmlwdGlvbiIgY29udGVudD0iR3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCB0aGUgZnJlZSBvbmxpbmUgZ2FyZGVuIGdhbWUgYW5kIGZhcm1pbmcgc2ltdWxhdG9yLiBQbGFudCwgZ3JvdywgYW5kIGhhcnZlc3Qgd2l0aCBmcmllbmRzIHdvcmxkd2lkZS4iPjxtZXRhIHByb3BlcnR5PSJvZzppbWFnZSIgY29udGVudD0iaHR0cHM6Ly9ncm93ZGVuLmlvL2JhY2tncm91bmQtb2cud2VicCI+PG1ldGEgcHJvcGVydHk9Im9nOmltYWdlOmFsdCIgY29udGVudD0iR3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCBmcmVlIG9ubGluZSBnYXJkZW4gZ2FtZSI+PG1ldGEgcHJvcGVydHk9Im9nOnVybCIgY29udGVudD0iaHR0cHM6Ly9ncm93ZGVuLmlvIj48bWV0YSBwcm9wZXJ0eT0ib2c6c2l0ZV9uYW1lIiBjb250ZW50PSJHcm93ZGVuLmlvIj48bWV0YSBwcm9wZXJ0eT0ib2c6bG9jYWxlIiBjb250ZW50PSJlbl9VUyI+PG1ldGEgcHJvcGVydHk9Im9nOnVwZGF0ZWRfdGltZSIgY29udGVudD0iMjAyNS0wOC0wOFQxMjowMDowMFoiPjxtZXRhIHByb3BlcnR5PSJvZzpkZXRlcm1pbmVyIiBjb250ZW50PSJ0aGUiPjxtZXRhIG5hbWU9InR3aXR0ZXI6Y2FyZCIgY29udGVudD0ic3VtbWFyeV9sYXJnZV9pbWFnZSI+PG1ldGEgbmFtZT0idHdpdHRlcjp0aXRsZSIgY29udGVudD0iR3JvdyBhIEdhcmRlbiBpbiBHcm93ZGVuLmlvIHwgRnJlZSBHYXJkZW4gR2FtZSI+PG1ldGEgbmFtZT0idHdpdHRlcjpkZXNjcmlwdGlvbiIgY29udGVudD0iR3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCB0aGUgZnJlZSBvbmxpbmUgZ2FyZGVuIGdhbWUgYW5kIGZhcm1pbmcgc2ltdWxhdG9yLiBQbGFudCwgZ3JvdywgYW5kIGhhcnZlc3Qgd2l0aCBmcmllbmRzIHdvcmxkd2lkZS4iPjxtZXRhIG5hbWU9InR3aXR0ZXI6aW1hZ2UiIGNvbnRlbnQ9Imh0dHBzOi8vZ3Jvd2Rlbi5pby9iYWNrZ3JvdW5kLW9nLndlYnAiPjxtZXRhIG5hbWU9InR3aXR0ZXI6aW1hZ2U6YWx0IiBjb250ZW50PSJHcm93IGEgZ2FyZGVuIGluIEdyb3dkZW4uaW8g4oCUIGZyZWUgb25saW5lIGdhcmRlbiBnYW1lIj48c2NyaXB0IGFzeW5jIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcz9pZD1HLVlSSzlLVFdKNUUiPjwvc2NyaXB0PjxzY3JpcHQ+d2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107DQogICAgZnVuY3Rpb24gZ3RhZygpe2RhdGFMYXllci5wdXNoKGFyZ3VtZW50cyk7fQ0KICAgIGd0YWcoJ2pzJywgbmV3IERhdGUoKSk7DQoNCiAgICBndGFnKCdjb25maWcnLCAnRy1ZUks5S1RXSjVFJyk7PC9zY3JpcHQ+PG1ldGEgcHJvcGVydHk9Im9nOnZpZGVvIiBjb250ZW50PSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC96QXE4bGVaVkg1YyI+PG1ldGEgcHJvcGVydHk9Im9nOnZpZGVvOnR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbCI+PG1ldGEgcHJvcGVydHk9Im9nOnZpZGVvOndpZHRoIiBjb250ZW50PSIxMjgwIj48bWV0YSBwcm9wZXJ0eT0ib2c6dmlkZW86aGVpZ2h0IiBjb250ZW50PSI3MjAiPjxtZXRhIHByb3BlcnR5PSJvZzp2aWRlbzpzZWN1cmVfdXJsIiBjb250ZW50PSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC96QXE4bGVaVkg1YyI+PG1ldGEgcHJvcGVydHk9Im9nOnZpZGVvOnRhZyIgY29udGVudD0iR3Jvd2Rlbi5pbywgZ2FyZGVuIGdyb3dpbmcgZ2FtZSwgR3Jvd2RlbiBpbywgbXVsdGlwbGF5ZXIgZmFybWluZywgb25saW5lIGdhcmRlbmluZywgaW8gZ2FtZXMsIEdyb3dkZW4sIHBsYW50IGdyb3dpbmcgZ2FtZSwgZmFybWluZyBzaW11bGF0b3IsIGdhcmRlbmluZyBnYW1lIj48bWV0YSBjb250ZW50PSIjMmU3ZDMyIiBkYXRhLXJlYWN0LWhlbG1ldD0idHJ1ZSIgbmFtZT0idGhlbWUtY29sb3IiPjxtZXRhIG5hbWU9InJhdGluZyIgY29udGVudD0iZ2VuZXJhbCI+PG1ldGEgbmFtZT0iZGlzdHJpYnV0aW9uIiBjb250ZW50PSJnbG9iYWwiPjxsaW5rIHJlbD0iYWx0ZXJuYXRlIiBocmVmbGFuZz0iZW4iIGhyZWY9Imh0dHBzOi8vZ3Jvd2Rlbi5pby8iPjxsaW5rIHJlbD0iYWx0ZXJuYXRlIiBocmVmbGFuZz0ieC1kZWZhdWx0IiBocmVmPSJodHRwczovL2dyb3dkZW4uaW8vIj48c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iPnsNCiAgICAiQGNvbnRleHQiOiAiaHR0cHM6Ly9zY2hlbWEub3JnIiwNCiAgICAiQHR5cGUiOiBbIlZpZGVvR2FtZSIsICJHYW1lIl0sDQogICAgIm5hbWUiOiAiR3Jvd2Rlbi5pbyIsDQogICAgImFsdGVybmF0ZU5hbWUiOiAiR3JvdyBhIEdhcmRlbiBpbiBHcm93ZGVuLmlvIiwNCiAgICAiZGVzY3JpcHRpb24iOiAiR3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCB0aGUgZnJlZSBvbmxpbmUgZ2FyZGVuIGdhbWUgYW5kIGZhcm1pbmcgc2ltdWxhdG9yLiBQbGFudCwgZ3JvdywgYW5kIGhhcnZlc3Qgd2l0aCBmcmllbmRzIHdvcmxkd2lkZS4iLA0KICAgICJpbWFnZSI6ICJodHRwczovL2dyb3dkZW4uaW8vYmFja2dyb3VuZC1vZy53ZWJwIiwNCiAgICAiYXV0aG9yIjogew0KICAgICAgIkB0eXBlIjogIk9yZ2FuaXphdGlvbiIsDQogICAgICAibmFtZSI6ICJMZWdpb24gUGxhdGZvcm1zIg0KICAgIH0sDQogICAgInVybCI6ICJodHRwczovL2dyb3dkZW4uaW8iLA0KICAgICJpbkxhbmd1YWdlIjogImVuIiwNCiAgICAib3BlcmF0aW5nU3lzdGVtIjogIldlYiIsDQogICAgImdhbWVQbGF0Zm9ybSI6IFsiV2ViIiwgIkJyb3dzZXIiXSwNCiAgICAicGxheU1vZGUiOiAiTXVsdGlQbGF5ZXIiLA0KICAgICJnZW5yZSI6IFsiU2ltdWxhdGlvbiIsICJNdWx0aXBsYXllciIsICJGYXJtaW5nIiwgIkdhcmRlbmluZyIsICJGcmVlIiwgIi5pbyIsICJTdHJhdGVneSIsICJPbmxpbmUiLCAiQnJvd3NlciBHYW1lIl0sDQogICAgImtleXdvcmRzIjogIkdyb3cgYSBnYXJkZW4sIEdyb3dkZW4uaW8sIEdyb3dkZW4sIGlvIGdhbWVzLCBzaW11bGF0b3IsIGdhcmRlbiBnYW1lLCBmYXJtaW5nIGdhbWUsIGZhcm0sIGdhcmRlbiIsDQogICAgInB1Ymxpc2hlciI6IHsNCiAgICAgICJAdHlwZSI6ICJPcmdhbml6YXRpb24iLA0KICAgICAgIm5hbWUiOiAiTGVnaW9uIFBsYXRmb3JtcyINCiAgICB9LA0KICAgICJhZ2dyZWdhdGVSYXRpbmciOiB7DQogICAgICAiQHR5cGUiOiAiQWdncmVnYXRlUmF0aW5nIiwNCiAgICAgICJyYXRpbmdWYWx1ZSI6ICI0LjgiLA0KICAgICAgInJldmlld0NvdW50IjogIjUwMDAwMCINCiAgICB9LA0KICAgICJzYW1lQXMiOiBbDQogICAgICAiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL0dyb3dkZW4iLA0KICAgICAgImh0dHBzOi8vdHdpdHRlci5jb20vR3Jvd2RlbiIsDQogICAgICAiaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9Hcm93ZGVuIiwNCiAgICAgICJodHRwczovL3d3dy55b3V0dWJlLmNvbS9AZ3Jvd2Rlbi1pbyINCiAgICBdDQogIH08L3NjcmlwdD48c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iIGlkPSJob3d0by1qc29ubGQiPnsNCiAgICAiQGNvbnRleHQiOiAiaHR0cHM6Ly9zY2hlbWEub3JnIiwNCiAgICAiQHR5cGUiOiAiSG93VG8iLA0KICAgICJuYW1lIjogIkhvdyB0byBHcm93IGEgR2FyZGVuIGluIEdyb3dkZW4uaW8iLA0KICAgICJkZXNjcmlwdGlvbiI6ICJTdGVwLWJ5LXN0ZXAgZ3VpZGUgdG8gc3RhcnQsIHBsYW50LCB3YXRlciwgYW5kIGhhcnZlc3QgaW4gR3Jvd2Rlbi5pby4iLA0KICAgICJpbWFnZSI6ICJodHRwczovL2dyb3dkZW4uaW8vYmFja2dyb3VuZC1vZy53ZWJwIiwNCiAgICAidG90YWxUaW1lIjogIlBUMk0iLA0KICAgICJzdXBwbHkiOiBbDQogICAgICB7ICJAdHlwZSI6ICJIb3dUb1N1cHBseSIsICJuYW1lIjogIlNlZWRzIiB9LA0KICAgICAgeyAiQHR5cGUiOiAiSG93VG9TdXBwbHkiLCAibmFtZSI6ICJXYXRlciIgfQ0KICAgIF0sDQogICAgInRvb2wiOiBbDQogICAgICB7ICJAdHlwZSI6ICJIb3dUb1Rvb2wiLCAibmFtZSI6ICJHYXJkZW4gUGxvdCIgfQ0KICAgIF0sDQogICAgInN0ZXAiOiBbDQogICAgICB7ICJAdHlwZSI6ICJIb3dUb1N0ZXAiLCAibmFtZSI6ICJTdGFydCB0aGUgZ2FtZSIsICJ0ZXh0IjogIk9wZW4gR3Jvd2Rlbi5pbyBhbmQgY2hvb3NlIGEgc2VydmVyLiIgfSwNCiAgICAgIHsgIkB0eXBlIjogIkhvd1RvU3RlcCIsICJuYW1lIjogIlBsYW50IHNlZWRzIiwgInRleHQiOiAiT3BlbiB5b3VyIGludmVudG9yeSBhbmQgcGxhbnQgc2VlZHMgaW4gYSBnYXJkZW4gcGxvdC4iIH0sDQogICAgICB7ICJAdHlwZSI6ICJIb3dUb1N0ZXAiLCAibmFtZSI6ICJXYXRlciBhbmQgY2FyZSIsICJ0ZXh0IjogIldhdGVyIHlvdXIgcGxhbnRzIGFuZCB3YWl0IGZvciB0aGVtIHRvIGdyb3cuIiB9LA0KICAgICAgeyAiQHR5cGUiOiAiSG93VG9TdGVwIiwgIm5hbWUiOiAiSGFydmVzdCIsICJ0ZXh0IjogIkNvbGxlY3QgZnJ1aXRzIHRvIHByb2dyZXNzLCB0cmFkZSwgb3IgY3JhZnQuIiB9DQogICAgXSwNCiAgICAicHVibGlzaGVyIjogeyAiQHR5cGUiOiAiT3JnYW5pemF0aW9uIiwgIm5hbWUiOiAiTGVnaW9uIFBsYXRmb3JtcyIgfSwNCiAgICAidXJsIjogImh0dHBzOi8vZ3Jvd2Rlbi5pby8iDQogIH08L3NjcmlwdD48c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2xkK2pzb24iIGlkPSJ3ZWJzaXRlLWpzb25sZCI+ew0KICAgICJAY29udGV4dCI6ICJodHRwczovL3NjaGVtYS5vcmciLA0KICAgICJAdHlwZSI6ICJXZWJTaXRlIiwNCiAgICAidXJsIjogImh0dHBzOi8vZ3Jvd2Rlbi5pby8iLA0KICAgICJuYW1lIjogIkdyb3dkZW4uaW8iLA0KICAgICJwb3RlbnRpYWxBY3Rpb24iOiB7DQogICAgICAiQHR5cGUiOiAiU2VhcmNoQWN0aW9uIiwNCiAgICAgICJ0YXJnZXQiOiAiaHR0cHM6Ly9ncm93ZGVuLmlvL3NlYXJjaD9xPXtzZWFyY2hfdGVybV9zdHJpbmd9IiwNCiAgICAgICJxdWVyeS1pbnB1dCI6ICJyZXF1aXJlZCBuYW1lPXNlYXJjaF90ZXJtX3N0cmluZyINCiAgICB9DQogIH08L3NjcmlwdD48bGluayByZWw9InByZWxvYWQiIGhyZWY9Im1haW4uY3NzIiBhcz0ic3R5bGUiIG9ubG9hZD0idGhpcy5yZWw9J3N0eWxlc2hlZXQnIj48bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Im1haW4uY3NzIj48c3R5bGU+QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweCkgew0KICAgICAgYm9keSB7DQogICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICB9DQogICAgfTwvc3R5bGU+PHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzemlwLzMuMTAuMS9qc3ppcC5taW4uanMiPjwvc2NyaXB0PjxtZXRhIG5hbWU9Im1vYmlsZS13ZWItYXBwLWNhcGFibGUiIGNvbnRlbnQ9InllcyI+PG1ldGEgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtY2FwYWJsZSIgY29udGVudD0ieWVzIj48bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1zdGF0dXMtYmFyLXN0eWxlIiBjb250ZW50PSJibGFjay10cmFuc2x1Y2VudCI+PG1ldGEgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtdGl0bGUiIGNvbnRlbnQ9Ikdyb3dkZW4uaW8iPjxtZXRhIG5hbWU9ImFwcGxpY2F0aW9uLW5hbWUiIGNvbnRlbnQ9Ikdyb3dkZW4uaW8iPjxtZXRhIG5hbWU9ImZvcm1hdC1kZXRlY3Rpb24iIGNvbnRlbnQ9InRlbGVwaG9uZT1ubyI+PGxpbmsgcmVsPSJtYW5pZmVzdCIgaHJlZj0ibWFuaWZlc3QuanNvbiI+PGxpbmsgcmVsPSJhcHBsZS10b3VjaC1zdGFydHVwLWltYWdlIiBocmVmPSIvc3BsYXNoL2FwcGxlLXNwbGFzaC0xMTI1eDI0MzYucG5nIiBtZWRpYT0iKGRldmljZS13aWR0aDogMzc1cHgpIGFuZCAoZGV2aWNlLWhlaWdodDogODEycHgpIGFuZCAoLXdlYmtpdC1kZXZpY2UtcGl4ZWwtcmF0aW86IDMpIj48bGluayByZWw9ImRucy1wcmVmZXRjaCIgaHJlZj0iLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20iPjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20iIGNyb3Nzb3JpZ2luPjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9ncm93ZGVuLmlvIiBjcm9zc29yaWdpbj48bWV0YSBodHRwLWVxdWl2PSJQZXJtaXNzaW9ucy1Qb2xpY3kiIGNvbnRlbnQ9ImFjY2VsZXJvbWV0ZXI9KCksIGNhbWVyYT0oKSwgbWljcm9waG9uZT0oKSwgZ2VvbG9jYXRpb249KCkiPjxsaW5rIHJlbD0ic2l0ZW1hcCIgdHlwZT0iYXBwbGljYXRpb24veG1sIiB0aXRsZT0iU2l0ZW1hcCIgaHJlZj0iaHR0cHM6Ly9ncm93ZGVuLmlvL3NpdGVtYXAueG1sIj48bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9ImluZGV4LCBmb2xsb3ciPjxtZXRhIG5hbWU9Imdvb2dsZWJvdCIgY29udGVudD0iaW5kZXgsIGZvbGxvdyI+PG1ldGEgbmFtZT0ibXN2YWxpZGF0ZS4wMSIgY29udGVudD0iQ0ExMkNERDJDNzMxQjM2QThERjkxODc2RTNDRDc4RjMiPjxtZXRhIHByb3BlcnR5PSJvZzpzZWVfYWxzbyIgY29udGVudD0iaHR0cHM6Ly93d3cueW91dHViZS5jb20vQGdyb3dkZW4taW8iPjxtZXRhIGh0dHAtZXF1aXY9IkNhY2hlLUNvbnRyb2wiIGNvbnRlbnQ9InB1YmxpYywgbWF4LWFnZT02MDAiPjxtZXRhIG5hbWU9Im1zYXBwbGljYXRpb24tVGlsZUNvbG9yIiBjb250ZW50PSIjMmQzMDMwIj48bWV0YSBuYW1lPSJtc2FwcGxpY2F0aW9uLWNvbmZpZyIgY29udGVudD0iaHR0cHM6Ly9ncm93ZGVuLmlvL2Jyb3dzZXJjb25maWcueG1sIj48bGluayByZWw9Imljb24iIHNpemVzPSIxOTJ4MTkyIiBocmVmPSJodHRwczovL2dyb3dkZW4uaW8vZmF2aWNvbi9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZyI+PGxpbmsgcmVsPSJpY29uIiBzaXplcz0iNTEyeDUxMiIgaHJlZj0iaHR0cHM6Ly9ncm93ZGVuLmlvL2Zhdmljb24vYW5kcm9pZC1jaHJvbWUtNTEyeDUxMi5wbmciPjxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iaHR0cHM6Ly9ncm93ZGVuLmlvL2Zhdmljb24vYXBwbGUtdG91Y2gtaWNvbi5wbmciPjxzY3JpcHQ+Y29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7DQpjb25zdCBvcmlnaW5hbEZldGNoID0gd2luZG93LmZldGNoOw0KDQp3aW5kb3cuZmV0Y2ggPSBhc3luYyBmdW5jdGlvbiAoLi4uYXJncykgew0KICBsZXQgdXJsID0gYXJnc1swXTsNCiAgaWYgKCh1cmwrIiIpLmluY2x1ZGVzKCJTdHJlYW1pbmdBc3NldHMiKSkgew0KICAgIHVybCA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ2VuaXp5L2NnLXJpcEBtYWluL2dyb3dkZW4uaW8vU3RyZWFtaW5nQXNzZXRzIit1cmwuc3BsaXQoIlN0cmVhbWluZ0Fzc2V0cyIpWzFdDQogICAgYXJnc1swXSA9IHVybDsNCiAgfQ0KICBpZiAodHlwZW9mIHVybCA9PT0gInN0cmluZyIgJiYgdXJsLmluY2x1ZGVzKCJodHRwczovL2ZpbGVzLmdyb3dkZW4uaW8vc3RhdGljLzE3ejUzNjI3NTg0IikpIHsNCiAgICBjb25zdCBuZXdVcmwgPSB1cmwucmVwbGFjZSgNCiAgICAgICJodHRwczovL2ZpbGVzLmdyb3dkZW4uaW8vc3RhdGljLzE3ejUzNjI3NTg0IiwNCiAgICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ2VuaXp5L2NnLXJpcEBtYWluL2dyb3dkZW4uaW8vU3RyZWFtaW5nQXNzZXRzL2FhMTd6NTM2Mjc1ODQvV2ViR0wiDQogICAgKTsNCiAgICBhcmdzWzBdID0gbmV3VXJsOw0KICAgIHJldHVybiBvcmlnaW5hbEZldGNoLmFwcGx5KHRoaXMsIGFyZ3MpOw0KICB9DQoNCiAgcmV0dXJuIG9yaWdpbmFsRmV0Y2guYXBwbHkodGhpcywgYXJncyk7DQp9Ow0KDQogICAgDQogICAgdmFyIHVuaXR5TG9hZGluZ0lzU0RLRGVwZW5kYW50ID0gZmFsc2U7DQogICAgLy9jb25zdCBzZGtTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsNCiAgICAvL3Nka1NjcmlwdC5zcmMgPSAiY2dfc2RrLmpzIjsgLy8gdXBkYXRlIHRoaXMgd2hlbiBhbnkgc2RrIHVwZGF0ZXMNCiAgICAvL2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2RrU2NyaXB0KTsNCg0KDQogICAgYXN5bmMgZnVuY3Rpb24gd2FpdEZvclNES1RoZW5TdGFydChjYWxsYmFjaykgew0KICB0cnkgew0KICAgIGNvbnN0IHppcFVybCA9ICJCdWlsZC8zY2NlYzU0NjJhYmIxYmRkZWI1MDhhMjNmM2VmOWQ1MS53YXNtLnppcCI7DQogICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goemlwVXJsKTsNCiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggemlwOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YCk7DQogICAgY29uc3QgemlwRGF0YSA9IGF3YWl0IHJlcy5hcnJheUJ1ZmZlcigpOw0KICAgIGNvbnN0IHppcCA9IGF3YWl0IEpTWmlwLmxvYWRBc3luYyh6aXBEYXRhKTsNCiAgICBjb25zdCB3YXNtTmFtZSA9IE9iamVjdC5rZXlzKHppcC5maWxlcykuZmluZChmID0+IGYuZW5kc1dpdGgoIi53YXNtIikpOw0KICAgIGlmICghd2FzbU5hbWUpIHRocm93IG5ldyBFcnJvcigiTm8gLndhc20gZmlsZSBmb3VuZCBpbnNpZGUgemlwLiIpOw0KICAgIGNvbnN0IHdhc21EYXRhID0gYXdhaXQgemlwLmZpbGUod2FzbU5hbWUpLmFzeW5jKCJhcnJheWJ1ZmZlciIpOw0KICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbd2FzbURhdGFdLCB7IHR5cGU6ICJhcHBsaWNhdGlvbi93YXNtIiB9KTsNCiAgICBjb25zdCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICBjYWxsYmFjayhibG9iVXJsKTsNCiAgfSBjYXRjaCAoZXJyKSB7DQogICAgY29uc29sZS5lcnJvcigiRXJyb3Igd2hpbGUgbG9hZGluZyB6aXBwZWQgd2FzbToiLCBlcnIpOw0KICB9DQp9PC9zY3JpcHQ+PHNjcmlwdD4oZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gY2Fub25pY2FsSHJlZkZvcihsb2NhdGlvbk9iaikgew0KICAgICAgICByZXR1cm4gbG9jYXRpb25PYmoub3JpZ2luICsgbG9jYXRpb25PYmoucGF0aG5hbWU7IC8vIGlnbm9yZSBxdWVyeS9mcmFnbWVudCBmb3IgY2Fub25pY2FsDQogICAgICB9DQoNCiAgICAgIGZ1bmN0aW9uIHNldENhbm9uaWNhbEFuZE9nVXJsKCkgew0KICAgICAgICB2YXIgaHJlZiA9IGNhbm9uaWNhbEhyZWZGb3Iod2luZG93LmxvY2F0aW9uKTsNCiAgICAgICAgdmFyIGNhbm9uaWNhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpbmtbcmVsPSJjYW5vbmljYWwiXScpOw0KICAgICAgICBpZiAoIWNhbm9uaWNhbCkgew0KICAgICAgICAgIGNhbm9uaWNhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsNCiAgICAgICAgICBjYW5vbmljYWwuc2V0QXR0cmlidXRlKCdyZWwnLCAnY2Fub25pY2FsJyk7DQogICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjYW5vbmljYWwpOw0KICAgICAgICB9DQogICAgICAgIGNhbm9uaWNhbC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTsNCg0KICAgICAgICB2YXIgb2dVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW3Byb3BlcnR5PSJvZzp1cmwiXScpOw0KICAgICAgICBpZiAob2dVcmwpIG9nVXJsLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIGhyZWYpOw0KICAgICAgfQ0KDQogICAgICBzZXRDYW5vbmljYWxBbmRPZ1VybCgpOw0KDQogICAgICB2YXIgX3BzID0gaGlzdG9yeS5wdXNoU3RhdGU7DQogICAgICBoaXN0b3J5LnB1c2hTdGF0ZSA9IGZ1bmN0aW9uICgpIHsgX3BzLmFwcGx5KGhpc3RvcnksIGFyZ3VtZW50cyk7IHNldENhbm9uaWNhbEFuZE9nVXJsKCk7IH07DQogICAgICB2YXIgX3JzID0gaGlzdG9yeS5yZXBsYWNlU3RhdGU7DQogICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHsgX3JzLmFwcGx5KGhpc3RvcnksIGFyZ3VtZW50cyk7IHNldENhbm9uaWNhbEFuZE9nVXJsKCk7IH07DQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBzZXRDYW5vbmljYWxBbmRPZ1VybCk7DQogICAgfSkoKTs8L3NjcmlwdD48c2NyaXB0PihmdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiB0b1RpdGxlQ2FzZSh0ZXh0KSB7DQogICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1stX10rL2csICcgJykucmVwbGFjZSgvXGJcdy9nLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gYy50b1VwcGVyQ2FzZSgpOyB9KTsNCiAgICAgIH0NCg0KICAgICAgZnVuY3Rpb24gaW5qZWN0QnJlYWRjcnVtYnMoKSB7DQogICAgICAgIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1wvJC8sICcnKTsNCiAgICAgICAgaWYgKHBhdGggPT09ICcnIHx8IHBhdGggPT09ICcvJykgew0KICAgICAgICAgIHZhciBleGlzdGluZ0hvbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYnMtanNvbmxkJyk7DQogICAgICAgICAgaWYgKGV4aXN0aW5nSG9tZSkgZXhpc3RpbmdIb21lLnJlbW92ZSgpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBpdGVtcyA9IFsgeyBuYW1lOiAnSG9tZScsIHVybDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvJyB9IF07DQoNCiAgICAgICAgaWYgKHBhdGggPT09ICcvc2hvcCcpIHsNCiAgICAgICAgICBpdGVtcy5wdXNoKHsgbmFtZTogJ1Nob3AnLCB1cmw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3Nob3AnIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvaW52ZW50b3J5Jykgew0KICAgICAgICAgIGl0ZW1zLnB1c2goeyBuYW1lOiAnSW52ZW50b3J5JywgdXJsOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9pbnZlbnRvcnknIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvcGxheS13aXRoLWZyaWVuZHMnKSB7DQogICAgICAgICAgaXRlbXMucHVzaCh7IG5hbWU6ICdQbGF5IFdpdGggRnJpZW5kcycsIHVybDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvcGxheS13aXRoLWZyaWVuZHMnIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvc2VydmVycycpIHsNCiAgICAgICAgICBpdGVtcy5wdXNoKHsgbmFtZTogJ1NlcnZlcnMnLCB1cmw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3NlcnZlcnMnIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvc2V0dGluZ3MnKSB7DQogICAgICAgICAgaXRlbXMucHVzaCh7IG5hbWU6ICdTZXR0aW5ncycsIHVybDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvc2V0dGluZ3MnIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvbG9naW4nKSB7DQogICAgICAgICAgaXRlbXMucHVzaCh7IG5hbWU6ICdMb2dpbicsIHVybDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbG9naW4nIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvZnJlZScpIHsNCiAgICAgICAgICBpdGVtcy5wdXNoKHsgbmFtZTogJ0ZyZWUnLCB1cmw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2ZyZWUnIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKC9eXC9wcm9maWxlXC8vLnRlc3QocGF0aCkpIHsNCiAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCk7DQogICAgICAgICAgaXRlbXMucHVzaCh7IG5hbWU6ICdQcm9maWxlJywgdXJsOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9wcm9maWxlLycgfSk7DQogICAgICAgICAgaXRlbXMucHVzaCh7IG5hbWU6IHVzZXJuYW1lLCB1cmw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBwYXRoIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKC9eXC9pbnNwZWN0Xy8udGVzdChwYXRoKSkgew0KICAgICAgICAgIGl0ZW1zLnB1c2goeyBuYW1lOiAnSW5zcGVjdCBJdGVtJywgdXJsOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgcGF0aCB9KTsNCiAgICAgICAgfSBlbHNlIGlmICgvXlwvYnVuZGxlXy8udGVzdChwYXRoKSkgew0KICAgICAgICAgIGl0ZW1zLnB1c2goeyBuYW1lOiAnQnVuZGxlJywgdXJsOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgcGF0aCB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB2YXIgc2VnID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpOw0KICAgICAgICAgIGl0ZW1zLnB1c2goeyBuYW1lOiB0b1RpdGxlQ2FzZShzZWcpLCB1cmw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBwYXRoIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGJyZWFkY3J1bWJzID0gew0KICAgICAgICAgICdAY29udGV4dCc6ICdodHRwczovL3NjaGVtYS5vcmcnLA0KICAgICAgICAgICdAdHlwZSc6ICdCcmVhZGNydW1iTGlzdCcsDQogICAgICAgICAgJ2l0ZW1MaXN0RWxlbWVudCc6IGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICdAdHlwZSc6ICdMaXN0SXRlbScsDQogICAgICAgICAgICAgICdwb3NpdGlvbic6IGluZGV4ICsgMSwNCiAgICAgICAgICAgICAgJ25hbWUnOiBpdGVtLm5hbWUsDQogICAgICAgICAgICAgICdpdGVtJzogaXRlbS51cmwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSkNCiAgICAgICAgfTsNCg0KICAgICAgICB2YXIgZXhpc3RpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYnMtanNvbmxkJyk7DQogICAgICAgIGlmIChleGlzdGluZykgZXhpc3RpbmcucmVtb3ZlKCk7DQogICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsNCiAgICAgICAgc2NyaXB0LnR5cGUgPSAnYXBwbGljYXRpb24vbGQranNvbic7DQogICAgICAgIHNjcmlwdC5pZCA9ICdicmVhZGNydW1icy1qc29ubGQnOw0KICAgICAgICBzY3JpcHQudGV4dCA9IEpTT04uc3RyaW5naWZ5KGJyZWFkY3J1bWJzKTsNCiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICAgICAgfQ0KDQogICAgICBpbmplY3RCcmVhZGNydW1icygpOw0KICAgICAgdmFyIF9wcyA9IGhpc3RvcnkucHVzaFN0YXRlOw0KICAgICAgaGlzdG9yeS5wdXNoU3RhdGUgPSBmdW5jdGlvbiAoKSB7IF9wcy5hcHBseShoaXN0b3J5LCBhcmd1bWVudHMpOyBpbmplY3RCcmVhZGNydW1icygpOyB9Ow0KICAgICAgdmFyIF9ycyA9IGhpc3RvcnkucmVwbGFjZVN0YXRlOw0KICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7IF9ycy5hcHBseShoaXN0b3J5LCBhcmd1bWVudHMpOyBpbmplY3RCcmVhZGNydW1icygpOyB9Ow0KICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgaW5qZWN0QnJlYWRjcnVtYnMpOw0KICAgIH0pKCk7PC9zY3JpcHQ+PHNjcmlwdD4oZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHJvdXRlVG9NZXRhID0gew0KICAgICAgICAnLyc6IHsNCiAgICAgICAgICB0aXRsZTogJ0dyb3cgYSBHYXJkZW4gaW4gR3Jvd2Rlbi5pbyB8IEZyZWUgR2FyZGVuIEdhbWUnLA0KICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCBmcmVlIG9ubGluZSBnYXJkZW4gZ2FtZSBhbmQgZmFybWluZyBzaW11bGF0b3IuIFBsYW50LCBncm93LCBhbmQgaGFydmVzdCB3aXRoIGZyaWVuZHMuJw0KICAgICAgICB9LA0KICAgICAgICAnL3Nob3AnOiB7DQogICAgICAgICAgdGl0bGU6ICdHcm93ZGVuLmlvIFNob3AgfCBHYXJkZW4gSXRlbXMsIEJ1bmRsZXMgJiBDb3NtZXRpY3MnLA0KICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVW5sb2NrIHNlZWRzLCBza2lucywgYnVuZGxlcywgYW5kIGNvc21ldGljcyBmb3IgeW91ciBnYXJkZW4gaW4gR3Jvd2Rlbi5pby4nDQogICAgICAgIH0sDQogICAgICAgICcvaW52ZW50b3J5Jzogew0KICAgICAgICAgIHRpdGxlOiAnR3Jvd2Rlbi5pbyBJbnZlbnRvcnkgfCBNYW5hZ2UgR2FyZGVuIFNraW5zICYgSXRlbXMnLA0KICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTWFuYWdlIHlvdXIgdW5sb2NrZWQgaXRlbXMsIHNlZWRzLCBhbmQgc2tpbnMuIEVxdWlwIHlvdXIgZmF2b3JpdGVzIGFuZCBrZWVwIGdyb3dpbmcgeW91ciBnYXJkZW4uJw0KICAgICAgICB9LA0KICAgICAgICAnL3BsYXktd2l0aC1mcmllbmRzJzogew0KICAgICAgICAgIHRpdGxlOiAnUGxheSBXaXRoIEZyaWVuZHMgfCBHcm93IGEgR2FyZGVuIFRvZ2V0aGVyIGluIEdyb3dkZW4uaW8nLA0KICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIG9yIGpvaW4gcm9vbXMgYW5kIGdyb3cgYSBnYXJkZW4gd2l0aCBmcmllbmRzIGluIEdyb3dkZW4uaW8uJw0KICAgICAgICB9LA0KICAgICAgICAnL3NlcnZlcnMnOiB7DQogICAgICAgICAgdGl0bGU6ICdHcm93ZGVuLmlvIFNlcnZlcnMgfCBSZWdpb25zICYgTWF0Y2htYWtpbmcnLA0KICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUGljayB0aGUgYmVzdCBHcm93ZGVuLmlvIHNlcnZlciByZWdpb24gZm9yIGxvdyBwaW5nIGFuZCBzbW9vdGggZ2FyZGVuaW5nLicNCiAgICAgICAgfSwNCiAgICAgICAgJy9zZXR0aW5ncyc6IHsNCiAgICAgICAgICB0aXRsZTogJ0dyb3dkZW4uaW8gU2V0dGluZ3MgfCBDb250cm9scyAmIEdyYXBoaWNzJywNCiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1R1bmUgY29udHJvbHMsIGdyYXBoaWNzLCBhbmQgZ2FyZGVuIHNldHRpbmdzIGZvciB0aGUgYmVzdCBHcm93ZGVuLmlvIGV4cGVyaWVuY2UuJw0KICAgICAgICB9LA0KICAgICAgICAnL2xvZ2luJzogew0KICAgICAgICAgIHRpdGxlOiAnTG9naW4gfCBHcm93ZGVuLmlvJywNCiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZyBpbiB0byB5b3VyIEdyb3dkZW4uaW8gYWNjb3VudCB0byBzeW5jIGdhcmRlbiBwcm9ncmVzcyBhbmQgaXRlbXMuJw0KICAgICAgICB9LA0KICAgICAgICAnL2ZyZWUnOiB7DQogICAgICAgICAgdGl0bGU6ICdGcmVlIFJld2FyZHMgfCBHcm93ZGVuLmlvJywNCiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NsYWltIGZyZWUgcmV3YXJkcyBhbmQgYm9udXNlcyB0byBncm93IHlvdXIgZ2FyZGVuIGZhc3RlciBpbiBHcm93ZGVuLmlvLicNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgZnVuY3Rpb24gc2V0TWV0YShtZXRhKSB7DQogICAgICAgIGlmICghbWV0YSkgcmV0dXJuOw0KICAgICAgICBpZiAobWV0YS50aXRsZSkgZG9jdW1lbnQudGl0bGUgPSBtZXRhLnRpdGxlOw0KICAgICAgICB2YXIgZGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT0iZGVzY3JpcHRpb24iXScpOw0KICAgICAgICBpZiAoZGVzYyAmJiBtZXRhLmRlc2NyaXB0aW9uKSBkZXNjLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIG1ldGEuZGVzY3JpcHRpb24pOw0KICAgICAgICB2YXIgb2dUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbcHJvcGVydHk9Im9nOnRpdGxlIl0nKTsNCiAgICAgICAgaWYgKG9nVGl0bGUgJiYgbWV0YS50aXRsZSkgb2dUaXRsZS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCBtZXRhLnRpdGxlKTsNCiAgICAgICAgdmFyIHR3VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9InR3aXR0ZXI6dGl0bGUiXScpOw0KICAgICAgICBpZiAodHdUaXRsZSAmJiBtZXRhLnRpdGxlKSB0d1RpdGxlLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIG1ldGEudGl0bGUpOw0KICAgICAgICB2YXIgb2dEZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtwcm9wZXJ0eT0ib2c6ZGVzY3JpcHRpb24iXScpOw0KICAgICAgICBpZiAob2dEZXNjICYmIG1ldGEuZGVzY3JpcHRpb24pIG9nRGVzYy5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCBtZXRhLmRlc2NyaXB0aW9uKTsNCiAgICAgICAgdmFyIHR3RGVzYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT0idHdpdHRlcjpkZXNjcmlwdGlvbiJdJyk7DQogICAgICAgIGlmICh0d0Rlc2MgJiYgbWV0YS5kZXNjcmlwdGlvbikgdHdEZXNjLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIG1ldGEuZGVzY3JpcHRpb24pOw0KICAgICAgfQ0KDQogICAgICBmdW5jdGlvbiB1cGRhdGVSb3V0ZU1ldGEoKSB7DQogICAgICAgIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1wvJC8sICcnKSB8fCAnLyc7DQogICAgICAgIHZhciBtZXRhID0gcm91dGVUb01ldGFbcGF0aF07DQoNCiAgICAgICAgLy8gUGF0dGVybiByb3V0ZXMNCiAgICAgICAgaWYgKCFtZXRhKSB7DQogICAgICAgICAgaWYgKC9eXC9pbnNwZWN0Xy8udGVzdChwYXRoKSkgew0KICAgICAgICAgICAgbWV0YSA9IHsNCiAgICAgICAgICAgICAgdGl0bGU6ICdJbnNwZWN0IEl0ZW0gfCBHcm93ZGVuLmlvJywNCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdWaWV3IGl0ZW0gZGV0YWlscyBhbmQgc2hhcmVhYmxlIGxpbmtzIGluIEdyb3dkZW4uaW8uJw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9IGVsc2UgaWYgKC9eXC9idW5kbGVfLy50ZXN0KHBhdGgpKSB7DQogICAgICAgICAgICBtZXRhID0gew0KICAgICAgICAgICAgICB0aXRsZTogJ0J1bmRsZSB8IEdyb3dkZW4uaW8nLA0KICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ByZXZpZXcgYW5kIHB1cmNoYXNlIGJ1bmRsZXMgaW4gdGhlIEdyb3dkZW4uaW8gc2hvcC4nDQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0gZWxzZSBpZiAoL15cL3Byb2ZpbGVcLy8udGVzdChwYXRoKSkgew0KICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpOw0KICAgICAgICAgICAgbWV0YSA9IHsNCiAgICAgICAgICAgICAgdGl0bGU6IHVzZXJuYW1lID8gKHVzZXJuYW1lICsgJyB8IFByb2ZpbGUgfCBHcm93ZGVuLmlvJykgOiAnUHJvZmlsZSB8IEdyb3dkZW4uaW8nLA0KICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZpZXcgZ2FyZGVuZXIgcHJvZmlsZXMgYW5kIHN0YXRzIGluIEdyb3dkZW4uaW8uJw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICB9IGVsc2UgaWYgKC9eXC9ob3ctdG8tZ3Jvdy1hLWdhcmRlbiQvLnRlc3QocGF0aCkpIHsNCiAgICAgICAgICAgIG1ldGEgPSB7DQogICAgICAgICAgICAgIHRpdGxlOiAnSG93IHRvIEdyb3cgYSBHYXJkZW4gfCBHcm93ZGVuLmlvJywNCiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBob3cgdG8gZ3JvdyBhIGdhcmRlbiBpbiBHcm93ZGVuLmlvOiBwbGFudCwgd2F0ZXIsIGFuZCBoYXJ2ZXN0LicNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgc2V0TWV0YShtZXRhKTsNCiAgICAgIH0NCg0KICAgICAgdXBkYXRlUm91dGVNZXRhKCk7DQogICAgICB2YXIgX3BzID0gaGlzdG9yeS5wdXNoU3RhdGU7DQogICAgICBoaXN0b3J5LnB1c2hTdGF0ZSA9IGZ1bmN0aW9uICgpIHsgX3BzLmFwcGx5KGhpc3RvcnksIGFyZ3VtZW50cyk7IHVwZGF0ZVJvdXRlTWV0YSgpOyB9Ow0KICAgICAgdmFyIF9ycyA9IGhpc3RvcnkucmVwbGFjZVN0YXRlOw0KICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7IF9ycy5hcHBseShoaXN0b3J5LCBhcmd1bWVudHMpOyB1cGRhdGVSb3V0ZU1ldGEoKTsgfTsNCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHVwZGF0ZVJvdXRlTWV0YSk7DQogICAgfSkoKTs8L3NjcmlwdD48L2hlYWQ+PGJvZHkgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6IGJsYWNrOyBjb2xvcjogYmxhY2s7Ij48aDEgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTEwMDAwcHg7dG9wOmF1dG87d2lkdGg6MXB4O2hlaWdodDoxcHg7b3ZlcmZsb3c6aGlkZGVuOyI+R3JvdyBhIEdhcmRlbiBpbiBHcm93ZGVuLmlvIOKAlCBGcmVlIE9ubGluZSBHYXJkZW4gR2FtZSBhbmQgRmFybWluZyBTaW11bGF0b3I8L2gxPjxwIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMDAwMHB4O3RvcDphdXRvO3dpZHRoOjFweDtoZWlnaHQ6MXB4O292ZXJmbG93OmhpZGRlbjsiPkdyb3cgYSBnYXJkZW4gaW4gR3Jvd2Rlbi5pby4gUGxhbnQgc2VlZHMsIHdhdGVyIGNyb3BzLCBhbmQgaGFydmVzdCBpbiBhIGZyZWUgb25saW5lIGdhcmRlbiBhbmQgZmFybWluZyBzaW11bGF0b3Igd2l0aCBmcmllbmRzLjwvcD48ZGl2IGlkPSJ2aWRlb2FkIj48L2Rpdj48ZGl2IGlkPSJ1bml0eS1jb250YWluZXIiPjxjYW52YXMgaWQ9InVuaXR5LWNhbnZhcyI+PC9jYW52YXM+PC9kaXY+PGRpdiBpZD0idW5pdHktbG9hZGluZy1jb250YWluZXIiPjxkaXYgaWQ9ImxvYWRpbmctcGVyY2VudGFnZSI+MSU8L2Rpdj48ZGl2IGlkPSJsb2FkaW5nLXRpcCI+VElQOiBZb3VyIGdhcmRlbiBncm93cyBvZmZsaW5lIHdoaWxlIHlvdSdyZSBub3QgcGxheWluZywgY29tZSBiYWNrIHRvIHNlZSB0aGUgZ3Jvd3RoITwvZGl2PjxpbWcgc3JjPSJsb2dvLndlYnAiIGNsYXNzPSJsb2dvIiBhbHQ9Ikdyb3dkZW4uaW8gTG9nbyI+PGRpdiBpZD0idW5pdHktbG9hZGluZy1iYXIiPjxkaXYgaWQ9InVuaXR5LWxvYWRpbmctYmFyLWlubmVyIj48L2Rpdj48L2Rpdj48L2Rpdj48c2NyaXB0PihmdW5jdGlvbigpew0KICAgICAgdmFyIHRpcHMgPSBbDQogICAgICAgICJUSVA6IFlvdXIgZ2FyZGVuIGdyb3dzIG9mZmxpbmUgd2hpbGUgeW91J3JlIG5vdCBwbGF5aW5nLCBjb21lIGJhY2sgdG8gc2VlIHRoZSBncm93dGghIiwNCiAgICAgICAgIlRJUDogU29tZSBmcnVpdHMgY2FuIG11dGF0ZSDigJQgcmFyZSBtdXRhdGlvbnMgYXJlIHdvcnRoIGEgbG90IG1vcmUhIiwNCiAgICAgICAgIlRJUDogQ29tcGV0ZSB3aXRoIGZyaWVuZHMgdG8gc2VlIHdobyBjYW4gY29sbGVjdCB0aGUgbW9zdCBmcnVpdHMuIiwNCiAgICAgICAgIlRJUDogU29tZSBtaXNzaW9ucyBnaXZlIGJvbnVzIHJld2FyZHMg4oCUIGNoZWNrIHlvdXIgcXVlc3RzIG9mdGVuLiINCiAgICAgIF07DQoNCiAgICAgIGZ1bmN0aW9uIHN0YXJ0VGlwUm90YXRpb24oKXsNCiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctdGlwJyk7DQogICAgICAgIGlmKCFlbCl7IHJldHVybjsgfQ0KICAgICAgICB2YXIgaSA9IDA7DQogICAgICAgIGVsLnRleHRDb250ZW50ID0gdGlwc1swXTsNCiAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCl7DQogICAgICAgICAgaSA9IChpICsgMSkgJSB0aXBzLmxlbmd0aDsNCiAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDsNCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IHRpcHNbaV07DQogICAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICB9LCA1MDApOw0KICAgICAgICB9LCA3MDAwKTsNCiAgICAgIH0NCg0KICAgICAgaWYoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKXsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHN0YXJ0VGlwUm90YXRpb24pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc3RhcnRUaXBSb3RhdGlvbigpOw0KICAgICAgfQ0KICAgIH0pKCk7PC9zY3JpcHQ+PHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9sZCtqc29uIiBpZD0iZmFxLWpzb25sZCI+ew0KICAgICJAY29udGV4dCI6ICJodHRwczovL3NjaGVtYS5vcmciLA0KICAgICJAdHlwZSI6ICJGQVFQYWdlIiwNCiAgICAibWFpbkVudGl0eSI6IFsNCiAgICAgIHsNCiAgICAgICAgIkB0eXBlIjogIlF1ZXN0aW9uIiwNCiAgICAgICAgIm5hbWUiOiAiSG93IHRvIGdyb3cgYSBnYXJkZW4/IiwNCiAgICAgICAgImFjY2VwdGVkQW5zd2VyIjogeyAiQHR5cGUiOiAiQW5zd2VyIiwgInRleHQiOiAiT3BlbiBHcm93ZGVuLmlvLCBwbGFudCBzZWVkcyBpbiB5b3VyIHBsb3QsIHdhdGVyIHRoZW0sIGFuZCBoYXJ2ZXN0LiBQbGF5IGRhaWx5IHRvIGdyb3cgYSB0aHJpdmluZyBnYXJkZW4uIiB9DQogICAgICB9LA0KICAgICAgew0KICAgICAgICAiQHR5cGUiOiAiUXVlc3Rpb24iLA0KICAgICAgICAibmFtZSI6ICJJcyBHcm93ZGVuLmlvIGEgZnJlZSBnYXJkZW4gZ3Jvd2luZyBnYW1lPyIsDQogICAgICAgICJhY2NlcHRlZEFuc3dlciI6IHsgIkB0eXBlIjogIkFuc3dlciIsICJ0ZXh0IjogIlllcy4gR3Jvd2Rlbi5pbyBpcyBmcmVlIHRvIHBsYXkgaW4geW91ciBicm93c2VyIHdpdGggbm8gZG93bmxvYWQgcmVxdWlyZWQuIiB9DQogICAgICB9LA0KICAgICAgew0KICAgICAgICAiQHR5cGUiOiAiUXVlc3Rpb24iLA0KICAgICAgICAibmFtZSI6ICJDYW4gSSBwbGF5IEdyb3dkZW4uaW8gd2l0aCBmcmllbmRzPyIsDQogICAgICAgICJhY2NlcHRlZEFuc3dlciI6IHsgIkB0eXBlIjogIkFuc3dlciIsICJ0ZXh0IjogIlllcy4gQ3JlYXRlIGEgcm9vbSBpbiBQbGF5IFdpdGggRnJpZW5kcyBhbmQgc2hhcmUgdGhlIGNvZGUgZm9yIG90aGVycyB0byBqb2luIGluc3RhbnRseS4iIH0NCiAgICAgIH0sDQogICAgICB7DQogICAgICAgICJAdHlwZSI6ICJRdWVzdGlvbiIsDQogICAgICAgICJuYW1lIjogIkRvZXMgR3Jvd2Rlbi5pbyBoYXZlIGl0ZW1zIGFuZCBza2lucz8iLA0KICAgICAgICAiYWNjZXB0ZWRBbnN3ZXIiOiB7ICJAdHlwZSI6ICJBbnN3ZXIiLCAidGV4dCI6ICJZb3UgY2FuIHVubG9jayBhbmQgZXF1aXAgc2tpbnMsIGl0ZW1zLCBhbmQgYnVuZGxlcyBpbiB0aGUgU2hvcCBhbmQgSW52ZW50b3J5LiIgfQ0KICAgICAgfQ0KICAgIF0NCiAgfTwvc2NyaXB0PjxzY3JpcHQgc3JjPSJCdWlsZC84OGU0ZTIzMDU5NmE3ZjczOTI2M2ZjMTY5NjVlMGRhNy5sb2FkZXIuanMiPjwvc2NyaXB0PjxzY3JpcHQ+Ly8gU2FmZSBidWlsZCBVUkwNCiAgICBmdW5jdGlvbiBnZXRTYWZlQnVpbGRVUkwoKSB7DQogICAgICB0cnkgew0KICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5TREs/LmdldEJ1aWxkVVJMID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgcmV0dXJuIHdpbmRvdy5TREsuZ2V0QnVpbGRVUkwoKTsNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICBjb25zb2xlLndhcm4oIlNESy5nZXRCdWlsZFVSTCBmYWlsZWQ6IiwgZSk7DQogICAgICB9DQogICAgICByZXR1cm4gIkJ1aWxkIjsgLy8gZmFsbGJhY2sNCiAgICB9DQoNCiAgICAvLyBTYWZlIFN0cmVhbWluZyBBc3NldHMgVVJMDQogICAgZnVuY3Rpb24gZ2V0U2FmZVN0cmVhbWluZ0Fzc2V0c1VybCgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGlmICh0eXBlb2Ygd2luZG93LlNESz8uZ2V0U3RyZWFtaW5nQXNzZXRzVXJsID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgcmV0dXJuIHdpbmRvdy5TREsuZ2V0U3RyZWFtaW5nQXNzZXRzVXJsKCk7DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS53YXJuKCJTREsuZ2V0U3RyZWFtaW5nQXNzZXRzVXJsIGZhaWxlZDoiLCBlKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiAiL1N0cmVhbWluZ0Fzc2V0cyI7IC8vIGZhbGxiYWNrDQogICAgfQ0KDQogICAgLy8gU2FmZSBTdGF0aWMgUmVzb2x1dGlvbiBTY2FsZSBNdWx0aQ0KICAgIGZ1bmN0aW9uIGdldFNhZmVTdGF0aWNSZXNvbHV0aW9uU2NhbGVNdWx0aSgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGlmICh0eXBlb2Ygd2luZG93LlNESz8uZ2V0U3RhdGljUmVzb2x1dGlvblNjYWxlTXVsdGkgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICByZXR1cm4gd2luZG93LlNESy5nZXRTdGF0aWNSZXNvbHV0aW9uU2NhbGVNdWx0aSgpOw0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIGNvbnNvbGUud2FybigiU0RLLmdldFN0YXRpY1Jlc29sdXRpb25TY2FsZU11bHRpIGZhaWxlZDoiLCBlKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiAxLjAwOyAvLyBmYWxsYmFjaw0KICAgIH0NCg0KICAgIHdhaXRGb3JTREtUaGVuU3RhcnQoKHdhc211cmwpID0+IHsNCiAgICAgIHZhciBidWlsZFVybCA9IGdldFNhZmVCdWlsZFVSTCgpOw0KICAgICAgdmFyIGxvYWRlclVybCA9IGJ1aWxkVXJsICsgIi84OGU0ZTIzMDU5NmE3ZjczOTI2M2ZjMTY5NjVlMGRhNy5sb2FkZXIuanMiOw0KICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlJ3JlIG9uIG1vYmlsZQ0KICAgICAgdmFyIGlzTW9iaWxlID0gL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQoNCiAgICAgIHZhciAgc2FmZVN0YXRpY1Jlc29sdXRpb25TY2FsZU11bHRpID0gZ2V0U2FmZVN0YXRpY1Jlc29sdXRpb25TY2FsZU11bHRpKCk7DQogICAgICB2YXIgY29uZmlnID0gew0KICAgICAgICBkYXRhVXJsOiBidWlsZFVybCArICIvYTczNzFhN2ZkYTk4YjcxYWMxY2ZkZWU1NmE3OTc3MmIuZGF0YSIsDQogICAgICAgIGZyYW1ld29ya1VybDogYnVpbGRVcmwgKyAiLzcxM2MyOTVjYmUwZTc0MzQ1Y2QzMmEyMzU5MDBhMzRmLmZyYW1ld29yay5qcyIsDQogICAgICAgIGNvZGVVcmw6IHdhc211cmwsDQogICAgICAgIHN0cmVhbWluZ0Fzc2V0c1VybDogZ2V0U2FmZVN0cmVhbWluZ0Fzc2V0c1VybCgpLA0KICAgICAgICBjb21wYW55TmFtZTogIkxFR2lPTiBQbGF0Zm9ybXMiLA0KICAgICAgICBwcm9kdWN0TmFtZTogIkdyb3dkZW4uaW8iLA0KICAgICAgICBwcm9kdWN0VmVyc2lvbjogIjE3ejUzNjI3NTg0IiwNCiAgICAgICAgYXV0b1N5bmNQZXJzaXN0ZW50RGF0YVBhdGg6IHRydWUsDQogICAgICAgIGRldmljZVBpeGVsUmF0aW86IDEuMCAqIHNhZmVTdGF0aWNSZXNvbHV0aW9uU2NhbGVNdWx0aSAvLyBkZWZhdWx0IHZhbHVlLCB3aWxsIGJlIHVwZGF0ZWQgYmVsb3cNCiAgICAgIH07DQoNCiAgICAgIC8vIERlZmF1bHQgRFBSIGJhc2VkIG9uIHBsYXRmb3JtDQogICAgICB2YXIgZGVmYXVsdERQUiA9IHNhZmVTdGF0aWNSZXNvbHV0aW9uU2NhbGVNdWx0aSAqIChpc01vYmlsZSA/IDEuMyA6IDEuMCk7DQogICAgICAvLyBBdHRlbXB0IHRvIHJlYWQgdGhlIFJlc29sdXRpb25TY2FsZSBmcm9tIGxvY2FsU3RvcmFnZQ0KICAgICAgdmFyIGxzVmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiUmVzb2x1dGlvblNjYWxlIik7DQogICAgICB2YXIgcGFyc2VkVmFsdWUgPSBwYXJzZUZsb2F0KGxzVmFsdWUpOw0KICAgICAgLy8gSWYgbG9jYWxTdG9yYWdlIGNvbnRhaW5zIGEgdmFsaWQgbnVtYmVyLCB1c2UgaXQ7IG90aGVyd2lzZSB1c2UgdGhlIGRlZmF1bHQuDQogICAgICB2YXIgZmluYWxSZXNvbHV0aW9uU2NhbGVWYWx1ZSA9ICFpc05hTihwYXJzZWRWYWx1ZSkgPyBwYXJzZWRWYWx1ZSA6IGRlZmF1bHREUFI7DQogICAgICBjb25maWcuZGV2aWNlUGl4ZWxSYXRpbyA9IGZpbmFsUmVzb2x1dGlvblNjYWxlVmFsdWU7DQoNCiAgICAgIGlmIChpc01vYmlsZSkgew0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgIGlmIChldmVudC5zY2FsZSAhPT0gMSkgew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7DQogICAgICB9DQoNCiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY2FudmFzIik7DQogICAgICB2YXIgbG9hZGluZ0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1sb2FkaW5nLWNvbnRhaW5lciIpOw0KICAgICAgdmFyIGxvYWRpbmdCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktbG9hZGluZy1iYXItaW5uZXIiKTsNCiAgICAgIHZhciBsb2FkaW5nUGVyY2VudGFnZUVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbG9hZGluZy1wZXJjZW50YWdlIik7DQoNCiAgICAgIC8vcHJvZ3Jlc3Mgc2ltdWxhdGlvbiBmb3IgYmV0dGVyIFVYDQogICAgICBjb25zdCBtaW5Qcm9nID0gNTE7DQogICAgICBjb25zdCBtYXhQcm9nID0gOTk7DQogICAgICB2YXIgdGFyZ2V0UHJvZ3Jlc3MgPSBtaW5Qcm9nOw0KDQogICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHsNCiAgICAgICAgdGFyZ2V0UHJvZ3Jlc3MgKz0gMC4xMjsNCiAgICAgICAgdGFyZ2V0UHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heCh0YXJnZXRQcm9ncmVzcywgbWluUHJvZyksIG1heFByb2cpOw0KICAgICAgICBsb2FkaW5nQmFyLnN0eWxlLndpZHRoID0gdGFyZ2V0UHJvZ3Jlc3MgKyAiJSI7DQogICAgICAgIGxvYWRpbmdQZXJjZW50YWdlRWxlbS50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IodGFyZ2V0UHJvZ3Jlc3MpICsgIiUiOw0KICAgICAgfQ0KDQogICAgICAvLyBTdGFydCB0aGUgaW50ZXJ2YWwgdG8gdXBkYXRlIHByb2dyZXNzIGV2ZXJ5IDEwMG1zDQogICAgICB2YXIgcHJvZ3Jlc3NJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVByb2dyZXNzLCAxMDApOw0KDQogICAgICBpZiAod2luZG93LlNESyAmJiB0eXBlb2Ygd2luZG93LlNESy5sb2FkaW5nU3RhcnQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgd2luZG93LlNESy5sb2FkaW5nU3RhcnQoKTsNCiAgICAgIH0NCg0KICAgICAgdmFyIHVuaXR5TG9hZGVyU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQogICAgICB1bml0eUxvYWRlclNjcmlwdC5zcmMgPSBsb2FkZXJVcmw7DQogICAgICB1bml0eUxvYWRlclNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgY3JlYXRlVW5pdHlJbnN0YW5jZShjYW52YXMsIGNvbmZpZywgZnVuY3Rpb24ocHJvZ3Jlc3MpIHsNCiAgICAgICAgICB2YXIgYWN0dWFsUHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heChwcm9ncmVzcyAqIDEwMCwgbWluUHJvZyksIG1heFByb2cpOw0KICAgICAgICAgIGlmIChhY3R1YWxQcm9ncmVzcyA+IHRhcmdldFByb2dyZXNzKSB7DQogICAgICAgICAgICB0YXJnZXRQcm9ncmVzcyA9IGFjdHVhbFByb2dyZXNzOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkudGhlbihmdW5jdGlvbih1bml0eUluc3RhbmNlKSB7DQogICAgICAgICAgd2luZG93LnVuaXR5SW5zdGFuY2UgPSB1bml0eUluc3RhbmNlOw0KDQogICAgICAgICAgaWYgKHdpbmRvdy5TREsgJiYgdHlwZW9mIHdpbmRvdy5TREsubG9hZGluZ0VuZCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgd2luZG93LlNESy5sb2FkaW5nRW5kKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gRW5zdXJlIHRoZSBsb2FkaW5nIGJhciBmaWxscyB0byAxMDAlIHNtb290aGx5DQogICAgICAgICAgdGFyZ2V0UHJvZ3Jlc3MgPSAxMDA7DQogICAgICAgICAgbG9hZGluZ0Jhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsNCiAgICAgICAgICBsb2FkaW5nUGVyY2VudGFnZUVsZW0udGV4dENvbnRlbnQgPSAiMTAwJSI7DQogICAgICAgICAgY2xlYXJJbnRlcnZhbChwcm9ncmVzc0ludGVydmFsKTsNCiAgICAgICAgICBsb2FkaW5nQ29udGFpbmVyPy5yZW1vdmUoKTsNCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgew0KICAgICAgICAgIGNsZWFySW50ZXJ2YWwocHJvZ3Jlc3NJbnRlcnZhbCk7DQogICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsNCiAgICAgICAgfSk7DQogICAgICB9Ow0KICAgICAgDQogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHVuaXR5TG9hZGVyU2NyaXB0KTsNCiAgICB9KTs8L3NjcmlwdD48bm9zY3JpcHQ+UGxlYXNlIGVuYWJsZSBKYXZhU2NyaXB0IHRvIHJ1biB0aGlzIGdhbWUhIExlYXJuIGhvdyA8YSBocmVmPSJodHRwczovL3N1cHBvcnQuZ29vZ2xlLmNvbS9hZHNlbnNlL2Fuc3dlci8xMjY1NCIgdGFyZ2V0PSJfYmxhbmsiPmhlcmU8L2E+Ljwvbm9zY3JpcHQ+PHNjcmlwdCBzcmM9InMvY3Vyc29yLmpzIiBkZWZlcj0iZGVmZXIiPjwvc2NyaXB0PjxzY3JpcHQgc3JjPSJzL3B3YS5qcyIgZGVmZXI9ImRlZmVyIj48L3NjcmlwdD48c2NyaXB0IHNyYz0icy91dGlscy5qcyIgZGVmZXI9ImRlZmVyIj48L3NjcmlwdD48c2NyaXB0IHNyYz0icy9waW5nZXIuanMiIGRlZmVyPSJkZWZlciI+PC9zY3JpcHQ+PHNjcmlwdCBzcmM9InMvZXhpdC1pbnRlbnQuanMiIGRlZmVyPSJkZWZlciI+PC9zY3JpcHQ+PHNjcmlwdD5pZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikgew0KICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHsNCiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3Mvc3cuanMnKTsNCiAgICAgIH0pOw0KICAgIH08L3NjcmlwdD48L2JvZHk+PC9odG1sPg==";
