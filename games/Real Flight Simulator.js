window.game = "PGh0bWw+DQoNCjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IA0KPCEtLSBGb3IgdGhlIHJlZ3VsYXJseSB1cGRhdGluZyBkb2MgZ28gdG8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xX0ZtSDNCbFNCUUk3RkdnQVFMNTktWlBlOGVDeHMzNXdlbDZKVXlWYUc4US8gLS0+DQoNCg0KDQoNCjxodG1sIGxhbmc9ImVuLXVzIj4NCg0KPGhlYWQ+DQo8c2NyaXB0IGFzeW5jIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xldGFnbWFuYWdlci5jb20vZ3RhZy9qcz9pZD1HLU5NTktaWURQUDgiPjwvc2NyaXB0Pg0KPHNjcmlwdD4NCiAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107DQogIGZ1bmN0aW9uIGd0YWcoKXtkYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpO30NCiAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTsNCg0KICBndGFnKCdjb25maWcnLCAnRy1OTU5LWllEUFA4Jyk7DQo8L3NjcmlwdD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8YmFzZSBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL1VHUy1Bc3NldHNAbWFpbi9mbGlnaHQlMjBzaW0vIj4NCiAgPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiPg0KICA8dGl0bGU+VW5pdHkgV2ViR0wgUGxheWVyIHwgR2VvcmdlIGFuZCB0aGUgUHJpbnRlcjwvdGl0bGU+DQogIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iVGVtcGxhdGVEYXRhL2Zhdmljb24uaWNvIj4NCiAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJUZW1wbGF0ZURhdGEvc3R5bGUuY3NzIj4NCiAgPHNjcmlwdCBzcmM9IkJ1aWxkL1VuaXR5TG9hZGVyLmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdD4NCiAgICBmdW5jdGlvbiBtZXJnZUZpbGVzKGZpbGVQYXJ0cykgew0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgbGV0IGJ1ZmZlcnMgPSBbXTsNCiAgICAgICAgZnVuY3Rpb24gZmV0Y2hQYXJ0KGkpIHsNCiAgICAgICAgICBpZiAoaSA+PSBmaWxlUGFydHMubGVuZ3RoKSB7DQogICAgICAgICAgICBsZXQgbWVyZ2VkQmxvYiA9IG5ldyBCbG9iKGJ1ZmZlcnMpOw0KICAgICAgICAgICAgcmVzb2x2ZShtZXJnZWRCbG9iKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgZmV0Y2goZmlsZVBhcnRzW2ldKQ0KICAgICAgICAgICAgLnRoZW4ociA9PiByLmFycmF5QnVmZmVyKCkpDQogICAgICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgYnVmZmVycy5wdXNoKGRhdGEpOw0KICAgICAgICAgICAgICBmZXRjaFBhcnQoaSArIDEpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpOw0KICAgICAgICB9DQogICAgICAgIGZldGNoUGFydCgwKTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFBhcnRzKGZpbGUsIHN0YXJ0LCBlbmQpIHsNCiAgICAgIGxldCBhcnIgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKykgew0KICAgICAgICBhcnIucHVzaChmaWxlICsgIi5wYXJ0IiArIGkpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGFycjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiByZXNpemVVbml0eUNvbnRhaW5lcigpIHsNCiAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2FtZUNvbnRhaW5lciIpOw0KICAgICAgaWYgKGNvbnRhaW5lcikgew0KICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCArICJweCI7DQogICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKyAicHgiOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVVbml0eUNvbnRhaW5lcik7DQoNCiAgICBmdW5jdGlvbiBVbml0eVByb2dyZXNzKGdhbWVJbnN0YW5jZSwgcHJvZ3Jlc3MpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGlmIChwcm9ncmVzcyA9PT0gJ2NvbXBsZXRlJykgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgcGN0ID0gMDsNCiAgICAgICAgaWYgKHR5cGVvZiBwcm9ncmVzcyA9PT0gJ251bWJlcicpIHBjdCA9IHByb2dyZXNzOw0KICAgICAgICBlbHNlIGlmIChwcm9ncmVzcyAmJiBwcm9ncmVzcy50b3RhbCAmJiBwcm9ncmVzcy5sb2FkZWQpIHBjdCA9IHByb2dyZXNzLmxvYWRlZCAvIHByb2dyZXNzLnRvdGFsOw0KICAgICAgICB2YXIgdHh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctdGV4dCcpOw0KICAgICAgICBpZiAodHh0KSB0eHQudGV4dENvbnRlbnQgPSAnTG9hZGluZy4uLiAnICsgTWF0aC5yb3VuZChwY3QgKiAxMDApICsgJyUnOw0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdQcm9ncmVzcyBlcnJvcjonLCBlKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIHdpbmRvdy51bml0eU1lcmdlZEZpbGVzID0ge307DQogICAgICANCiAgICAgIFByb21pc2UuYWxsKFsNCiAgICAgICAgbWVyZ2VGaWxlcyhnZXRQYXJ0cygiQnVpbGQvZ2FtZS5kYXRhLnVuaXR5d2ViIiwgMSwgMikpLA0KICAgICAgICBtZXJnZUZpbGVzKGdldFBhcnRzKCJCdWlsZC9nYW1lLmFzbS5jb2RlLnVuaXR5d2ViIiwgMSwgMSkpLCANCiAgICAgICAgbWVyZ2VGaWxlcyhnZXRQYXJ0cygiQnVpbGQvZ2FtZS5hc20ubWVtb3J5LnVuaXR5d2ViIiwgMSwgMSkpLA0KICAgICAgICBtZXJnZUZpbGVzKGdldFBhcnRzKCJCdWlsZC9nYW1lLmFzbS5mcmFtZXdvcmsudW5pdHl3ZWIiLCAxLCAxKSkNCiAgICAgIF0pLnRoZW4oKFtkYXRhQmxvYiwgd2FzbUNvZGVCbG9iLCB3YXNtTWVtb3J5QmxvYiwgd2FzbUZyYW1ld29ya0Jsb2JdKSA9PiB7DQogICAgICAgIHdpbmRvdy51bml0eU1lcmdlZEZpbGVzWydCdWlsZC9nYW1lLmRhdGEudW5pdHl3ZWInXSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YUJsb2IpOw0KICAgICAgICB3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1snQnVpbGQvZ2FtZS5hc20uY29kZS51bml0eXdlYiddID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh3YXNtQ29kZUJsb2IpOw0KICAgICAgICB3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1snQnVpbGQvZ2FtZS5hc20ubWVtb3J5LnVuaXR5d2ViJ10gPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHdhc21NZW1vcnlCbG9iKTsNCiAgICAgICAgd2luZG93LnVuaXR5TWVyZ2VkRmlsZXNbJ0J1aWxkL2dhbWUuYXNtLmZyYW1ld29yay51bml0eXdlYiddID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh3YXNtRnJhbWV3b3JrQmxvYik7DQogICAgICAgIA0KICAgICAgICBjb25zb2xlLmxvZygiTWVyZ2VkIGZpbGVzIHJlYWR5OiIsIE9iamVjdC5rZXlzKHdpbmRvdy51bml0eU1lcmdlZEZpbGVzKSk7DQogICAgICAgIA0KICAgICAgICBjb25zdCBvcmlnaW5hbEZldGNoID0gd2luZG93LmZldGNoOw0KICAgICAgICB3aW5kb3cuZmV0Y2ggPSBmdW5jdGlvbih1cmwsIC4uLmFyZ3MpIHsNCiAgICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgd2luZG93LnVuaXR5TWVyZ2VkRmlsZXNbdXJsXSkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coIlJlZGlyZWN0aW5nIGZldGNoIHRvIG1lcmdlZCBmaWxlOiIsIHVybCk7DQogICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxGZXRjaCh3aW5kb3cudW5pdHlNZXJnZWRGaWxlc1t1cmxdLCAuLi5hcmdzKTsNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRmV0Y2godXJsLCAuLi5hcmdzKTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGNvbnN0IE9yaWdpbmFsWEhSID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0Ow0KICAgICAgICB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgT3JpZ2luYWxYSFIoKTsNCiAgICAgICAgICBjb25zdCBvcmlnaW5hbE9wZW4gPSB4aHIub3BlbjsNCiAgICAgICAgICANCiAgICAgICAgICB4aHIub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCAuLi5hcmdzKSB7DQogICAgICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgd2luZG93LnVuaXR5TWVyZ2VkRmlsZXNbdXJsXSkgew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUmVkaXJlY3RpbmcgWEhSIHRvIG1lcmdlZCBmaWxlOiIsIHVybCk7DQogICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbE9wZW4uY2FsbCh0aGlzLCBtZXRob2QsIHdpbmRvdy51bml0eU1lcmdlZEZpbGVzW3VybF0sIC4uLmFyZ3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsT3Blbi5jYWxsKHRoaXMsIG1ldGhvZCwgdXJsLCAuLi5hcmdzKTsNCiAgICAgICAgICB9Ow0KICAgICAgICAgIA0KICAgICAgICAgIHJldHVybiB4aHI7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvLyBMb2FkIFVuaXR5DQogICAgICAgIHdpbmRvdy5nYW1lSW5zdGFuY2UgPSBVbml0eUxvYWRlci5pbnN0YW50aWF0ZSgiZ2FtZUNvbnRhaW5lciIsICJCdWlsZC9nYW1lLmpzb24iLCB7DQogICAgICAgICAgb25Qcm9ncmVzczogVW5pdHlQcm9ncmVzcywNCiAgICAgICAgICBNb2R1bGU6IHsNCiAgICAgICAgICAgIG9uUnVudGltZUluaXRpYWxpemVkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgIHJlc2l6ZVVuaXR5Q29udGFpbmVyKCk7DQogICAgICAgICAgICAgIGxldCBsb2FkaW5nVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNsb2FkaW5nLXRleHQiKTsNCiAgICAgICAgICAgICAgaWYgKGxvYWRpbmdUZXh0KSBsb2FkaW5nVGV4dC5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgVW5pdHlQcm9ncmVzcyh3aW5kb3cuZ2FtZUluc3RhbmNlLCAnY29tcGxldGUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSkNCiAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKCJVbml0eSBsb2FkIGZhaWxlZDoiLCBlcnIpOw0KICAgICAgICBsZXQgdHh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctdGV4dCcpOw0KICAgICAgICBpZiAodHh0KSB0eHQudGV4dENvbnRlbnQgPSAnTG9hZGluZyBmYWlsZWQ6ICcgKyBlcnIubWVzc2FnZTsNCiAgICAgIH0pOw0KICAgIH0pOw0KICA8L3NjcmlwdD4NCjwvaGVhZD4NCg0KPGJvZHk+DQogIDxkaXYgY2xhc3M9IndlYmdsLWNvbnRlbnQiPg0KICAgIDxkaXYgaWQ9ImdhbWVDb250YWluZXIiIHN0eWxlPSJ3aWR0aDogOTYwcHg7IGhlaWdodDogNjAwcHgiPg0KICAgICAgPHAgaWQ9ImxvYWRpbmctdGV4dCI+TG9hZGluZy4uLjwvcD4NCiAgICA8L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJmb290ZXIiPg0KICAgICAgPGRpdiBjbGFzcz0id2ViZ2wtbG9nbyI+PC9kaXY+DQogICAgICA8ZGl2IGNsYXNzPSJmdWxsc2NyZWVuIiBvbmNsaWNrPSJ3aW5kb3cuZ2FtZUluc3RhbmNlICYmIHdpbmRvdy5nYW1lSW5zdGFuY2UuU2V0RnVsbHNjcmVlbigxKSI+PC9kaXY+DQogICAgPC9kaXY+DQogIDwvZGl2Pg0KPC9ib2R5Pg0KDQo8L2h0bWw+";
