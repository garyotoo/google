window.game = "DQoNCjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IA0KPCEtLSBGb3IgdGhlIHJlZ3VsYXJseSB1cGRhdGluZyBkb2MgZ28gdG8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xX0ZtSDNCbFNCUUk3RkdnQVFMNTktWlBlOGVDeHMzNXdlbDZKVXlWYUc4US8gLS0+DQoNCg0KDQo8aHRtbD48aGVhZD48c2NyaXB0IHNyYz0iLy93d3cuZ29vZ2xlLmNvbS9qc2FwaSI+PC9zY3JpcHQ+PHNjcmlwdD53aW5kb3cucGFyZW50Lm1hZUV4cG9ydEFwaXNfKCk7PC9zY3JpcHQ+DQoNCiAgICANCiAgICAgICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICAgICAgICA8c3R5bGU+DQogICAgICAgICAgICBib2R5IHsNCiAgICAgICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzIyMg0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAub3ZlcmxheSxib2R5IHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDB2dzsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHZoOw0KICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBjb2xvcjogI2VlZTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjIyOw0KICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5vdmVybGF5IHsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBib2R5LmxvYWRpbmcgLm92ZXJsYXkgew0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXgNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY2FudmFzIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbg0KICAgICAgICAgICAgfQ0KICAgICAgICA8L3N0eWxlPg0KICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+I2J1dHRvbiB7DQogIGRpc3BsYXk6bm9uZTsNCn0NCi5pbWdiX3ZpcyB7DQogIGFuaW1hdGlvbjogaW1nYi1hbmltYXRpb24gN3MgbGluZWFyOw0KfQ0KQGtleWZyYW1lcyBpbWdiLWFuaW1hdGlvbiB7DQogIDEwJSB7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOw0KICB9DQogIDIwJSB7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEwMHB4KTsNCiAgfQ0KICA5MCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDBweCk7DQogIH0NCiAgMTAwJSB7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOw0KICB9DQp9PC9zdHlsZT48L2hlYWQ+DQogICAgPGJvZHkgY2xhc3M9IiI+DQogICAgICAgIDxjYW52YXMgd2lkdGg9IjE5MjAiIGhlaWdodD0iMTA4MCI+PC9jYW52YXM+DQogICAgICAgIDxkaXYgY2xhc3M9Im92ZXJsYXkiPkdlbmVyYXRpbmcgYXNzZXRzLi4uPC9kaXY+DQogICAgICAgIDxzY3JpcHQ+DQogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZnVuY3Rpb24oZSkgew0KICAgICAgaWYoWyJTcGFjZSIsIkFycm93VXAiLCJBcnJvd0Rvd24iLCJBcnJvd0xlZnQiLCJBcnJvd1JpZ2h0Il0uaW5kZXhPZihlLmNvZGUpID4gLTEpIHsNCiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICB9DQogIH0sIGZhbHNlKTsNCjwvc2NyaXB0Pg0KICAgICAgICA8c2NyaXB0Pg0KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOw0KICAgICAgICAgICAgbGV0IGcgPSAxIC8gNjAsIGgsIGssIGwsIG07DQogICAgICAgICAgICB2YXIgbiA9IG51bGwNCiAgICAgICAgICAgICAgLCBhYSA9IG51bGwNCiAgICAgICAgICAgICAgLCBiYSA9IG51bGwNCiAgICAgICAgICAgICAgLCBxID0gbnVsbDsNCiAgICAgICAgICAgIGxldCBjYSA9IDA7DQogICAgICAgICAgICBmdW5jdGlvbiBkYShhKSB7DQogICAgICAgICAgICAgICAgYSA9ICgyNDAgKyA3MCAqIGEpICUgMzYwOw0KICAgICAgICAgICAgICAgIG4gPSBgaHNsKCR7YX0sICR7MH0lLCAkezkzfSUpYDsNCiAgICAgICAgICAgICAgICBhICs9IDIwOw0KICAgICAgICAgICAgICAgIGFhID0gYGhzbCgke2F9LCAkezF9JSwgJHs3MH0lKWA7DQogICAgICAgICAgICAgICAgYSArPSAyMDsNCiAgICAgICAgICAgICAgICBiYSA9IGBoc2woJHthfSwgJHs1fSUsICR7NDl9JSlgOw0KICAgICAgICAgICAgICAgIHEgPSBgaHNsKCR7YSArIDIwfSwgJHsyMX0lLCAkezE3fSUpYA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHQgPSB7fQ0KICAgICAgICAgICAgICAsIHUgPSB7fTsNCiAgICAgICAgICAgIGZ1bmN0aW9uIGZhKCkgew0KICAgICAgICAgICAgICAgIFsxLCA0LCAyLCA4LCAxNiwgMzJdLmZvckVhY2goKGEpPT57DQogICAgICAgICAgICAgICAgICAgIHVbYV0gPSB0W2FdDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCBoYSA9IHsNCiAgICAgICAgICAgICAgICAzNzogMSwNCiAgICAgICAgICAgICAgICAzOTogNCwNCiAgICAgICAgICAgICAgICAzODogMiwNCiAgICAgICAgICAgICAgICA0MDogOCwNCiAgICAgICAgICAgICAgICAxNjogMTYsDQogICAgICAgICAgICAgICAgOTA6IDMyLA0KICAgICAgICAgICAgICAgIDMyOiAzMg0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCAoe2tleUNvZGU6IGF9KT0+ew0KICAgICAgICAgICAgICAgIGlmIChhID0gaGFbYV0pDQogICAgICAgICAgICAgICAgICAgIHVbYV0gPSB0W2FdLA0KICAgICAgICAgICAgICAgICAgICB0W2FdID0gITANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICwgITEpOw0KICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCAoe2tleUNvZGU6IGF9KT0+ew0KICAgICAgICAgICAgICAgIGlmIChhID0gaGFbYV0pDQogICAgICAgICAgICAgICAgICAgIHVbYV0gPSB0W2FdLA0KICAgICAgICAgICAgICAgICAgICB0W2FdID0gITENCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICwgITEpOw0KICAgICAgICAgICAgdmFyIGlhID0gew0KICAgICAgICAgICAgICAgIG1hOiAiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoTEFBY0FLSUFBT0ExLzJ3eDhqdXovem5uV3Yrek8vLy8vOVBUMC8vLy95SDVCQUVBQUFjQUxBQUFBQUFzQUJ3QUFBUC9lTHJRKzNESVFRaDhwZHpiM0o1VE5XeEhscEZNQjF3Z0pZNlhlVzVkb0ViZ0syMnlaajRxV3lPd2FGRkFpNTVTbHFvQmJNVmNTN0dzRUpUT2JJRFlJa3lwUFd1bEZ4USt0MXpqN21FSWk2OG4xZkI1VGs5UUI0UGVKQ2JMNldoRWVDUXlZejBIUXphS2FDeDNLRXVIaUhPQmpWOHhrQVY2RUpRZmFqeE1lcHFEblo0UWJSa0dvNk5TU0thaWVBS3hnNnhycWhDeHNuaGRYakJnUHlpNHVibzVJcjYvSk1FQnVLc2hGb2lSRzhxeDBzSzJDaDJZQlNzSEFzclUxU2hmRGRuYVc5UEp5NVhpZm1TQnVPYnBEN1FZZm5KbzNmakJBamdTdkxVbFdPemQreGJ2UUxOV1ZMQmxBS0R0aGp0djBuRG82SFh0VDhNT0N4NFdOT2dDRHlFUUIzKzJQZUQwZ1pjMU9Rc1NBQUE3IiwNCiAgICAgICAgICAgICAgICBZOiBbew0KICAgICAgICAgICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAxMywNCiAgICAgICAgICAgICAgICAgICAgaDogMTMsDQogICAgICAgICAgICAgICAgICAgIGo6IDExLA0KICAgICAgICAgICAgICAgICAgICBsOiAxMQ0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgeDogMTQsDQogICAgICAgICAgICAgICAgICAgIHk6IDAsDQogICAgICAgICAgICAgICAgICAgIGk6IDEzLA0KICAgICAgICAgICAgICAgICAgICBoOiA5LA0KICAgICAgICAgICAgICAgICAgICBqOiA3LA0KICAgICAgICAgICAgICAgICAgICBsOiAxDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiAyOCwNCiAgICAgICAgICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgICAgICAgICAgaTogMTYsDQogICAgICAgICAgICAgICAgICAgIGg6IDE1LA0KICAgICAgICAgICAgICAgICAgICBqOiA5LA0KICAgICAgICAgICAgICAgICAgICBsOiA4DQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiAxNywNCiAgICAgICAgICAgICAgICAgICAgeTogMTAsDQogICAgICAgICAgICAgICAgICAgIGk6IDExLA0KICAgICAgICAgICAgICAgICAgICBoOiA5LA0KICAgICAgICAgICAgICAgICAgICBqOiAxMCwNCiAgICAgICAgICAgICAgICAgICAgbDogOA0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgeDogMCwNCiAgICAgICAgICAgICAgICAgICAgeTogMTUsDQogICAgICAgICAgICAgICAgICAgIGk6IDE2LA0KICAgICAgICAgICAgICAgICAgICBoOiAxMywNCiAgICAgICAgICAgICAgICAgICAgajogNiwNCiAgICAgICAgICAgICAgICAgICAgbDogMTINCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDE2LA0KICAgICAgICAgICAgICAgICAgICB5OiAyMCwNCiAgICAgICAgICAgICAgICAgICAgaTogMTIsDQogICAgICAgICAgICAgICAgICAgIGg6IDgsDQogICAgICAgICAgICAgICAgICAgIGo6IDIsDQogICAgICAgICAgICAgICAgICAgIGw6IDcNCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDI5LA0KICAgICAgICAgICAgICAgICAgICB5OiAxNiwNCiAgICAgICAgICAgICAgICAgICAgaTogMTUsDQogICAgICAgICAgICAgICAgICAgIGg6IDEyLA0KICAgICAgICAgICAgICAgICAgICBqOiA4LA0KICAgICAgICAgICAgICAgICAgICBsOiA2DQogICAgICAgICAgICAgICAgfV0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCBqYSA9IHsNCiAgICAgICAgICAgICAgICBtYTogImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaHN3QUZBSUFBQUFBQUFQLy8veUg1QkFFQUFBRUFMQUFBQUFDekFBVUFBQUtSREI1MmtJckwzSU9KUmxOUmZvM2QybUdnczExTDJaMlFGNW9pNXNaVTF0UjJxY0d0SGZOKzdScjVJa1NlNXdqcUpYZkxXMUMzWkVHZkw4WHQrbG9kTlo4c2FkT2FuSVRBYjFYSFNvZTVhMVBPMjBURDQrY3VGamlHNm9YU1VEbitwRlQwTjlYWGw4UkJOaGNrcGJiM1llY0VHU2t6Wm1GcElaa29rbWZaWmdqbmFiUzVCWWxueWhTWUlvcjNZeFZRQUFBNyINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCBrYSA9IHsNCiAgICAgICAgICAgICAgICBtYTogImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEd3QURBSUFBQUJnUUsvLy8veUg1QkFFQUFBRUFMQUFBQUFBYkFBTUFBQUlRakErUmFMa0syNWxzdlV1ZmpDNmlBZ0E3IiwNCiAgICAgICAgICAgICAgICBZOiBbew0KICAgICAgICAgICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAzLA0KICAgICAgICAgICAgICAgICAgICBoOiAzLA0KICAgICAgICAgICAgICAgICAgICBqOiAxLA0KICAgICAgICAgICAgICAgICAgICBsOiAxDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiA0LA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAzLA0KICAgICAgICAgICAgICAgICAgICBoOiAzLA0KICAgICAgICAgICAgICAgICAgICBqOiAxLA0KICAgICAgICAgICAgICAgICAgICBsOiAxDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiA4LA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAzLA0KICAgICAgICAgICAgICAgICAgICBoOiAzLA0KICAgICAgICAgICAgICAgICAgICBqOiAxLA0KICAgICAgICAgICAgICAgICAgICBsOiAxDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiAxMiwNCiAgICAgICAgICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgICAgICAgICAgaTogMywNCiAgICAgICAgICAgICAgICAgICAgaDogMywNCiAgICAgICAgICAgICAgICAgICAgajogMSwNCiAgICAgICAgICAgICAgICAgICAgbDogMQ0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgeDogMTYsDQogICAgICAgICAgICAgICAgICAgIHk6IDAsDQogICAgICAgICAgICAgICAgICAgIGk6IDMsDQogICAgICAgICAgICAgICAgICAgIGg6IDMsDQogICAgICAgICAgICAgICAgICAgIGo6IDEsDQogICAgICAgICAgICAgICAgICAgIGw6IDENCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDIwLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAzLA0KICAgICAgICAgICAgICAgICAgICBoOiAzLA0KICAgICAgICAgICAgICAgICAgICBqOiAxLA0KICAgICAgICAgICAgICAgICAgICBsOiAxDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiAyNCwNCiAgICAgICAgICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgICAgICAgICAgaTogMywNCiAgICAgICAgICAgICAgICAgICAgaDogMywNCiAgICAgICAgICAgICAgICAgICAgajogMSwNCiAgICAgICAgICAgICAgICAgICAgbDogMQ0KICAgICAgICAgICAgICAgIH1dDQogICAgICAgICAgICB9DQogICAgICAgICAgICAgICwgbGEgPSB7DQogICAgICAgICAgICAgICAgbWE6ICJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhSZ0FOQUpFQUFQL3lxdFNHSWYvLy93QUFBQ0g1QkFFQUFBSUFMQUFBQUFCR0FBMEFBQUtubEJWNXk1M1JvbVJ2eGdBeWRJcG1zRkhkVXBGZlNJNUdBcUxyS2JZcHBwbjF3YXJ2amRBZ0o4UDVYTDNnQ2pOaThZVEdSNG5KY3o1N3cyT1ZLazNCRUo4dHR1VHpJck8wTExmN3N6cDMzVTM0OXY0cDBmUDJHUzNIdS9Yc2JYeXZGNWVITjJoMzU4Zlg1L0lHVVNmMzE1aDRpQkpHYVVoRnAyaXpWTG1aZGhoMUNackdpQ05hK3BMRHBoUXk5am1FWk1vcUcxdVVtVnBiZHRiYThscFR5NlZLUzNxaVd3QUFPdz09IiwNCiAgICAgICAgICAgICAgICBZOiBbew0KICAgICAgICAgICAgICAgICAgICB4OiAxLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiA4LA0KICAgICAgICAgICAgICAgICAgICBoOiAxMywNCiAgICAgICAgICAgICAgICAgICAgajogNCwNCiAgICAgICAgICAgICAgICAgICAgbDogMTMNCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDEwLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiA5LA0KICAgICAgICAgICAgICAgICAgICBoOiAxMywNCiAgICAgICAgICAgICAgICAgICAgajogNSwNCiAgICAgICAgICAgICAgICAgICAgbDogMTMNCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDIxLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiA4LA0KICAgICAgICAgICAgICAgICAgICBoOiAxMywNCiAgICAgICAgICAgICAgICAgICAgajogNCwNCiAgICAgICAgICAgICAgICAgICAgbDogMTMNCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDMwLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAxMCwNCiAgICAgICAgICAgICAgICAgICAgaDogMTMsDQogICAgICAgICAgICAgICAgICAgIGo6IDUsDQogICAgICAgICAgICAgICAgICAgIGw6IDEzDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICB4OiA0MCwNCiAgICAgICAgICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgICAgICAgICAgaTogMTAsDQogICAgICAgICAgICAgICAgICAgIGg6IDEzLA0KICAgICAgICAgICAgICAgICAgICBqOiA1LA0KICAgICAgICAgICAgICAgICAgICBsOiAxMw0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgeDogNTAsDQogICAgICAgICAgICAgICAgICAgIHk6IDAsDQogICAgICAgICAgICAgICAgICAgIGk6IDEwLA0KICAgICAgICAgICAgICAgICAgICBoOiAxMywNCiAgICAgICAgICAgICAgICAgICAgajogNSwNCiAgICAgICAgICAgICAgICAgICAgbDogMTMNCiAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgIHg6IDYwLA0KICAgICAgICAgICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgICAgICAgICBpOiAxMCwNCiAgICAgICAgICAgICAgICAgICAgaDogMTMsDQogICAgICAgICAgICAgICAgICAgIGo6IDUsDQogICAgICAgICAgICAgICAgICAgIGw6IDEzDQogICAgICAgICAgICAgICAgfV0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLCBtYSA9IHsNCiAgICAgICAgICAgICAgICBtYTogImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaENRQUlBSkVBQUplWGwvLy8vd0FBQUFBQUFDSDVCQUVBQUFJQUxBQUFBQUFKQUFnQUFBSVVoRzhDd1IzRzBGTnRUUnF2c2xwczVvV2VVUUFBT3c9PSIsDQogICAgICAgICAgICAgICAgWTogW3sNCiAgICAgICAgICAgICAgICAgICAgeDogMCwNCiAgICAgICAgICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgICAgICAgICAgaTogOSwNCiAgICAgICAgICAgICAgICAgICAgaDogOCwNCiAgICAgICAgICAgICAgICAgICAgajogMTAsDQogICAgICAgICAgICAgICAgICAgIGw6IDgNCiAgICAgICAgICAgICAgICB9XQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGxldCB2ID0gbmV3IEF1ZGlvQ29udGV4dA0KICAgICAgICAgICAgICAsIHcgPSB2LmNyZWF0ZUR5bmFtaWNzQ29tcHJlc3NvcigpOw0KICAgICAgICAgICAgdy5rbmVlLnNldFZhbHVlQXRUaW1lKDQwLCAwKTsNCiAgICAgICAgICAgIHcudGhyZXNob2xkLnNldFZhbHVlQXRUaW1lKC0xMiwgMCk7DQogICAgICAgICAgICB3LmNvbm5lY3Qodi5kZXN0aW5hdGlvbik7DQogICAgICAgICAgICBsZXQgeDsNCiAgICAgICAgICAgIGZ1bmN0aW9uIHkoYSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNpbigyICogTWF0aC5QSSAqIGEpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiB6KCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAyICogTWF0aC5yYW5kb20oKSAtIDENCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIEEoYSwgYikgew0KICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYi5sZW5ndGggLSAxOyBjKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0W2QsZSxmPTFdID0gYltjXQ0KICAgICAgICAgICAgICAgICAgICAgICwgW3Ascl0gPSBiW2MgKyAxXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPD0gYSAmJiBhIDwgcCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhID0gKGEgLSBkKSAvIChwIC0gZCksDQogICAgICAgICAgICAgICAgICAgICAgICBhID0gMSA8IGYgPyBNYXRoLnBvdyhhLCBmKSA6IDEgLSBNYXRoLnBvdygxIC0gYSwgMSAvIGYpLA0KICAgICAgICAgICAgICAgICAgICAgICAgZSArIGEgKiAociAtIGUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBiW2IubGVuZ3RoIC0gMV1bMV0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIEIoYSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAibnVtYmVyIiA9PT0gdHlwZW9mIGEgPyBbWzAsIGFdLCBbMSwgYV1dIDogYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gbmEoYSwgYikgew0KICAgICAgICAgICAgICAgIGEgPSBNYXRoLnRhbihNYXRoLlBJICogYSAvIHYuc2FtcGxlUmF0ZSk7DQogICAgICAgICAgICAgICAgbGV0IGMgPSBhICogYTsNCiAgICAgICAgICAgICAgICBiID0gMSAvIGI7DQogICAgICAgICAgICAgICAgbGV0IGQgPSAxIC8gKDEgKyBiICogYSArIGMpOw0KICAgICAgICAgICAgICAgIHJldHVybiBbZCAvIDEsIC0yICogZCwgZCAvIDEsIDIgKiBkICogKGMgLSAxKSwgZCAqICgxIC0gYiAqIGEgKyBjKV0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIG9hKGEsIGIpIHsNCiAgICAgICAgICAgICAgICBhID0gMSAvIE1hdGgudGFuKE1hdGguUEkgKiBhIC8gdi5zYW1wbGVSYXRlKTsNCiAgICAgICAgICAgICAgICBsZXQgYyA9IGEgKiBhOw0KICAgICAgICAgICAgICAgIGIgPSAxIC8gYjsNCiAgICAgICAgICAgICAgICBsZXQgZCA9IDEgLyAoMSArIGIgKiBhICsgYyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIFtkIC8gMSwgMiAqIGQsIGQgLyAxLCAyICogZCAqICgxIC0gYyksIGQgKiAoMSAtIGIgKiBhICsgYyldDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBwYShhLCBiKSB7DQogICAgICAgICAgICAgICAgYSA9IDEgLyBNYXRoLnRhbihNYXRoLlBJICogYSAvIHYuc2FtcGxlUmF0ZSk7DQogICAgICAgICAgICAgICAgbGV0IGMgPSBhICogYTsNCiAgICAgICAgICAgICAgICBiID0gMSAvIGI7DQogICAgICAgICAgICAgICAgbGV0IGQgPSAxIC8gKDEgKyBiICogYSArIGMpOw0KICAgICAgICAgICAgICAgIHJldHVybiBbZCAqIGEgKiBiLCAwLCAtZCAqIGEgKiBiLCAyICogZCAqICgxIC0gYyksIGQgKiAoMSAtIGIgKiBhICsgYyldDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBxYShhLCBiLCBjLCBkKSB7DQogICAgICAgICAgICAgICAgbGV0IGUgPSAwDQogICAgICAgICAgICAgICAgICAsIGYgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgYS5sZW5ndGg7ICsrcCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgciA9IGIoQShwIC8gKGEubGVuZ3RoIC0gMSksIGMpLCBBKHAgLyAoYS5sZW5ndGggLSAxKSwgZCkpDQogICAgICAgICAgICAgICAgICAgICAgLCBPID0gYVtwXQ0KICAgICAgICAgICAgICAgICAgICAgICwgZWEgPSBPICogclswXSArIGU7DQogICAgICAgICAgICAgICAgICAgIGFbcF0gPSBlYTsNCiAgICAgICAgICAgICAgICAgICAgZSA9IE8gKiByWzFdIC0gZWEgKiByWzNdICsgZjsNCiAgICAgICAgICAgICAgICAgICAgZiA9IE8gKiByWzJdIC0gZWEgKiByWzRdDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBhDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiByYShhLCBiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHFhKGEsIG9hLCBCKGIpLCBCKE1hdGguU1FSVDFfMikpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBzYShhLCBiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHFhKGEsIG5hLCBCKGIpLCBCKE1hdGguU1FSVDFfMikpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiB0YShhLCBiLCBjPU1hdGguU1FSVDFfMikgew0KICAgICAgICAgICAgICAgIHJldHVybiBxYShhLCBwYSwgQihiKSwgQihjKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIHVhKGEpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGEubGVuZ3RoOyBiKyspDQogICAgICAgICAgICAgICAgICAgIGFbYl0gKj0gMywNCiAgICAgICAgICAgICAgICAgICAgYVtiXSA9IC0xID4gYVtiXSA/IC0xIDogMSA8IGFbYl0gPyAxIDogTWF0aC5zaW4oYVtiXSAqIE1hdGguUEkgLyAyKSwNCiAgICAgICAgICAgICAgICAgICAgYVtiXSAvPSAzOw0KICAgICAgICAgICAgICAgIHJldHVybiBhDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiB2YShhLCBiKSB7DQogICAgICAgICAgICAgICAgbGV0IGMgPSAwOw0KICAgICAgICAgICAgICAgIGEuZm9yRWFjaCgoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgYyA9IE1hdGgubWF4KGMsIGEubGVuZ3RoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIGxldCBkID0gbmV3IEZsb2F0MzJBcnJheShjKTsNCiAgICAgICAgICAgICAgICBhLmZvckVhY2goKGMsZik9PnsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBjLmxlbmd0aDsgZSsrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYihkLCBmLCBjLCBlLCBhLmxlbmd0aCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gd2EoYSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB2YShhLCAoYSxjLGQsZSxmKT0+ew0KICAgICAgICAgICAgICAgICAgICBhW2VdICs9IGRbZV0gLyBmDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIHhhKGEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdmEoYSwgKGEsYyxkLGUsZik9PnsNCiAgICAgICAgICAgICAgICAgICAgMCA9PT0gYyAmJiAoYVtlXSA9IDEpOw0KICAgICAgICAgICAgICAgICAgICBhW2VdICo9IGRbZV0gLyBmDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIEMoYSwgYikgew0KICAgICAgICAgICAgICAgIGEgPSBuZXcgRmxvYXQzMkFycmF5KGEgKiB2LnNhbXBsZVJhdGUpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYS5sZW5ndGg7IGMrKykNCiAgICAgICAgICAgICAgICAgICAgYVtjXSA9IGIoYyAvIGEubGVuZ3RoLCBjIC8gdi5zYW1wbGVSYXRlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gRChhLCBiKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKQ0KICAgICAgICAgICAgICAgICAgICBhW2NdICo9IEEoYyAvIGEubGVuZ3RoLCBiKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24geWEoKSB7DQogICAgICAgICAgICAgICAgbGV0IGEgPSBbWzAsIC4wMSwgMl0sIFsxLCAwXV0NCiAgICAgICAgICAgICAgICAgICwgYiA9IHooKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gRCh3YShbc2EoQyguMywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCA1RTMgLyB2LnNhbXBsZVJhdGUgJiYgKGIgPSB6KCkpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYg0KICAgICAgICAgICAgICAgIH0pLCA5MDApLCB0YShDKC4zLCBmdW5jdGlvbihjKSB7DQogICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCBBKGMsIGEpICYmIChiID0geigpKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGINCiAgICAgICAgICAgICAgICB9KSwgMTAwKV0pLCBbWzAsIDBdLCBbLjEsIDEsIC44XSwgWy4yLCAuMywgLjldLCBbMSwgMF1dKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gemEoKSB7DQogICAgICAgICAgICAgICAgbGV0IGEgPSAwDQogICAgICAgICAgICAgICAgICAsIGIgPSBbWzAsIDQwLCAuMl0sIFsxLCAyMF1dDQogICAgICAgICAgICAgICAgICAsIGMgPSB6KCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHhhKFtDKC4yLCBmdW5jdGlvbihjKSB7DQogICAgICAgICAgICAgICAgICAgIGEgKz0gQShjLCBiKSAvIHYuc2FtcGxlUmF0ZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQwICogKDIgKiBNYXRoLmFicyhhICUgMSAqIDIgLSAxKSAtIDEpDQogICAgICAgICAgICAgICAgfSksIEQodWEoQyguMiwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgPCA1MDAgLyB2LnNhbXBsZVJhdGUgJiYgKGMgPSB6KCkpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYw0KICAgICAgICAgICAgICAgIH0pKSwgW1swLCAxLCAuNV0sIFsxLCAwXV0pXSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIEFhKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0YShEKEMoLjIsIHopLCBbWzAsIDAsIC41XSwgWy4xLCAuNSwgLjJdLCBbMSwgMF1dKSwgMkUzKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gQmEoKSB7DQogICAgICAgICAgICAgICAgbGV0IGEgPSB6KCkNCiAgICAgICAgICAgICAgICAgICwgYiA9IDANCiAgICAgICAgICAgICAgICAgICwgYyA9IFtbMCwgMkUzLCAuMl0sIFsxLCAyMDBdXTsNCiAgICAgICAgICAgICAgICByZXR1cm4gRChDKC4zLCBmdW5jdGlvbihkKSB7DQogICAgICAgICAgICAgICAgICAgIDEgPD0gYiAmJiAoYSA9IHooKSwNCiAgICAgICAgICAgICAgICAgICAgLS1iKTsNCiAgICAgICAgICAgICAgICAgICAgYiArPSBBKGQsIGMpIC8gdi5zYW1wbGVSYXRlOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQ0KICAgICAgICAgICAgICAgIH0pLCBbWzAsIC41LCAuNV0sIFsxLCAwXV0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBDYSgpIHsNCiAgICAgICAgICAgICAgICBsZXQgYSA9IDANCiAgICAgICAgICAgICAgICAgICwgYiA9IFtbMCwgNDQwLCAuMl0sIFsxLCAyMjAwXV07DQogICAgICAgICAgICAgICAgcmV0dXJuIEQoQyguNSwgZnVuY3Rpb24oYykgew0KICAgICAgICAgICAgICAgICAgICBhICs9IEEoYywgYikgLyB2LnNhbXBsZVJhdGU7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoMiAqIE1hdGguYWJzKGEgJSAxICogMiAtIDEpIC0gMSArIChhICUgMSAqIDIgLSAxKSkgLyAyDQogICAgICAgICAgICAgICAgfSksIFtbMCwgMCwgLjVdLCBbLjEsIDEsIC41XSwgWzEsIDBdXSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIERhKCkgew0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEoYSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IDANCiAgICAgICAgICAgICAgICAgICAgICAsIGMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGMucHVzaChbYiwgYSA/IDEgOiAuNDVdKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAhYSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGIgKz0gLjE4NzUsDQogICAgICAgICAgICAgICAgICAgICAgICBjLnB1c2goW2IgLSAxRS03LCAwXSk7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxID49IGIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsZXQgYiA9IGEoITApDQogICAgICAgICAgICAgICAgICAsIGMgPSBhKCExKQ0KICAgICAgICAgICAgICAgICAgLCBkID0gW1swLCAwLCAuNV0sIFsuMDUsIDEsIC41XSwgWzEsIDBdXTsNCiAgICAgICAgICAgICAgICByZXR1cm4gW0QoRChDKDQsIHopLCBiKSwgZCksIEQoRChDKDQsIHopLCBjKSwgZCldDQogICAgICAgICAgICB9DQogICAgICAgICAgICBsZXQgRSA9IChhKT0+MCA8IGEgPyAxIDogMCA+IGEgPyAtMSA6IDANCiAgICAgICAgICAgICAgLCBGID0gKGEsYixjKT0+YSA+IGIgPyBNYXRoLm1heChhIC0gYywgYikgOiBNYXRoLm1pbihhICsgYywgYik7DQogICAgICAgICAgICBmdW5jdGlvbiBHKGEsIGIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYS54ICsgYS53aWR0aCA+IGIueCAmJiBhLnggPCBiLnggKyBiLndpZHRoICYmIGEueSArIGEuaGVpZ2h0ID4gYi55ICYmIGEueSA8IGIueSArIGIuaGVpZ2h0DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBIKGEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihhICogTWF0aC5yYW5kb20oKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCBJID0gKGEsYixjLGQsZSk9PnsNCiAgICAgICAgICAgICAgICBmb3IgKDsgYiA8PSBkOyBiKyspDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGQgPSBhOyBkIDw9IGM7IGQrKykNCiAgICAgICAgICAgICAgICAgICAgICAgIGUoZCwgYikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIDsNCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIEooYSwgYiwgYykgew0KICAgICAgICAgICAgICAgIGxldCBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7DQogICAgICAgICAgICAgICAgZC53aWR0aCA9IGE7DQogICAgICAgICAgICAgICAgZC5oZWlnaHQgPSBiOw0KICAgICAgICAgICAgICAgIGF3YWl0IGMoZC5nZXRDb250ZXh0KCIyZCIpKTsNCiAgICAgICAgICAgICAgICBsZXQgZSA9IGF3YWl0IG5ldyBQcm9taXNlKChhKT0+ZC50b0Jsb2IoYSkpOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSBuZXcgSW1hZ2U7DQogICAgICAgICAgICAgICAgICAgIGIub25sb2FkID0gKCk9PmEoYik7DQogICAgICAgICAgICAgICAgICAgIGIuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBFYShhLCBiKSB7DQogICAgICAgICAgICAgICAgbGV0WyxjLGRdID0gL14oXHcrKVwoKC4qKVwpJC8uZXhlYyhhKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y30oJHtkfSwke2J9KWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIEsoKSB7DQogICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKGEpPT5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYSkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBMKGEsIGIsIGMsIGQpIHsNCiAgICAgICAgICAgICAgICBsZXQgZSA9IHt9Ow0KICAgICAgICAgICAgICAgIGEuZm9yRWFjaCgoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBhLnNsaWNlKDEpLmpvaW4oInwiKTsNCiAgICAgICAgICAgICAgICAgICAgZVtmXSB8fCAoZVtmXSA9IGMoNDQwICogTWF0aC5wb3coMiwgYVsxXSAvIDEyKSwgLi4uYS5zbGljZSgyKSkpOw0KICAgICAgICAgICAgICAgICAgICBmID0gZVtmXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBiOw0KICAgICAgICAgICAgICAgICAgICBhID0gTWF0aC5yb3VuZCh2LnNhbXBsZVJhdGUgKiBhWzBdICogNjAgLyBkKTsNCiAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShmKSB8fCAoZiA9IFtmXSk7DQogICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocikgfHwgKHIgPSBbcl0pOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IHIubGVuZ3RoOyBiKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjID0gZltiICUgZi5sZW5ndGhdDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgZCA9IHJbYiAlIHIubGVuZ3RoXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAsIGUgPSBNYXRoLm1pbihhICsgYy5sZW5ndGgsIGQubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSBhOyBiIDwgZTsgYisrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRbYl0gKz0gY1tiIC0gYV0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBNKGEsIGIsIGMpIHsNCiAgICAgICAgICAgICAgICBsZXQgZCA9IFtdOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYzsgZSsrKQ0KICAgICAgICAgICAgICAgICAgICBhLmZvckVhY2goKFthLC4uLmNdKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgZC5wdXNoKFthICsgYiAqIGUsIC4uLmNdKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGQNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIE4oYSwgYikgew0KICAgICAgICAgICAgICAgIHJldHVybiBhLm1hcCgoYSxkKT0+W2EsIGJbZF1dKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gUChhLCBiKSB7DQogICAgICAgICAgICAgICAgYS5mb3JFYWNoKChhKT0+ew0KICAgICAgICAgICAgICAgICAgICBhWzBdICs9IGINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gRmEoYSwgYikgew0KICAgICAgICAgICAgICAgIGxldCBjID0gdi5jcmVhdGVCdWZmZXJTb3VyY2UoKTsNCiAgICAgICAgICAgICAgICBjLmxvb3AgPSAhMDsNCiAgICAgICAgICAgICAgICBiID0gdi5jcmVhdGVCdWZmZXIoMSwgYiwgdi5zYW1wbGVSYXRlKTsNCiAgICAgICAgICAgICAgICBhKGIuZ2V0Q2hhbm5lbERhdGEoMCksIDEyMCk7DQogICAgICAgICAgICAgICAgYy5idWZmZXIgPSBiOw0KICAgICAgICAgICAgICAgIGF3YWl0IEsoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgR2Egew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSB2LmNyZWF0ZUdhaW4oKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QYiA9IGEubWFwKChhKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSBhLnNvdXJjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAsIGUgPSB2LmNyZWF0ZUdhaW4oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUuZ2Fpbi52YWx1ZSA9IGEudm9sdW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgYy5jb25uZWN0KGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZS5jb25uZWN0KGIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuVykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gdi5jcmVhdGVHYWluKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5nYWluLnZhbHVlID0gYS5XOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY29ubmVjdChiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmNvbm5lY3QoeCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBjLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjOiBlLmdhaW4NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICBiLmNvbm5lY3QodykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcGxheSgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QYi5mb3JFYWNoKChhKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgYS5zb3VyY2Uuc3RhcnQoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBIYShhKSB7DQogICAgICAgICAgICAgICAgbGV0IGIgPSBhIC8gdi5zYW1wbGVSYXRlLCBjID0gMCwgZCA9IDAsIGU7DQogICAgICAgICAgICAgICAgcmV0dXJuIEQoQygzLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgZSA9IE1hdGgucm91bmQoKDEgKiB5KGMpICsgMSAqIHkoYyAvIDIpICsgLjEgKiB5KDIgKiBjKSArIC4wMDEgKiB5KDMgKiBjKSArIDFFLTQgKiB5KDQgKiBjKSkgLyAyLjExMSAqIDUpIC8gNTsNCiAgICAgICAgICAgICAgICAgICAgYyArPSBiOw0KICAgICAgICAgICAgICAgICAgICBkICs9IDEgLyB2LnNhbXBsZVJhdGU7DQogICAgICAgICAgICAgICAgICAgIDEuMjVFLTQgPD0gZCAmJiAoYyArPSB6KCkgKiBiICogLjYsDQogICAgICAgICAgICAgICAgICAgIGQgLT0gMS4yNUUtNCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlDQogICAgICAgICAgICAgICAgfSksIFtbMCwgMCwgLjVdLCBbLjAwMSwgMSwgLjFdLCBbMSwgMF1dKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gSWEoYSwgYikgew0KICAgICAgICAgICAgICAgIHZhciBjID0gbmV3IEZsb2F0MzJBcnJheSgzMiAvIGIgKiA2MCAqIHYuc2FtcGxlUmF0ZSk7DQogICAgICAgICAgICAgICAgdmFyIGQgPSBbMCwgLjc1LCAxLjUsIDIsIDIuNzUsIDMuNSwgNCwgNC43NSwgNS41LCA2LCA2Ljc1LCA3LjVdOw0KICAgICAgICAgICAgICAgIGQgPSBbLi4uTihkLCBbNCwgNywgMTEsIDQsIDcsIDExLCAxMiwgMTEsIDQsIDEyLCAxMSwgNF0pLCAuLi5QKE4oZCwgWzQsIDcsIDExLCA0LCA3LCAxMSwgMTIsIDExLCA0LCAxMiwgMTEsIDRdKSwgOCksIC4uLlAoTihkLCBbNCwgNSwgMTIsIDQsIDUsIDEyLCAxMiwgMTEsIDQsIDEyLCAxMSwgNF0pLCAxNiksIC4uLlAoTihkLCBbMiwgNywgMTEsIDIsIDcsIDExLCAxMiwgMTEsIDIsIDEyLCAxMSwgMl0pLCAyNCldOw0KICAgICAgICAgICAgICAgIGQucHVzaChbMzAuNSwgMTRdKTsNCiAgICAgICAgICAgICAgICBMKGQsIGMsIEhhLCBiKTsNCiAgICAgICAgICAgICAgICBhLnNldChjLCAwKTsNCiAgICAgICAgICAgICAgICBhLnNldChjLCBjLmxlbmd0aCk7DQogICAgICAgICAgICAgICAgYS5zZXQoYywgMiAqIGMubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICBhLnNldChjLCAzICogYy5sZW5ndGgpOw0KICAgICAgICAgICAgICAgIGMgPSBbWzAsIDE2XSwgWzQsIDE3XSwgWzYsIDE5XSwgWzgsIDIxXSwgWzE2LCAyNF0sIFsyMCwgMjNdLCBbMjIsIDI0XSwgWzI0LCAxOV1dOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGEgPSAwLCBiID0gYy5sZW5ndGg7IGEgPCBiOyBhKyspIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIFtlLGYsLi4ucF0gPSBjW2FdOw0KICAgICAgICAgICAgICAgICAgICBjLnB1c2goW2UsIGYgKyAxMiwgLi4ucF0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMgPSBQKGMsIDMyKTsNCiAgICAgICAgICAgICAgICBMKGMsIGEsIEhhLCBiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gSmEoYSwgYikgew0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBuZXcgRmxvYXQzMkFycmF5KDMyIC8gYiAqIDYwICogdi5zYW1wbGVSYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBbLjUsIDEuMjVdDQogICAgICAgICAgICAgICAgICAgICAgLCBkID0gTihjLCBbLTEyLCAtMTJdKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSBOKGMsIFstMTUsIC0xNV0pDQogICAgICAgICAgICAgICAgICAgICAgLCBwID0gTihjLCBbLTE5LCAtMTldKTsNCiAgICAgICAgICAgICAgICAgICAgYyA9IE4oYywgWy0xNywgLTE3XSk7DQogICAgICAgICAgICAgICAgICAgIGQgPSBbLi4uTShkLCAyLCA0KSwgLi4uUChNKGYsIDIsIDQpLCA4KSwgLi4uUChNKHAsIDIsIDQpLCAxNiksIC4uLlAoTShjLCAyLCA0KSwgMjQpXTsNCiAgICAgICAgICAgICAgICAgICAgTChkLCBhLCBIYSwgYik7DQogICAgICAgICAgICAgICAgICAgIGIgPSBhDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGEuc2V0KGIsIDApOw0KICAgICAgICAgICAgICAgIGEuc2V0KGIsIGIubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICBhLnNldChiLCAyICogYi5sZW5ndGgpOw0KICAgICAgICAgICAgICAgIGEuc2V0KGIsIDMgKiBiLmxlbmd0aCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIEthKGEsIGIpIHsNCiAgICAgICAgICAgICAgICBiICs9IC4yOw0KICAgICAgICAgICAgICAgIGxldCBjID0gYSAvIHYuc2FtcGxlUmF0ZQ0KICAgICAgICAgICAgICAgICAgLCBkID0gW1swLCAtLjUsIDJdLCBbLjEsIDEsIDJdLCBbMSwgLTFdXQ0KICAgICAgICAgICAgICAgICAgLCBlID0gMA0KICAgICAgICAgICAgICAgICAgLCBmID0gMSAvIDEuMDE7DQogICAgICAgICAgICAgICAgYSA9IFtbMCwgMF0sIFsuMSAvIGIsIDFdLCBbKGIgLSAuMikgLyBiLCAuNV0sIFsxLCAwXV07DQogICAgICAgICAgICAgICAgbGV0IHAgPSBbWzAsIDIwMCwgLjVdLCBbLjEgLyBiLCAyRTMsIC41XSwgWyhiIC0gLjIpIC8gYiwgMUUzLCAuNV0sIFsxLCAyMDBdXTsNCiAgICAgICAgICAgICAgICByZXR1cm4gcmEoRChDKGIsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IEEoZSAlIDEsIGQpIC8gMjsNCiAgICAgICAgICAgICAgICAgICAgYSArPSBBKDEuMDEgKiBlICUgMSwgZCkgLyAzOw0KICAgICAgICAgICAgICAgICAgICBhICs9IEEoZSAqIGYgJSAxLCBkKSAvIDY7DQogICAgICAgICAgICAgICAgICAgIGUgKz0gYzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGENCiAgICAgICAgICAgICAgICB9KSwgYSksIHApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBMYShhLCBiKSB7DQogICAgICAgICAgICAgICAgdmFyIGMgPSA2MCAvIGI7DQogICAgICAgICAgICAgICAgYyA9IFAoW1swLCAtOCwgNCAqIGNdLCBbNCwgLTcsIDIgKiBjXSwgWzYsIC01LCAyICogY10sIFs4LCAtMywgNCAqIGNdLCBbMTIsIC0xLCAyICogY10sIFsxNCwgMCwgMiAqIGNdLCBbMTYsIDAsIDQgKiBjXSwgWzIwLCAtMSwgMiAqIGNdLCBbMjIsIDAsIDIgKiBjXSwgWzI0LCAyLCAzICogY10sIFsyNywgMCwgMSAqIGNdLCBbMjgsIC0xLCA0ICogY11dLCA2NCkuY29uY2F0KFAoW1swLCAwLCA0ICogY10sIFswLCA0LCA0ICogY10sIFs0LCAtMSwgMiAqIGNdLCBbNCwgMiwgMiAqIGNdLCBbNiwgLTMsIDIgKiBjXSwgWzYsIDAsIDIgKiBjXSwgWzgsIC0zLCA0ICogY10sIFs4LCAwLCA0ICogY10sIFsxMiwgLTMsIDIgKiBjXSwgWzEyLCAwLCAyICogY10sIFsxNCwgLTUsIDIgKiBjXSwgWzE0LCAtMSwgMiAqIGNdLCBbMTYsIC03LCA0ICogY10sIFsxNiwgLTMsIDQgKiBjXSwgWzIwLCAtNSwgMiAqIGNdLCBbMjAsIC0xLCAyICogY10sIFsyMiwgLTMsIDIgKiBjXSwgWzIyLCAwLCAyICogY10sIFsyNCwgLTUsIDQgKiBjXSwgWzI0LCAwLCA0ICogY10sIFsyOCwgLTUsIDQgKiBjXSwgWzI4LCAtMSwgNCAqIGNdXSwgOTYpKTsNCiAgICAgICAgICAgICAgICBMKGMsIGEsIEthLCBiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gTWEoKSB7DQogICAgICAgICAgICAgICAgbGV0IGEgPSBbWzAsIDQwMCwgLjA3XSwgWzEsIDgwXV0sIGIgPSAwLCBjLCBkID0gQyguNCwgZnVuY3Rpb24oZCkgew0KICAgICAgICAgICAgICAgICAgICBjID0geShiKTsNCiAgICAgICAgICAgICAgICAgICAgYiArPSBBKGQsIGEpIC8gdi5zYW1wbGVSYXRlOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYw0KICAgICAgICAgICAgICAgIH0pLCBlID0gdGEoQyguNCwgeiksIDNFMywgMSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNhKEQod2EoW2QsIGVdKSwgW1swLCAxLCAuMl0sIFsxLCAwXV0pLCA0MDApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBOYShhLCBiKSB7DQogICAgICAgICAgICAgICAgbGV0IGMgPSBQKE0oW1sxXSwgWzNdLCBbNV0sIFs3XSwgWzcuNzVdXSwgOCwgOCksIDY0KTsNCiAgICAgICAgICAgICAgICBMKGMsIGEsIE1hLCBiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gT2EoKSB7DQogICAgICAgICAgICAgICAgbGV0IGEgPSBbWzAsIDM4MCwgLjFdLCBbLjgsIDMwXV0sIGIgPSAwLCBjOw0KICAgICAgICAgICAgICAgIHJldHVybiBEKEMoLjQsIGZ1bmN0aW9uKGQpIHsNCiAgICAgICAgICAgICAgICAgICAgYyA9ICh5KGIpICsgKDIgKiBNYXRoLmFicyhiICUgMSAqIDIgLSAxKSAtIDEpKSAvIDI7DQogICAgICAgICAgICAgICAgICAgIGIgKz0gQShkLCBhKSAvIHYuc2FtcGxlUmF0ZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMNCiAgICAgICAgICAgICAgICB9KSwgW1swLCAwXSwgWy4wMSwgMSwgLjJdLCBbMSwgMF1dKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gUGEoYSwgYikgew0KICAgICAgICAgICAgICAgIGxldCBjID0gUChNKFtbMF0sIFsyLjVdLCBbNF0sIFs1LjVdLCBbNi41XV0sIDgsIDgpLCA2NCk7DQogICAgICAgICAgICAgICAgTChjLCBhLCBPYSwgYikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFFhKGEsIGIpIHsNCiAgICAgICAgICAgICAgICBhID0gW1swLCBiLCAuMl0sIFsxLCAwXV07DQogICAgICAgICAgICAgICAgcmV0dXJuIEQoc2EoQyguNCwgeiksIDNFMyksIGEpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBSYShhLCBiKSB7DQogICAgICAgICAgICAgICAgbGV0IGMgPSBQKE0oW1swLCAwLCAuMjVdLCBbLjUsIDAsIDFdXSwgMSwgNjQpLCA2NCk7DQogICAgICAgICAgICAgICAgYyA9IFsuLi5jLCAuLi5QKE0oW1sxNC4yNSwgMCwgLjVdLCBbMTUuMjUsIDAsIC41XV0sIDE2LCA0KSwgNjQpXTsNCiAgICAgICAgICAgICAgICBMKGMsIGEsIFFhLCBiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gUShhKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KDEwLCBhIC8gMjApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBTYSgpIHsNCiAgICAgICAgICAgICAgICBsZXQgYSA9IDc2ODAgKiB2LnNhbXBsZVJhdGUgLyAxMjANCiAgICAgICAgICAgICAgICAgICwgW2IsYyxkLGUsZixwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtJYSwgSmEsIExhLCBOYSwgUGEsIFJhXS5tYXAoKGIpPT5GYShiLCBhKSkpOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR2EoW3sNCiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBiLA0KICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IFEoLTE0KSwNCiAgICAgICAgICAgICAgICAgICAgVzogMQ0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBjLA0KICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IFEoLTE0KSwNCiAgICAgICAgICAgICAgICAgICAgVzogMQ0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBkLA0KICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IFEoLTE0KSwNCiAgICAgICAgICAgICAgICAgICAgVzogMQ0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBlLA0KICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IFEoLTcuMSksDQogICAgICAgICAgICAgICAgICAgIFc6IFEoLTYpDQogICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IGYsDQogICAgICAgICAgICAgICAgICAgIHZvbHVtZTogUSgtNC45KSwNCiAgICAgICAgICAgICAgICAgICAgVzogMA0KICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBwLA0KICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IFEoLTIzKSwNCiAgICAgICAgICAgICAgICAgICAgVzogMA0KICAgICAgICAgICAgICAgIH1dKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IFRhLCBVYSwgVmEsIFdhLCBYYSwgWWEsIFphLCAkYSwgYWIsIGJiLCBjYjsNCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGRiKGEpIHsNCiAgICAgICAgICAgICAgICBhID0gYSgpOw0KICAgICAgICAgICAgICAgIGxldCBiID0gdi5jcmVhdGVCdWZmZXIoMSwgYS5sZW5ndGgsIHYuc2FtcGxlUmF0ZSk7DQogICAgICAgICAgICAgICAgYi5nZXRDaGFubmVsRGF0YSgwKS5zZXQoYSk7DQogICAgICAgICAgICAgICAgYXdhaXQgSygpOw0KICAgICAgICAgICAgICAgIHJldHVybiBiDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBlYigpIHsNCiAgICAgICAgICAgICAgICBsZXQgYSA9IHYuY3JlYXRlQ29udm9sdmVyKCkNCiAgICAgICAgICAgICAgICAgICwgYiA9IERhKCkNCiAgICAgICAgICAgICAgICAgICwgYyA9IHYuY3JlYXRlQnVmZmVyKDIsIGJbMF0ubGVuZ3RoLCB2LnNhbXBsZVJhdGUpOw0KICAgICAgICAgICAgICAgIGMuZ2V0Q2hhbm5lbERhdGEoMCkuc2V0KGJbMF0pOw0KICAgICAgICAgICAgICAgIGMuZ2V0Q2hhbm5lbERhdGEoMSkuc2V0KGJbMV0pOw0KICAgICAgICAgICAgICAgIGEuYnVmZmVyID0gYzsNCiAgICAgICAgICAgICAgICB4ID0gYTsNCiAgICAgICAgICAgICAgICB4LmNvbm5lY3Qodyk7DQogICAgICAgICAgICAgICAgYXdhaXQgSygpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBmYihhKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChiKT0+ew0KICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IG5ldyBJbWFnZTsNCiAgICAgICAgICAgICAgICAgICAgYy5vbmxvYWQgPSAoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgYS5DID0gYzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGIoYSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICA7DQogICAgICAgICAgICAgICAgICAgIGMuc3JjID0gYS5tYQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICB9DQogICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBnYigpIHsNCiAgICAgICAgICAgICAgICBbVGEsVWEsVmEsV2EsWGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2lhLCBqYSwga2EsIGxhLCBtYV0ubWFwKGZiKSk7DQogICAgICAgICAgICAgICAgYXdhaXQgSygpOw0KICAgICAgICAgICAgICAgIFtZYSxaYSwkYSxhYixiYl0gPSBhd2FpdCBQcm9taXNlLmFsbChbeWEsIHphLCBBYSwgQmEsIENhXS5tYXAoZGIpKTsNCiAgICAgICAgICAgICAgICBlYigpOw0KICAgICAgICAgICAgICAgIGNiID0gYXdhaXQgU2EoKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoImxvYWRpbmciKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IFIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJjYW52YXMiKQ0KICAgICAgICAgICAgICAsIFMgPSBSLmdldENvbnRleHQoIjJkIik7DQogICAgICAgICAgICBTLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICExOw0KICAgICAgICAgICAgdmFyIFQgPSBbMSwgMCwgMCwgMSwgMCwgMF07DQogICAgICAgICAgICBmdW5jdGlvbiBVKGEpIHsNCiAgICAgICAgICAgICAgICBhID0gMTAwICogbS5zY2FsZSAvIGE7DQogICAgICAgICAgICAgICAgVFswXSA9IGE7DQogICAgICAgICAgICAgICAgVFszXSA9IGE7DQogICAgICAgICAgICAgICAgVFs0XSA9IFIud2lkdGggLyAyIC0gbS54ICogYTsNCiAgICAgICAgICAgICAgICBUWzVdID0gUi5oZWlnaHQgLyAyIC0gbS55ICogYTsNCiAgICAgICAgICAgICAgICBTLnNldFRyYW5zZm9ybSguLi5UKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gVigpIHsNCiAgICAgICAgICAgICAgICBTLmdsb2JhbEFscGhhID0gMQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gVyguLi5hKSB7DQogICAgICAgICAgICAgICAgUy5kcmF3SW1hZ2UoLi4uYSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFgoYSwgYiwgYywgZCwgZSkgew0KICAgICAgICAgICAgICAgIFMuZmlsbFN0eWxlID0gYTsNCiAgICAgICAgICAgICAgICBTLmZpbGxSZWN0KGIsIGMsIGQsIGUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBoYihhLCBiLCBjLCBkLCBlKSB7DQogICAgICAgICAgICAgICAgUy5iZWdpblBhdGgoKTsNCiAgICAgICAgICAgICAgICBTLmFyYyhjLCBkLCBlLCAwLCAyICogTWF0aC5QSSk7DQogICAgICAgICAgICAgICAgYSAmJiAoUy5maWxsU3R5bGUgPSBhLA0KICAgICAgICAgICAgICAgIFMuZmlsbCgpKTsNCiAgICAgICAgICAgICAgICBiICYmIChTLnN0cm9rZVN0eWxlID0gYiwNCiAgICAgICAgICAgICAgICBTLnN0cm9rZSgpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gaWIoYSwgYiwgYywgZD0wLCBlPTEsIGY9MSwgcD0wKSB7DQogICAgICAgICAgICAgICAgamIoYiwgYywgKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgUy5yb3RhdGUocCk7DQogICAgICAgICAgICAgICAgICAgIFMuc2NhbGUoZSwgZik7DQogICAgICAgICAgICAgICAgICAgIGxldCBiID0gYS5ZW2RdOw0KICAgICAgICAgICAgICAgICAgICBXKGEuQywgYi54LCBiLnksIGIuaSwgYi5oLCAtYi5qLCAtYi5sLCBiLmksIGIuaCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gamIoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgIFMuc2F2ZSgpOw0KICAgICAgICAgICAgICAgIFMudHJhbnNsYXRlKGEsIGIpOw0KICAgICAgICAgICAgICAgIGMoKTsNCiAgICAgICAgICAgICAgICBTLnJlc3RvcmUoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3Mga2Igew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5CID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy53ID0gYg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzKGEsIC4uLmIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5CW3RoaXMud10udmIgJiYgdGhpcy5CW3RoaXMud10udmIodGhpcyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudyA9IGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQlt0aGlzLnddLk4gJiYgdGhpcy5CW3RoaXMud10uTiguLi5iKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkJbdGhpcy53XS5BICYmIHRoaXMuQlt0aGlzLnddLkEodGhpcykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBsYiBleHRlbmRzIGtiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFswXTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEE6ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxwaGEgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsxXTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE46IChiKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IC0uNSArIE1hdGgucmFuZG9tKCkgKyAoMSA9PT0gYi5JID8gTWF0aC5QSSA6IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnggPSBhLktiID0gYi54ICsgMjAgKiBNYXRoLmNvcyhjKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS55ID0gYS5MYiA9IGIueSArIDIwICogTWF0aC5zaW4oYyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucm90YXRpb24gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLk0gPSBiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBOiAoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcgKz0gZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAuMSArIDMgKiBnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjID0gdGhpcy5nIC8gYjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyAqPSAyIC0gYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGQgPSBhLk0ueSArIGEuR2E7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEueCA9IGEuS2IgKyAoYS5NLnggKyBhLmhiIC0gYS5LYikgKiBjOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnkgPSBhLkxiICsgKGQgLSBhLkxiKSAqIGM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuYWxwaGEgPSBjOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPj0gYiAmJiB0aGlzLnMoMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgWzJdOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQTogKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS54ID0gYS5NLnggKyBhLmhiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnkgPSBhLk0ueSArIGEuR2E7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucm90YXRpb24gPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFszXTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE46ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZyA9IDIwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJvdGF0aW9uID0gTWF0aC5QSSAvIDINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEE6ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEueCA9IGEuTS54ICsgYS5oYjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS55ID0gYS5NLnkgKyBhLkdhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IHRoaXMuZyAvIDIwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJvdGF0aW9uID0gLUUoYS5JKSAqIE1hdGguUEkgLyAyICogYiAqIGI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZy0tOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09IHRoaXMuZyAmJiB0aGlzLnMoMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgWzRdOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTjogKGIsYyk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5NID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hID0gYjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iID0gYzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYyA9IDQgKiBNYXRoLnJhbmRvbSgpIC0gMg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQTogKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS54ICs9IHRoaXMuYSAqIGc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEueSArPSB0aGlzLmIgKiBnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJvdGF0aW9uICs9IHRoaXMubWMgKiBnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmFscGhhID0gRihhLmFscGhhLCAwLCAyICogZyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPj0gYS5hbHBoYSAmJiB0aGlzLnMoMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sIDApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgbWIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55ID0gdGhpcy54ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5JID0gdGhpcy5YID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGIgPSAtMiAqIGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuR2EgPSAtNjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYSA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQiA9IG5ldyBsYih0aGlzKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBNYShhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuTSAhPT0gYSAmJiB0aGlzLkIucygxLCBhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBIYShhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIDAgIT09IHRoaXMuQi53ICYmIHRoaXMuQi5zKDQsIGEsIGIpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuSSArPSAodGhpcy5YIC0gdGhpcy5JKSAvIDU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQi5mKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYmIoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLk0gJiYgKHRoaXMuR2EgPSBhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBUYSgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5CLnMoMykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYygpIHsNCiAgICAgICAgICAgICAgICAgICAgMCA+PSB0aGlzLmFscGhhIHx8IChTLmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYSwNCiAgICAgICAgICAgICAgICAgICAgaWIoWGEsIHRoaXMueCwgdGhpcy55LCAwLCB0aGlzLkksIDEsIHRoaXMucm90YXRpb24pLA0KICAgICAgICAgICAgICAgICAgICBWKCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgbmIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm0gPSBbbmV3IG1iKC0xKSwgbmV3IG1iKDEpXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5CYSA9IFswLCAxXQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBNYShhKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgb2YgdGhpcy5tKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi5NYShhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBIYShhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGMgb2YgdGhpcy5tKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYy5IYShhLCBiKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBUYSgpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0aGlzLm0pDQogICAgICAgICAgICAgICAgICAgICAgICBhLlRhKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0aGlzLm0pDQogICAgICAgICAgICAgICAgICAgICAgICBhLmYoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBiYihhKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgb2YgdGhpcy5tKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi5iYihhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBuYyhhKSB7DQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYSkgew0KICAgICAgICAgICAgICAgICAgICBjYXNlIDA6DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJhID0gWzAsIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tWzBdLlggPSAtMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubVsxXS5YID0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlIC0xOg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5CYSA9IFsxLCAwXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubVswXS5YID0gLTE7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1bMV0uWCA9IC0xOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQmEgPSBbMCwgMV0sDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1bMF0uWCA9IDEsDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1bMV0uWCA9IDENCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkJhLmZvckVhY2goKGEpPT50aGlzLm1bYV0uYygpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFkoYSwgYj0xLCBjPSExKSB7DQogICAgICAgICAgICAgICAgbGV0IGQgPSB2LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOw0KICAgICAgICAgICAgICAgIGQuYnVmZmVyID0gYTsNCiAgICAgICAgICAgICAgICBjICYmIChhID0gdi5jcmVhdGVHYWluKCksDQogICAgICAgICAgICAgICAgYS5nYWluLnZhbHVlID0gMiAqIGIsDQogICAgICAgICAgICAgICAgZC5jb25uZWN0KGEpLA0KICAgICAgICAgICAgICAgIGEuY29ubmVjdCh4KSk7DQogICAgICAgICAgICAgICAgaWYgKDEgIT09IGIpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSB2LmNyZWF0ZUdhaW4oKTsNCiAgICAgICAgICAgICAgICAgICAgYS5nYWluLnNldFZhbHVlQXRUaW1lKGIsIDApOw0KICAgICAgICAgICAgICAgICAgICBkLmNvbm5lY3QoYSk7DQogICAgICAgICAgICAgICAgICAgIGQub25lbmRlZCA9ICgpPT5hLmRpc2Nvbm5lY3Qodyk7DQogICAgICAgICAgICAgICAgICAgIGEuY29ubmVjdCh3KQ0KICAgICAgICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgICAgICAgICBkLmNvbm5lY3Qodyk7DQogICAgICAgICAgICAgICAgZC5zdGFydCgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBvYiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gYTsNCiAgICAgICAgICAgICAgICAgICAgYSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gTWF0aC5jb3MoYSkgKiBjOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSBNYXRoLnNpbihhKSAqIGM7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQWEgPSBiOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFscGhhID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5OYiA9IDEgLyBiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQWEtLTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYSArPSB0aGlzLk5iOw0KICAgICAgICAgICAgICAgICAgICAwID49IHRoaXMuQWEgfHwgKGhiKHRoaXMuY29sb3IsIG51bGwsIHRoaXMueCwgdGhpcy55LCB0aGlzLkFhKSwNCiAgICAgICAgICAgICAgICAgICAgUy5nbG9iYWxBbHBoYSA9IHRoaXMuYWxwaGEsDQogICAgICAgICAgICAgICAgICAgIGhiKCIjODg4IiwgbnVsbCwgdGhpcy54LCB0aGlzLnksIHRoaXMuQWEpLA0KICAgICAgICAgICAgICAgICAgICBWKCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgcGIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55ID0gYjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5RYiA9IFt7DQogICAgICAgICAgICAgICAgICAgICAgICB1YTogbmV3IG9iKCIjZDQ4NjIxIiwxOCwwKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIEZhOiAwDQogICAgICAgICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVhOiBuZXcgb2IoIiNmZmYyYWEiLDksOCksDQogICAgICAgICAgICAgICAgICAgICAgICBGYTogLjENCiAgICAgICAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgdWE6IG5ldyBvYigiI2Q0ODYyMSIsOSw3KSwNCiAgICAgICAgICAgICAgICAgICAgICAgIEZhOiAuMg0KICAgICAgICAgICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgICAgICAgICB1YTogbmV3IG9iKCIjZmZmMmFhIiw5LDYpLA0KICAgICAgICAgICAgICAgICAgICAgICAgRmE6IC4zDQogICAgICAgICAgICAgICAgICAgIH1dOw0KICAgICAgICAgICAgICAgICAgICBtLkphKDEpOw0KICAgICAgICAgICAgICAgICAgICBZKGFiKTsNCiAgICAgICAgICAgICAgICAgICAgay5TYSA9IDINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nICs9IGc7DQogICAgICAgICAgICAgICAgICAgIDEgPD0gdGhpcy5nICYmIGsuamMoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICBqYih0aGlzLngsIHRoaXMueSwgKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUWIuZm9yRWFjaCgoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPCBhLkZhIHx8IGEudWEuYygpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIHFiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IGI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuSyA9IEgoVmEuWS5sZW5ndGgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSAxDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZyAtPSBnOw0KICAgICAgICAgICAgICAgICAgICAwID49IHRoaXMuZyAmJiBrLmdjKHRoaXMpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIFMuZ2xvYmFsQWxwaGEgPSAuNSAqIHRoaXMuZzsNCiAgICAgICAgICAgICAgICAgICAgaWIoVmEsIHRoaXMueCwgdGhpcy55LCB0aGlzLkspOw0KICAgICAgICAgICAgICAgICAgICBWKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyByYiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYSA9IGI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudWMgPSAxIC0gYg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFscGhhID0gRih0aGlzLmFscGhhLCB0aGlzLnVjLCBnKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICBTLmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgWCh0aGlzLmNvbG9yLCAwLCAwLCBSLndpZHRoLCBSLmhlaWdodCk7DQogICAgICAgICAgICAgICAgICAgIFYoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCBzYiA9IDA7DQogICAgICAgICAgICBjbGFzcyB0YiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnggPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSBiOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFscGhhID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IHNiKysgJSBUYS5ZLmxlbmd0aA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICBTLmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYSArPSAuMTsNCiAgICAgICAgICAgICAgICAgICAgaWIoVGEsIHRoaXMueCwgdGhpcy55LCB0aGlzLmluZGV4KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCB1YiA9IFsxLCAyLCAzLCA1LCA4XTsNCiAgICAgICAgICAgIGNsYXNzIHZiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGIgPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRhID0gbC54Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFhID0gbC55IC0gNjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkJiID0gW107DQogICAgICAgICAgICAgICAgICAgIGZvciAoYSA9IDA7IDUgPiBhOyBhKyspDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJiLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHI6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmE6IDANCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZysrOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRiIHx8ICg2MCA9PSB0aGlzLmcgJiYgay5JYShuZXcgcmIoIiNmZmYiLDApKSwNCiAgICAgICAgICAgICAgICAgICAgMTIwID09IHRoaXMuZyAmJiBoLmFjKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoMTAgPCB0aGlzLmcgJiYgMjQwID4gdGhpcy5nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IDUgPiBiOyBiKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMuQmJbYl07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yICs9IDI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yYSArPSB1YltiXSAqICgxIC0gdGhpcy5nIC8gMjQwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IGwueCArIE1hdGguY29zKGEucmEpICogYS5yOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBsLnkgKyBNYXRoLnNpbihhLnJhKSAqIGEucjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLkYoYyAtIDEsIGEgLSAxLCAyLCAyKSAmJiB0aGlzLm5iLnB1c2gobmV3IHRiKGMsYSkpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmIuZm9yRWFjaCgoYSk9PmEuYygpKTsNCiAgICAgICAgICAgICAgICAgICAgVigpOw0KICAgICAgICAgICAgICAgICAgICBTLmxpbmVXaWR0aCA9IDE7DQogICAgICAgICAgICAgICAgICAgIGhiKG51bGwsICIjZmZmIiwgdGhpcy50YSwgdGhpcy5hYSwgTWF0aC5wb3codGhpcy5nLCAxLjEyNSkpOw0KICAgICAgICAgICAgICAgICAgICBoYihudWxsLCAiI2ZmZiIsIHRoaXMudGEsIHRoaXMuYWEsIE1hdGgucG93KHRoaXMuZywgMS4yNSkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHdiID0gUy5jcmVhdGVSYWRpYWxHcmFkaWVudChSLndpZHRoIC8gMiwgUi5oZWlnaHQgLyAyLCAyMDAsIFIud2lkdGggLyAyLCBSLmhlaWdodCAvIDIsIDFFMyk7DQogICAgICAgICAgICB3Yi5hZGRDb2xvclN0b3AoMCwgIiNlZWVlZWUwMCIpOw0KICAgICAgICAgICAgd2IuYWRkQ29sb3JTdG9wKDEsICIjZWVlZWVlNTMiKTsNCiAgICAgICAgICAgIGNsYXNzIHhiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYSA9IDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYSAtPSAyICogZzsNCiAgICAgICAgICAgICAgICAgICAgMCA+IHRoaXMuYWxwaGEgJiYgay5oYyh0aGlzKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICBTLmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgWCh3YiwgMCwgMCwgUi53aWR0aCwgUi5oZWlnaHQpOw0KICAgICAgICAgICAgICAgICAgICBWKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBaIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiLCBjPTEsIGQ9MSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnggPSA4ICogYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55ID0gOCAqIGI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSA4ICogYzsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSA4ICogZA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBnZXQgbGIoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnggLyA4DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGdldCBQYSgpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueSAvIDgNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHt9DQogICAgICAgICAgICAgICAgYygpIHt9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyB5YiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7fQ0KICAgICAgICAgICAgICAgIHN0YXJ0KGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAhMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nID0gYQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdG9wKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmcgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9ICExDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlICYmICh0aGlzLmctLSwNCiAgICAgICAgICAgICAgICAgICAgMCA+PSB0aGlzLmcgJiYgKHRoaXMuYWN0aXZlID0gITEpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIHpiIGV4dGVuZHMga2Igew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VwZXIoew0KICAgICAgICAgICAgICAgICAgICAgICAgWzBdOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTjogKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS52YSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBOiAoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLkogJiYgdGhpcy5zKDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsxXTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE46ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEudmEoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQTogKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFsxNl0gJiYgdGhpcy5zKDIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsyXTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE46ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUWEgPSAuMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5PYigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBOiAoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0WzE2XSA/ICh0aGlzLlFhIC09IGcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPj0gdGhpcy5RYSAmJiB0aGlzLnMoMykpIDogdGhpcy5zKDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFszXTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEE6ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbMTZdIHx8IDQgPT09IGEuZWEudyB8fCB0aGlzLnMoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sIDApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFRiKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnMoMCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBBYiBleHRlbmRzIGtiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFs1XTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEE6ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuSiAmJiAodGhpcy5MYSA9IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuaWMoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuTmEgPyB0aGlzLnNiKGEpIHx8IGEuVmEoKSA6IGEuVmEoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBbNF06IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOOiAoYik9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5TYihiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYSA9IC4yNTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTI0MCA9PSBhLmIgJiYgKHRoaXMubGEgLT0gLjA2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS54YS5hY3RpdmUgPyBhLm0uVGEoKSA6ICh0aGlzLkxhKyssDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuYmMoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsuSWEobmV3IHhiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQTogKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYSAtPSBnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID49IHRoaXMubGEgPyB0aGlzLnMoNikgOiAwID09PSBjYSAlIDIgJiYgay5MKG5ldyBxYihhLnYueCArIE1hdGgucmFuZG9tKCkgKiBhLiQsYS52LnkgKyBNYXRoLnJhbmRvbSgpICogYS5oYSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFs2XTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE46ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVWEgPSAuMDg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucWMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQTogKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5OYSAmJiAwID09PSB0aGlzLkxhICYmIHRoaXMuc2IoYSkgfHwgKGEuVmEoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5VYSAtPSBnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID49IHRoaXMuVWEgJiYgdGhpcy5zKDUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmI6ICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDggIT09IGEua2EgJiYgYS50YygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LCA1KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzYihhKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghYS5kYS5hY3RpdmUgfHwgIWEuSiAmJiAwIDwgdGhpcy5MYSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAxICogISF0WzFdIHwgMiAqICEhdFsyXSB8IDQgKiAhIXRbNF0gfCA4ICogISF0WzhdIHx8IDI7DQogICAgICAgICAgICAgICAgICAgIHZhciBjID0gIWEuRihhLnggLSAxLCBhLnkpDQogICAgICAgICAgICAgICAgICAgICAgLCBkID0gIWEuRihhLngsIGEueSAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgLCBlID0gIWEuRihhLnggKyAxLCBhLnkpOw0KICAgICAgICAgICAgICAgICAgICBiICY9IDEgKiBjIHwgMiAqIGQgfCA0ICogZSB8IDggKiAhYS5KOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAhPT0gYiAmJiA1ICE9PSBiICYmIDEwICE9PSBiICYmIDE1ICE9PSBiID8gKHRoaXMucyg0LCBiKSwNCiAgICAgICAgICAgICAgICAgICAgITApIDogITENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAga2IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICA0ID09PSB0aGlzLncgJiYgKGEua2EgJj0gfmIsDQogICAgICAgICAgICAgICAgICAgIDAgPT09IGEua2EgJiYgdGhpcy5zKDYpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIEJiIGV4dGVuZHMgWiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICBzdXBlcihhLCBiKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lYiA9IGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmIgPSBiOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnggKz0gNDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55ICs9IDg7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuWiA9IDM7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2EgPSA4Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLiQgPSA2Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhhID0gODsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5JID0gMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5WID0gdGhpcy5iID0gdGhpcy5hID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYSA9ICEwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNiID0gLjU7DQogICAgICAgICAgICAgICAgICAgIHRoaXMua2EgPSB0aGlzLkggPSB0aGlzLkcgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLk8gPSB0aGlzLlJhID0gNzIwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNjID0gMzIwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRhID0gbmV3IHliOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnhhID0gbmV3IHliOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm0gPSBuZXcgbmI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuSyA9IHRoaXMuZ2IgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFiID0gdGhpcy5BYiA9IDE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuT2EgPSBuZXcgemIodGhpcyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWEgPSBuZXcgQWIodGhpcykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmEpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubS5mKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYiA9IEYodGhpcy5jYiwgZywgZyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBnICogdGhpcy5jYjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmUodGhpcy5hICogYSwgdGhpcy5iICogYSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSA+IGsuaGVpZ2h0ICsgMTAwID8gdGhpcy5iYSgpIDogKCh0aGlzLkogPSB0aGlzLkYodGhpcy54LCB0aGlzLnkgKyAxKSAmJiAhdGhpcy5qYSh0aGlzLngsIHRoaXMueSArIDEsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcWE6IDINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkgJiYgdGhpcy54YS5zdGFydCg0KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0WzMyXSAmJiAhdVszMl0gJiYgdGhpcy5kYS5zdGFydCg0KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0WzMyXSB8fCB0aGlzLmRhLnN0b3AoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk9hLmYoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhLmYoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwICE9PSB0aGlzLmEgJiYgKHRoaXMuSSA9IEUodGhpcy5hKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlKHRoaXMuYSAqIGcsIHRoaXMuYiAqIGcpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGEuZigpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueGEuZigpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueGMoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm0uZigpKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYi5mKCksDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm0uZigpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHhjKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLksgPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm0ubmMoRSh0aGlzLmEpKTsNCiAgICAgICAgICAgICAgICAgICAgNCA9PT0gdGhpcy5lYS53ID8gdGhpcy5LID0gMCA9PT0gdGhpcy5hID8gMCA6IDMgOiB0aGlzLkogPyAxMDAgPCBNYXRoLmFicyh0aGlzLmEpICYmICh0aGlzLksgPSBNYXRoLmZsb29yKHRoaXMuZ2IpICUgMiArIDEsDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2IgKz0gLjEpIDogMTAwIDwgTWF0aC5hYnModGhpcy5hKSA/ICh0aGlzLksgPSAxLA0KICAgICAgICAgICAgICAgICAgICAxMDAgPCB0aGlzLmIgJiYgKHRoaXMuSyA9IDQpKSA6IHRoaXMuSyA9IDEwMCA8IHRoaXMuYiA/IDUgOiAwOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IDAgPiB0aGlzLmIgPyBNYXRoLm1pbiguMSwgLXRoaXMuYiAvIDEwMCkgOiAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkFiID0gMSAtIGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWIgPSAxICsgMiAqIGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubS5iYihbLTgsIC03LCAtOCwgLTcsIC03LCAtOCwgLTddW3RoaXMuS10pICogdGhpcy5hYg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBPYigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tLk1hKHRoaXMpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm0uSGEoLShNYXRoLm1heCgxMCwgTWF0aC5hYnModGhpcy5hIC8gOCkpICogRSh0aGlzLmEgfHwgdGhpcy5JKSksIC10aGlzLmIgLyA4KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBiYygpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52YSgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLk9hLlRiKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgU2IoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmthID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iID0gdGhpcy5hID0gMDsNCiAgICAgICAgICAgICAgICAgICAgYSAmIDEgJiYgdGhpcy5hLS07DQogICAgICAgICAgICAgICAgICAgIGEgJiAyICYmIHRoaXMuYi0tOw0KICAgICAgICAgICAgICAgICAgICBhICYgNCAmJiB0aGlzLmErKzsNCiAgICAgICAgICAgICAgICAgICAgYSAmIDggJiYgdGhpcy5iKys7DQogICAgICAgICAgICAgICAgICAgIDAgIT09IHRoaXMuYSAmJiAwICE9PSB0aGlzLmIgPyAodGhpcy5hICo9IDE3MCwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iICo9IDE3MCkgOiAodGhpcy5hICo9IDI0MCwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5iICo9IDI0MCk7DQogICAgICAgICAgICAgICAgICAgIDI0MCA9PSB0aGlzLmIgJiYgKHRoaXMuYiA9IDMyMCk7DQogICAgICAgICAgICAgICAgICAgIFkoWWEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFZhKCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IDE2MCAqICgtISF0WzFdICsgISF0WzRdKQ0KICAgICAgICAgICAgICAgICAgICAgICwgYiA9IHRoaXMuSiA/IDEgOiAuNTsNCiAgICAgICAgICAgICAgICAgICAgMCA9PT0gYSA/IHRoaXMuYSA9IEYodGhpcy5hLCBhLCA4MDAgKiBiICogZykgOiAwID09PSB0aGlzLmEgPyB0aGlzLmEgPSB0aGlzLkogPyAuMSAqIGEgOiBGKHRoaXMuYSwgYSwgODAwICogYiAqIGcpIDogKDAgPCBhID8gMSA6IDAgPiBhID8gLTEgOiAwKSA9PT0gRSh0aGlzLmEpID8gdGhpcy5hID0gRih0aGlzLmEsIGEsIDgwMCAqIGIgKiBnKSA6ICgwIDwgYSA/IDEgOiAwID4gYSA/IC0xIDogMCkgIT09IEUodGhpcy5hKSAmJiAodGhpcy5hID0gRih0aGlzLmEsIGEsIDMyMDAgKiBiICogZykpOw0KICAgICAgICAgICAgICAgICAgICAhdGhpcy5OYSAmJiB0aGlzLnhhLmFjdGl2ZSAmJiB0aGlzLmRhLmFjdGl2ZSAmJiAodGhpcy5iID0gLTEyOCwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5WID0gLjQsDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGEuc3RvcCgpLA0KICAgICAgICAgICAgICAgICAgICBZKCRhKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5KKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuViAtPSBnLA0KICAgICAgICAgICAgICAgICAgICAgICAgMCA8IHRoaXMuViAmJiB0WzMyXSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmIgKz0gMTYwICogZzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKDAgPj0gdGhpcy5WIHx8ICF0WzMyXSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmIgPSBGKHRoaXMuYiwgdGhpcy5jYywgdGhpcy5PICogZyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5WID0gMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBtb3ZlKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSAoYik9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGIucWEgJiAyICYmIC41IDw9IE1hdGguYWJzKGEpID8gdGhpcy5iYSgpIDogdGhpcy5lYyhiLmEpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAsIGQgPSAoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEucWEgJiAyID8gdGhpcy5iYSgpIDogdGhpcy5mYyhhLmIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgOw0KICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhhKSA+IE1hdGguYWJzKGIpID8gKHRoaXMuWWEoYSwgYyksDQogICAgICAgICAgICAgICAgICAgIHRoaXMuWmEoYiwgZCkpIDogKHRoaXMuWmEoYiwgZCksDQogICAgICAgICAgICAgICAgICAgIHRoaXMuWWEoYSwgYykpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVjKGE9MCkgew0KICAgICAgICAgICAgICAgICAgICBhID0gKDAgPCBhID8gMSA6IDAgPiBhID8gLTEgOiAwKSA9PT0gRSh0aGlzLmEpID8gYSA6IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCBiID0gTWF0aC5hYnMoYSAtIE1hdGguYWJzKHRoaXMuYSkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmEgPSBhOw0KICAgICAgICAgICAgICAgICAgICAyMDAgPD0gYiAmJiAodGhpcy5FYigpLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVhLmtiKHRoaXMsIDUpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmYyhhPTApIHsNCiAgICAgICAgICAgICAgICAgICAgYSA9ICgwIDwgYSA/IDEgOiAwID4gYSA/IC0xIDogMCkgPT09IEUodGhpcy5iKSA/IGEgOiAwOw0KICAgICAgICAgICAgICAgICAgICBpZiAoMjMwIDw9IE1hdGguYWJzKGEgLSBNYXRoLmFicyh0aGlzLmIpKSB8fCAtMjAwID4gdGhpcy5iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkViKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhID0gLTI7IDIgPj0gYTsgYSsrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsuTChuZXcgcWIodGhpcy54ICsgNCAqIGEsdGhpcy55IC0gMSAtIDIgKiBNYXRoLnJhbmRvbSgpKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBrLlNhID0gMzIwID09IE1hdGguYWJzKHRoaXMuYikgPyAyIDogMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuViA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVhLmtiKHRoaXMsIDEwKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYiA9IGENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgRWIoKSB7DQogICAgICAgICAgICAgICAgICAgIG0uSmEoLjQpOw0KICAgICAgICAgICAgICAgICAgICBZKFphLCAuMikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuTyA9IHRoaXMuUmENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcWMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuTyA9IDANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuTyA9IHRoaXMuUmENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgWWEoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkcgKz0gYTsNCiAgICAgICAgICAgICAgICAgICAgYSA9IE1hdGgucm91bmQodGhpcy5HKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKDAgIT09IGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuRyAtPSBhOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSAwIDwgYSA/IDEgOiAwID4gYSA/IC0xIDogMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyAwICE9PSBhOyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZCA9IHRoaXMuRih0aGlzLnggKyBjLCB0aGlzLnkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgJiYgYihkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ICs9IGMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgLT0gYw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFphKGEsIGIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5IICs9IGE7DQogICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLnJvdW5kKHRoaXMuSCk7DQogICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSBhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkggLT0gYTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjID0gMCA8IGEgPyAxIDogMCA+IGEgPyAtMSA6IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgMCAhPT0gYTsgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGQgPSB0aGlzLkYodGhpcy54LCB0aGlzLnkgKyBjKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiICYmIGIoZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSBjLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIC09IGMNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBqYShhLCBiLCBjKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBrLmphKGEgLSB0aGlzLlosIGIgLSB0aGlzLnNhLCB0aGlzLiQsIHRoaXMuaGEsIGMpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEYoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gay5GKGEgLSB0aGlzLlosIGIgLSB0aGlzLnNhLCB0aGlzLiQsIHRoaXMuaGEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGdldCB2KCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy54IC0gdGhpcy5aLA0KICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy55IC0gdGhpcy5zYSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLiQsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGEsDQogICAgICAgICAgICAgICAgICAgICAgICB0YTogdGhpcy54IC0gdGhpcy5aICsgdGhpcy4kIC8gMiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFhOiB0aGlzLnkgLSB0aGlzLnNhICsgdGhpcy5oYSAvIDINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBnZXQgTmEoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAzID09PSB0aGlzLk9hLncNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZ2V0IHRiKCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gNCA9PT0gdGhpcy5lYS53DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHViKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEueSA9PT0gdGhpcy55ICYmIHRoaXMueCAtIHRoaXMuWiArIHRoaXMuJCA+IGEueCAmJiB0aGlzLnggLSB0aGlzLlogPCBhLnggKyBhLndpZHRoDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubS5jKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubmEgPyBpYihXYSwgdGhpcy54LCB0aGlzLnksIHRoaXMuSywgdGhpcy5JICogdGhpcy5BYiwgdGhpcy5hYikgOiB0aGlzLm1iLmMoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBiYSgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYSAmJiAodGhpcy5uYSA9ICExLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLm1iID0gbmV3IHBiKHRoaXMueCx0aGlzLnYuYWEpLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhKCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG9jKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLndhIHx8ICh0aGlzLndhID0gITAsDQogICAgICAgICAgICAgICAgICAgIHRoaXMuVWIgPSBuZXcgdmIsDQogICAgICAgICAgICAgICAgICAgIGsuTCh0aGlzLlViKSwNCiAgICAgICAgICAgICAgICAgICAgbS5KYSgxKSwNCiAgICAgICAgICAgICAgICAgICAgWShiYiwgLjIsICEwKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBDYiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubyA9IHt9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEthKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vW2EueCArICI7IiArIGEueV0gPSBhDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHUoYSwgYiwgYz0wKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoYSA9IHRoaXMub1thICsgIjsiICsgYl0pID8gYyA/IGEucWEgJiBjID8gYSA6IG51bGwgOiBhIDogbnVsbA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBvYihhKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgaW4gdGhpcy5vKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYSh0aGlzLm9bYl0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgRGIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pYSA9IHt9Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLm8gPSBhDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGFzeW5jIHBhKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm8ub2IoKGEpPT57DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IE1hdGguZmxvb3IoYS54IC8gNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgYyA9IE1hdGguZmxvb3IoYS55IC8gNjApDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgZCA9IGIgKyAiOyIgKyBjOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pYVtkXSA9IHRoaXMuaWFbZF0gfHwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogYywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvOiBbXQ0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaWFbZF0uby5wdXNoKGEpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyh0aGlzLmlhKS5tYXAoKGEpPT50aGlzLmRjKGEpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYXN5bmMgZGMoYSkgew0KICAgICAgICAgICAgICAgICAgICBhLkMgPSBhd2FpdCBKKDQ4MCwgNDgwLCAoYik9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGIudHJhbnNsYXRlKDQ4MCAqIC1hLngsIDQ4MCAqIC1hLnkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYS5vLmZvckVhY2goKGEpPT5hLmModGhpcy5vLCBiKSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIEkoTWF0aC5mbG9vcihtLkliKDApIC8gOCAvIDYwKSwgTWF0aC5mbG9vcihtLkpiKDApIC8gOCAvIDYwKSwgTWF0aC5mbG9vcihtLkliKFIud2lkdGggLSAxKSAvIDggLyA2MCksIE1hdGguZmxvb3IobS5KYihSLmhlaWdodCAtIDEpIC8gOCAvIDYwKSwgKGEsYik9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjID0gdGhpcy5pYVtgJHthfTske2J9YF07DQogICAgICAgICAgICAgICAgICAgICAgICBjICYmIFcoYy5DLCA0ODAgKiBhLCA0ODAgKiBiKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBFYiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnogPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gYjsNCiAgICAgICAgICAgICAgICAgICAgYSA9IFMuY3JlYXRlUmFkaWFsR3JhZGllbnQoUi53aWR0aCAvIDIsIFIuaGVpZ2h0IC8gMiwgNDAwLCBSLndpZHRoIC8gMiwgUi5oZWlnaHQgLyAyLCAxMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgYS5hZGRDb2xvclN0b3AoMCwgRWEoYiwgMCkpOw0KICAgICAgICAgICAgICAgICAgICBhLmFkZENvbG9yU3RvcCgxLCBiKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5YYiA9IGENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYXN5bmMgcGEoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQyA9IGF3YWl0IEooODAsIDgwLCAoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuZmlsbFN0eWxlID0gdGhpcy5jb2xvcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuYmVnaW5QYXRoKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgODAgPiBiOyBiKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IDEgKyBIKDgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGQgPSAxICsgSCg4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJlY3QoSCg4MCAtIGIpLCBIKDgwIC0gZCksIGIsIGQpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBhLmZpbGwoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYygpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHt6OiBhLCBDOiBiLCBYYjogY30gPSB0aGlzOw0KICAgICAgICAgICAgICAgICAgICBVKGEpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZCA9IGEgLyAxNSAqIDgwOw0KICAgICAgICAgICAgICAgICAgICBJKE1hdGguZmxvb3IoLVRbNF0gLyBUWzBdIC8gZCksIE1hdGguZmxvb3IoLVRbNV0gLyBUWzNdIC8gZCksIE1hdGguZmxvb3IoKFIud2lkdGggLyBUWzBdIC0gVFs0XSAvIFRbMF0pIC8gZCksIE1hdGguZmxvb3IoKFIuaGVpZ2h0IC8gVFszXSAtIFRbNV0gLyBUWzNdKSAvIGQpLCAoYSxjKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgVyhiLCBhICogZCwgYyAqIGQsIGQsIGQpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgUy5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7DQogICAgICAgICAgICAgICAgICAgIFgoYywgMCwgMCwgUi53aWR0aCwgUi5oZWlnaHQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgRmIgew0KICAgICAgICAgICAgICAgIGFzeW5jIHBhKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLlAgPSBbbmV3IEViKDkwMCxhYSksIG5ldyBFYigzMDAsYmEpXTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5QLm1hcCgoYSk9PmEucGEoKSkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIFgobiwgMCwgMCwgUi53aWR0aCwgUi5oZWlnaHQpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLlAuZm9yRWFjaCgoYSk9PmEuYygpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIEdiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vID0gbmV3IENiOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkZiID0gbmV3IFNldDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgWzEyMF06IG5ldyBTZXQsDQogICAgICAgICAgICAgICAgICAgICAgICBbMTAwXTogbmV3IFNldCwNCiAgICAgICAgICAgICAgICAgICAgICAgIFs1MF06IG5ldyBTZXQNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55YSA9IG5ldyBTZXQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuRCA9IG5ldyBTZXQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuSGIgPSBuZXcgRGIodGhpcy5vKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qYiA9IG5ldyBGYjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5JYShuZXcgcmIoIiNmZmYiLDEpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhc3luYyBaYigpIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5qYi5wYSgpOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLkhiLnBhKCk7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgb2YgdGhpcy5EKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYS5VICYmIGF3YWl0IGEuVSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZjKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMud2lkdGggPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm8ub2IoKGEpPT57DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gTWF0aC5tYXgodGhpcy53aWR0aCwgOCAqIGEueCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KHRoaXMuaGVpZ2h0LCA4ICogYS55KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcGMoYSkgew0KICAgICAgICAgICAgICAgICAgICBsID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy54YiA9IGEuZWI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueWIgPSBhLmZiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGpjKCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhIG9mIHRoaXMuRCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGEucmVzZXQgJiYgYS5yZXNldCgpOw0KICAgICAgICAgICAgICAgICAgICBsID0gbmV3IEJiKHRoaXMueGIsdGhpcy55YikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgTChhLCBiPTEwMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLlBbYl0uYWRkKGEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkQuYWRkKGEpOw0KICAgICAgICAgICAgICAgICAgICBhLk1iID0gYg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBnYyhhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuRC5kZWxldGUoYSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUFthLk1iXS5kZWxldGUoYSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWIoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkZiLmFkZChhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5MKGEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEthKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vLkthKGEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIElhKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55YS5hZGQoYSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaGMoYSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnlhLmRlbGV0ZShhKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBqYShhLCBiLCBjLCBkLCB7cWE6IGU9NywgV2E6IGY9bnVsbH09e30pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiAxICYmIChmID0gdGhpcy5GKGEsIGIsIGMsIGQsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdhOiBmDQogICAgICAgICAgICAgICAgICAgIH0pKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IE1hdGguZmxvb3IoYSAvIDgpOw0KICAgICAgICAgICAgICAgICAgICBmID0gTWF0aC5mbG9vcihiIC8gOCk7DQogICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLmZsb29yKChhICsgYyAtIDEpIC8gOCk7DQogICAgICAgICAgICAgICAgICAgIGIgPSBNYXRoLmZsb29yKChiICsgZCAtIDEpIC8gOCk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoZCA9IHA7IGQgPD0gYTsgZCsrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjID0gZjsgYyA8PSBiOyBjKyspDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAgPSB0aGlzLm8udShkLCBjLCBlKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHA7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEYoYSwgYiwgYywgZCwge1dhOiBlPW51bGx9PXt9KSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBmID0gTWF0aC5mbG9vcihhIC8gOCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBwID0gTWF0aC5mbG9vcihiIC8gOCkNCiAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBNYXRoLmZsb29yKChhICsgYyAtIDEpIC8gOCkNCiAgICAgICAgICAgICAgICAgICAgICAsIE8gPSBNYXRoLmZsb29yKChiICsgZCAtIDEpIC8gOCk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoOyBmIDw9IHI7IGYrKykNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgPSBwOyBhIDw9IE87IGErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiID0gdGhpcy5vLnUoZiwgYSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGYgb2YgdGhpcy5GYikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmICE9PSBlICYmIGYuVCAmJiBHKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBhLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBkDQogICAgICAgICAgICAgICAgICAgICAgICB9LCBmKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZjsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuU2EpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlNhLS07DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0aGlzLkQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5mKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBsICYmIGwuZigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0aGlzLnlhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbS5mKCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICBTLnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5qYi5jKCk7DQogICAgICAgICAgICAgICAgICAgIFUoMTIwKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0aGlzLlBbMTIwXSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuYygpOw0KICAgICAgICAgICAgICAgICAgICBVKDEwMCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuSGIuYygpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhIG9mIHRoaXMuUFsxMDBdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYS5jKCk7DQogICAgICAgICAgICAgICAgICAgIGwgJiYgbC5jKCk7DQogICAgICAgICAgICAgICAgICAgIFUoNTApOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhIG9mIHRoaXMuUFs1MF0pDQogICAgICAgICAgICAgICAgICAgICAgICBhLmMoKTsNCiAgICAgICAgICAgICAgICAgICAgUy5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgb2YgdGhpcy55YSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGEuYygpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgSGIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZhID0gdGhpcy5DYSA9IHRoaXMuRGIgPSB0aGlzLkNiID0gdGhpcy5FYSA9IHRoaXMuRGEgPSB0aGlzLlIgPSB0aGlzLkdiID0gdGhpcy55ID0gdGhpcy54ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FsZSA9IDI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2EgPSAxDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuemMoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55YygpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLndjKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuR2IgKyB0aGlzLkRhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSB0aGlzLlIgKyB0aGlzLkVhDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHdjKCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IE1hdGgubWluKDYsIDggKiB0aGlzLmZhICogdGhpcy5mYSkNCiAgICAgICAgICAgICAgICAgICAgICAsIGIgPSAyICogTWF0aC5yYW5kb20oKSAqIE1hdGguUEk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQ2EgJiYgKHRoaXMuQ2IgPSBhICogTWF0aC5jb3MoYiksDQogICAgICAgICAgICAgICAgICAgIHRoaXMuRGIgPSBhICogTWF0aC5zaW4oYikpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkNhID0gIXRoaXMuQ2E7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuRGEgKz0gLjc1ICogKHRoaXMuQ2IgLSB0aGlzLkRhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5FYSArPSAuNzUgKiAodGhpcy5EYiAtIHRoaXMuRWEpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZhID0gRih0aGlzLmZhLCAwLCBnKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB5YygpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBsLnYuYWENCiAgICAgICAgICAgICAgICAgICAgICAsIGIgPSB0aGlzLnBiKCkgLyAxMA0KICAgICAgICAgICAgICAgICAgICAgICwgYyA9IHRoaXMucGIoKSAvIDYNCiAgICAgICAgICAgICAgICAgICAgICAsIGQgPSAoYik9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUiArPSAoYSArIGIgLSB0aGlzLlIpIC8gOA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIDsNCiAgICAgICAgICAgICAgICAgICAgbC5KID8gZCgwKSA6IGEgPCB0aGlzLnkgLSBjID8gdGhpcy5SID0gYSArIGMgOiBhID4gdGhpcy55ICsgYyA/IHRoaXMuUiA9IGEgLSBjIDogYSA8IHRoaXMueSAtIGIgPyBkKGIpIDogYSA+IHRoaXMueSArIGIgJiYgZCgtYik7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUiA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuUiwgay5oZWlnaHQpKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5HYiA9IE1hdGgubWF4KDAsIE1hdGgubWluKGwueCwgay53aWR0aCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHpjKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNhID0gRih0aGlzLmNhLCAwLCBnIC8gNCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2NhbGUgPSA0IC0gMiAqIHRoaXMuY2EgKiB0aGlzLmNhDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEphKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYSA9IE1hdGgubWluKDEsIHRoaXMuZmEgKyBhKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5DYSA9ICEwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBiKCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gUi5oZWlnaHQgLyB0aGlzLnNjYWxlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIEliKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhIC0gUi53aWR0aCAvIDIpIC8gdGhpcy5zY2FsZSArIHRoaXMueA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBKYihhKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoYSAtIFIuaGVpZ2h0IC8gMikgLyB0aGlzLnNjYWxlICsgdGhpcy55DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgSWIgew0KICAgICAgICAgICAgICAgIGFzeW5jIGxvYWQoKSB7DQogICAgICAgICAgICAgICAgICAgIGsgPSBuZXcgR2I7DQogICAgICAgICAgICAgICAgICAgIG0gPSBuZXcgSGI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuVmIoKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgay5aYigpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgSmIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEsIGIsIGMpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55ID0gYjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5xYSA9IGMNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBLYiBleHRlbmRzIEpiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKGEsIGIsIDEpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICBhID0gKHRoaXMueCAlIDI0ICsgMjQpICUgMjQgLyAyNDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSAodGhpcy55ICUgMjQgKyAyNCkgJSAyNCAvIDI0Ow0KICAgICAgICAgICAgICAgICAgICBiLmdsb2JhbEFscGhhID0gMSAtIGEgKiAoMSAtIGEpICogYyAqICgxIC0gYykgLSAuMDEgKyAuMDIgKiBNYXRoLnJhbmRvbSgpOw0KICAgICAgICAgICAgICAgICAgICBiLmZpbGxTdHlsZSA9IHE7DQogICAgICAgICAgICAgICAgICAgIGIuZmlsbFJlY3QoOCAqIHRoaXMueCwgOCAqIHRoaXMueSwgOCwgOCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBMYiBleHRlbmRzIEpiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKGEsIGIsIDMpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFdiKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSB0aGlzLngNCiAgICAgICAgICAgICAgICAgICAgICAsIGMgPSB0aGlzLnkNCiAgICAgICAgICAgICAgICAgICAgICAsIGQgPSBhLnUoYiwgYyAtIDEsIDIpIHx8IGEudShiLCBjICsgMSwgMikNCiAgICAgICAgICAgICAgICAgICAgICAsIGUgPSBhLnUoYiAtIDEsIGMsIDIpIHx8IGEudShiICsgMSwgYywgMik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnUoYiAtIDEsIGMsIDEpICYmIGQgPyAzIDogYS51KGIgKyAxLCBjLCAxKSAmJiBkID8gMSA6IGEudShiLCBjIC0gMSwgMSkgJiYgZSA/IDAgOiBhLnUoYiwgYyArIDEsIDEpICYmIGUgPyAyIDogYS51KGIgLSAxLCBjLCAxKSA/IDMgOiBhLnUoYiArIDEsIGMsIDEpID8gMSA6IGEudShiLCBjIC0gMSwgMSkgPyAwIDogYS51KGIsIGMgKyAxLCAxKSA/IDIgOiAwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICBiLmZpbGxTdHlsZSA9IHE7DQogICAgICAgICAgICAgICAgICAgIGxldCBjID0gOCAqIHRoaXMueA0KICAgICAgICAgICAgICAgICAgICAgICwgZCA9IDggKiB0aGlzLnk7DQogICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLldiKGEpOw0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOg0KICAgICAgICAgICAgICAgICAgICBjYXNlIDI6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgOCA+IGU7IGUgKz0gMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gZSAvIDIgJSAyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZmlsbFJlY3QoYyArIGUsIGQgKyAoMiA9PT0gYSA/IGYgOiAwKSwgMSwgOCAtIGYpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgICBjYXNlIDM6DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSAwOyA4ID4gZTsgZSArPSAyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBlIC8gMiAlIDIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5maWxsUmVjdChjICsgKDEgPT09IGEgPyBmIDogMCksIGQgKyBlLCA4IC0gZiwgMSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBiLnN0cm9rZSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgTWIgZXh0ZW5kcyBaIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcihhLCBiLCBjLCBkLCBlLCBmKSB7DQogICAgICAgICAgICAgICAgICAgIHN1cGVyKGEsIGIsIGMsIGQpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmViID0gdGhpcy54Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZiID0gdGhpcy55Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJjID0gZTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYyA9IGY7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5UID0gITANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVzZXQoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZWI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuZmI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYSA9IHRoaXMucmM7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYiA9IHRoaXMuc2M7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuSCA9IHRoaXMuRyA9IDA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuVCA9ICEwDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGFzeW5jIFUoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuQyA9IGF3YWl0IEoodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIChhKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgSSgwLCAwLCB0aGlzLndpZHRoIC8gOCAtIDEsIHRoaXMuaGVpZ2h0IC8gOCAtIDEsIChiLGMpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5maWxsU3R5bGUgPSBFYShxLCAuOTQgLSAuMDEgKyAuMDIgKiBNYXRoLnJhbmRvbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmZpbGxSZWN0KDggKiBiLCA4ICogYywgOCwgOCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuVCA9ICExOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkcgKz0gdGhpcy5hICogZzsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5IICs9IHRoaXMuYiAqIGc7DQogICAgICAgICAgICAgICAgICAgIGxldCBhID0gTWF0aC5yb3VuZCh0aGlzLkcpDQogICAgICAgICAgICAgICAgICAgICAgLCBiID0gTWF0aC5yb3VuZCh0aGlzLkgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLkcgLT0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5IIC09IGI7DQogICAgICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5qYSh0aGlzLnggKyBhLCB0aGlzLnkgKyBiKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmEgJiYgRShjLmEpID09PSAtRSh0aGlzLmEpIHx8IHRoaXMuYiAmJiBFKGMuYikgPT09IC1FKHRoaXMuYikpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5hICo9IC0xLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuYiAqPSAtMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIDAgPCB0aGlzLmEgPyBhIC09ICh0aGlzLnggKyBhKSAlIDggKiAyIDogMCA+IHRoaXMuYSA/IGEgLT0gMiAqICgodGhpcy54ICsgYSkgJSA4IC0gOCkgOiBiID0gMCA8IHRoaXMuYiA/IGIgLSAodGhpcy55ICsgYikgJSA4ICogMiA6IGIgLSAyICogKCh0aGlzLnkgKyBiKSAlIDggLSA4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYSAqPSAtMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYiAqPSAtMQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGMgPSBsLnViKHRoaXMpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnggKz0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy55ICs9IGI7DQogICAgICAgICAgICAgICAgICAgIGwubmEgJiYgKGMgPyBsLm1vdmUoYSwgMCA+IGIgfHwgIWwudGIgPyBiIDogMCkgOiBHKGwudiwgdGhpcykgJiYgKGEgPyBsLllhKDAgPCBhID8gdGhpcy54ICsgdGhpcy53aWR0aCAtIGwudi54IDogdGhpcy54IC0gbC52LnggLSBsLnYud2lkdGgsICgpPT57DQogICAgICAgICAgICAgICAgICAgICAgICBsLmJhKCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApIDogYiAmJiBsLlphKDAgPCBiID8gdGhpcy55ICsgdGhpcy5oZWlnaHQgLSBsLnYueSA6IHRoaXMueSAtIGwudi55IC0gbC52LmhlaWdodCwgKCk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIGwuYmEoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICkpKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5UID0gITANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgamEoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gay5GKGEsIGIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB7DQogICAgICAgICAgICAgICAgICAgICAgICBXYTogdGhpcw0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjKCkgew0KICAgICAgICAgICAgICAgICAgICBXKHRoaXMuQywgdGhpcy54LCB0aGlzLnkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IE5iID0gMA0KICAgICAgICAgICAgICAsIE9iID0gIiNmMDAgI2ZmZiAjMGYwICMwMGYgIzBmZiAjZmYwICNmMGYiLnNwbGl0KCIgIik7DQogICAgICAgICAgICBjbGFzcyBQYiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnFiID0gYTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYiA9IGI7DQogICAgICAgICAgICAgICAgICAgIGEgPSA1ICsgMTAgKiBNYXRoLnJhbmRvbSgpOw0KICAgICAgICAgICAgICAgICAgICBiID0gMiAqIE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnggPSB0aGlzLnFiICsgTWF0aC5jb3MoYikgKiBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSB0aGlzLnJiICsgTWF0aC5zaW4oYikgKiBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmEgPSAxMCAqIE1hdGguc2luKGIpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmIgPSAxMCAqIC1NYXRoLmNvcyhiKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5PID0gNTAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gT2JbTmIrKyAlIE9iLmxlbmd0aF0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy54ICs9IHRoaXMuYSAqIGc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSB0aGlzLmIgKiBnOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLlliKHRoaXMuTywgdGhpcy5xYiwgdGhpcy5yYik7DQogICAgICAgICAgICAgICAgICAgIGwud2EgJiYgKHRoaXMuTyA9IEYodGhpcy5PLCAxMDAsIDEwMCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFliKGEsIGIsIGMpIHsNCiAgICAgICAgICAgICAgICAgICAgYiA9IHRoaXMueCAtIGI7DQogICAgICAgICAgICAgICAgICAgIGMgPSB0aGlzLnkgLSBjOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZCA9IE1hdGgubWF4KDEsIGIgKiBiICsgYyAqIGMpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmEgKz0gLWEgKiBiIC8gZCAqIGc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYiArPSAtYSAqIGMgLyBkICogZw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIFFiIGV4dGVuZHMgWiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYikgew0KICAgICAgICAgICAgICAgICAgICBzdXBlcihhLCBiKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy56YiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSAwOyAyMCA+IGE7IGErKykNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuemIucHVzaChuZXcgUGIodGhpcy54ICsgNCx0aGlzLnkgKyA0KSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxwaGEgPSAxDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhID0gbC52Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IE1hdGguYWJzKHRoaXMueCArIDQgLSBhLnRhKTsNCiAgICAgICAgICAgICAgICAgICAgYSA9IE1hdGguYWJzKHRoaXMueSArIDQgLSBhLmFhKTsNCiAgICAgICAgICAgICAgICAgICAgYiA9IGIgKiBiICsgYSAqIGE7DQogICAgICAgICAgICAgICAgICAgIDI1NiA+IGIgJiYgKGwudGIgfHwgMjYwIDw9IGwuYikgJiYgbC5vYygpOw0KICAgICAgICAgICAgICAgICAgICBsLndhICYmICh0aGlzLmFscGhhID0gRih0aGlzLmFscGhhLCAwLCBnKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYygpIHsNCiAgICAgICAgICAgICAgICAgICAgUy5nbG9iYWxBbHBoYSA9IHRoaXMuYWxwaGE7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgPSAwOyAyMCA+IGE7IGErKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSB0aGlzLnpiW2FdDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgYyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIE1hdGgucmFuZG9tKCkgKiA4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGEgPSAwOyBhIDwgYzsgYSsrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgWChiLmNvbG9yLCBiLnggLSAxLCBiLnkgLSAxLCAyLCAyKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIFYoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFJiKGEpIHsNCiAgICAgICAgICAgICAgICBsZXQgYiA9IDANCiAgICAgICAgICAgICAgICAgICwgYyA9IDANCiAgICAgICAgICAgICAgICAgICwgZCA9IDANCiAgICAgICAgICAgICAgICAgICwgZSA9IDA7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgZiA9IDA7IGYgPCBhLmxlbmd0aDsgZisrKQ0KICAgICAgICAgICAgICAgICAgICAiICIgPT09IGFbZl0gPyBkICs9IDYgOiBhW2ZdLm1hdGNoKC9cbnwjLykgPyAoZCA9IDAsDQogICAgICAgICAgICAgICAgICAgIGUgKz0gNikgOiAoZCArPSA2LA0KICAgICAgICAgICAgICAgICAgICBiID0gTWF0aC5tYXgoZCwgYiksDQogICAgICAgICAgICAgICAgICAgIGMgPSBNYXRoLm1heChlICsgNiwgYykpOw0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiBiLA0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGMNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBTYihhKSB7DQogICAgICAgICAgICAgICAgbGV0IHt3aWR0aDogYiwgaGVpZ2h0OiBjfSA9IFJiKGEpOw0KICAgICAgICAgICAgICAgIHJldHVybiBKKGIgKyAxLCBjICsgMSwgKGQpPT57DQogICAgICAgICAgICAgICAgICAgIGQuZmlsbFN0eWxlID0gbjsNCiAgICAgICAgICAgICAgICAgICAgZC5maWxsUmVjdCgwLCAwLCBiICsgMSwgYyArIDEpOw0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjID0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYS5sZW5ndGg7IGUrKykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgPT09IGFbZV0gPyBiICs9IDYgOiBhW2VdLm1hdGNoKC9cbnwjLykgPyAoYiA9IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyArPSA2KSA6IChkLmRyYXdJbWFnZShVYS5DLCA2ICogKGEuY2hhckNvZGVBdChlKSAtIDY1KSwgMCwgNSwgNSwgYiwgYywgNSwgNSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiArPSA2KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNsYXNzIFRiIGV4dGVuZHMgWiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSwgYiwgYykgew0KICAgICAgICAgICAgICAgICAgICBzdXBlcihhLCBiKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gYw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhc3luYyBVKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkMgPSBhd2FpdCBTYih0aGlzLnRleHQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIFcodGhpcy5DLCB0aGlzLngsIHRoaXMueSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgVWIgPSBbew0KICAgICAgICAgICAgICAgIGdhOiB7DQogICAgICAgICAgICAgICAgICAgIDE6IFtbMCwgMCwgNTYsIDUwXSwgWzEyNiwgNTYsIDIzLCAzNF0sIFsxNDksIDU2LCAyNSwgMjJdLCBbMTQ5LCA2MywgMzMsIDE1XSwgWzE4MiwgNjMsIDE2LCAxMV0sIFsxOTgsIDYwLCA4LCAxNF0sIFsyMDYsIDU3LCAxMSwgMTddLCBbMjE3LCA2MiwgMTMsIDEyXSwgWzIyMiwgNzQsIDI4LCAyNF0sIFsyNTAsIDY2LCA5LCAzMl0sIFsyNzAsIDc0LCAxNiwgMTZdLCBbMjg2LCA4MiwgMTYsIDhdLCBbMjk0LCA5MCwgNDgsIDhdLCBbMzAsIDUwLCA5NiwgMTBdLCBbMzAxLCAxNSwgMjUsIDQzXSwgWzMxOCwgNTgsIDgsIDI4XSwgWzMxOCwgNzQsIDE2LCAxMl0sIFszMzQsIDYzLCA4LCA3XSwgWzM0MCwgMTUsIDEyLCA0Nl0sIFszNDAsIDE1LCAzMiwgNDBdLCBbMzQyLCA2NCwgOCwgNl0sIFszNTAsIDYzLCAxMSwgN10sIFszNjEsIDU4LCAyMywgMTJdLCBbMzc0LCA2NywgNjYsIDMxXSwgWzQ0MCwgNjcsIDIyLCA3XSwgWzQ0NiwgMTUsIDQ4LCAzM10sIFs0NjIsIDU4LCA4LCAxNl0sIFs1NSwgNDUsIDI3LCAyNV0sIFs5MiwgNjAsIDM0LCA0XV0sDQogICAgICAgICAgICAgICAgICAgIDI6IFtbMjMwLCA3MywgMjAsIDFdLCBbMzQyLCA2MywgOCwgMV0sIFszNTIsIDU1LCAyMCwgMV0sIFszODQsIDY2LCAzMCwgMV1dDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBEOiBbWzMsIDU5LCA0NF0sIFs0LCAyNDYsIDY2LCA0LCA0LCAtNjAsIDBdLCBbNSwgNDY2LCA1M10sIFs2LCAxNTcsIDQ2LCAiV0hBVCBJUyBUSEUgQ0FVU0UgT0YgVEhJU14iXSwgWzYsIDE4MCwgNTksICJQUkVTUyBTUEFDRSBUTyBKVU1QIl0sIFs2LCAyMzMsIDUwLCAiQU5EIFdIRVJFIERJRCBUSEVTRSBPQlNUQUNMRVMgQ09NRSBGUk9NXiJdLCBbNiwgMjk1LCA3OCwgIkhPTEQgU0hJRlQgVE8gU1VNTU9OIFdJTkdTIl0sIFs2LCAzNDQsIDgyLCAiVVNJTkcgWU9VUiBXSU5HU10gUFJFU1MjU1BBQ0UgVE8gREFTSCJdLCBbNiwgNDUxLCA1NywgIkxPT0sgQVQgVEhBVFsiXSwgWzYsIDQ3MCwgNTQsICJEQVNIIFRIUk9VR0ggSVQgVE8gUkVMRUFTRSNUSEUgRVNTRU5DRSBPRiBUSElTIFBBUkFESVNFWyJdLCBbNiwgODYsIDQwLCAiUEFSQURJU0UgSEFTIEJFRU4gVFVSTkVEIE9GRkxJTkVcXFxcXFwiXSwgWzcsIDIyNSwgNjFdLCBbNywgMzM3LCA2Ml0sIFs3LCAzMzcsIDg5XSwgWzgsIDMzNCwgNzQsIDgsIDVdXQ0KICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgIGdhOiB7DQogICAgICAgICAgICAgICAgICAgIDE6IFtbMCwgMCwgNTQsIDUwXSwgWzEwNiwgNDksIDYsIDUyXSwgWzExMiwgMCwgMjIsIDQ2XSwgWzExOCwgNDksIDYsIDUyXSwgWzEzMCwgNTksIDM4LCA0Ml0sIFsxMzYsIDUwLCA4LCA1MV0sIFsxNDksIDQ1LCAxMywgNF0sIFsxNTMsIDAsIDM4LCAzN10sIFsxNTMsIDAsIDQyLCAzNF0sIFsxNjgsIDQ1LCAxMSwgNTZdLCBbMTc5LCA0MiwgMywgMjVdLCBbMTc5LCA3OSwgMTMsIDIyXSwgWzE4MiwgNDUsIDE0LCAyMl0sIFsxOTYsIDM5LCAzLCAyOF0sIFsxOTksIDM2LCA2LCAzMV0sIFsyMDUsIDQ3LCAxNCwgMjBdLCBbMjEyLCA2NywgNywgMTRdLCBbMjEzLCAwLCAxMSwgMzhdLCBbMjE2LCA0MiwgMjcsIDEwXSwgWzIxOSwgNzUsIDcsIDE1XSwgWzIyNiwgNjMsIDYsIDZdLCBbMjI2LCA4MCwgNiwgNl0sIFsyMjYsIDk1LCA2LCA2XSwgWzIzMiwgNjksIDcsIDZdLCBbMjMyLCA4NywgNywgM10sIFsyMzksIDU4LCAzNCwgMjJdLCBbMjczLCAwLCAxNywgODBdLCBbMzcsIDUwLCAxNywgMTZdLCBbNTQsIDQyLCAxMCwgMjRdLCBbNjAsIDAsIDc0LCAyNF0sIFs2NCwgNDcsIDE2LCAxOV0sIFs4MCwgMzQsIDgsIDY3XSwgWzg4LCAyNCwgMjQsIDZdLCBbODgsIDU1LCA0MiwgNDZdLCBbODgsIDk1LCAxMjQsIDZdLCBbOTQsIDM4LCA3LCA3XV0sDQogICAgICAgICAgICAgICAgICAgIDI6IFtbMTAxLCAzOCwgMSwgN10sIFsxMTEsIDMwLCAxLCAxNl0sIFsxMTIsIDQ2LCAyMiwgMV0sIFsxMTIsIDU0LCA2LCAxXSwgWzEyNCwgNTQsIDYsIDFdLCBbMTMwLCA1OCwgNiwgMV0sIFsxNDQsIDU4LCAyNCwgMV0sIFsxNDgsIDQ1LCAxLCA0XSwgWzE0OSwgNDQsIDEzLCAxXSwgWzE0OSwgNDksIDEzLCAxXSwgWzE1MywgMzcsIDM4LCAxXSwgWzE2MiwgNDUsIDEsIDRdLCBbMTc4LCA0MiwgMSwgM10sIFsxNzksIDQxLCAzLCAxXSwgWzE4MiwgNDIsIDEsIDNdLCBbMTkxLCAzNCwgMSwgM10sIFsxOTEsIDM0LCA0LCAxXSwgWzE5MiwgNjcsIDIwLCAxXSwgWzE5MiwgNzksIDEsIDE2XSwgWzE5NSwgMzksIDEsIDZdLCBbMTk2LCAzOCwgMywgMV0sIFsyMDUsIDQ2LCAxMSwgMV0sIFsyMTMsIDM4LCAxMSwgMV0sIFsyMTksIDUyLCAyNCwgMV0sIFsyMTksIDc0LCA3LCAxXSwgWzIxOSwgOTAsIDcsIDFdLCBbMjI0LCAwLCAxLCAzOF0sIFsyMzIsIDY4LCA3LCAxXSwgWzIzMiwgODYsIDcsIDFdLCBbMjMyLCA5MCwgNywgMV0sIFsyMzksIDU3LCAzMywgMV0sIFsyNzIsIDAsIDEsIDU4XSwgWzYwLCAyNCwgMjgsIDFdLCBbNjQsIDQ2LCAxNiwgMV0sIFs4OCwgMzAsIDI0LCAxXSwgWzg4LCA1NCwgMTgsIDFdLCBbOTMsIDM4LCAxLCA3XSwgWzk0LCAzNywgNywgMV0sIFs5NCwgNDUsIDcsIDFdXQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgRDogW1szLCA1NiwgNDFdLCBbNSwgMTgyLCA3NV0sIFs3LCAxMzksIDQ5XSwgWzcsIDIzNCwgNDFdLCBbOCwgMjQzLCAzOCwgMjksIDhdXQ0KICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgIGdhOiB7DQogICAgICAgICAgICAgICAgICAgIDE6IFtbMCwgMSwgNTAsIDUwXSwgWzExMiwgMSwgOCwgNDNdLCBbMTEyLCA1NywgOCwgMzFdLCBbMTIwLCA2NiwgMTAsIDIyXSwgWzEzMCwgNzUsIDYyLCAxM10sIFsxMzQsIDEsIDcxLCA1OF0sIFsxOTIsIDY2LCAyMSwgMjJdLCBbMjA1LCA4OCwgOCwgOV0sIFsyMTMsIDcwLCAxMywgMjddLCBbMjI2LCA3NywgOTMsIDIwXSwgWzIzNywgNjQsIDUsIDJdLCBbMjU3LCAxLCA0LCA2NV0sIFsyODYsIDU0LCAxMywgMTJdLCBbMzA5LCAxLCA2LCA2MV0sIFszMTksIDYxLCA5LCA1XSwgWzMxOSwgNzEsIDksIDI2XSwgWzMyOCwgOTIsIDIzLCA1XSwgWzMzNywgMSwgMTQsIDg2XSwgWzMzNywgMSwgNTIsIDg1XSwgWzM0NCwgOTcsIDcsIDIxXSwgWzM1MSwgMTA2LCA0NywgMTJdLCBbMzY1LCAxLCAzLCA5MV0sIFszODksIDEsIDEyLCAxNV0sIFszOTUsIDY0LCAxNSwgMjJdLCBbMzk4LCA5MiwgNiwgMjZdLCBbNDA0LCAxMDUsIDE5LCAxM10sIFs0MDgsIDEsIDQxLCAxNV0sIFs0MDgsIDIzLCA0MSwgNF0sIFs0MTUsIDU3LCAzNCwgMjBdLCBbNDIzLCAyNywgMiwgOTFdLCBbNDI1LCAxLCAyNCwgMTE3XSwgWzUwLCA0NCwgOCwgMzVdLCBbNTYsIDEsIDMyLCAzMl0sIFs1OCwgNTAsIDksIDI5XSwgWzY3LCA1OSwgMTMsIDIwXSwgWzczLCAzMywgNywgMTZdLCBbODAsIDEsIDgsIDUzXSwgWzgwLCA2MCwgOCwgMTldLCBbODgsIDY3LCAyNCwgMTJdXSwNCiAgICAgICAgICAgICAgICAgICAgMjogW1sxMTIsIDU2LCA4LCAxXSwgWzIyNiwgNzYsIDkzLCAxXSwgWzIzNywgNjMsIDUsIDFdLCBbMjg2LCA1MywgMTMsIDFdLCBbMzE5LCA2MCwgOSwgMV0sIFszMTksIDcwLCA5LCAxXSwgWzMyOCwgNjEsIDEsIDVdLCBbMzI4LCA3MSwgMSwgMjFdLCBbMzM2LCAxLCAxLCA4Nl0sIFszMzcsIDAsIDY0LCAxXSwgWzM1MSwgMTA1LCA0NywgMV0sIFszNTEsIDg2LCAxNCwgMV0sIFszNjgsIDg2LCAyMSwgMV0sIFszODksIDE2LCAxMiwgMV0sIFszOTUsIDYzLCAxNSwgMV0sIFszOTUsIDg2LCAxNSwgMV0sIFszOTgsIDkxLCA2LCAxXSwgWzQwOCwgMCwgNDEsIDFdLCBbNDA4LCAxNiwgOCwgMV0sIFs0MDgsIDIyLCA4LCAxXSwgWzQwOCwgMjcsIDE1LCAxXSwgWzU4LCA0OSwgOSwgMV0sIFs3MiwgMzMsIDEsIDE2XSwgWzgwLCA1OSwgOCwgMV0sIFs4OCwgNjYsIDI0LCAxXV0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIEQ6IFtbMywgNTIsIDQzXSwgWzQsIDExMiwgNDksIDgsIDMsIDAsIDEwMF0sIFs0LCAxMzksIDY1LCA1LCA3LCAwLCAxMjBdLCBbNCwgMTQ0LCA2NCwgNSwgNywgMCwgMTIwXSwgWzQsIDE0OSwgNjMsIDUsIDcsIDAsIDEyMF0sIFs0LCAxNTQsIDYyLCA1LCA3LCAwLCAxMjBdLCBbNCwgMTU5LCA2MSwgNSwgNywgMCwgMTIwXSwgWzQsIDE2NCwgNjAsIDUsIDcsIDAsIDEyMF0sIFs0LCAxNzUsIDY0LCAxNCwgMTAsIDAsIDEwMF0sIFs0LCAyMTUsIDY2LCA0LCA0LCAxMDAsIDBdLCBbNCwgMzUxLCA5MiwgMTQsIDUsIDAsIDEwMF0sIFs0LCAzNjgsIDkyLCAzMCwgNSwgMCwgMTAwXSwgWzQsIDQwMCwgNTUsIDUsIDYsIDAsIC0yMDBdLCBbNCwgNDA0LCA5MiwgMTksIDUsIDAsIDEwMF0sIFs0LCA0MTksIDc3LCA0LCA0LCAtMTIwLCAwXSwgWzQsIDU4LCA0NCwgNSwgNSwgNjAsIDBdLCBbNCwgNzIsIDQ5LCA1LCA1LCA2MCwgMF0sIFs0LCA4OSwgNjAsIDcsIDMsIDYwLCAwXSwgWzUsIDQyMSwgMTldLCBbNywgMTIzLCA2NV0sIFs3LCAyMDgsIDY1XSwgWzcsIDMzOSwgOTFdLCBbOCwgMjIyLCA2NiwgNCwgNF1dDQogICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgZ2E6IHsNCiAgICAgICAgICAgICAgICAgICAgMTogW1swLCAwLCAyNiwgMTA1XSwgWzAsIDAsIDQxLCA2N10sIFsxMTAsIDQ0LCAxNiwgMTddLCBbMTM0LCAwLCA5NSwgNTZdLCBbMTM0LCA1NiwgMTUsIDddLCBbMTM0LCA3MCwgOCwgMTldLCBbMTQyLCA4MSwgNDMsIDhdLCBbMTQ5LCAwLCAyNiwgNjZdLCBbMTg1LCA3MCwgMTcsIDE5XSwgWzIwOCwgMCwgOCwgNzBdLCBbMjE2LCAwLCAxMywgNTldLCBbMjI0LCA2OSwgNSwgNl0sIFsyMzksIDYxLCA1LCA3XSwgWzI1NywgNjEsIDEzLCA3XSwgWzI4MywgNjksIDUsIDZdLCBbMjk0LCAwLCA4LCA3Ml0sIFszMDgsIDcwLCAxOCwgNF0sIFszMSwgNzksIDE1LCA0XSwgWzMxLCA4OCwgNywgMTddLCBbMzgsIDczLCAyNCwgNV0sIFszOCwgNzgsIDgsIDVdLCBbMzgsIDk3LCAzMiwgOF0sIFs0MSwgNjEsIDYsIDZdLCBbNDcsIDAsIDMzLCA0M10sIFs0NywgNDMsIDE1LCAxMl0sIFs1NCwgNTUsIDgsIDIzXSwgWzU0LCA4NCwgNCwgNl0sIFs2OSwgNjAsIDUsIDExXSwgWzY5LCA3NiwgMTIsIDEyXV0sDQogICAgICAgICAgICAgICAgICAgIDI6IFtbMTM0LCA2MywgMTUsIDFdLCBbMTM0LCA2OSwgOCwgMV0sIFsxNDIsIDgwLCA0MywgMV0sIFsxODUsIDY5LCA5LCAxXSwgWzIyMywgNjksIDEsIDZdLCBbMjI0LCA2OCwgNSwgMV0sIFsyMjQsIDc1LCA1LCAxXSwgWzIyOSwgNjksIDEsIDZdLCBbMjM4LCA2MSwgMSwgN10sIFsyMzksIDYwLCA1LCAxXSwgWzIzOSwgNjgsIDUsIDFdLCBbMjQ0LCA2MSwgMSwgN10sIFsyNTYsIDYxLCAxLCA3XSwgWzI1NywgNjAsIDEzLCAxXSwgWzI1NywgNjgsIDEzLCAxXSwgWzI2LCA2NywgMSwgMzhdLCBbMjcsIDY3LCAyMCwgMV0sIFsyNzAsIDYxLCAxLCA3XSwgWzI4MiwgNjksIDEsIDZdLCBbMjgzLCA2OCwgNSwgMV0sIFsyODMsIDc1LCA1LCAxXSwgWzI4OCwgNjksIDEsIDZdLCBbMzEsIDc4LCA3LCAxXSwgWzMxLCA4MywgMTUsIDFdLCBbMzgsIDcyLCAxNiwgMV0sIFs0NiwgOTYsIDI0LCAxXSwgWzQ3LCA1NSwgNywgMV0sIFs1MywgODQsIDEsIDZdLCBbNTQsIDgzLCA0LCAxXSwgWzU0LCA5MCwgNCwgMV0sIFs1OCwgODQsIDEsIDZdLCBbNjIsIDQzLCAxOCwgMV0sIFs2OCwgNzYsIDEsIDEyXSwgWzY5LCA1OSwgNSwgMV0sIFs2OSwgNzEsIDUsIDFdLCBbNjksIDc1LCAxMiwgMV0sIFs2OSwgODgsIDEyLCAxXSwgWzgxLCA3NiwgMSwgMTJdXQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgRDogW1szLCA0MywgNjBdLCBbNCwgMTQ5LCA2NiwgMywgNCwgNjAsIDBdLCBbNCwgMTcyLCA2NiwgMywgNCwgNjAsIDBdLCBbNCwgMjU1LCA2OSwgNywgNCwgLTgwLCAwXSwgWzUsIDMyMiwgNjddLCBbNywgMTEyLCA0M10sIFs3LCAxOTcsIDY5XSwgWzcsIDQxLCA5Nl0sIFs4LCAxMjYsIDU3LCA4LCA0XSwgWzgsIDE0MiwgNzAsIDMsIDNdLCBbOCwgMTUyLCA3MCwgMywgM10sIFs4LCAxNjIsIDcwLCAzLCAzXSwgWzgsIDE3MiwgNzAsIDMsIDNdLCBbOCwgMTgyLCA3MCwgMywgM10sIFs4LCAyMDIsIDc2LCAxMDAsIDRdLCBbOCwgMzEsIDczLCA3LCA1XSwgWzgsIDQ3LCA2MSwgNywgM10sIFs4LCA0NywgOTIsIDMsIDNdLCBbOCwgNjIsIDg5LCAzLCAzXSwgWzgsIDY0LCA1OCwgMywgM10sIFs4LCA3NywgNDcsIDMsIDNdLCBbOCwgNzcsIDY4LCAzLCAzXSwgWzgsIDc4LCA5NiwgMywgM10sIFs4LCA4OCwgODMsIDMsIDNdLCBbOCwgOTQsIDQyLCAzLCAzXV0NCiAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICBnYTogew0KICAgICAgICAgICAgICAgICAgICAxOiBbWzAsIDAsIDQ2LCA0NV0sIFsxMDMsIDY1LCAxNCwgMTBdLCBbMTE4LCA1MiwgMTAsIDhdLCBbMTI4LCA0NCwgMTEsIDE2XSwgWzEzMSwgNTcsIDIwLCAxMl0sIFs0NiwgMzEsIDE5LCAxNF0sIFs0NywgNjksIDE0LCAxMV0sIFs2MSwgNjEsIDIwLCAxMl0sIFs3MCwgNzEsIDM0LCAxNV0sIFs5MywgNDksIDE0LCA5XV0sDQogICAgICAgICAgICAgICAgICAgIDI6IFtdDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBEOiBbWzMsIDkwLCA3MF0sIFs2LCA4NCwgNjQsICJUSEFOS1MgRk9SIFBMQVlJTkdbIl1dDQogICAgICAgICAgICB9XTsNCiAgICAgICAgICAgIGNsYXNzIFZiIHsNCiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gbmV3IFRiKDAsMCwiT0ZGTElORSBQQVJBRElTRSIpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFUoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dC54ID0gbC54IC0gNDg7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dC55ID0gbC55IC0gMzA7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHQuVSgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7fQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIFMuZ2xvYmFsQWxwaGEgPSAxIC0gKDEgLSBtLmNhKSAqICgxIC0gbS5jYSk7DQogICAgICAgICAgICAgICAgICAgIFgobiwgbS54IC0gMzAwLCBtLnkgLSAzMDAsIDYwMCwgNjAwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0LmMoKTsNCiAgICAgICAgICAgICAgICAgICAgVigpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IFdiOw0KICAgICAgICAgICAgY2xhc3MgWGIgZXh0ZW5kcyBaIHsNCiAgICAgICAgICAgICAgICBVKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmtjID0gdGhpcy5sYjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYyA9IHRoaXMuUGE7DQogICAgICAgICAgICAgICAgICAgIGxldCBhID0gdGhpcy5sYg0KICAgICAgICAgICAgICAgICAgICAgICwgYiA9IHRoaXMuUGENCiAgICAgICAgICAgICAgICAgICAgICAsIGMgPSB0aGlzLlBhOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKDsgLTEwIDw9IGIgJiYgIWsuby51KGEsIGIgLSAxKTsgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYi0tOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSA4ICogYjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSA4ICogKGMgLSBiICsgMSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZigpIHsNCiAgICAgICAgICAgICAgICAgICAgV2IgIT09IHRoaXMgJiYgRyh0aGlzLCBsLnYpICYmIChXYiA9IHRoaXMsDQogICAgICAgICAgICAgICAgICAgIGsueGIgPSB0aGlzLmtjLA0KICAgICAgICAgICAgICAgICAgICBrLnliID0gdGhpcy5sYykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbGFzcyBZYiBleHRlbmRzIFogew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKGEsIGIsIGMsIGQpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VwZXIoYSwgYiwgYywgZCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXNldCgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5UID0gITA7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGEgPSAhMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5TID0gMA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhc3luYyBVKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkMgPSBhd2FpdCBKKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAoYSk9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIEkoMCwgMCwgdGhpcy53aWR0aCAvIDggLSAxLCB0aGlzLmhlaWdodCAvIDggLSAxLCAoYixjKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuZmlsbFN0eWxlID0gRWEocSwgLjk0IC0gLjAxICsgLjAyICogTWF0aC5yYW5kb20oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5maWxsUmVjdCg4ICogYiwgOCAqIGMsIDgsIDgpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSBhLmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMjsgYyA8IHRoaXMud2lkdGggLSAyOyBjKyspDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5kYXRhWzQgKiAoYyArIDEgKiB0aGlzLndpZHRoKSArIDNdID0gMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmRhdGFbNCAqIChjICsgKHRoaXMuaGVpZ2h0IC0gMikgKiB0aGlzLndpZHRoKSArIDNdID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDI7IGMgPCB0aGlzLmhlaWdodCAtIDI7IGMrKykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmRhdGFbNCAqICgxICsgYyAqIHRoaXMud2lkdGgpICsgM10gPSAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZGF0YVs0ICogKHRoaXMud2lkdGggLSAyICsgYyAqIHRoaXMud2lkdGgpICsgM10gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXRJbWFnZURhdGEoYiwgMCwgMCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGYoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5UKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuUyArPSBnLA0KICAgICAgICAgICAgICAgICAgICAgICAgMTUgPD0gdGhpcy5TKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIGlmIChHKHRoaXMsIGwudikpDQogICAgICAgICAgICAgICAgICAgICAgICBsLmJhKCk7DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBsLnViKHRoaXMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiAhdGhpcy4kYSA/IHRoaXMuJGEgPSAhMCA6ICFhICYmIHRoaXMuJGEgJiYgKHRoaXMuVCA9ICExKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGMoKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBhOw0KICAgICAgICAgICAgICAgICAgICBpZiAoLjIgPiB0aGlzLlMpDQogICAgICAgICAgICAgICAgICAgICAgICBhID0gMSAtIHRoaXMuUyAvIC4yOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgxNC44IDwgdGhpcy5TKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYSA9IDEgLSAoMTUgLSB0aGlzLlMpIC8gLjI7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSAxICogdGhpcy53aWR0aA0KICAgICAgICAgICAgICAgICAgICAgICwgYyA9IHRoaXMuaGVpZ2h0ICogYQ0KICAgICAgICAgICAgICAgICAgICAgICwgZCA9IHRoaXMueCArICh0aGlzLndpZHRoIC0gYikgLyAyDQogICAgICAgICAgICAgICAgICAgICAgLCBlID0gdGhpcy55ICsgKHRoaXMuaGVpZ2h0IC0gYykgLyAyOw0KICAgICAgICAgICAgICAgICAgICBTLmdsb2JhbEFscGhhID0gKGEgKyAxKSAvIDI7DQogICAgICAgICAgICAgICAgICAgIFcodGhpcy5DLCBkLCBlLCBiLCBjKTsNCiAgICAgICAgICAgICAgICAgICAgVigpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgWmIgZXh0ZW5kcyBJYiB7DQogICAgICAgICAgICAgICAgY29uc3RydWN0b3IoYSkgew0KICAgICAgICAgICAgICAgICAgICBzdXBlcigpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9hID0gYQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBWYigpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHtnYTogYSwgRDogYn0gPSBVYlt0aGlzLm9hXTsNCiAgICAgICAgICAgICAgICAgICAgZGEodGhpcy5vYSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGIgaW4gYSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdOiBLYiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMl06IExiDQogICAgICAgICAgICAgICAgICAgICAgICB9W2JdOw0KICAgICAgICAgICAgICAgICAgICAgICAgYVtiXS5mb3JFYWNoKChbYSxiLGQscl0pPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSShhLCBiLCBhICsgZCAtIDEsIGIgKyByIC0gMSwgKGEsYik9PmsuS2EobmV3IGMoYSxiKSkpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYi5mb3JFYWNoKChhKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSBhLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhWzBdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wYyhuZXcgQmIoLi4uYikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsuaWIobmV3IE1iKC4uLmIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLmliKG5ldyBZYiguLi5iKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgay5MKG5ldyBRYiguLi5iKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgay5MKG5ldyBUYiguLi5iKSwgMTIwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLkwobmV3IFhiKC4uLmIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIDAgPT09IHRoaXMub2EgJiYgay5MKG5ldyBWYiwgNTApOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9hID09PSBVYi5sZW5ndGggLSAxICYmIGsuTChuZXcgdmIoITApKTsNCiAgICAgICAgICAgICAgICAgICAgay52YygpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2xhc3MgJGIgew0KICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge30NCiAgICAgICAgICAgICAgICBmKCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnphICYmICh0aGlzLlhhID0gITAsDQogICAgICAgICAgICAgICAgICAgIHRoaXMud2IodGhpcy56YSksDQogICAgICAgICAgICAgICAgICAgIHRoaXMuemEgPSBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuWGENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYWMoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuemEgfHwgKHRoaXMuemEgPSBuZXcgWmIodGhpcy5SYi5vYSArIDEpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhc3luYyB3YihhKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuUmIgPSBhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLlhhID0gITA7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGEubG9hZCgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLlhhID0gITENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBhYygpIHsNCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYWMpOw0KICAgICAgICAgICAgICAgIGguZigpIHx8IChrLmYoKSwNCiAgICAgICAgICAgICAgICBjYSsrLA0KICAgICAgICAgICAgICAgIGZhKCksDQogICAgICAgICAgICAgICAgay5jKCkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICAoYXN5bmMgZnVuY3Rpb24oYSkgew0KICAgICAgICAgICAgICAgIGF3YWl0IGdiKCk7DQogICAgICAgICAgICAgICAgaCA9IG5ldyAkYjsNCiAgICAgICAgICAgICAgICBhd2FpdCBhKCk7DQogICAgICAgICAgICAgICAgYWMoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKShhc3luYygpPT57DQogICAgICAgICAgICAgICAgY2IucGxheSgpOw0KICAgICAgICAgICAgICAgIGF3YWl0IGgud2IobmV3IFpiKDApKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgPC9zY3JpcHQ+DQogICAgICAgIDxzY3JpcHQgc3JjPSIiPjwvc2NyaXB0Pg0KICAgIA0KDQo8L2JvZHk+PC9odG1sPg==";
