window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4gDQoNCg0KPGh0bWwgbGFuZz0iZW4tdXMiPg0KPGJhc2UgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2J1YmJscy9VR1MtQXNzZXRzQDM1NGUzYzY5MzlhMDhlNDcyNDgyNjUzNTY3ZDU2NmJhM2EyYWE1MjcvaGFsZiUyMGxpZmUvIj4NCjxoZWFkPg0KCTxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4NCgk8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+DQoJPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiB0eXBlPSJpbWFnZS94LWljb24iIGhyZWY9ImZhdmljb24uaWNvIj4NCgk8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8iPg0KCTxtZXRhIG5hbWU9Ik1vYmlsZU9wdGltaXplZCIgY29udGVudD0iNjQwIiAvPg0KCTxtZXRhIG5hbWU9IkhhbmRoZWxkRnJpZW5kbHkiIGNvbnRlbnQ9InRydWUiIC8+DQoJPHRpdGxlPlhhc2g8L3RpdGxlPg0KCTxzY3JpcHQ+DQoJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKSk7DQoJCXdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKGUpIHsNCgkJCWUucHJldmVudERlZmF1bHQoKTsNCgkJCWUucmV0dXJuVmFsdWUgPSAnUmVhbGx5IHdhbnQgdG8gcXVpdCB0aGUgZ2FtZT8nOw0KCQl9Ow0KDQoJCWRvY3VtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGUpIHsNCgkJCWUgPSBlIHx8IHdpbmRvdy5ldmVudDsNCg0KCQkJaWYgKCFlLmN0cmxLZXkpIHJldHVybjsNCg0KCQkJdmFyIGNvZGUgPSBlLndoaWNoIHx8IGUua2V5Q29kZTsNCg0KCQkJc3dpdGNoIChjb2RlKSB7DQoJCQkJY2FzZSA4MzoNCgkJCQljYXNlIDg3Og0KCQkJCQllLnByZXZlbnREZWZhdWx0KCk7DQoJCQkJCWUuc3RvcFByb3BhZ2F0aW9uKCk7DQoJCQkJCWJyZWFrOw0KCQkJfQ0KCQl9Ow0KCQl2YXIgYSA9IG5ldyBBdWRpbygnbXVzaWMubXAzJyk7DQoJCXZhciBwYXNoYWxrYV9jb3VudCA9IDA7DQoNCgkJZnVuY3Rpb24gcGxheV9zb3VuZCgpIHsNCgkJCWlmIChwYXNoYWxrYV9jb3VudCA9PSA0MCkgYS5wbGF5KCk7DQoJCQlpZiAocGFzaGFsa2FfY291bnQgPCAxMDApIHBhc2hhbGthX2NvdW50ICs9IDE7DQoJCX0NCgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheV9zb3VuZCk7DQoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcGxheV9zb3VuZCk7DQoJPC9zY3JpcHQ+DQoJPHN0eWxlPg0KCQlib2R5IHsNCgkJCWZvbnQtZmFtaWx5OiBhcmlhbDsNCgkJCW1hcmdpbjogMDsNCgkJCXBhZGRpbmc6IG5vbmU7DQoJCQliYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1Ow0KCQkJY29sb3I6ICNmMGI0MTg7DQoJCX0NCg0KCQkuZW1zY3JpcHRlbiB7DQoJCQlwYWRkaW5nLXJpZ2h0OiAwOw0KCQkJbWFyZ2luLWxlZnQ6IGF1dG87DQoJCQltYXJnaW4tcmlnaHQ6IGF1dG87DQoJCQlkaXNwbGF5OiBibG9jazsNCgkJfQ0KDQoJCWRpdi5lbXNjcmlwdGVuIHsNCgkJCXRleHQtYWxpZ246IGNlbnRlcjsNCgkJfQ0KDQoJCWRpdi5lbXNjcmlwdGVuX2JvcmRlciB7fQ0KDQoJCWNhbnZhcy5lbXNjcmlwdGVuIHsNCgkJCWJvcmRlcjogMHB4IG5vbmU7DQoJCQliYWNrZ3JvdW5kLWltYWdlOiB1cmwoeGQucG5nKTsNCgkJCWJveC1zaGFkb3c6ICNmZmE2MDAgMHB4IDBweCA5cHggNHB4Ow0KCQl9DQoNCgkJQC13ZWJraXQta2V5ZnJhbWVzIHJvdGF0aW9uIHsNCgkJCWZyb20gew0KCQkJCS13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQoJCQl9DQoNCgkJCXRvIHsNCgkJCQktd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQoJCQl9DQoJCX0NCg0KCQlALW1vei1rZXlmcmFtZXMgcm90YXRpb24gew0KCQkJZnJvbSB7DQoJCQkJLW1vei10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCgkJCX0NCg0KCQkJdG8gew0KCQkJCS1tb3otdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCgkJCX0NCgkJfQ0KDQoJCUAtby1rZXlmcmFtZXMgcm90YXRpb24gew0KCQkJZnJvbSB7DQoJCQkJLW8tdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQoJCQl9DQoNCgkJCXRvIHsNCgkJCQktby10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KCQkJfQ0KCQl9DQoNCgkJQGtleWZyYW1lcyByb3RhdGlvbiB7DQoJCQlmcm9tIHsNCgkJCQl0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCgkJCX0NCg0KCQkJdG8gew0KCQkJCXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQoJCQl9DQoJCX0NCg0KDQoJCSNjb250cm9scyB7DQoJCQlkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQoJCQlmbG9hdDogcmlnaHQ7DQoJCQl2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KCQkJbWFyZ2luLXRvcDogNXB4Ow0KCQkJbWFyZ2luLXJpZ2h0OiAyMHB4Ow0KCQl9DQoNCgkJI291dHB1dCB7DQoJCQl3aWR0aDogMTAwJTsNCgkJCWhlaWdodDogMjAwcHg7DQoJCQltYXJnaW46IDAgYXV0bzsNCgkJCW1hcmdpbi10b3A6IDEwcHg7DQoJCQlib3JkZXItbGVmdDogMHB4Ow0KCQkJYm9yZGVyLXJpZ2h0OiAwcHg7DQoJCQlib3JkZXItc3R5bGU6IHNvbGlkOw0KCQkJcGFkZGluZy1sZWZ0OiAwcHg7DQoJCQlwYWRkaW5nLXJpZ2h0OiAwcHg7DQoJCQlkaXNwbGF5OiBub25lOw0KCQkJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7DQoJCQljb2xvcjogcmdiYSgwLCAyNTUsIDAsIDI1NSk7DQoJCQlmb250LWZhbWlseTogJ0x1Y2lkYSBDb25zb2xlJywgTW9uYWNvLCBtb25vc3BhY2U7DQoJCQlvdXRsaW5lOiBub25lOw0KCQkJYm9yZGVyLWNvbG9yOiAjZjBCNDE4Ow0KCQl9DQoNCgkJLmxvYWRlciB7DQoJCQlib3JkZXI6IDRweCBzb2xpZCAjZjNmM2YzOw0KCQkJYm9yZGVyLXJhZGl1czogNTAlOw0KCQkJYm9yZGVyLXRvcDogNHB4IHNvbGlkICNmZmE2MDA7DQoJCQl3aWR0aDogMTZweDsNCgkJCWhlaWdodDogMTZweDsNCgkJCS13ZWJraXQtYW5pbWF0aW9uOiBzcGluIDJzIGxpbmVhciBpbmZpbml0ZTsNCgkJCWFuaW1hdGlvbjogc3BpbiAycyBsaW5lYXIgaW5maW5pdGU7DQoJCX0NCg0KCQlALXdlYmtpdC1rZXlmcmFtZXMgc3BpbiB7DQoJCQkwJSB7DQoJCQkJLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCgkJCX0NCg0KCQkJMTAwJSB7DQoJCQkJLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOw0KCQkJfQ0KCQl9DQoNCgkJQGtleWZyYW1lcyBzcGluIHsNCgkJCTAlIHsNCgkJCQl0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCgkJCX0NCg0KCQkJMTAwJSB7DQoJCQkJdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsNCgkJCX0NCgkJfQ0KDQoJCWEuZ2xvdywNCgkJYS5nbG93OmhvdmVyLA0KCQlhLmdsb3c6Zm9jdXMgew0KCQkJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KCQkJY29sb3I6ICNGMEI0MTg7DQoJCQl0ZXh0LXNoYWRvdzogbm9uZTsNCgkJCS13ZWJraXQtdHJhbnNpdGlvbjogNTAwbXMgbGluZWFyIDBzOw0KCQkJLW1vei10cmFuc2l0aW9uOiA1MDBtcyBsaW5lYXIgMHM7DQoJCQktby10cmFuc2l0aW9uOiA1MDBtcyBsaW5lYXIgMHM7DQoJCQl0cmFuc2l0aW9uOiA1MDBtcyBsaW5lYXIgMHM7DQoJCQlvdXRsaW5lOiAwIG5vbmU7DQoJCQljdXJzb3I6IGRlZmF1bHQ7DQoJCX0NCg0KCQlhLmdsb3c6aG92ZXIsDQoJCWEuZ2xvdzpmb2N1cyB7DQoJCQljb2xvcjogI2ZmYTYwMDsNCgkJCXRleHQtc2hhZG93OiAtMXB4IDFweCA4cHggI2ZmYTYwMCwgMXB4IC0xcHggOHB4ICNmZmE2MDA7DQoJCX0NCg0KCQlociB7DQoJCQlib3JkZXItY29sb3I6ICNmZmE2MDA7DQoJCX0NCg0KCQkjbGFiZWxfZmlsZV9zZWxlY3Qgew0KCQkJcGFkZGluZzogMXB4IDZweDsNCgkJfQ0KDQoJCWlucHV0W3R5cGU9ImZpbGUiaV0gew0KCQkJZGlzcGxheTogbm9uZTsNCgkJfQ0KDQoJCWlucHV0W3R5cGU9InRleHQiaV0gew0KCQkJY29sb3I6ICNmMGI0MTg7DQoJCQliYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1Ow0KCQkJYm9yZGVyOiAycHggc29saWQgI2YwYjQxODsNCgkJCWZvbnQtZmFtaWx5OiBTZWdvZSBVSTsNCgkJCWZvbnQtc2l6ZTogMTVweDsNCgkJCXRyYW5zaXRpb246IDAuNXMgYWxsOw0KCQl9DQoNCgkJKiB7DQoJCQljdXJzb3I6IGRlZmF1bHQ7DQoJCQktd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KCQkJLW1vei11c2VyLXNlbGVjdDogbm9uZTsNCgkJCS1tcy11c2VyLXNlbGVjdDogbm9uZTsNCgkJCXVzZXItc2VsZWN0OiBub25lOw0KCQkJb3V0bGluZTogbm9uZTsNCgkJfQ0KDQoJCWlmIChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkZXRlY3QiKS5zdHlsZS50ZXh0U2hhZG93PT09IiIpIHsNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJodG1sIilbMF0uY2xhc3NOYW1lKz0iIHRleHRzaGFkb3ciOw0KCQl9DQoJPC9zdHlsZT4NCjwvaGVhZD4NCg0KPGJvZHkgb25lcnJvcj1hbGVydChldmVudCk7IGJnY29sb3I9IzU1NTU1NSB0ZXh0PSNGMEI0MTggbGluaz0jZmZhNjAwIHZsaW5rPSNmZmE2MDA+DQoJPGRpdiBjbGFzcz0iZW1zY3JpcHRlbl9ib3JkZXIiPg0KCQk8Y2FudmFzIHN0eWxlPSJkaXNwbGF5Om5vbmUiIGNsYXNzPSJlbXNjcmlwdGVuIiBpZD0iY2FudmFzIiBvbmNvbnRleHRtZW51PSJldmVudC5wcmV2ZW50RGVmYXVsdCgpIj48L2NhbnZhcz4NCgk8L2Rpdj4NCg0KCTxwPg0KCTxkaXYgc3R5bGU9d2lkdGg6MTAwJTtoZWlnaHQ6MHB4Pg0KCQk8ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0OyIgaWQ9InN0YXR1cyI+RG93bmxvYWRpbmcuLi48L2Rpdj4NCgkJPGRpdiBpZD0icHJvZ3Jlc3MxIiBzdHlsZT0icG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxMDtkaXNwbGF5Om5vbmU7ZmxvYXQ6cmlnaHQ7d2lkdGg6NzAlO2JvcmRlci1jb2xvcjojRjBCNDE4O2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MnB4O2hlaWdodDoyMHB4OyB2aXNpYmlsaXR5OiBoaWRkZW47Ij4NCgkJCTxkaXYgaWQ9cHJvZ3Jlc3Mgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6I0YwQjQxODtib3JkZXItY29sb3I6IzU1NTU1NTtib3JkZXItc3R5bGU6c29saWQ6Ym9yZGVyLXdpZHRoOjNweDt3aWR0aDo1MCU7aGVpZ2h0OjIwcHg7IHZpc2liaWxpdHk6IGhpZGRlbjsiPjwvZGl2Pg0KCQk8L2Rpdj48YnI+DQoJPC9kaXY+PGJyPjwvcD4NCg0KCTx0ZXh0YXJlYSBzdHlsZT0ndmlzaWJpbGl0eTogaGlkZGVuOycgaWQ9Im91dHB1dCIgcm93cz0iOCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48L3RleHRhcmVhPg0KCTxkaXYgc3R5bGU9J3Zpc2liaWxpdHk6IGhpZGRlbjsnIGlkPSJhc3luY0RpYWxvZyIgc3R5bGU9ImZsb2F0OmxlZnQiPjwvZGl2Pg0KDQoJPGNlbnRlcj4gPGEgY2xhc3M9Imdsb3ciPg0KCQk8ZGl2IGlkPW9wdGlvbnNUaXRsZT4NCgkJCTxoMT5YYXNoPC9oMT4NCgkJPC9kaXY+DQoJPC9hPjwvY2VudGVyPg0KCTxjZW50ZXI+IDxmb3JtIHN0eWxlPWRpc3BsYXk6bm9uZSBpZD1mU2V0dGluZ3M+DQoJCTxhIGNsYXNzPSdnbG93Jz5TZWxlY3QgZmlsZXN5c3RlbSBmb3Igc2F2ZSBhbmQgcmVzdG9yZTo8L2E+DQoJCTxkaXYgaWQ9aWRiSGlkZXIgc3R5bGU9ZGlzcGxheTpub25lPjxsYWJlbD48aW5wdXQgbmFtZT1hIHR5cGU9cmFkaW8gaWQ9ckluZGV4ZWREQiBjaGVja2VkPXRydWUgLz5JbmRleGVkREI8L2xhYmVsPjxicj48L2Rpdj4NCgkJPGxhYmVsPjxpbnB1dCBuYW1lPWEgdHlwZT1yYWRpbyBpZD1yTG9jYWxTdG9yYWdlIC8+aW4gTG9jYWwgc3RvcmFnZTwvbGFiZWw+PGJyPg0KCQk8bGFiZWw+PGlucHV0IG5hbWU9YSB0eXBlPXJhZGlvIGlkPXJOb25lIC8+aW4gUkFNPC9sYWJlbD48YnI+PGJyPg0KCQk8aHI+DQoJCQk8ZGl2IGlkPXppcEhpZGVyIHN0eWxlPWRpc3BsYXk6bm9uZT48aW5wdXQgbmFtZT1iIHR5cGU9cmFkaW8gaWQ9clppcCBjaGVja2VkPXRydWUgLz5aSVAgYXJjaGl2ZSBmcm9tIHNlcnZlcg0KCQk8L2xhYmVsPjxzZWxlY3QgaWQ9c2VsZWN0WmlwIHN0eWxlPWRpc3BsYXk6bm9uZT48L3NlbGVjdD48YnI+PC9kaXY+DQoNCgkJPGxhYmVsPjxpbnB1dCBuYW1lPWIgdHlwZT1yYWRpbyBpZD1yTG9jYWxaaXAgLz5Mb2NhbCBaSVAgZmlsZTo8L2xhYmVsPjxsYWJlbCBpZD0ibGFiZWxfZmlsZV9zZWxlY3QiPjxpbnB1dCB0eXBlPWZpbGUgbmFtZT1jIGlkPWlaaXBGaWxlIC8+PGEgY2xhc3M9J2dsb3cnPiBTZWxlY3QgWklQIGZpbGUgPC9hPjwvbGFiZWw+PGJyPjxicj48aHI+DQoJCUNvbW1hbmQtbGluZSBhcmd1bWVudHM6IDxpbnB1dCBuYW1lPWQgdHlwZT10ZXh0IGlkPWlBcmdzIHZhbHVlPSItZGV2IDEgLWdhbWUgdmFsdmUiIC8+PGJyPjxicj4NCgkJPGEgY2xhc3M9J2dsb3cnIG9uY2xpY2s9InN0YXJ0WGFzaCgpO3JldHVybiBmYWxzZTsiPkxhdW5jaCBYYXNoITwvYT4NCgkJPGJyPjxocj4NCgkJPGRpdiBpZD0nbGlua3NQbGFjZWhvbGRlcicgc3R5bGU9ZGlzcGxheTpub25lPkRvd25sb2FkIGFyY2hpdmVzIHRvIGxvYWQgbG9jYWxseSBuZXh0IHRpbWU6PC9kaXY+PGJyPg0KCQk8bGFiZWw+DQoJCQk8ZGl2IGlkPXBrZ0hpZGVyIHN0eWxlPWRpc3BsYXk6bm9uZT48aW5wdXQgbmFtZT1iIHR5cGU9cmFkaW8gaWQ9clBhY2thZ2UgLz4NCgkJPC9sYWJlbD48c2VsZWN0IGlkPXNlbGVjdFBrZyBzdHlsZT1kaXNwbGF5Om5vbmU+PC9zZWxlY3Q+PGJyPjwvZGl2Pg0KCQk8bGFiZWw+DQoJCTxkaXYgc3R5bGU9J3Zpc2liaWxpdHk6IGhpZGRlbjsnIGNsYXNzPSJsb2FkZXIiIGlkPWxvYWRlcjE+PC9kaXY+DQoJPC9mb3JtPiA8L2xhYmVsPg0KDQoJPGRpdiBzdHlsZT13aWR0aDoxMDAlPjxzcGFuIGlkPSdjb250cm9scyc+DQoJCQk8YSBzdHlsZT0ndmlzaWJpbGl0eTogaGlkZGVuOycgY2xhc3M9Imdsb3ciPjxzcGFuPjxsYWJlbCBpZD0ibGFiZWxfc2hvd19jb25zb2xlX2xvZyIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJzaG93X2NvbnNvbGVfbG9nIj5TaG93IENvbnNvbGUgTG9nPC9sYWJlbD48L3NwYW4+PC9hPg0KCQkJPGEgc3R5bGU9J3Zpc2liaWxpdHk6IGhpZGRlbjsnIGNsYXNzPSJnbG93Ij48c3Bhbj48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0icmVzaXplIj5SZXNpemUgY2FudmFzPC9sYWJlbD48L3NwYW4+PC9hPg0KCQkJPGEgc3R5bGU9J3Zpc2liaWxpdHk6IGhpZGRlbjsnIGNsYXNzPSJnbG93Ij48c3Bhbj48bGFiZWw+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0icG9pbnRlckxvY2siIGNoZWNrZWQ+TG9jay9oaWRlIG1vdXNlIHBvaW50ZXIgJm5ic3A7Jm5ic3A7Jm5ic3A7PC9sYWJlbD48L3NwYW4+PC9hPg0KCQkJPHNwYW4gc3R5bGU9J3Zpc2liaWxpdHk6IGhpZGRlbjsnPjxpbnB1dCB0eXBlPSJidXR0b24iIHZhbHVlPSJGdWxsc2NyZWVuIiBvbmNsaWNrPSJNb2R1bGUucmVxdWVzdEZ1bGxzY3JlZW4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50ZXJMb2NrJykuY2hlY2tlZCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZScpLmNoZWNrZWQpIj48L3NwYW4+DQoJPC9zcGFuPjwvZGl2Pg0KDQoJPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnIHNyYz0nYnJvd3NlcmZzLm1pbi5qcyc+PC9zY3JpcHQ+DQoJPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPg0KCQl2YXIgemlwTW9kcyA9IFtdOw0KCQl2YXIgcGtnTW9kcyA9IFtdOw0KCTwvc2NyaXB0Pg0KDQoJPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnIHNyYz0nbW9kcy5qcyc+PC9zY3JpcHQ+DQoNCgk8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+DQoJCXZhciBzaG93X2FnYWluID0gdHJ1ZTsNCgkJdmFyIHN0YXR1c0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJyk7DQoJCXZhciBwcm9ncmVzc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MnKTsNCgkJdmFyIGFzeW5jRGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FzeW5jRGlhbG9nJyk7DQoJCXZhciBteWVycm9yYnVmID0gJycNCgkJdmFyIG15ZXJyb3JkYXRlID0gbmV3IERhdGUoKTsNCgkJdmFyIG1vdW50ZWQgPSBmYWxzZTsNCgkJdmFyIGdhbWVkaXIgPSAndmFsdmUnOw0KCQl2YXIgbW9kdWxlQ291bnQgPSAwOw0KCQkvL3ZhciBtZW0gPSAxNTA7DQoJCXZhciBtZnM7DQoJCXZhciB6aXBTaXplOw0KDQoNCgkJaWYgKCFBcnJheUJ1ZmZlclsnaXNWaWV3J10pIHsNCgkJCUFycmF5QnVmZmVyLmlzVmlldyA9IGZ1bmN0aW9uKGEpIHsNCgkJCQlyZXR1cm4gYSAhPT0gbnVsbCAmJiB0eXBlb2YoYSkgPT09ICJvYmplY3QiICYmIGFbJ2J1ZmZlciddIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI7DQoJCQl9Ow0KDQoJCX0NCg0KCQlzaG93RWxlbWVudCgnb3B0aW9uc1RpdGxlJywgZmFsc2UpOw0KDQoJCWZ1bmN0aW9uIHByZXBhcmVTZWxlY3RzKCkgew0KCQkJdmFyIGxlbiA9IHppcE1vZHMubGVuZ3RoOw0KCQkJdmFyIHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RaaXAnKTsNCgkJCWlmIChsZW4pIHsNCgkJCQlzaG93RWxlbWVudCgnemlwSGlkZXInLCB0cnVlKTsNCg0KCQkJCWlmIChsZW4gPiAxKSB7DQoJCQkJCXZhciBsaW5rcyA9ICcnOw0KCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQoJCQkJCQlzZWxlY3Qub3B0aW9uc1tpXSA9IG5ldyBPcHRpb24oemlwTW9kc1tpXVsxXSwgemlwTW9kc1tpXVswXSk7DQoJCQkJCQlsaW5rcyArPSAnPGJyPjxhIGNsYXNzPSJnbG93IiBvbmNsaWNrPWxvY2F0aW9uLmhyZWY9IicgKyB6aXBNb2RzW2ldWzBdICsgJyI+JyArIHppcE1vZHNbaV1bMV0gKyAnPC9hPic7DQoJCQkJCX0NCgkJCQkJc2VsZWN0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua3NQbGFjZWhvbGRlcicpLmlubmVySFRNTCArPSBsaW5rczsNCgkJCQl9DQoJCQl9IGVsc2UNCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnclppcCcpLmNoZWNrZWQgPSBmYWxzZTsNCgkJCWxlbiA9IHBrZ01vZHMubGVuZ3RoOw0KCQkJc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdFBrZycpOw0KCQkJaWYgKGxlbikgew0KCQkJCXNob3dFbGVtZW50KCdwa2dIaWRlcicsIHRydWUpOw0KDQoJCQkJaWYgKGxlbiA+IDEpIHsNCgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykNCgkJCQkJCXNlbGVjdC5vcHRpb25zW2ldID0gbmV3IE9wdGlvbihwa2dNb2RzW2ldWzFdLCBwa2dNb2RzW2ldWzBdKTsNCgkJCQkJLy9zZWxlY3Quc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoJCQkJfQ0KCQkJfSBlbHNlDQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JQYWNrYWdlJykuY2hlY2tlZCA9IGZhbHNlOw0KDQoJCQlpZiAoIXppcE1vZHMubGVuZ3RoICYmICFsZW4pIHsNCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnckxvY2FsWmlwJykuY2hlY2tlZCA9IHRydWU7DQoJCQkJc2hvd0VsZW1lbnQoJ3JMb2NhbFppcCcsIGZhbHNlKTsNCgkJCX0NCgkJfQ0KDQoJCXRyeSB7DQoJCQltZW0gPSBNYXRoLnJvdW5kKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSk7DQoJCX0gY2F0Y2ggKGUpIHt9Ow0KDQoJCXZhciBNb2R1bGUgPSB7DQoJCQlUT1RBTF9NRU1PUlk6IG1lbSAqIDEwMjQgKiAxMDI0LA0KCQkJcHJlUnVuOiBbXSwNCgkJCXBvc3RSdW46IFtdLA0KCQkJcHJpbnQ6IChmdW5jdGlvbigpIHsNCgkJCQl2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXQnKTsNCgkJCQlpZiAoZWxlbWVudCkgZWxlbWVudC52YWx1ZSA9ICcnOw0KCQkJCXJldHVybiBmdW5jdGlvbih0ZXh0KSB7DQoJCQkJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbignICcpOw0KCQkJCQlpZiAodGV4dCkgew0KCQkJCQkJbXllcnJvcmJ1ZiArPSB0ZXh0ICsgJ1xuJzsNCgkJCQkJCWNvbnNvbGUubG9nKHRleHQpOw0KCQkJCQkJaWYgKHRleHQgPT0gImV4aXQoMCkiKQ0KCQkJCQkJew0KCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCQkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCgkJCQkJCQkJbG9jYXRpb24ucmVsb2FkKCk7DQoJCQkJCQkJfSwgMTAwMCk7DQoJCQkJCQl9DQoJCQkJCQllbHNlIGlmICh0ZXh0ID09ICJzaGFkZXIgc3VjY2VzcyIpIHsNCgkJCQkJCQlwYXNoYWxrYV9jb3VudCA9IDEwMDsNCgkJCQkJCQlhLnBhdXNlKCk7DQoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQlpZiAoZWxlbWVudCkgew0KCQkJCQkJaWYgKGVsZW1lbnQudmFsdWUubGVuZ3RoID4gNjU1MzYpDQoJCQkJCQkJZWxlbWVudC52YWx1ZSA9IGVsZW1lbnQudmFsdWUuc3Vic3RyaW5nKDUxMikgKyBteWVycm9yYnVmOw0KCQkJCQkJZWxzZQ0KCQkJCQkJCWVsZW1lbnQudmFsdWUgKz0gbXllcnJvcmJ1ZjsNCgkJCQkJCWVsZW1lbnQuc2Nyb2xsVG9wID0gZWxlbWVudC5zY3JvbGxIZWlnaHQ7IC8vIGZvY3VzIG9uIGJvdHRvbQ0KCQkJCQl9DQoJCQkJCW15ZXJyb3JidWYgPSAnJw0KCQkJCX07DQoJCQl9KSgpLA0KCQkJcHJpbnRFcnI6IGZ1bmN0aW9uKHRleHQpIHsNCgkJCQlpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHRleHQgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLmpvaW4oJyAnKTsNCgkJCQlpZiAoMCkgeyAvLyBYWFggZGlzYWJsZWQgZm9yIHNhZmV0eSB0eXBlb2YgZHVtcCA9PSAnZnVuY3Rpb24nKSB7DQoJCQkJCWR1bXAodGV4dCArICdcbicpOyAvLyBmYXN0LCBzdHJhaWdodCB0byB0aGUgcmVhbCBjb25zb2xlDQoJCQkJfSBlbHNlIHsNCgkJCQkJaWYgKG15ZXJyb3JidWYubGVuZ3RoID4gMjA0OCkNCgkJCQkJCW15ZXJyb3JidWYgPSAnc29tZSBsaW5lcyBza2lwcGVkXG4nICsgbXllcnJvcmJ1Zi5zdWJzdHJpbmcoNTEyKTsNCgkJCQkJbXllcnJvcmJ1ZiArPSB0ZXh0ICsgJ1xuJzsNCgkJCQkJaWYgKG5ldyBEYXRlKCkgLSBteWVycm9yZGF0ZSA+IDMwMDApIHsNCgkJCQkJCW15ZXJyb3JkYXRlID0gbmV3IERhdGUoKTsNCgkJCQkJCU1vZHVsZS5wcmludCgpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJfSwNCgkJCWNhbnZhczogKGZ1bmN0aW9uKCkgew0KCQkJCXZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7DQoJCQkJY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIndlYmdsY29udGV4dGxvc3QiLCBmdW5jdGlvbihlKSB7DQoJCQkJCWFsZXJ0KCdXZWJHTCBjb250ZXh0IGxvc3QuIFlvdSB3aWxsIG5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlLicpOw0KCQkJCQllLnByZXZlbnREZWZhdWx0KCk7DQoJCQkJfSwgZmFsc2UpOw0KDQoJCQkJcmV0dXJuIGNhbnZhczsNCgkJCX0pKCksDQoJCQlzZXRTdGF0dXM6IGZ1bmN0aW9uKHRleHQpIHsNCgkJCQlpZiAoIU1vZHVsZS5zZXRTdGF0dXMubGFzdCkgTW9kdWxlLnNldFN0YXR1cy5sYXN0ID0gew0KCQkJCQl0aW1lOiBEYXRlLm5vdygpLA0KCQkJCQl0ZXh0OiAnJw0KCQkJCX07DQoJCQkJaWYgKHRleHQgPT09IE1vZHVsZS5zZXRTdGF0dXMudGV4dCkgcmV0dXJuOw0KCQkJCWlmIChuZXcgRGF0ZSgpIC0gbXllcnJvcmRhdGUgPiAzMDAwKSB7DQoJCQkJCW15ZXJyb3JkYXRlID0gbmV3IERhdGUoKTsNCgkJCQkJTW9kdWxlLnByaW50KCk7DQoJCQkJfQ0KDQoJCQkJc3RhdHVzRWxlbWVudC5pbm5lckhUTUwgPSB0ZXh0Ow0KCQkJCWlmIChwcm9ncmVzc0VsZW1lbnQpIHsNCgkJCQkJdmFyIG0gPSB0ZXh0Lm1hdGNoKC8oW14oXSspXCgoXGQrKFwuXGQrKT8pXC8oXGQrKVwpLyk7DQoNCgkJCQkJaWYgKG0pIHsNCgkJCQkJCXZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQocGFyc2VJbnQobVsyXSkgKiAxMDAgLyBwYXJzZUludChtWzRdKSk7DQoJCQkJCQlwcm9ncmVzc0VsZW1lbnQuc3R5bGUuY29sb3IgPSBwcm9ncmVzcyA+IDUgPyAnIzMwMzAzMCcgOiAnI2FhYTAwMCc7DQoJCQkJCQlwcm9ncmVzc0VsZW1lbnQuc3R5bGUud2lkdGggPSBwcm9ncmVzc0VsZW1lbnQuaW5uZXJIVE1MID0gJycgKyBwcm9ncmVzcyArICclJzsNCgkJCQkJfQ0KCQkJCQlzaG93RWxlbWVudCgncHJvZ3Jlc3MxJywgISFtKTsNCgkJCQl9DQoJCQl9LA0KCQkJdG90YWxEZXBlbmRlbmNpZXM6IDAsDQoJCQltb25pdG9yUnVuRGVwZW5kZW5jaWVzOiBmdW5jdGlvbihsZWZ0KSB7DQoJCQkJdGhpcy50b3RhbERlcGVuZGVuY2llcyA9IE1hdGgubWF4KHRoaXMudG90YWxEZXBlbmRlbmNpZXMsIGxlZnQpOw0KCQkJCWlmIChsZWZ0KQ0KCQkJCQlNb2R1bGUuc2V0U3RhdHVzKCdQcmVwYXJpbmcuLi4gKCcgKyAodGhpcy50b3RhbERlcGVuZGVuY2llcyAtIGxlZnQpICsgJy8nICsgdGhpcy50b3RhbERlcGVuZGVuY2llcyArICcpJyk7DQoJCQl9DQoJCX07DQoJCXdpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHsNCgkJCWlmIChtb3VudGVkKQ0KCQkJCUZTLnN5bmNmcyhmYWxzZSwgZnVuY3Rpb24oZXJyKSB7DQoJCQkJCU1vZHVsZS5wcmludCgnU2F2aW5nIElEQkZTOiAnICsgZXJyKTsNCgkJCQl9KTsNCgkJCWlmICgoJycgKyBldmVudCkuaW5kZXhPZignU2ltdWxhdGVJbmZpbml0ZUxvb3AnKSA+IDApDQoJCQkJcmV0dXJuOw0KCQkJdmFyIHRleHQgPSAnRXhjZXB0aW9uIHRocm93bjogJyArIGV2ZW50Ow0KCQkJdGV4dCA9IHRleHQucmVwbGFjZSgvJi9nLCAiJmFtcDsiKTsNCgkJCXRleHQgPSB0ZXh0LnJlcGxhY2UoLzwvZywgIiZsdDsiKTsNCgkJCXRleHQgPSB0ZXh0LnJlcGxhY2UoLz4vZywgIiZndDsiKTsNCgkJCXRleHQgPSB0ZXh0LnJlcGxhY2UoJ1xuJywgJzxicj4nLCAnZycpOw0KCQkJTW9kdWxlLnNldFN0YXR1cyh0ZXh0KTsNCgkJCU1vZHVsZS5wcmludCgnRXhjZXB0aW9uIHRocm93bjogJyArIGV2ZW50KTsNCgkJfTsNCg0KCQlmdW5jdGlvbiBoYWx0UnVuKCkge30NCg0KCQl2YXIgc2F2ZWRSdW47DQoNCgkJZnVuY3Rpb24gcmFkaW9DaGVja2VkKGlkKSB7DQoJCQl2YXIgciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyJyArIGlkKTsNCgkJCWlmIChyKSByZXR1cm4gci5jaGVja2VkOw0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoNCgkJZnVuY3Rpb24gc2hvd0VsZW1lbnQoaWQsIHNob3cpIHsNCgkJCXZhciBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KCQkJaWYgKCFlKSByZXR1cm47DQoJCQllLnN0eWxlLmRpc3BsYXkgPSBzaG93ID8gJ2Jsb2NrJyA6ICdub25lJzsNCgkJfQ0KCQlNb2R1bGUuc2V0U3RhdHVzKCdEb3dubG9hZGluZy4uLicpOw0KDQoNCg0KCQlmdW5jdGlvbiBzdGFydFhhc2goKSB7DQoJCQlzaG93RWxlbWVudCgnbG9hZGVyMScsIGZhbHNlKTsNCgkJCXNob3dFbGVtZW50KCdvcHRpb25zVGl0bGUnLCBmYWxzZSk7DQoJCQlzaG93RWxlbWVudCgnZlNldHRpbmdzJywgZmFsc2UpOw0KCQkJc2V0dXBGUygpOw0KCQkJTW9kdWxlLmFyZ3VtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpQXJncycpLnZhbHVlLnNwbGl0KCcgJyk7DQoJCQlNb2R1bGUucnVuID0gcnVuID0gc2F2ZWRSdW47DQoJCQlpZiAocmFkaW9DaGVja2VkKCdaaXAnKSkgew0KCQkJCWNvbnN0IHppcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RaaXAnKTsNCgkJCQlpZiAoemlwTW9kcy5sZW5ndGggPiAxKSB7DQoJCQkJCXZhciBtb2RfcGFydHMgPSBbemlwTW9kc1swXVszXSwgemlwTW9kc1swXVs0XSwgemlwTW9kc1swXVsyXV07DQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgemlwTW9kcy5sZW5ndGg7IGkrKykgew0KCQkJCQkJaWYgKHppcE1vZHNbaV1bMF0gPT0gemlwcGVyLnZhbHVlKSB7DQoJCQkJCQkJbW9kX3BhcnRzID0gW3ppcE1vZHNbaV1bM10sIHppcE1vZHNbaV1bNF0sIHppcE1vZHNbaV1bMl1dOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJCWZldGNoWklQKHppcHBlci52YWx1ZSwgc2F2ZWRSdW4sIG1vZF9wYXJ0c1swXSwgbW9kX3BhcnRzWzFdLCBtb2RfcGFydHNbMl0pOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWZldGNoWklQKHppcE1vZHNbMF1bMF0sIHNhdmVkUnVuLCB6aXBNb2RzWzBdWzNdKTsNCgkJCQl9DQoJCQl9IGVsc2UgaWYgKCghemlwTW9kcy5sZW5ndGggJiYgIXBrZ01vZHMubGVuZ3RoKSB8fCByYWRpb0NoZWNrZWQoJ0xvY2FsWmlwJykpIHsNCgkJCQl2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCgkJCQlyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7DQoJCQkJCW1vdW50WklQKHJlYWRlci5yZXN1bHQpOw0KCQkJCQlNb2R1bGUucHJpbnQoIkxvYWRlZCB6aXAgZGF0YSIpOw0KCQkJCQlzYXZlZFJ1bigpOw0KCQkJCX07DQoJCQkJcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpWmlwRmlsZScpLmZpbGVzWzBdKTsNCgkJCX0gZWxzZSBpZiAocmFkaW9DaGVja2VkKCdQYWNrYWdlJykpIHsNCgkJCQl2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7DQoJCQkJc2NyaXB0Lm9ubG9hZCA9IHNhdmVkUnVuOw0KCQkJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsNCgkJCQlzY3JpcHQuc3JjID0gcGtnTW9kcy5sZW5ndGggPiAxID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdFBrZycpLnZhbHVlIDogcGtnTW9kc1swXVswXTsNCgkJCX0NCg0KCQkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsIGZ1bmN0aW9uKGUpIHsNCgkJCQl2YXIgY29uZmlybWF0aW9uTWVzc2FnZSA9ICdMZWF2ZSB0aGUgZ2FtZT8nOw0KDQoJCQkJKGUgfHwgd2luZG93LmV2ZW50KS5yZXR1cm5WYWx1ZSA9IGNvbmZpcm1hdGlvbk1lc3NhZ2U7IC8vR2Vja28gKyBJRQ0KCQkJCXJldHVybiBjb25maXJtYXRpb25NZXNzYWdlOyAvL0dlY2tvICsgV2Via2l0LCBTYWZhcmksIENocm9tZSBldGMuDQoJCQl9KTsNCgkJfQ0KDQoJCWZ1bmN0aW9uIG1vdW50WklQKGRhdGEpIHsNCgkJCXZhciBCdWZmZXIgPSBCcm93c2VyRlMuQkZTUmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOw0KCQkJbWZzLm1vdW50KCcvemlwJywgbmV3IEJyb3dzZXJGUy5GaWxlU3lzdGVtLlppcEZTKEJ1ZmZlci5mcm9tKGRhdGEpKSk7DQoJCQlGUy5tb3VudChuZXcgQnJvd3NlckZTLkVtc2NyaXB0ZW5GUygpLCB7DQoJCQkJcm9vdDogJy96aXAnDQoJCQl9LCAnL3JvZGlyJyk7DQoJCX0NCg0KCQlmdW5jdGlvbiBmZXRjaFpJUChwYWNrYWdlTmFtZSwgY2IsIHBhcnRzID0gMCwgc2l6ZV9vZl9wYXJ0cyA9IDAsIHRvdGFsX3NpemUgPSAwKSB7DQoJCQlpZiAocGFydHMgPT0gMCkgew0KCQkJCXZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCgkJCQl4aHIub3BlbignR0VUJywgcGFja2FnZU5hbWUsIHRydWUpOw0KCQkJCXhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInOw0KDQoJCQkJeGhyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkgew0KCQkJCQl2YXIgdXJsID0gcGFja2FnZU5hbWU7DQoJCQkJCXZhciBzaXplOw0KCQkJCQlpZiAoZXZlbnQudG90YWwpIHNpemUgPSBldmVudC50b3RhbDsNCgkJCQkJZWxzZSBzaXplID0gemlwTW9kc1tkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0WmlwJykuc2VsZWN0ZWRJbmRleF1bMl07DQoJCQkJCWlmIChldmVudC5sb2FkZWQpIHsNCgkJCQkJCXZhciB0b3RhbCA9IHNpemU7DQoJCQkJCQl2YXIgbG9hZGVkID0gZXZlbnQubG9hZGVkOw0KCQkJCQkJdmFyIG51bSA9IDA7DQoJCQkJCQlpZiAoTW9kdWxlWydzZXRTdGF0dXMnXSkgTW9kdWxlWydzZXRTdGF0dXMnXSgnRG93bmxvYWRpbmcgZGF0YS4uLicpOw0KCQkJCQl9IGVsc2UgaWYgKCFNb2R1bGUuZGF0YUZpbGVEb3dubG9hZHMpIHsNCgkJCQkJCWlmIChNb2R1bGVbJ3NldFN0YXR1cyddKSBNb2R1bGVbJ3NldFN0YXR1cyddKCdEb3dubG9hZGluZyBkYXRhLi4uJyk7DQoJCQkJCX0NCgkJCQl9Ow0KCQkJCXhoci5vbmVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHsNCgkJCQkJdGhyb3cgbmV3IEVycm9yKCJOZXR3b3JrRXJyb3IiKTsNCgkJCQl9DQoJCQkJeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7DQoJCQkJCWlmICh4aHIuc3RhdHVzID09IDIwMCB8fCB4aHIuc3RhdHVzID09IDMwNCB8fCB4aHIuc3RhdHVzID09IDIwNiB8fCAoeGhyLnN0YXR1cyA9PSAwICYmIHhoci5yZXNwb25zZSkpIHsgLy8gZmlsZSBVUkxzIGNhbiByZXR1cm4gMA0KCQkJCQkJbW91bnRaSVAoeGhyLnJlc3BvbnNlKTsNCgkJCQkJCWNiKCk7DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQl0aHJvdyBuZXcgRXJyb3IoeGhyLnN0YXR1c1RleHQgKyAiIDogIiArIHhoci5yZXNwb25zZVVSTCk7DQoJCQkJCX0NCgkJCQl9Ow0KCQkJCXhoci5zZW5kKG51bGwpOw0KCQkJfSBlbHNlIHsNCgkJCQl2YXIgYnVmZmVycyA9IG5ldyBVaW50OEFycmF5KHRvdGFsX3NpemUpOw0KCQkJCXZhciBmaW5pc2hlZCA9IDA7DQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0czsgaSsrKSB7DQoJCQkJCWNvbnN0IGN1ciA9IGk7DQoJCQkJCWNvbnN0IG5vX2V4dCA9IHBhY2thZ2VOYW1lLnNsaWNlKDAsIC00KTsNCgkJCQkJY29uc3QgdXJsMSA9IG5vX2V4dCArICdfb3V0LycgKyBub19leHQgKyAnLScgKyBjdXIgKyAnLnppcCc7DQoJCQkJCWNvbnNvbGUubG9nKHVybDEpOw0KCQkJCQljb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCgkJCQkJeGhyLm9wZW4oJ0dFVCcsIHVybDEsIHRydWUpOw0KCQkJCQl4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJzsNCg0KCQkJCQl4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7DQoJCQkJCQlpZiAoZXZlbnQubG9hZGVkKSB7DQoJCQkJCQkJdmFyIGxvYWRlZCA9IGV2ZW50LmxvYWRlZDsNCgkJCQkJCQlpZiAoTW9kdWxlWydzZXRTdGF0dXMnXSkgTW9kdWxlWydzZXRTdGF0dXMnXSgnRG93bmxvYWRpbmcgZGF0YS4uLiAoJyArICgoZmluaXNoZWQgKiBzaXplX29mX3BhcnRzKSArIGxvYWRlZCkgKyAnLycgKyB0b3RhbF9zaXplICsgJyknKTsNCgkJCQkJCX0gZWxzZSBpZiAoIU1vZHVsZS5kYXRhRmlsZURvd25sb2Fkcykgew0KCQkJCQkJCWlmIChNb2R1bGVbJ3NldFN0YXR1cyddKSBNb2R1bGVbJ3NldFN0YXR1cyddKCdEb3dubG9hZGluZyBkYXRhLi4uJyk7DQoJCQkJCQl9DQoJCQkJCX07DQoJCQkJCXhoci5vbmVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHsNCgkJCQkJCXRocm93IG5ldyBFcnJvcigiTmV0d29ya0Vycm9yIik7DQoJCQkJCX0NCgkJCQkJeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7DQoJCQkJCQlpZiAoeGhyLnN0YXR1cyA9PSAyMDAgfHwgeGhyLnN0YXR1cyA9PSAzMDQgfHwgeGhyLnN0YXR1cyA9PSAyMDYgfHwgKHhoci5zdGF0dXMgPT0gMCAmJiB4aHIucmVzcG9uc2UpKSB7IC8vIGZpbGUgVVJMcyBjYW4gcmV0dXJuIDANCgkJCQkJCQlmaW5pc2hlZCsrOw0KCQkJCQkJCWJ1ZmZlcnMuc2V0KG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZSksIGN1ciAqIHNpemVfb2ZfcGFydHMpOw0KCQkJCQkJCWlmIChmaW5pc2hlZCA9PSBwYXJ0cykgew0KCQkJCQkJCQltb3VudFpJUChidWZmZXJzKTsNCgkJCQkJCQkJY2IoKTsNCgkJCQkJCQl9DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCXRocm93IG5ldyBFcnJvcih4aHIuc3RhdHVzVGV4dCArICIgOiAiICsgeGhyLnJlc3BvbnNlVVJMKTsNCgkJCQkJCX0NCgkJCQkJfTsNCgkJCQkJeGhyLnNlbmQobnVsbCk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoNCgkJZnVuY3Rpb24gc2V0dXBGUygpIHsNCgkJCUZTLm1rZGlyKCcvcm9kaXInKTsNCgkJCUZTLm1rZGlyKCcveGFzaCcpOw0KCQkJdHJ5IHsNCgkJCQltZnMgPSBuZXcgQnJvd3NlckZTLkZpbGVTeXN0ZW0uTW91bnRhYmxlRmlsZVN5c3RlbSgpOw0KCQkJCUJyb3dzZXJGUy5pbml0aWFsaXplKG1mcyk7DQoJCQl9IGNhdGNoIChlKSB7DQoJCQkJbWZzID0gdW5kZWZpbmVkOw0KCQkJCU1vZHVsZS5wcmludCgnRmFpbGVkIHRvIGluaXRpYWxpemUgQnJvd3NlckZTOiAnICsgZSk7DQoJCQl9DQoNCgkJCWlmIChyYWRpb0NoZWNrZWQoJ0luZGV4ZWREQicpKSB7DQoJCQkJRlMubW91bnQoSURCRlMsIHt9LCAnL3hhc2gnKTsNCgkJCQlGUy5zeW5jZnModHJ1ZSwgZnVuY3Rpb24oZXJyKSB7DQoJCQkJCWlmIChlcnIpIE1vZHVsZS5wcmludCgnTG9hZGluZyBJREJGUzogJyArIGVycik7DQoJCQkJfSk7DQoJCQkJbW91bnRlZCA9IHRydWU7DQoJCQl9DQoNCgkJCWlmIChyYWRpb0NoZWNrZWQoJ0xvY2FsU3RvcmFnZScpICYmIG1mcykgew0KCQkJCW1mcy5tb3VudCgnL2xzJywgbmV3IEJyb3dzZXJGUy5GaWxlU3lzdGVtLkxvY2FsU3RvcmFnZSgpKTsNCgkJCQlGUy5tb3VudChuZXcgQnJvd3NlckZTLkVtc2NyaXB0ZW5GUygpLCB7DQoJCQkJCXJvb3Q6ICcvbHMnDQoJCQkJfSwgJy94YXNoJyk7DQoJCQkJTW9kdWxlLnByaW50KCdMb2NhbFN0b3JhZ2UgbW91bnRlZCcpOw0KCQkJfQ0KDQoJCQlGUy5jaGRpcignL3hhc2gvJyk7DQoJCX0NCg0KCQlmdW5jdGlvbiBza2lwUnVuKCkgew0KCQkJc2F2ZWRSdW4gPSBydW47DQoJCQlNb2R1bGUucnVuID0gaGFsdFJ1bjsNCgkJCXJ1biA9IGhhbHRSdW47DQoNCgkJCU1vZHVsZS5zZXRTdGF0dXMoIlhhc2gzRCBkb3dubG9hZGVkISIpOw0KCQkJc2hvd0VsZW1lbnQoJ2xvYWRlcjEnLCBmYWxzZSk7DQoJCQlzaG93RWxlbWVudCgnb3B0aW9uc1RpdGxlJywgdHJ1ZSk7DQoNCgkJCWlmICh3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHwgd2luZG93LndlYmtpdEluZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREIpDQoJCQkJc2hvd0VsZW1lbnQoJ2lkYkhpZGVyJywgdHJ1ZSk7DQoJCQlwcmVwYXJlU2VsZWN0cygpOw0KCQkJc2hvd0VsZW1lbnQoJ2ZTZXR0aW5ncycsIHRydWUpOw0KDQoJCQlFTlYuWEFTSDNEX0dBTUVESVIgPSBnYW1lZGlyOw0KCQkJRU5WLlhBU0gzRF9ST0RJUiA9ICcvcm9kaXInDQoNCgkJCWZ1bmN0aW9uIGxvYWRNb2R1bGUobmFtZSkgew0KCQkJCXZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsNCgkJCQlzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7DQoJCQkJCW1vZHVsZUNvdW50Kys7DQoJCQkJCWlmIChtb2R1bGVDb3VudCA9PSAzKSB7DQoJCQkJCQlNb2R1bGUuc2V0U3RhdHVzKCJTY3JpcHRzIGRvd25sb2FkZWQhIik7DQoJCQkJCX0NCgkJCQl9Ow0KCQkJCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsNCgkJCQlzY3JpcHQuc3JjID0gbmFtZSArICIuanMiOw0KCQkJfQ0KDQoJCQlsb2FkTW9kdWxlKCJzZXJ2ZXIiKTsNCgkJCWxvYWRNb2R1bGUoImNsaWVudCIpOw0KCQkJbG9hZE1vZHVsZSgibWVudSIpOw0KCQl9Ow0KDQoJCU1vZHVsZS5wcmVJbml0ID0gW3NraXBSdW5dOw0KCQlNb2R1bGUud2Vic29ja2V0ID0gW107DQoJCS8vTW9kdWxlLndlYnNvY2tldC51cmwgPSAnd3Nwcm94eTovL3RoZS1zd2Fuay5wcC51YTozMDAwLycNCgkJTW9kdWxlLndlYnNvY2tldC51cmwgPSAnd3Nwcm94eTovLzQudGNwLm5ncm9rLmlvOjEwNjU3Lyc7DQoJCUVOViA9IFtdOw0KCTwvc2NyaXB0Pg0KDQoJPHNjcmlwdD4NCgkJKGZ1bmN0aW9uKCkgew0KCQkJdmFyIG1lbW9yeUluaXRpYWxpemVyID0gJ3hhc2guaHRtbC5tZW0nOw0KCQkJaWYgKHR5cGVvZiBNb2R1bGVbJ2xvY2F0ZUZpbGUnXSA9PT0gJ2Z1bmN0aW9uJykgew0KCQkJCW1lbW9yeUluaXRpYWxpemVyID0gTW9kdWxlWydsb2NhdGVGaWxlJ10obWVtb3J5SW5pdGlhbGl6ZXIpOw0KCQkJfSBlbHNlIGlmIChNb2R1bGVbJ21lbW9yeUluaXRpYWxpemVyUHJlZml4VVJMJ10pIHsNCgkJCQltZW1vcnlJbml0aWFsaXplciA9IE1vZHVsZVsnbWVtb3J5SW5pdGlhbGl6ZXJQcmVmaXhVUkwnXSArIG1lbW9yeUluaXRpYWxpemVyOw0KCQkJfQ0KCQkJdmFyIHhociA9IE1vZHVsZVsnbWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0J10gPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCgkJCXhoci5vcGVuKCdHRVQnLCBtZW1vcnlJbml0aWFsaXplciwgdHJ1ZSk7DQoJCQl4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJzsNCgkJCXhoci5zZW5kKG51bGwpOw0KCQl9KSgpOw0KDQoJCXZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsNCgkJc2NyaXB0LnNyYyA9ICJ4YXNoLmpzIjsNCgkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOw0KCTwvc2NyaXB0Pg0KCTxzY3JpcHQ+DQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93X2NvbnNvbGVfbG9nJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7DQoJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dfY29uc29sZV9sb2cnKS5jaGVja2VkKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0Jykuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoJCQllbHNlIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdXRwdXQnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KCQl9KTsNCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsX3Nob3dfY29uc29sZV9sb2cnKS5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQoJCS8qKGZ1bmN0aW9uKGkscyxvLGcscixhLG0pe2lbJ0dvb2dsZUFuYWx5dGljc09iamVjdCddPXI7aVtyXT1pW3JdfHxmdW5jdGlvbigpew0KCQkoaVtyXS5xPWlbcl0ucXx8W10pLnB1c2goYXJndW1lbnRzKX0saVtyXS5sPTEqbmV3IERhdGUoKTthPXMuY3JlYXRlRWxlbWVudChvKSwNCgkJbT1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKG8pWzBdO2EuYXN5bmM9MTthLnNyYz1nO20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxtKQ0KCQl9KSh3aW5kb3csZG9jdW1lbnQsJ3NjcmlwdCcsJ2h0dHBzOi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsJ2dhJyk7DQoNCgkJZ2EoJ2NyZWF0ZScsICdVQS02ODY2Njc1Mi00JywgJ2F1dG8nKTsNCgkJZ2EoJ3NlbmQnLCAncGFnZXZpZXcnKTsqLw0KCTwvc2NyaXB0Pg0KPC9ib2R5Pg0KDQo8L2h0bWw+";
