window.game = "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbi11cyI+DQoNCjxoZWFkPg0KICAgIDxiYXNlIGhyZWYgPSAiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2ZhcmFsb25nL2FsbEBtYWluL3RhcHJvYWQvIj4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+DQogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIj4NCiAgPHRpdGxlPlRhcCBSb2FkPC90aXRsZT4NCiAgPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSJpbWFnZS9mYXZpY29uLnBuZyI+DQogIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iVGVtcGxhdGVEYXRhL3N0eWxlLmNzcyI+DQogIDxzY3JpcHQgc3JjID0gImpzemlwLmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdD4NCiAgICAgIA0KDQogICAgICANCiAgICAgIA0KICBhc3luYyBmdW5jdGlvbiBmZXRjaEFuZENvbWJpbmVaaXAoYmluVXJscykgew0KICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKGJpblVybHMubWFwKHVybCA9PiBmZXRjaCh1cmwpKSk7DQogICAgY29uc3QgYnVmZmVycyA9IGF3YWl0IFByb21pc2UuYWxsKHJlc3BvbnNlcy5tYXAocmVzID0+IHJlcy5hcnJheUJ1ZmZlcigpKSk7DQogICAgbGV0IHRvdGFsTGVuZ3RoID0gYnVmZmVycy5yZWR1Y2UoKGFjYywgYnVmKSA9PiBhY2MgKyBidWYuYnl0ZUxlbmd0aCwgMCk7DQogICAgbGV0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpOw0KICAgIGxldCBvZmZzZXQgPSAwOw0KICAgIGZvciAobGV0IGJ1ZiBvZiBidWZmZXJzKSB7DQogICAgICAgIGNvbWJpbmVkLnNldChuZXcgVWludDhBcnJheShidWYpLCBvZmZzZXQpOw0KICAgICAgICBvZmZzZXQgKz0gYnVmLmJ5dGVMZW5ndGg7DQogICAgfQ0KICAgIHJldHVybiBjb21iaW5lZDsNCn0NCg0KYXN5bmMgZnVuY3Rpb24gdW56aXBXZWJwRnJvbUV4dGVybmFsQmlucyhiaW5VcmxzKSB7DQogICAgY29uc3QgYmxvYlVybHMgPSB7fTsNCiAgICBjb25zdCBieXRlcyA9IGF3YWl0IGZldGNoQW5kQ29tYmluZVppcChiaW5VcmxzKTsNCiAgICBjb25zdCB6aXAgPSBhd2FpdCBKU1ppcC5sb2FkQXN5bmMoYnl0ZXMpOw0KICAgIGZvciAoY29uc3QgW2ZpbGVuYW1lLCBmaWxlXSBvZiBPYmplY3QuZW50cmllcyh6aXAuZmlsZXMpKSB7DQogICAgICAgIGlmICghZmlsZS5kaXIpIHsNCiAgICAgICAgICAgIGxldCBtaW1lID0gJyc7DQogICAgICAgICAgICBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5qcycpIHx8IGZpbGVuYW1lLmVuZHNXaXRoKCcubWpzJykpIHsNCiAgICAgICAgICAgICAgICBtaW1lID0gJ3RleHQvamF2YXNjcmlwdCc7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuY3NzJykpIHsNCiAgICAgICAgICAgICAgICBtaW1lID0gJ3RleHQvY3NzJzsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5odG1sJykpIHsNCiAgICAgICAgICAgICAgICBtaW1lID0gJ3RleHQvaHRtbCc7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcud2VicCcpKSB7DQogICAgICAgICAgICAgICAgbWltZSA9ICdpbWFnZS93ZWJwJzsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5wbmcnKSkgew0KICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2UvcG5nJzsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5qcGcnKSB8fCBmaWxlbmFtZS5lbmRzV2l0aCgnLmpwZWcnKSkgew0KICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2UvanBlZyc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCByYXdCbG9iID0gYXdhaXQgZmlsZS5hc3luYygiYmxvYiIpOw0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG1pbWUgPyBuZXcgQmxvYihbcmF3QmxvYl0sIHsgdHlwZTogbWltZSB9KSA6IHJhd0Jsb2I7DQogICAgICAgICAgICBjb25zdCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFeHRyYWN0ZWQ6IiwgZmlsZW5hbWUpOw0KICAgICAgICAgICAgYmxvYlVybHNbZmlsZW5hbWVdID0gYmxvYlVybDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gYmxvYlVybHM7DQp9DQoNCmxldCBibG9iVXJsc3MgPSAiIjsNCmxldCBiaW5QYXJ0cyA9IFsNCiAgInBhcnRfMS5iaW4iLA0KICAicGFydF8yLmJpbiINCl07DQoNCnVuemlwV2VicEZyb21FeHRlcm5hbEJpbnMoYmluUGFydHMpLnRoZW4oYmxvYlVybHMgPT4gew0KICAgIGJsb2JVcmxzcyA9IGJsb2JVcmxzOw0KICAgIGNvbnN0IE9SSUdJTkFMX0NSRUFURV9FTEVNRU5UID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudDsNCiAgICBjb25zdCBPUklHSU5BTF9TRVRfQVRUUklCVVRFID0gRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlOw0KDQogICAgDQogICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKHRhZ05hbWUpIHsNCiAgICAgICAgY29uc3QgZWwgPSBPUklHSU5BTF9DUkVBVEVfRUxFTUVOVC5jYWxsKHRoaXMsIHRhZ05hbWUpOw0KDQogICAgICAgIGlmICh0YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzY3JpcHQnKSB7DQogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdzcmMnLCB7DQogICAgICAgICAgICAgICAgc2V0KG5ld1NyYykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGV4dHJhY3RGaWxlbmFtZShuZXdTcmMpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IGJsb2JVcmxzc1tmaWxlbmFtZV07DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwoZWwsICdzcmMnLCByZXBsYWNlbWVudCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwoZWwsICdzcmMnLCBuZXdTcmMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBnZXQoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBlbDsNCiAgICB9Ow0KDQogICAgDQogICAgRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsNCiAgICAgICAgaWYgKHRoaXMudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgbmFtZSA9PT0gJ3NyYycpIHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZXh0cmFjdEZpbGVuYW1lKHZhbHVlKTsNCiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gYmxvYlVybHNzW2ZpbGVuYW1lXTsNCiAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCkgew0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHJldHVybiBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwodGhpcywgbmFtZSwgcmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIE9SSUdJTkFMX1NFVF9BVFRSSUJVVEUuY2FsbCh0aGlzLCBuYW1lLCB2YWx1ZSk7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGV4dHJhY3RGaWxlbmFtZSh1cmwpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKHVybCwgbG9jYXRpb24uaHJlZikucGF0aG5hbWUuc3BsaXQoJy8nKS5wb3AoKTsNCiAgICAgICAgfSBjYXRjaCB7DQogICAgICAgICAgICByZXR1cm4gdXJsLnNwbGl0KCcvJykucG9wKCk7IA0KICAgICAgICB9DQogICAgfQ0KDQoNCmNvbnN0IGltYWdlU3JjRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSW1hZ2UucHJvdG90eXBlLCAnc3JjJyk7DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoSW1hZ2UucHJvdG90eXBlLCAnc3JjJywgew0KICBzZXQodmFsdWUpIHsNCiAgICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHZhbHVlKTsNCiAgICBpbWFnZVNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsNCiAgfSwNCiAgZ2V0OiBpbWFnZVNyY0Rlc2NyaXB0b3IuZ2V0LA0KICBjb25maWd1cmFibGU6IHRydWUsDQogIGVudW1lcmFibGU6IHRydWUsDQp9KTsNCg0KDQpjb25zdCBzY3JpcHRTcmNEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MU2NyaXB0RWxlbWVudC5wcm90b3R5cGUsICdzcmMnKTsNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MU2NyaXB0RWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7DQogIHNldCh2YWx1ZSkgew0KICAgIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodmFsdWUpOw0KICAgIHNjcmlwdFNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsNCiAgfSwNCiAgZ2V0OiBzY3JpcHRTcmNEZXNjcmlwdG9yLmdldCwNCiAgY29uZmlndXJhYmxlOiB0cnVlLA0KICBlbnVtZXJhYmxlOiB0cnVlLA0KfSk7DQoNCg0KY29uc3QgbGlua0hyZWZEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MTGlua0VsZW1lbnQucHJvdG90eXBlLCAnaHJlZicpOw0KT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxMaW5rRWxlbWVudC5wcm90b3R5cGUsICdocmVmJywgew0KICBzZXQodmFsdWUpIHsNCiAgICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHZhbHVlKTsNCiAgICBsaW5rSHJlZkRlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsNCiAgfSwNCiAgZ2V0OiBsaW5rSHJlZkRlc2NyaXB0b3IuZ2V0LA0KICBjb25maWd1cmFibGU6IHRydWUsDQogIGVudW1lcmFibGU6IHRydWUsDQp9KTsNCg0KDQpjb25zdCBtZWRpYVNyY0Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjJyk7DQpPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7DQogIHNldCh2YWx1ZSkgew0KICAgIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodmFsdWUpOw0KICAgIG1lZGlhU3JjRGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLCBuZXdVUkwpOw0KICB9LA0KICBnZXQ6IG1lZGlhU3JjRGVzY3JpcHRvci5nZXQsDQogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwNCiAgZW51bWVyYWJsZTogdHJ1ZSwNCn0pOw0KDQovLyBmZXRjaA0KY29uc3Qgb3JpZ2luYWxGZXRjaCA9IHdpbmRvdy5mZXRjaDsNCndpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uKHJlc291cmNlLCBpbml0KSB7DQoNCiAgaWYgKHR5cGVvZiByZXNvdXJjZSA9PT0gInN0cmluZyIpIHsNCiAgLy9jb25zb2xlLmxvZyhyZXNvdXJjZSkNCiAgICByZXNvdXJjZSA9IHJld3JpdGVVUkwocmVzb3VyY2UpOw0KICB9IGVsc2UgaWYgKHJlc291cmNlIGluc3RhbmNlb2YgUmVxdWVzdCkgew0KICAgIHJlc291cmNlID0gbmV3IFJlcXVlc3QocmV3cml0ZVVSTChyZXNvdXJjZS51cmwpLCByZXNvdXJjZSk7DQogIH0NCiAgcmV0dXJuIG9yaWdpbmFsRmV0Y2guY2FsbCh0aGlzLCByZXNvdXJjZSwgaW5pdCk7DQp9Ow0KDQovLyBYTUxIdHRwUmVxdWVzdA0KY29uc3Qgb3JpZ2luYWxPcGVuID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47DQpYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCAuLi5yZXN0KSB7DQogIGNvbnN0IG5ld1VSTCA9IHJld3JpdGVVUkwodXJsKTsNCiAgcmV0dXJuIG9yaWdpbmFsT3Blbi5jYWxsKHRoaXMsIG1ldGhvZCwgbmV3VVJMLCAuLi5yZXN0KTsNCn07DQoNCg0KY29uc3QgT3JpZ2luYWxBdWRpbyA9IHdpbmRvdy5BdWRpbzsNCndpbmRvdy5BdWRpbyA9IGZ1bmN0aW9uKHNyYykgew0KICBjb25zdCBhdWRpbyA9IG5ldyBPcmlnaW5hbEF1ZGlvKCk7DQogIGlmIChzcmMpIHsNCiAgICBhdWRpby5zcmMgPSByZXdyaXRlVVJMKHNyYyk7DQogIH0NCiAgcmV0dXJuIGF1ZGlvOw0KfTsNCndpbmRvdy5BdWRpby5wcm90b3R5cGUgPSBPcmlnaW5hbEF1ZGlvLnByb3RvdHlwZTsNCg0KDQpmdW5jdGlvbiByZXdyaXRlVVJMKG9yaWdpbmFsKSB7DQogIHZhciB0cmltbWVkID0gb3JpZ2luYWwuc3BsaXQoIi8iKS5wb3AoKTsNCiAgLy9jb25zb2xlLmxvZyh0cmltbWVkKQ0KICBpZiAodHJpbW1lZC5pbmNsdWRlcygiPyIpKSB0cmltbWVkID0gdHJpbW1lZC5zcGxpdCgiPyIpWzBdDQogIHJldHVybiBibG9iVXJsc3NbdHJpbW1lZF0gfHwgb3JpZ2luYWw7DQp9DQoNCmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1bml0eS1jb250YWluZXIiKTsNCiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY2FudmFzIik7DQogICAgY29uc3QgbG9hZGluZ0NvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2xvYWRpbmctY292ZXIiKTsNCiAgICBjb25zdCBmdWxsc2NyZWVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWZ1bGxzY3JlZW4tYnV0dG9uIik7DQoNCiAgICBjb25zdCBidWlsZFVybCA9ICJCdWlsZCI7DQogICAgY29uc3QgbG9hZGVyVXJsID0gYnVpbGRVcmwgKyAiLzI0MTAwMS5sb2FkZXJyLmpzIjsNCiAgICBjb25zdCBjb25maWcgPSB7DQogICAgICBkYXRhVXJsOiBidWlsZFVybCArICIvMjQxMDAxLmRhdGEudW5pdHl3ZWIiLA0KICAgICAgZnJhbWV3b3JrVXJsOiBidWlsZFVybCArICIvMjQxMDAxLmZyYW1ld29yay5qcy51bml0eXdlYiIsDQogICAgICBjb2RlVXJsOiBidWlsZFVybCArICIvMjQxMDAxLndhc20udW5pdHl3ZWIiLA0KICAgICAgc3RyZWFtaW5nQXNzZXRzVXJsOiAiU3RyZWFtaW5nQXNzZXRzIiwNCiAgICAgIGNvbXBhbnlOYW1lOiAiR00iLA0KICAgICAgcHJvZHVjdE5hbWU6ICJUYXAgUm9hZCIsDQogICAgICBwcm9kdWN0VmVyc2lvbjogIjEuMCIsDQogICAgfTsNCg0KDQogICAgaWYgKC9pUGhvbmV8aVBhZHxpUG9kfEFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7DQogICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gInVuaXR5LW1vYmlsZSI7DQogICAgICBjb25maWcuZGV2aWNlUGl4ZWxSYXRpbyA9IDE7DQogICAgfQ0KDQogICAgbG9hZGluZ0NvdmVyLnN0eWxlLmRpc3BsYXkgPSAiIjsNCg0KICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsNCiAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOw0KICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7DQogICAgICBjcmVhdGVVbml0eUluc3RhbmNlKGNhbnZhcywgY29uZmlnLCAocHJvZ3Jlc3MpID0+IHsNCiAgICAgICAgZHJhd0NhbnZhcyhwcm9ncmVzcyk7DQogICAgICB9KS50aGVuKCh1bml0eUluc3RhbmNlKSA9PiB7DQogICAgICAgIHdpbmRvdy51bml0eUluc3RhbmNlID0gdW5pdHlJbnN0YW5jZTsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgbG9hZGluZ0NvdmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgbG9nb19sb2FkZWQgPSB0cnVlOw0KICAgICAgICB9LCAyMDAwKTsNCiAgICAgIH0pLmNhdGNoKChtZXNzYWdlKSA9PiB7DQogICAgICAgIGFsZXJ0KG1lc3NhZ2UpOw0KICAgICAgfSk7DQogICAgfTsNCiAgICB2YXIgbG9nb19sb2FkZWQgPSBmYWxzZTsNCiAgICB2YXIgbG9nb19sb2FkaW5nX3BlcmNlbnQgPSAwOw0KDQogICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gew0KICAgICAgZHJhd0NhbnZhcyhsb2dvX2xvYWRpbmdfcGVyY2VudCk7DQogICAgfQ0KICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7DQogICAgICBkcmF3Q2FudmFzKGxvZ29fbG9hZGluZ19wZXJjZW50KTsNCiAgICB9DQoNCiAgICB2YXIgbG9nb19jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9nby1jYW52YXMiKTsNCiAgICBmdW5jdGlvbiBkcmF3Q2FudmFzKF9wZXJjZW50ID0gMCkgew0KICAgICAgaWYgKGxvZ29fbG9hZGVkKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHJlc2l6ZUxvZ29DYW52YXMoKTsNCiAgICAgIHZhciBjdHggPSBsb2dvX2NhbnZhcy5nZXRDb250ZXh0KCIyZCIpOw0KICAgICAgdmFyIGxkX2JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZF9iYXIiKTsNCiAgICAgIHZhciBsZF9maWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxkX2ZpbGwiKTsNCiAgICAgIHZhciBsZF9kb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGRfZG90Iik7DQogICAgICB2YXIgbGRfbG9nbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZF9sb2dvIik7DQogICAgICB2YXIgX3N3ID0gbG9nb19jYW52YXMud2lkdGggLyAxOTIwOw0KICAgICAgdmFyIF9zaCA9IGxvZ29fY2FudmFzLmhlaWdodCAvIDEwODA7DQoNCiAgICAgIGlmIChfcGVyY2VudCA+IDEpIHsNCiAgICAgICAgX3BlcmNlbnQgPSAxOw0KICAgICAgfQ0KICAgICAgLy9NYXNrDQogICAgICB2YXIgcGwgPSA3MDAgKiAoMSAtIF9wZXJjZW50KTsNCiAgICAgIHZhciBwdyA9IDcwMCAtIHBsOw0KDQogICAgICBjdHguZHJhd0ltYWdlKGxkX2JhciwgNTk1ICogX3N3LCBsb2dvX2NhbnZhcy5oZWlnaHQgLSAoODAgKiBfc2gpLCA3MDAgKiBfc3csIDUyICogX3NoKTsNCiAgICAgIGN0eC5kcmF3SW1hZ2UobGRfZmlsbCwgNTk1ICogX3N3LCBsb2dvX2NhbnZhcy5oZWlnaHQgLSAoNzAgKiBfc2gpLCBwdyAqIF9zdywgNDAgKiBfc2gpOw0KICAgICAgY3R4LmRyYXdJbWFnZShsZF9kb3QsICg1NzAgKyA2MDAgLSAoNjAwICogKDEgLSBfcGVyY2VudCkpKSAqIF9zdyArICgoNjcgKiBfcGVyY2VudCkgKiBfc3cpLCBsb2dvX2NhbnZhcy5oZWlnaHQgLSAoNzAgKiBfc2gpLCA2NyAqIF9zdywgNDMgKiBfc2gpOw0KICAgICAgY3R4LmRyYXdJbWFnZShsZF9sb2dvLCA1MDAgKiBfc3csIGxvZ29fY2FudmFzLmhlaWdodCAtICg5NjAgKiBfc2gpLCA5MjAgKiBfc3csIDEyMSAqIF9zaCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlc2l6ZUxvZ29DYW52YXMoKSB7DQogICAgICB2YXIgX3cgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgIHZhciBfaCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCiAgICAgIHZhciBfbncgPSBfaCAqIDE2IC8gOTsNCiAgICAgIGlmIChfbncgPD0gX3cpIHsNCiAgICAgICAgbG9nb19jYW52YXMud2lkdGggPSBfbnc7DQogICAgICAgIGxvZ29fY2FudmFzLmhlaWdodCA9IF9oOw0KICAgICAgfQ0KICAgICAgZWxzZSB7DQogICAgICAgIGxvZ29fY2FudmFzLndpZHRoID0gX3c7DQogICAgICAgIGxvZ29fY2FudmFzLmhlaWdodCA9IF93ICogOSAvIDE2Ow0KICAgICAgfQ0KICAgIH0NCg0KDQogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOw0KDQoNCn0pOw0KDQogIDwvc2NyaXB0Pg0KPC9oZWFkPg0KDQo8Ym9keSBjbGFzcz0iZGFyayI+DQogIDxkaXYgaWQ9InVuaXR5LWNvbnRhaW5lciIgY2xhc3M9InVuaXR5LWRlc2t0b3AiPg0KICAgIDxjYW52YXMgaWQ9InVuaXR5LWNhbnZhcyI+PC9jYW52YXM+DQogIDwvZGl2Pg0KICA8ZGl2IGlkPSJsb2FkaW5nLWNvdmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+DQogICAgPGRpdiBpZD0idW5pdHktbG9hZGluZy1iYXIiPg0KICAgICAgPGltZyBzcmM9ImltYWdlL2xvYWRpbmcucG5nP3Y9MSIgaWQ9ImJnIiBzdHlsZT0id2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtvYmplY3QtZml0OiBjb3ZlcjsiPg0KICAgICAgPGNhbnZhcyBpZD0ibG9nby1jYW52YXMiIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyI+DQogICAgICAgIDxpbWcgc3JjPSJpbWFnZS9sb2FkaW5nX2JnLnBuZyIgaWQ9ImxkX2JhciI+DQogICAgICAgIDxpbWcgc3JjPSJpbWFnZS9sb2FkaW5nX2ZpbGwucG5nIiBpZD0ibGRfZmlsbCI+DQogICAgICAgIDxpbWcgc3JjPSJpbWFnZS9sb2FkaW5nX2RvdC5wbmciIGlkPSJsZF9kb3QiPg0KICAgICAgICA8aW1nIHNyYz0iaW1hZ2UvbG9nby5wbmciIGlkPSJsZF9sb2dvIj4NCiAgICAgIDwvY2FudmFzPg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCg0KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy8xMC45LjAvZmlyZWJhc2UtYXBwLWNvbXBhdC5qcyI+PC9zY3JpcHQ+DQogIDxzY3JpcHQgc3JjPSJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzEwLjkuMC9maXJlYmFzZS1maXJlc3RvcmUtY29tcGF0LmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvMTAuOS4wL2ZpcmViYXNlLWF1dGgtY29tcGF0LmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvMTAuOS4wL2ZpcmViYXNlLWFuYWx5dGljcy1jb21wYXQuanMiPjwvc2NyaXB0Pg0KDQoNCg0KICA8c2NyaXB0IHR5cGU9Im1vZHVsZSI+DQogICAgLy8gSW1wb3J0IHRoZSBmdW5jdGlvbnMgeW91IG5lZWQgZnJvbSB0aGUgU0RLcyB5b3UgbmVlZA0KICAgIGltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzEwLjkuMC9maXJlYmFzZS1hcHAuanMiOw0KICAgIGltcG9ydCB7IGdldEFuYWx5dGljcyB9IGZyb20gImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvMTAuOS4wL2ZpcmViYXNlLWFuYWx5dGljcy5qcyI7DQogICAgaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvMTAuOS4wL2ZpcmViYXNlLWF1dGguanMiOw0KICAgIC8vIFRPRE86IEFkZCBTREtzIGZvciBGaXJlYmFzZSBwcm9kdWN0cyB0aGF0IHlvdSB3YW50IHRvIHVzZQ0KICAgIC8vIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3dlYi9zZXR1cCNhdmFpbGFibGUtbGlicmFyaWVzDQoNCiAgICAvLyBZb3VyIHdlYiBhcHAncyBGaXJlYmFzZSBjb25maWd1cmF0aW9uDQogICAgLy8gRm9yIEZpcmViYXNlIEpTIFNESyB2Ny4yMC4wIGFuZCBsYXRlciwgbWVhc3VyZW1lbnRJZCBpcyBvcHRpb25hbA0KICAgIGNvbnN0IGZpcmViYXNlQ29uZmlnID0gew0KICAgICAgYXBpS2V5OiAiQUl6YVN5Q0xXZXgxRGM5ZUEzSGtaYlVpd0t1dmRrSjNaV3FOd0RnIiwNCiAgICAgIGF1dGhEb21haW46ICJ0YXAtcm9hZC5maXJlYmFzZWFwcC5jb20iLA0KICAgICAgcHJvamVjdElkOiAidGFwLXJvYWQiLA0KICAgICAgc3RvcmFnZUJ1Y2tldDogInRhcC1yb2FkLmFwcHNwb3QuY29tIiwNCiAgICAgIG1lc3NhZ2luZ1NlbmRlcklkOiAiOTIxNDc5ODczMzk2IiwNCiAgICAgIGFwcElkOiAiMTo5MjE0Nzk4NzMzOTY6d2ViOjczMTE3NjU1OTY1NGE4MWE4ZDYyMjEiLA0KICAgICAgbWVhc3VyZW1lbnRJZDogIkctUVpaSlNTU0wzSyINCiAgICB9Ow0KDQogICAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107DQogICAgd2luZG93Lmd0YWcgPSBmdW5jdGlvbiAoKSB7IHdpbmRvdy5kYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpOyB9DQoNCiAgICB3aW5kb3cuZ3RhZygiY29uZmlnIiwgZmlyZWJhc2VDb25maWcubWVhc3VyZW1lbnRJZCwgew0KICAgICAgY29va2llX2RvbWFpbjogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLA0KICAgICAgY29va2llX2ZsYWdzOiAiU2FtZVNpdGU9Tm9uZTtTZWN1cmUiLA0KICAgIH0pOw0KICAgIC8vIEluaXRpYWxpemUgRmlyZWJhc2UNCiAgICBjb25zdCBhcHAgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsNCiAgICBjb25zdCBhdXRoID0gZ2V0QXV0aChhcHApOw0KICA8L3NjcmlwdD4NCg0KICANCjwvYm9keT4NCg0KPC9odG1sPg0K";
