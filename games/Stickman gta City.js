window.game = "PCFET0NUWVBFIGh0bWw+DQoNCg0KPCEtLSBVbHRpbWF0ZSBHYW1lIFN0YXNoIGZpbGUtLT4gDQo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4NCg0KDQoNCjxodG1sIGxhbmc9ImVuLXVzIj4NCjxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvVUdTLUFzc2V0c0BtYWluL1NUSUNLTUFOJTIwR1RBLyI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+DQogIDx0aXRsZT5TdGlja21hbiBHdGEgQ2l0eTwvdGl0bGU+DQogIDxzdHlsZT4NCiAgICBodG1sLA0KICAgIGJvZHkgew0KICAgICAgYmFja2dyb3VuZDogIzAwMDsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgb3ZlcmZsb3c6IHZpc2libGU7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgbWFyZ2luOiAwOw0KICAgIH0NCg0KICAgIGRpdiNnYW1lQ29udGFpbmVyIHsNCiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7DQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgfQ0KDQogICAgZGl2I2dhbWVDb250YWluZXIgY2FudmFzIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB9DQoNCiAgICBkaXYjZ2FtZUNvbnRhaW5lciBjYW52YXNbZGF0YS1waXhlbC1hcnQ9InRydWUiXSB7DQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICBpbWFnZS1yZW5kZXJpbmc6IG9wdGltaXplU3BlZWQ7DQogICAgICBpbWFnZS1yZW5kZXJpbmc6IC13ZWJraXQtY3Jpc3AtZWRnZXM7DQogICAgICBpbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7DQogICAgICBpbWFnZS1yZW5kZXJpbmc6IC1vLWNyaXNwLWVkZ2VzOw0KICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBjcmlzcC1lZGdlczsNCiAgICAgIGltYWdlLXJlbmRlcmluZzogLXdlYmtpdC1vcHRpbWl6ZS1jb250cmFzdDsNCiAgICAgIGltYWdlLXJlbmRlcmluZzogb3B0aW1pemUtY29udHJhc3Q7DQogICAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDsNCiAgICAgIC1tcy1pbnRlcnBvbGF0aW9uLW1vZGU6IG5lYXJlc3QtbmVpZ2hib3I7DQogICAgfQ0KICA8L3N0eWxlPg0KDQogIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQogICAgYm9keSB7DQogICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIH0NCiAgPC9zdHlsZT4NCg0KICA8c2NyaXB0Pg0KICAgIGZ1bmN0aW9uIFN1Ym1pdExlYWRlcmJvYXJkU2NvcmUobmV3U2NvcmUpIHt9DQogICAgZnVuY3Rpb24gR2V0TGVhZGVyYm9hcmRFbnRyaWVzKCkge30NCg0KICAgIGZ1bmN0aW9uIEluaXRBcGkoX2FwcElkKSB7DQogICAgICB2YXIgZGF0ZU5vdyA9IG5ldyBEYXRlKCk7DQogICAgICB2YXIgc2Vjb25kc1NpbmNlRXBvY2ggPSBNYXRoLnJvdW5kKGRhdGVOb3cuZ2V0VGltZSgpIC8gMTAwMCk7DQogICAgICBjb25zb2xlLmxvZygnSW5pdEFwaScpOw0KICAgICAgd2luZG93LmNhbGxUaW1lID0gc2Vjb25kc1NpbmNlRXBvY2ggLSAxODE7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gSW5pdEV4dGVybkV2YWwoX2FwcElkKSB7DQogICAgICBjb25zb2xlLmxvZygiSW5pdEV4dGVybkV2YWwiKTsNCiAgICAgIEV4dGVybkV2YWwoKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBFeHRlcm5FdmFsKCkgew0KICAgICAgY29uc29sZS5sb2coIkV4dGVybkV2YWwiKTsNCiAgICAgIHZhciBkYXRlTm93ID0gbmV3IERhdGUoKTsNCiAgICAgIHZhciBzZWNvbmRzU2luY2VFcG9jaCA9IE1hdGgucm91bmQoZGF0ZU5vdy5nZXRUaW1lKCkgLyAxMDAwKTsNCg0KICAgICAgaWYgKHdpbmRvdy5jYWxsVGltZSAhPSB1bmRlZmluZWQgJiYgc2Vjb25kc1NpbmNlRXBvY2ggLSB3aW5kb3cuY2FsbFRpbWUgPiAxODApIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0V4dGVybkV2YWwgMicpOw0KICAgICAgICB3aW5kb3cuY2FsbFRpbWUgPSBzZWNvbmRzU2luY2VFcG9jaDsNCg0KICAgICAgICBpZiAodHlwZW9mIHByZXJvbGwgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgaWYgKHdpbmRvd1twcmVyb2xsLmNvbmZpZy5sb2FkZXJPYmplY3ROYW1lXSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIGdhbWVJbnN0YW5jZS5TZW5kTWVzc2FnZSgnRnJlZXplTm92YUFQSScsICdBZE1lc3NhZ2UnLCAnb25PcGVuJyk7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICB3aW5kb3dbcHJlcm9sbC5jb25maWcubG9hZGVyT2JqZWN0TmFtZV0ucmVmZXRjaEFkKEV4dGVybkV2YWxSZXN1bWVHYW1lKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgIGdhbWVJbnN0YW5jZS5TZW5kTWVzc2FnZSgnRnJlZXplTm92YUFQSScsICdBZE1lc3NhZ2UnLCAnb25DbG9zZScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIEV4dGVybkV2YWxSZXN1bWVHYW1lKCkgew0KICAgICAgY29uc29sZS5sb2coIkV4dGVybkV2YWxSZXN1bWVHYW1lIik7DQogICAgICBnYW1lSW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ0ZyZWV6ZU5vdmFBUEknLCAnQWRNZXNzYWdlJywgJ29uQ2xvc2UnKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBQcmVsb2FkUmV3YXJkZWQoKSB7DQogICAgICBjb25zb2xlLmxvZygiUHJlbG9hZFJld2FyZGVkIik7DQogICAgICBpZiAod2luZG93LnJld2FyZGVkQ2FsbGJhY2tzID09IHVuZGVmaW5lZCkgew0KICAgICAgICB3aW5kb3cucmV3YXJkZWRDYWxsYmFja3MgPSB0cnVlOw0KICAgICAgICB0cnkgew0KICAgICAgICAgIHdpbmRvd1t3aW5kb3cucHJlcm9sbC5jb25maWcubG9hZGVyT2JqZWN0TmFtZV0ucmVnaXN0ZXJSZXdhcmRDYWxsYmFja3Moew0KICAgICAgICAgICAgb25SZWFkeTogUmV3YXJkZWRSZWFkeSwNCiAgICAgICAgICAgIG9uU3VjY2VzczogUmV3YXJkZWRTdWNjZXNzLA0KICAgICAgICAgICAgb25GYWlsOiBSZXdhcmRlZEZhaWwsDQogICAgICAgICAgICBvbkNsb3NlOiBSZXdhcmRlZENsb3NlDQogICAgICAgICAgfSk7DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFNob3dSZXdhcmRlZCgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJTaG93UmV3YXJkZWQiKTsNCiAgICAgIGlmICh0eXBlb2YgcHJlcm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgaWYgKHdpbmRvdy5yZXdhcmRlZENhbGxiYWNrcyA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICBQcmVsb2FkUmV3YXJkZWQoKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAod2luZG93W3ByZXJvbGwuY29uZmlnLmxvYWRlck9iamVjdE5hbWVdICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgIGdhbWVJbnN0YW5jZS5TZW5kTWVzc2FnZSgnRnJlZXplTm92YUFQSScsICdBZE1lc3NhZ2UnLCAnb25PcGVuJyk7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHdpbmRvd1twcmVyb2xsLmNvbmZpZy5sb2FkZXJPYmplY3ROYW1lXS5zaG93UmV3YXJkQWQoKTsNCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIGdhbWVJbnN0YW5jZS5TZW5kTWVzc2FnZSgnRnJlZXplTm92YUFQSScsICdBZE1lc3NhZ2UnLCAnb25DbG9zZScpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFJld2FyZGVkUmVhZHkoKSB7DQogICAgICBjb25zb2xlLmxvZygiUmV3YXJkZWRSZWFkeSIpOw0KICAgICAgaWYgKHdpbmRvdy5yZXdhcmRlZENvdW50ID09IHVuZGVmaW5lZCkgew0KICAgICAgICB3aW5kb3cucmV3YXJkZWRDb3VudCA9IDE7DQogICAgICAgIHdpbmRvdy5nYW1lSW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ0ZyZWV6ZU5vdmFBUEknLCAnUmV3YXJkZWRSZWFkeScpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgd2luZG93LnJld2FyZGVkQ291bnQgPSB3aW5kb3cucmV3YXJkZWRDb3VudCArIDE7DQogICAgICAgIHdpbmRvdy5nYW1lSW5zdGFuY2UuU2VuZE1lc3NhZ2UoJ0ZyZWV6ZU5vdmFBUEknLCAnUmV3YXJkZWRSZWFkeScpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFJld2FyZGVkU3VjY2VzcygpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJSZXdhcmRlZFN1Y2Nlc3MiKTsNCiAgICAgIGdhbWVJbnN0YW5jZS5TZW5kTWVzc2FnZSgnRnJlZXplTm92YUFQSScsICdBZE1lc3NhZ2UnLCAnUmV3YXJkZWRPblJld2FyZGVkJyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gUmV3YXJkZWRGYWlsKCkgew0KICAgICAgY29uc29sZS5sb2coIlJld2FyZGVkRmFpbCIpOw0KICAgICAgZ2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCdGcmVlemVOb3ZhQVBJJywgJ0FkTWVzc2FnZScsICdSZXdhcmRlZE9uRmFpbCcpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIFJld2FyZGVkQ2xvc2UoKSB7DQogICAgICBjb25zb2xlLmxvZygiUmV3YXJkZWRDbG9zZSIpOw0KICAgICAgZ2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCdGcmVlemVOb3ZhQVBJJywgJ0FkTWVzc2FnZScsICdvbkNsb3NlJyk7DQogICAgfQ0KDQogICAgSW5pdEFwaSgwKTsNCiAgPC9zY3JpcHQ+DQoNCjwvaGVhZD4NCg0KPGJvZHk+DQogIDxkaXYgaWQ9ImdhbWVDb250YWluZXIiPg0KICAgIDxjYW52YXMgaWQ9InVuaXR5LWNhbnZhcyIgZGF0YS1waXhlbC1hcnQ9IiI+PC9jYW52YXM+DQogICAgPHNjcmlwdCBzcmM9IkJ1aWxkL2dhbWUubG9hZGVyLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0Pg0KICAgICAgd2luZG93Lm1lcmdlZEJsb2JVcmxzID0ge307DQogICAgICB3aW5kb3cuYXNzZXRzUmVhZHkgPSBmYWxzZTsNCg0KICAgICAgYXN5bmMgZnVuY3Rpb24gbWVyZ2VTcGxpdEZpbGUoZmlsZVVybEJhc2UsIG51bVBhcnRzID0gMikgew0KICAgICAgICBjb25zdCBwYXJ0VXJscyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG51bVBhcnRzIH0sIChfLCBpKSA9PiANCiAgICAgICAgICBgJHtmaWxlVXJsQmFzZX0ucGFydCR7aSArIDF9YA0KICAgICAgICApOw0KDQogICAgICAgIHRyeSB7DQogICAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoDQogICAgICAgICAgICBwYXJ0VXJscy5tYXAodXJsID0+IGZldGNoKHVybCkpDQogICAgICAgICAgKTsNCg0KICAgICAgICAgIGlmIChyZXNwb25zZXMuc29tZShyID0+ICFyLm9rKSkgew0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY29uc3QgcGFydHMgPSBhd2FpdCBQcm9taXNlLmFsbCgNCiAgICAgICAgICAgIHJlc3BvbnNlcy5tYXAociA9PiByLmFycmF5QnVmZmVyKCkpDQogICAgICAgICAgKTsNCg0KICAgICAgICAgIGNvbnN0IGNvbWJpbmVkQmxvYiA9IG5ldyBCbG9iKHBhcnRzLCB7DQogICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgIH0pOw0KDQogICAgICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoY29tYmluZWRCbG9iKTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBmdW5jdGlvbiBzZXR1cFhIUkludGVyY2VwdG9yKCkgew0KICAgICAgICBpZiAod2luZG93LnhockludGVyY2VwdG9ySW5zdGFsbGVkKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBjb25zdCBvcmlnaW5hbE9wZW4gPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbjsNCiAgICAgICAgY29uc3Qgb3JpZ2luYWxTZW5kID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7DQoNCiAgICAgICAgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbihtZXRob2QsIHVybCwgLi4uYXJncykgew0KICAgICAgICAgIHRoaXMuX3VybCA9IHVybDsNCiAgICAgICAgICB0aGlzLl9tZXRob2QgPSBtZXRob2Q7DQogICAgICAgICAgdGhpcy5fYXJncyA9IGFyZ3M7DQogICAgICAgICAgDQogICAgICAgICAgbGV0IGZpbmFsVXJsID0gdXJsOw0KICAgICAgICAgIA0KICAgICAgICAgIGZvciAoY29uc3QgW2ZpbGVuYW1lLCBibG9iVXJsXSBvZiBPYmplY3QuZW50cmllcyh3aW5kb3cubWVyZ2VkQmxvYlVybHMpKSB7DQogICAgICAgICAgICBpZiAodXJsLmluY2x1ZGVzKGZpbGVuYW1lKSkgew0KICAgICAgICAgICAgICBmaW5hbFVybCA9IGJsb2JVcmw7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICByZXR1cm4gb3JpZ2luYWxPcGVuLmNhbGwodGhpcywgbWV0aG9kLCBmaW5hbFVybCwgLi4uYXJncyk7DQogICAgICAgIH07DQoNCiAgICAgICAgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiguLi5hcmdzKSB7DQogICAgICAgICAgY29uc3QgeGhyID0gdGhpczsNCiAgICAgICAgICANCiAgICAgICAgICBpZiAoIXdpbmRvdy5hc3NldHNSZWFkeSkgew0KICAgICAgICAgICAgY29uc3QgY2hlY2tSZWFkeSA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5hc3NldHNSZWFkeSkgew0KICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tSZWFkeSk7DQogICAgICAgICAgICAgICAgb3JpZ2luYWxTZW5kLmFwcGx5KHhociwgYXJncyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDUwKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgDQogICAgICAgICAgcmV0dXJuIG9yaWdpbmFsU2VuZC5hcHBseSh0aGlzLCBhcmdzKTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHdpbmRvdy54aHJJbnRlcmNlcHRvckluc3RhbGxlZCA9IHRydWU7DQogICAgICB9DQoNCiAgICAgIGZ1bmN0aW9uIHNldHVwRmV0Y2hJbnRlcmNlcHRvcigpIHsNCiAgICAgICAgaWYgKHdpbmRvdy5mZXRjaEludGVyY2VwdG9ySW5zdGFsbGVkKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgY29uc3Qgb3JpZ2luYWxGZXRjaCA9IHdpbmRvdy5mZXRjaDsNCiAgICAgICAgd2luZG93LmZldGNoID0gZnVuY3Rpb24odXJsLCAuLi5hcmdzKSB7DQogICAgICAgICAgbGV0IGZpbmFsVXJsID0gdXJsOw0KICAgICAgICAgIA0KICAgICAgICAgIGZvciAoY29uc3QgW2ZpbGVuYW1lLCBibG9iVXJsXSBvZiBPYmplY3QuZW50cmllcyh3aW5kb3cubWVyZ2VkQmxvYlVybHMpKSB7DQogICAgICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgdXJsLmluY2x1ZGVzKGZpbGVuYW1lKSkgew0KICAgICAgICAgICAgICBmaW5hbFVybCA9IGJsb2JVcmw7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICByZXR1cm4gb3JpZ2luYWxGZXRjaC5jYWxsKHRoaXMsIGZpbmFsVXJsLCAuLi5hcmdzKTsNCiAgICAgICAgfTsNCg0KICAgICAgICB3aW5kb3cuZmV0Y2hJbnRlcmNlcHRvckluc3RhbGxlZCA9IHRydWU7DQogICAgICB9DQoNCiAgICAgIGFzeW5jIGZ1bmN0aW9uIHByZXBhcmVHYW1lQXNzZXRzKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHdpbmRvdy5hc3NldHNSZWFkeSA9IGZhbHNlOw0KICAgICAgICAgIGRlbGV0ZSB3aW5kb3cueGhySW50ZXJjZXB0b3JJbnN0YWxsZWQ7DQogICAgICAgICAgZGVsZXRlIHdpbmRvdy5mZXRjaEludGVyY2VwdG9ySW5zdGFsbGVkOw0KICAgICAgICAgIHdpbmRvdy5tZXJnZWRCbG9iVXJscyA9IHt9Ow0KICAgICAgICAgIA0KICAgICAgICAgIHNldHVwWEhSSW50ZXJjZXB0b3IoKTsNCiAgICAgICAgICBzZXR1cEZldGNoSW50ZXJjZXB0b3IoKTsNCiAgICAgICAgICANCiAgICAgICAgICBjb25zdCBmaWxlc1RvTWVyZ2UgPSBbDQogICAgICAgICAgICB7IGZpbGVuYW1lOiAnQnVpbGQvZ2FtZS5kYXRhLnVuaXR5d2ViJywgcGFydHM6IDMgfQ0KICAgICAgICAgIF07DQogICAgICAgICAgDQogICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzVG9NZXJnZSkgew0KICAgICAgICAgICAgY29uc3QgYmxvYlVybCA9IGF3YWl0IG1lcmdlU3BsaXRGaWxlKGZpbGUuZmlsZW5hbWUsIGZpbGUucGFydHMpOw0KICAgICAgICAgICAgaWYgKGJsb2JVcmwpIHsNCiAgICAgICAgICAgICAgd2luZG93Lm1lcmdlZEJsb2JVcmxzW2ZpbGUuZmlsZW5hbWVdID0gYmxvYlVybDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgDQogICAgICAgICAgd2luZG93LmFzc2V0c1ByZXBhcmVkID0gdHJ1ZTsNCiAgICAgICAgICB3aW5kb3cuYXNzZXRzUmVhZHkgPSB0cnVlOw0KICAgICAgICAgIA0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIHdpbmRvdy5hc3NldHNQcmVwYXJlZCA9IGZhbHNlOw0KICAgICAgICAgIHdpbmRvdy5hc3NldHNSZWFkeSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgcHJlcGFyZUdhbWVBc3NldHMoKS50aGVuKCgpID0+IHsNCiAgICAgICAgaW5pdFVuaXR5KCk7DQogICAgICB9KTsNCg0KICAgICAgZnVuY3Rpb24gaW5pdFVuaXR5KCkgew0KICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWNhbnZhcyIpOw0KICAgICAgICB2YXIgY29uZmlnID0gew0KICAgICAgICAgIGRhdGFVcmw6ICJCdWlsZC9nYW1lLmRhdGEudW5pdHl3ZWIiLA0KICAgICAgICAgIGZyYW1ld29ya1VybDogIkJ1aWxkL2dhbWUuZnJhbWV3b3JrLmpzLnVuaXR5d2ViIiwNCiAgICAgICAgICBjb2RlVXJsOiAiQnVpbGQvZ2FtZS53YXNtLnVuaXR5d2ViIiwNCiAgICAgICAgICBzdHJlYW1pbmdBc3NldHNVcmw6ICJTdHJlYW1pbmdBc3NldHMiLA0KICAgICAgICAgIGNvbXBhbnlOYW1lOiAiRnJlZXplTm92YSIsDQogICAgICAgICAgcHJvZHVjdE5hbWU6ICJDcmF6eSBEcmlmdGVyIiwNCiAgICAgICAgICBwcm9kdWN0VmVyc2lvbjogIjAuMSIsDQogICAgICAgIH07DQogICAgICAgIHZhciBzY2FsZVRvRml0Ow0KICAgICAgICB0cnkgew0KICAgICAgICAgIHNjYWxlVG9GaXQgPSAhIUpTT04ucGFyc2UoInRydWUiKTsNCiAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgIHNjYWxlVG9GaXQgPSB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gcHJvZ3Jlc3NIYW5kbGVyKHByb2dyZXNzKSB7DQogICAgICAgICAgdmFyIHBlcmNlbnQgPSBwcm9ncmVzcyAqIDEwMCArICclJzsNCiAgICAgICAgICBjYW52YXMuc3R5bGUuYmFja2dyb3VuZCA9ICdsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHdoaXRlLCB3aGl0ZSAnICsgcGVyY2VudCArICcsIHRyYW5zcGFyZW50ICcgKyBwZXJjZW50ICsgJywgdHJhbnNwYXJlbnQpIG5vLXJlcGVhdCBjZW50ZXInOw0KICAgICAgICAgIGNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICcxMDAlIDFyZW0nOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gb25SZXNpemUoKSB7DQogICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNhbnZhcy5wYXJlbnRFbGVtZW50Ow0KICAgICAgICAgIHZhciB3Ow0KICAgICAgICAgIHZhciBoOw0KDQogICAgICAgICAgaWYgKHNjYWxlVG9GaXQpIHsNCiAgICAgICAgICAgIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgICAgICAgIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQoNCiAgICAgICAgICAgIHZhciByID0gNTQwIC8gOTYwOw0KDQogICAgICAgICAgICBpZiAodyAqIHIgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHsNCiAgICAgICAgICAgICAgdyA9IE1hdGgubWluKHcsIE1hdGguY2VpbChoIC8gcikpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaCA9IE1hdGguZmxvb3IodyAqIHIpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB3ID0gOTYwOw0KICAgICAgICAgICAgaCA9IDU0MDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBjYW52YXMuc3R5bGUud2lkdGggPSB3ICsgInB4IjsNCiAgICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gY2FudmFzLnN0eWxlLmhlaWdodCA9IGggKyAicHgiOw0KICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSBoKSAvIDIpICsgInB4IjsNCiAgICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoKHdpbmRvdy5pbm5lcldpZHRoIC0gdykgLyAyKSArICJweCI7DQogICAgICAgIH0NCg0KICAgICAgICBjcmVhdGVVbml0eUluc3RhbmNlKGNhbnZhcywgY29uZmlnLCBwcm9ncmVzc0hhbmRsZXIpLnRoZW4oZnVuY3Rpb24oaW5zdGFuY2UpIHsNCiAgICAgICAgICBjYW52YXMgPSBpbnN0YW5jZS5Nb2R1bGUuY2FudmFzOw0KICAgICAgICAgIG9uUmVzaXplKCk7DQogICAgICAgICAgZ2FtZUluc3RhbmNlID0gaW5zdGFuY2U7DQogICAgICAgIH0pOw0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpOw0KICAgICAgICBvblJlc2l6ZSgpOw0KICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KICA8L2Rpdj4NCjwvYm9keT4NCg0KPC9odG1sPg==";
