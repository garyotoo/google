window.game = "DQo8IS0tIFVsdGltYXRlIEdhbWUgU3Rhc2ggZmlsZS0tPiANCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPg0KDQoNCg0KPGh0bWw+PGhlYWQ+DQogICAgPHRpdGxlPlBJQ08tOCBDYXJ0cmlkZ2U8L3RpdGxlPg0KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIHVzZXItc2NhbGFibGU9bm8iPg0KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCiAgICANCiAgICAgICAgLy8gRGVmYXVsdCBzaGVsbCBmb3IgUElDTy04IDAuMi4yIChpbmNsdWRlcyBAd2VlYmxlJ3MgZ2FtZXBhZCBtb2QgMS4wKQ0KICAgICAgICAvLyBUaGlzIGZpbGUgaXMgYXZhaWxhYmxlIHVuZGVyIGEgQ0MwIGxpY2Vuc2UgaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL3NoYXJlLXlvdXItd29yay9wdWJsaWMtZG9tYWluL2NjMC8NCiAgICAgICAgLy8gKG5vdGU6ICJ0aGlzIGZpbGUiIGRvZXMgbm90IGluY2x1ZGUgYW55IGNhcnRyaWRnZSBvciBjYXJ0cmlkZ2UgYXJ0d29yayBpbmplY3RlZCBpbnRvIGEgZGVyaXZhdGl2ZSBodG1sIGZpbGUgd2hlbiB1c2luZyB0aGUgUElDTy04IGh0bWwgZXhwb3J0ZXIpDQogICAgDQogICAgICAgIC8vIG9wdGlvbnMNCiAgICANCiAgICAgICAgLy8gZnVsbHNjcmVlbiwgc291bmQsIGNsb3NlIGJ1dHRvbiBhdCB0b3Agd2hlbiBwbGF5aW5nIG9uIHRvdWNoc2NyZWVuDQogICAgICAgIHZhciBwOF9hbGxvd19tb2JpbGVfbWVudSA9IHRydWU7DQogICAgDQogICAgICAgIC8vIHA4X2F1dG9wbGF5IHRydWUgdG8gYm9vdCB0aGUgY2FydHJpZGdlIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgcGFnZSBsb2FkIHdoZW4gcG9zc2libGUNCiAgICAgICAgLy8gaWYgdGhlIGJyb3dzZXIgY2FuIG5vdCBjcmVhdGUgYW4gYXVkaW8gY29udGV4dCBvdXRzaWRlIG9mIGEgdXNlciBnZXN0dXJlIChlLmcuIG9uIGlPUyksIHA4X2F1dG9wbGF5IGhhcyBubyBlZmZlY3QNCiAgICAgICAgdmFyIHA4X2F1dG9wbGF5ID0gdHJ1ZTsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9zdGF0ZSBpcyBkZWZpbmVkLCBQSUNPLTggd2lsbCBzZXQgLmlzX3BhdXNlZCwgLnNvdW5kX3ZvbHVtZSBhbmQgLmZyYW1lX251bWJlciBlYWNoIGZyYW1lIA0KICAgICAgICAvLyAodXNlZCBmb3IgZGV0ZXJtaW5pbmcgYnV0dG9uIGljb25zKQ0KICAgICAgICB2YXIgcGljbzhfc3RhdGUgPSBbXTsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9idXR0b25zIGlzIGRlZmluZWQsIFBJQ08tOCByZWFkcyBlYWNoIGludCBhcyBhIGJpdGZpZWxkIGhvbGRpbmcgdGhhdCBwbGF5ZXIncyBidXR0b24gc3RhdGVzDQogICAgICAgIC8vIDB4MSBsZWZ0LCAweDIgcmlnaHQsIDB4NCB1cCwgMHg4IHJpZ2h0LCAweDEwIE8sIDB4MjAgWCwgMHg0MCBtZW51DQogICAgICAgIC8vICh1c2VkIGJ5IHA4X3VwZGF0ZV9nYW1lcGFkcykNCiAgICAgICAgdmFyIHBpY284X2J1dHRvbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07IC8vIG1heCA4IHBsYXllcnMNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9tb3VzZSBpcyBkZWZpbmVkLCBQSUNPLTggcmVhZHMgdGhlIDMgaW50ZWdlcnMgYXMgWCwgWSBhbmQgYSBiaXRmaWVsZCBmb3IgYnV0dG9uczogMHgxIExNQiwgMHgyIFJNQg0KICAgICAgICB2YXIgcGljbzhfbW91c2UgPSBbXTsNCiAgICANCiAgICAgICAgLy8gdXNlZCB0byBkaXNwbGF5IG51bWJlciBvZiBkZXRlY3RlZCBqb3lzdGlja3MNCiAgICAgICAgdmFyIHBpY284X2dhbWVwYWRzID0ge307DQogICAgICAgIHBpY284X2dhbWVwYWRzLmNvdW50ID0gMDsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9ncGlvIGlzIGRlZmluZWQsIHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gZ3BpbyBwaW5zIHdpbGwgcmVhZCBhbmQgd3JpdGUgdG8gdGhlc2UgdmFsdWVzDQogICAgICAgIHZhciBwaWNvOF9ncGlvID0gbmV3IEFycmF5KDEyOCk7DQogICAgDQogICAgICAgIC8vIFdoZW4gcGljbzhfYXVkaW9fY29udGV4dCBjb250ZXh0IGlzIGRlZmluZWQsIHRoZSBodG1sIHNoZWxsICh0aGlzIGZpbGUpIGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBhbmQgbWFuYWdpbmcgaXQuDQogICAgICAgIC8vIFRoaXMgbWFrZXMgc2F0aXNmeWluZyBicm93c2VyIHJlcXVpcmVtZW50cyBlYXNpZXIgLS0gZS5nLiBpbml0aWFsaXNpbmcgYXVkaW8gZnJvbSBhIHNob3J0IHNjcmlwdCBpbiByZXNwb25zZSB0byBhIHVzZXIgYWN0aW9uLg0KICAgICAgICAvLyBPdGhlcndpc2UgUElDTy04IHdpbGwgdHJ5IHRvIGNyZWF0ZSBhbmQgdXNlIGl0cyBvd24gY29udGV4dC4NCiAgICANCiAgICAgICAgdmFyIHBpY284X2F1ZGlvX2NvbnRleHQ7DQogICAgDQogICAgDQogICAgICAgIC8vIG1lbnUgYnV0dG9uIGFuZCBjb250cm9sbGVyIGdyYXBoaWNzDQogICAgICAgIHA4X2dmeF9kYXQ9ew0KICAgICAgICAgICAgICAgICJwOGJfcGF1c2UxIjogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFPVWxFUVZSSXgyTmdHUGJnLzhjWC8wRjQ2RnRBTTR2b2JnSFZMUm93QzZobTBZQmJRTEZGb3hhTTRGUTBkSFB5MEMxTmgyNk5OdWdCQUFuaXpOaU1mdmJHQUFBQUFFbEZUa1N1UW1DQyIsDQogICAgInA4Yl9jb250cm9scyI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFRMGxFUVZSSXgyTmdHQVhFZ1A4ZlgveW5CYWFwNFhCTGhxY0YxSXlmWVdRQnJaTHowTEVBbHpxcXhRRlZMY0FtVDNNTHFKcVRhVzdCNENxTGFGNGZqSUlCQndCTC9CMnZxdFBWSXdBQUFBQkpSVTVFcmtKZ2dnPT0iLA0KICAgICJwOGJfZnVsbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFOMGxFUVZSSXgyTmdHUExnLzhjWC8ybUo2V2NCclVKbTRDd2dPU2dHclFWRUI4V29CYU1XREdNTGhtNU9IbnFsNmRDdDBZWThBQUE5b1ptKzlaOXhRQUFBQUFCSlJVNUVya0pnZ2c9PSIsDQogICAgInA4Yl9wYXVzZTAiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBS1VsRVFWUkl4Mk5nR0hiZy84Y1gvN0ZoY3RXTldqQnF3YWdGb3hhTVdqQnF3YWdGNUZrdzVBQUFQYUdadnNJVXRYVUFBQUFBU1VWT1JLNUNZSUk9IiwNCiAgICAicDhiX3NvdW5kMCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFOa2xFUVZSSXgyTmdHREhnLzhjWC81SHgwTEVBM2NDaFl3RXVnd2F2QmNSRzRxZ0ZveFlNWnd1R2ZrNGVmcVhwOEtuUkJqMEFBTXo3Y0xEbkc0RmVBQUFBQUVsRlRrU3VRbUNDIiwNCiAgICAicDhiX3NvdW5kMSI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFQVWxFUVZSSXgyTmdHREhnLzhjWC81SHgwTEVBM2NDaFl3RXVnd2haUUxRRHFHNEJzWkZJS01oR0xSaTFZQ2hiTVBSejh2QXJUWWRQalRib0FRQ1NWZ3BYVVdRQU1BQUFBQUJKUlU1RXJrSmdnZz09IiwNCiAgICAicDhiX2Nsb3NlIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQVUwbEVRVlJJeDJOa29ERmdwSnNGL3orKytJOGl3UzlCa3VXNDlBK2NCY1JhUkVnZi9Td2cxU0ppMWRIZkFrSUc0RXlPT0lKeTRDd2cxaUpDaVdEVUF2SXRHTHFwYU9qbTVLRmZtZzc5R20zSXRpb0FsK21BR1ZZSVpVVUFBQUFBU1VWT1JLNUNZSUk9IiwNCiAgICANCiAgICAiY29udHJvbHNfbGVmdF9wYW5lbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU3dBQUFFc0NBWUFBQUI1Zlk1MUFBQUVJMGxFUVZSNDJ1M2RNVTdEUUJDRzBUamFtOURUY1A4anBFbWZzd1M1aUhCaEFzTHhldi9odlFZNnBHWHlaUlRRK25RQ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFIcWJIRUV0bCt2dDdoUytmTHkvbVhIQlFxeEVpLzZhSS9BaUZXOVNuQjJCV0RrREJBdEFzQURCQWhBc0FNRUNCQXRBc0FBRUN4QXNBTUVDRUN4QXNBQUVDMEN3T05KOHRZdnJYUkFzSW1LMTlqMElGc1BHU3JRUUxDSmlOVitldDd4QVQ3UVFMSWFOMWRyM29vVmdNV3lzUkF2QklpcFdvb1ZnRVJVcjBVS3dpSXFWYUNGWVJNVkt0QkFzb21JbFdnZ1dVYkVTTFFTTHFGaUpGb0pGVkt4RUM4RWlLbGFpaFdBUkZTdlJRckRZSlNTVmZoYUNCU0JZQUlJRkNCYkFIcG9qNEJsL3NjT0dCV0RENGxYOGl3RTJMQURCQWdRTFFMQUFCQXNRTEFEQkFoQXNRTEFBQkF0QXNBREJBaEFzQU1FQ0JBdEFzQUFFQ3hBc0FNRUNFQ3hBc0FBRUN4QXNBTUVDRUN4QXNNaDF1ZDd1VHNIWlZEY1p5Rm84WXQ1c1ZKNk55VUFhU05FeUl5bWFYd1plcElLZDRtd29RYkFGQzBDd0FNRUNFQ3dBd1FJRUMwQ3dBQVFMRUN3QXdRSVFMRUN3QUFRTFFMQUF3UUk0VUhNRTIvMTBRWnE3dXN5Qk9iQmhSUXdwbUJVYjFuQUR1UGJ1YVVEL3AyZXpNSCsxYWRtd2hvc1ZmQmN4YjJTQ0pWYUlsbUFoVm9pV1lJa1ZvaVZhZ2lWV2lKWmdpWlZZSVZxQ0pWYUlsbWdKbGxnaFdvSWxWaUJhZ2lWV2lKWm9DWlpZSVZxQ0pWWWdXb0lsVmlCYWdnVUlsbmMwc1BFTGxtZ2hWbUlsV0tLRldBbVdhSUZZQ1pab0lWWUlsbWdoVm9JbFdpQldnaVZhaUpWZ0lWcUlsV0NKRm9pVllJa1dZaVZZaUJaaUpWaWloVmlKMVhiTkVXeUwxbU1RUll2ZnZJR0psUTFybUUwTHpJb055eUJpRHJCaEFZSUZJRmlBWUFFSUZvQmdBWUlGSUZnQWdnVUlGb0JnQVFnV0lGZ0FnZ1VnV0lCZ0RjK05uMUQvdGRIOFl1cHdnWnk1cUc0eWtLSWxWbVpEc0Rqc2hTbGF6cVFxSDdwNzkzUTJDQmFBWUFHQ0JTQllBSUlGQ0JhQVlBRUlGaUJZQUlJRklGaUFZQUVJRm9CZ0FZSUZJRmdBZ2dVSUZvQmdBUWdXSUZnQWdnVWdXSUJnQVFnV3dFTnpCS3haUHViOUNKN1dqQTBMc0dGUlYrOU41K2pORGhzV2dHQUJnZ1VnV0FDQ3hXNTZmZ2p1QTNjRWl6OVovbld3UjBpV1A4UC9ZQ0ZZREJzdHNVS3dpSWlXV0NGWVJFUkxyQkFzSXFJbFZnZ1dFZEVTS3dTTGlHaUpGWUpGUkxURUNzRWlJbHBpaFdBUkVTMnhRckNJaUpaWUlWaEVSRXVzRUN3aW9pVldDQll4MFJJckJJdW9hSWtWcitZaEZIVFp0TUNHQlFnV2dHQUJDQllnV0FDQ0JTQllnR0FCQ0JhQVlBR0NCU0JZQUlJRkNCYmoydU9SOHM2QUViaGV4Z3NXWXJpM1NLaEtjemNYQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU1BMm4rZTBVTUR6aDN5VEFBQUFBRWxGVGtTdVFtQ0MiLA0KICAgIA0KICAgIA0KICAgICJjb250cm9sc19yaWdodF9wYW5lbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU3dBQUFGZUNBWUFBQUEvbHlLL0FBQUtIa2xFUVZSNDJ1M2RBWkthV0JBR1lFM3R2ZkJtTUNmRG5HeldKTGhMSEhCR0J0N3JodStyU2lXYmJBazhwMys3VWVGMEFnQUFBQUFBQUFBQUFPQVF6cGFBek41dkRsT3NOd0lMaEpYUVN1SWZQL1lvWk1HY3hROUxnTEJ5ZkFJTFFHQUJBZ3RBWUFFSUxFQmdBUWdzQUlFRkNDd0FnUVVnc0FDQkJTQ3dBQVFXSUxBQUJCWXN0L2NMM0xtQTMvOWNjUlJGVFJxdVpJaWd5bEtzcmp3S0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFNWjB0QVh6MC92N2VMaTZxOC9uTkNnb3MyQ0tZbXR0dmwrRS91dzAyY1gvTTZ5M0lmbHB4Z1FWTHU2ZnVTY0M4SERJUDRmZjA4WFZod05Nd3VmM3EzejlxdnpQK2ZUVWdoMStQK2lIa0FQNExpNm1RYWlydFR6TzNUNTR0RUZSaHU1bVpyazl3d1lHRHFvMCtkczEwWFlJTGpoUlVqZ09JMkozMGV6cVJ2Y2RqQW1IMWR6ZXl1NktlQ0M3ZEZpUXQ1c01VOG1Nd2UvWWhWOWN4MWpodVFLZWhzd1JXQ0t2bTRHdlJDQzNJMFZVWWhUNkdsdk5hSUt5RUZpQ3NoQllJSzZFbHRLQnVBUW9yYXdZS3o5b0JheFdjdCt1WHJhR1BmMENoWXV1ZGg3R09rS2t6VUdUcmhwWk9GVFljQlkweDFoUjBBN3BXUUZGNU1ZRERGSlN4cGRCb2FEVmdwOTNWazNzSnptbWpkakY3NnJMYytabXEzZFh2SDhLYktDRjErblBuNXN2RFAxMkhYMU9tL3Y5ZnVraDNkNDYyMXBDMXUyb0Q3Y3Y0K3ZEdHdzY0plWi9CU09zTktidXIydWRWdHJxbFZ0VDdERHFYQlFsZjdhZHVvMVVvRlBzanJ6dm9ycGFGVmRHYk9Vd0VaSFBFdFllTVlkWFU2alpxWHpjcVFtaU45c0hIU09DRnNhUXB2TjBtU0lkVDlXb0tvM1V3RmtMRWtTVGFaV3RxaDZleEVJSyt1a2U5eHRhNDB6cEtsd3ZHd2MrMzJRZitOSDJWZlRNV1FzQlJKTU1YcTJ0OWJjWllDRjhya3JaMFVVWWVmV3A5T2ZrZTV0bCtobjRvSTBvVlNPbk9aZmpqcisvMC9ZeTZMc08rWFd1c1VhMXRRb3JBS2p3T3BocDVLblZaem1OQjdZTE0rQldVR3Z2c1BCWThMNDVlSWM3dWMvRnZBTnhQK0dkYUorZXdLT202MDIxOTIraGMxc1VhQ1N3cWp6c1Z0blZOdUZUWDB1dFZZM3NDaXl4ZHhOc2V0NVYxbnpPdWtjQmlienJIc0Y4Q0M2RVZjQ3hFWUlIQUVsZ0FBZ3RBWUFFQ0MwQmdBUWdzaU9kaUNRUVd4OUlKTElFRndzb3hDQ3hZVzhZTDA3bVluc0RpWUFVNStrSnZ4dEhxOG5BTUFoSXFoVld4cTJtNmdOL1hBOHNGL09DVERxS0FMbUVIY1YrYjZ3NmZEMGpaWWJrSlJhRDl6ZGlKNnJBb3BTdTh2V3VXTG10OFM3SURQQytRb29ObzNVaDFjaCtyM2tqVmlYZDRIaUJ0aGFKMHEvcVp0ZkZUQ1o5MFBKVUNvUSs0SHRYMnpUMEo0ZXNkVDFOd204MW9OR3dEcnNWN2hXMDN4a0VJV2lqUlF1dGhmNW9LMjIram45dUR3NDZGRVVKaXFyT3F0Ui9HUVVqdzZ2NFFXalhPRy9VQndzbzRDQXNLcHErOC9XTEJNV3l6RDlMaDljWkJTRFNTVEFSSXYrRzIycHBkblhFUTFpdmlOc2grckhwQ2ZnakVUUjU3RCtzT3VxeDFnNnRmVXRURDQvVFJnbXBQM2RWWjZWQXJKRTUvdnNmV2xicisweGYzNlhMNmVCV0Q2Mm4rS2dwVC8vOHAwbkZGWFcrQlJib3U2L2NQNFUzUVFEMmR2djdsNEc0NGxqZHJEVHZ0c3FKLzEyOG42OXc3ZHdVcnZmSjdtMzNUOVcyOE13aTZMTjBWS0NxOEdFQ1NzY1ZvYUUxQk42QnJCVFlxTXFGbEhTSFZHS016K0Y2bmFoU0V3cUdsNEt3ZEtEeHJCcXhaZ0wwQ1hCUld6bHVCMEJKV2dOQVNWaUMwaEJWUXIwQzlYVDhkVmo3K0FRbENxei9vR3ZUQ0NuSjJGNGZwdG81NjNLRFQwRmtDdFF0NWIxM0h4TzNJaklDd3M2Sk9IMXg3UENaZ3Z0dEsyNDNzNVRpQWhRVWZ2VHVKZXVOVm9GNXdoUnVySmtZL1FRV0M2NE5xWGRkTU55V29nRSs3bVh0NHRSdHZ1NTBKS1NmVFgrUXVzQnl5NnhyKzJFMzg4L2p2cnVmeitlY3JvWGo2KzdiMXM0K2YrWGJ4QW12L2hmSDZFK01IdWxqbk5RcVpib05OZEV2Q0Q0SGxoeDR2TmdMTFdHR3NBRUoyVWs3Y0F1RzdLVytOQTltQ3lvY1BnZkJCNWVzZFFQeWdjaHhBeE83RUpVcUFWTjJJaThBQllZdlpaWGFCRkYySEd4a1lFVUdub2JNRTFnNHJOK01VV3BDaXF6QUtuZHp1SElTVjBBS0VsZEFDWVlYUWdtQUZLS3lzR1NnOGF3ZXNWWERlcmwrMmhqNytBWVdLclhjZXhqcENwczVBa2EwYldqcFYySEFVTk1aWVU5QU42Rm9CUmVYRkFBNVRVTWFXUXFPaDFZQkEzZFdlaW5MTlk5Rmx3WXJkVmRUSDI4dTY3R2x0eU90SDl1NXErR08zMW1PZWI3SjNXdmQ5dngvTGlycUhkUWNpdk9KbjdTYTIzbTlkRmpxc0lOMVY5azVydzg1S2x3VVpYdW16ZEJRbDkxT1hoUTdydFlLNWYzemh1dlcyTW5SYWhUcXJzZXZEOHdBQzY0bkxsdU5ncHRDcUVGYmpkYjhvSVFnNmtrUWJoV3J1ajdFUUhkWnI0MkJYZXR1Uk9xMUtuZFdITHN0WWlNRDYyamg0cmJIeENLRVZJS3pHNjI4c2hPaWppTEhVV0lnTzY2VnhwS1lhblZhUXppclU4NERBaXR4ZGhmcXdZc25RQ2hoV1laOFhCRllvdDVwOU8xSm9SUTJyU004RFJPeXd3cDR6MldyZm9wOG5jaDRMSGRaejE2QmQzK3FkVnVReE1QcnpnY0JTSUFWREswbFlDU3dFMWt3QnB6aXh1MFpvSlFxcmRNOFBBcXQwSUx3bDJNZkZvWlV0ckp4NFIyRHR3SkxReXRoWmdjQTZZR2dKS3hCWUtVSkxXSUhBU2hGYXdnb0VWb3JRRWxZZ3NGS0VsckFDZ1pVbXRJUVZDS3p3cGtaQ1FHQ0ZEYXZ6UUdpQndBb2ZWbzhqb2RBQ2dSVTZySVFXQ0t4VVlTVzBZT2VCbGVtcUFLOThkQ0ZyYUxsS0F3SnJ1cURma2hYeXk1K3p5dHhwdVdvREFtdmFaWTlobFRpMExzb0lab0lnZWlHdnRZOVpycFh1bXU3b3NPWjFlKzJza25kYW5WSkNZTTBIUXh0d24xYi9ibUQwMEhMQ0hZSDF2SURmZ2hidVpsOWt6dEJwT2VFT1Q4SWhVdkdXMnArSTU0cWN2MEtIOWJsdUtKWm16NTFWOUU1cnRQNmRNa0pnemJzT3YxK09FbFpCUSt2eThId0FFVWVSbzIvZk9JZ09LOGxZR09GS29iVTdMZU1ndkZnd3d3dDhmK1N1b3RiKy9GcjNZZE9ObjBZSVdLeFJSNkFhKzJVY3hFaTRmQ3hzU3hSbzdURXd5bmc0V20vaklFUjdwZmVkUHQwVk9xd1VYVmFtVzNHVjZMUjBWeEQwRlQ5cko3SGxmdXV1MEdHdDEyWDFheFptbHM2cVZLYzFXbC9kRmF6eHlyL0cyK3g3NlNMV1BJN1J4MGgwVjdCQ1FiVnJmUzVyVDBXNVltRGRQM2ZsY2pLZ3FJN3hZZ0JNakMwK2dXMU5RVGVnYXdVMktqS2haUjBoMVJpak0vaGVwMm9VaE1LaHBlQ3NIU2c4YXdhc1dZQzlBbHdVVnM1YmdkQVNWb0RRRWxZZ3RJUVZVSzlBdlYwL0hWWSsvZ0VKUXFzLzZCcjB3Z3B5ZGhlSDZiYU9ldHlnMDlCWkFyVUxlVzlkeDlCVkdRRmh4MFdkUHJqMmVFekFmTGVWdGh2WnkzRUFDd3MrZW5jeWRGU0NDZ1JYM0xGcVl2UVRWQ0M0UHFqV2RjMTBVNElLK0xTYnVZZFh1L0cyMjVtUWNqS2R3emhiZ3VVQk12eXhtL2puOGQ5ZHorZnp6MWRDOGZiYlplYXgvdnE3MitPK2VTWVFXTHpjZVkxQ3B0dGdFOTJTOEFPQnhaSXU3UFVuUnZjRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDd3dML2N2QkloMDkraEpBQUFBQUJKUlU1RXJrSmdnZz09IiwNCiAgICANCiAgICAgICAgfTsNCiAgICANCiAgICANCiAgICAgICAgLy8gYWRkZWQgMC4yLjE6IHdvcmstYXJvdW5kIGZvciBpT1MvU2FmYXJpIHJ1bm5pbmcgZnJvbSBhbiBpRnJhbWUgKGUuZy4gZnJvbSBpdGNoLmlvIHBhZ2UpOg0KICAgICAgICAvLyB0b3VjaCBldmVudHMgb25seSByZWdpc3RlciBhZnRlciBhZGRpbmcgZHVtbXkgbGlzdGVuZXJzIG9uIGRvY3VtZW50Lg0KICAgIA0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywge30pOw0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB7fSk7DQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywge30pOw0KICAgIA0KICAgIA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBwaWNvLTggMC4yLjI6IGFsbG93IGRyb3BwaW5nIGZpbGVzDQogICAgICAgIHZhciBwOF9kcm9wcGVkX2NhcnQgPSBudWxsOw0KICAgICAgICB2YXIgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSAiIjsNCiAgICAgICAgZnVuY3Rpb24gcDhfZHJvcF9maWxlKGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJAQCBkcm9wcGluZyBmaWxlLi4uIik7DQogICAgICAgIA0KICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICANCiAgICAgICAgICAgIGlmIChlLmRhdGFUcmFuc2ZlciAmJiBlLmRhdGFUcmFuc2Zlci5maWxlcyAmJiBlLmRhdGFUcmFuc2Zlci5maWxlc1swXSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyByZWFkIGZyb20gZmlsZQ0KICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHA4X2Ryb3BwZWRfY2FydF9uYW1lID0gJ3VudGl0bGVkLnA4JzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5uYW1lICE9PSAndW5kZWZpbmVkJykgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5uYW1lOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdLmZpbGVOYW1lICE9PSAndW5kZWZpbmVkJykgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5maWxlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgcDhfZHJvcHBlZF9jYXJ0ID0gcmVhZGVyLnJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YTppbWFnZS9wbmc7YmFzZTY0DQogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29kb19jb21tYW5kID0gOTsgLy8gcmVhZCBkaXJlY3RseSBmcm9tIHA4X2Ryb3BwZWRfY2FydCB3aXRoIGxpYmI2NCBkZWNvZGVyDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChlLmRhdGFUcmFuc2Zlci5maWxlc1swXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gcmVhZCBmcm9tIHVybCAob3IgZGF0YSB1cmwpDQogICAgICAgICAgICAgICAgdHh0ID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnVGV4dCcpOw0KICAgICAgICAgICAgICAgIGlmICh0eHQpew0KICAgICAgICAgICAgICAgICAgICBwOF9kcm9wcGVkX2NhcnRfbmFtZSA9ICJ1bnRpdGxlZC5wOC5wbmciOw0KICAgICAgICAgICAgICAgICAgICBwOF9kcm9wcGVkX2NhcnQgPSB0eHQ7DQogICAgICAgICAgICAgICAgICAgIGNvZG9fY29tbWFuZCA9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIG5vcChldnQpIHsNCiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGRyYWdvdmVyKGV2dCkgew0KICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBNb2R1bGUucGljbzhEcmFnT3ZlcigpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGRyYWdzdG9wKGV2dCkgew0KICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBNb2R1bGUucGljbzhEcmFnU3RvcCgpOw0KICAgICAgICB9DQogICAgDQogICAgICAgIC8vIGRvd25sb2FkIChwaWNvLTggMC4yLjRkIHdlYiBleHBvcnRzIGNhbiBzYXZlIGEgLndhdiBmaWxlKQ0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZF9icm93c2VyX2ZpbGUoZmlsZW5hbWUsIGNvbnRlbnRzKQ0KICAgICAgICB7DQogICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgaWYgKGZpbGVuYW1lLnN1YnN0cihmaWxlbmFtZS5sZW5ndGggLSA3KSA9PSAiLnA4LnBuZyIpDQogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnRzKSk7DQogICAgICAgICAgZWxzZSBpZiAoZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxlbmd0aCAtIDQpID09ICIud2F2IikNCiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnZGF0YTphdWRpby94LXdhdjtiYXNlNjQsJyArIGVuY29kZVVSSUNvbXBvbmVudChjb250ZW50cykpOw0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChjb250ZW50cykpOw0KICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVuYW1lKTsNCiAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTsNCiAgICAgICAgICBlbGVtZW50LmNsaWNrKCk7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTsNCiAgICAgICAgfQ0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIA0KICAgIA0KICAgICAgICB2YXIgcDhfYnV0dG9uc19oYXNoID0gLTE7DQogICAgICAgIGZ1bmN0aW9uIHA4X3VwZGF0ZV9idXR0b25faWNvbnMoKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBidXR0b25zIG9ubHkgYXBwZWFyIHdoZW4gcnVubmluZw0KICAgICAgICAgICAgaWYgKCFwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgaXNfZnVsbHNjcmVlbj0oZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBoYXNoIGJhc2VkIG9uOiBwaWNvOF9zdGF0ZS5zb3VuZF92b2x1bWUgIHBpY284X3N0YXRlLmlzX3BhdXNlZCBib3R0b21fbWFyZ2luIGxlZnQgaXNfZnVsbHNjcmVlbiBwOF90b3VjaF9kZXRlY3RlZA0KICAgICAgICAgICAgdmFyIGhhc2ggPSAwOw0KICAgICAgICAgICAgaGFzaCA9IHBpY284X3N0YXRlLnNvdW5kX3ZvbHVtZTsNCiAgICAgICAgICAgIGlmIChwaWNvOF9zdGF0ZS5pc19wYXVzZWQpIGhhc2ggKz0gMHgxMDA7DQogICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpICAgICBoYXNoICs9IDB4MjAwOw0KICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pICAgICAgICAgaGFzaCArPSAweDQwMDsNCiAgICANCiAgICAgICAgICAgIGlmIChwOF9idXR0b25zX2hhc2ggPT0gaGFzaCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2J1dHRvbl9pY29ucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwOF9idXR0b25zX2hhc2ggPSBoYXNoOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIkBAIHVwZGF0aW5nIGJ1dHRvbiBpY29ucyIpOw0KICAgIA0KICAgICAgICAgICAgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncDhfbWVudV9idXR0b24nKTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWwgPSBlbHNbaV07DQogICAgICAgICAgICAgICAgaW5kZXggPSBlbC5pZDsJCQkNCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gJ3A4Yl9zb3VuZCcpIGluZGV4ICs9IChwaWNvOF9zdGF0ZS5zb3VuZF92b2x1bWUgPT0gMCA/ICIwIiA6ICIxIik7IC8vIDEgaWYgdW5kZWZpbmVkDQogICAgICAgICAgICAgICAgaWYgKGluZGV4ID09ICdwOGJfcGF1c2UnKSBpbmRleCArPSAocGljbzhfc3RhdGUuaXNfcGF1c2VkID4gMCA/ICIxIiA6ICIwIik7ICAgICAvLyAwIGlmIHVuZGVmaW5lZA0KICAgIA0KICAgICAgICAgICAgICAgIG5ld19zdHIgPSAnPGltZyB3aWR0aD0yNCBoZWlnaHQ9MjQgc3R5bGU9InBvaW50ZXItZXZlbnRzOm5vbmUiIHNyYz0iJytwOF9nZnhfZGF0W2luZGV4XSsnIj4nOw0KICAgICAgICAgICAgICAgIGlmIChlbC5pbm5lckhUTUwgIT0gbmV3X3N0cikNCiAgICAgICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gbmV3X3N0cjsNCiAgICANCiAgICANCiAgICANCiAgICANCiAgICAgICAgICAgICAgICAvLyBoaWRlIGFsbCBidXR0b25zIGZvciB0b3VjaCBtb2RlIChjYW4gcGF1c2Ugd2l0aCBtZW51IGJ1dHRvbnMpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIGlzX3Zpc2libGUgPSBwOF9pc19ydW5uaW5nOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmICgoIXA4X3RvdWNoX2RldGVjdGVkIHx8ICFwOF9hbGxvd19tb2JpbGVfbWVudSkgJiYgZWwucGFyZW50RWxlbWVudC5pZCA9PSAicDhfbWVudV9idXR0b25zX3RvdWNoIikNCiAgICAgICAgICAgICAgICAgICAgaXNfdmlzaWJsZSA9IGZhbHNlOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBlbC5wYXJlbnRFbGVtZW50LmlkID09ICJwOF9tZW51X2J1dHRvbnMiKQ0KICAgICAgICAgICAgICAgICAgICBpc192aXNpYmxlID0gZmFsc2U7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pIA0KICAgICAgICAgICAgICAgICAgICBpc192aXNpYmxlID0gZmFsc2U7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKGlzX3Zpc2libGUpDQogICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXk9IiI7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5PSJub25lIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCiAgICAgICAgfQ0KICAgIA0KICAgIA0KICAgIA0KICAgICAgICBmdW5jdGlvbiBhYnMoeCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIHggPCAwID8gLXggOiB4Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBzdGVwIDAgZG93biAxIGRyYWcgMiB1cCAobm90IHVzZWQpDQogICAgICAgIGZ1bmN0aW9uIHBpY284X2J1dHRvbnNfZXZlbnQoZSwgc3RlcCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFwOF9pc19ydW5uaW5nKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICAgICAgcGljbzhfYnV0dG9uc1swXSA9IDA7DQogICAgDQogICAgICAgICAgICBpZiAoc3RlcCA9PSAyICYmIHR5cGVvZihwaWNvOF9tb3VzZSkgIT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBpY284X21vdXNlWzJdID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG51bSA9IDA7DQogICAgICAgICAgICBpZiAoZS50b3VjaGVzKSBudW0gPSBlLnRvdWNoZXMubGVuZ3RoOw0KICAgIA0KICAgICAgICAgICAgaWYgKG51bSA9PSAwICYmIHR5cGVvZihwaWNvOF9tb3VzZSkgIT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vICBubyBhY3RpdmUgdG91Y2hlczogcmVsZWFzZSBtb3VzZSBidXR0b24gZnJvbSBhbnl3aGVyZSBvbiBwYWdlLiAobWF5YmUgcmVkdW5kYW50PyBidXQganVzdCBpbiBjYXNlKQ0KICAgICAgICAgICAgICAgIHBpY284X21vdXNlWzJdID0gMDsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbaV07DQogICAgICAgICAgICAgICAgdmFyIHggPSB0b3VjaC5jbGllbnRYOw0KICAgICAgICAgICAgICAgIHZhciB5ID0gdG91Y2guY2xpZW50WTsNCiAgICAgICAgICAgICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICAgICAgICAgIHZhciBoID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgIA0KICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5taW4odyxoKSAvIDEyOw0KICAgICAgICAgICAgICAgIGlmIChyID4gNDApIHIgPSA0MDsNCiAgICANCiAgICAgICAgICAgICAgICAvLyBtb3VzZSAoMC4xLjEyZCkNCiAgICANCiAgICAgICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHBpY284X21vdXNlKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICAgICAgaWYgKGNhbnZhcykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlY3QudG9wLCByZWN0LnJpZ2h0LCByZWN0LmJvdHRvbSwgcmVjdC5sZWZ0LCB4LCB5KTsNCiAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHggPj0gcmVjdC5sZWZ0ICYmIHggPCByZWN0LnJpZ2h0ICYmIHkgPj0gcmVjdC50b3AgJiYgeSA8IHJlY3QuYm90dG9tKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBwaWNvOF9tb3VzZSA9IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh4IC0gcmVjdC5sZWZ0KSAqIDEyOCAvIChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigoeSAtIHJlY3QudG9wKSAqIDEyOCAvIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCA8IDIgPyAxIDogMA0KICAgICAgICAgICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybjsgLy8gY29tbWVudGVkIC0tIGJsb2NrcyBvdmVybGFwcGluZyBidXR0b25zDQogICAgICAgICAgICAgICAgICAgIH1lbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBpY284X21vdXNlWzJdID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICANCiAgICANCiAgICAgICAgICAgICAgICAvLyBidXR0b25zDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgYiA9IDA7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKHkgPCBoIC0gcio4KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gbm8gY29udHJvbGxlciBidXR0b25zIHVwIGhlcmU7IGluY2x1ZGVzIGNhbnZhcyBhbmQgbWVudSBidXR0b25zIGF0IHRvcCBpbiB0b3VjaCBtb2RlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKCh5IDwgaCAtIHIqNikgJiYgeSA+IChoIC0gcio4KSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVudSBidXR0b246IGhhbGYgYXMgaGlnaCBhcyBYIE8gYnV0dG9uDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJldGNoIGFjcm9zcyByaWdodC1oYW5kIGhhbGYgYWJvdmUgWCBPIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID4gdyAtIHIqMykgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAweDQwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHggPCB3LzIgJiYgeCA8IHIqNikNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RpY2sNCiAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2sgPSAweGY7IC8vIGRwYWQNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjeCA9IDAgKyByKjM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3kgPSBoIC0gciozOw0KICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgZGVhZHpvbmUgPSByLzM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHggPSB4IC0gY3g7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSB5IC0gY3k7DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzKGR4KSA+IGFicyhkeSkgKiAwLjYpIC8vIGhvcml6b250YWwgDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR4IDwgLWRlYWR6b25lKSBiIHw9IDB4MTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHggPiBkZWFkem9uZSkgYiB8PSAweDI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzKGR5KSA+IGFicyhkeCkgKiAwLjYpIC8vIHZlcnRpY2FsDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR5IDwgLWRlYWR6b25lKSBiIHw9IDB4NDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHkgPiBkZWFkem9uZSkgYiB8PSAweDg7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+IHcgLSByKjYpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dHRvbjsgZGlhZ29uYWwgc3BsaXQgZnJvbSBib3R0b20gcmlnaHQgY29ybmVyDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgbWFzayA9IDB4MzA7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIG9mIFtYXSwgW09dDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIChoLXkpID4gKHcteCkgKiAwLjgpIGIgfD0gMHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKHcteCkgPiAoaC15KSAqIDAuOCkgYiB8PSAweDIwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgICAgIHBpY284X2J1dHRvbnNbMF0gfD0gYjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgDQogICAgICAgIC8vIHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCBpcyB1c2VkIHRvIGRlY2lkZSB3aGVuIHRvIHVwZGF0ZSBsYXlvdXQgKGV4cGVuc2l2ZSBlc3BlY2lhbGx5IHdoZW4gcGFydCBvZiBhIGhlYXZ5IHBhZ2UpDQogICAgICAgIHZhciBwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSAtMTsNCiAgICAgICAgdmFyIGxhc3Rfd2luZG93ZWRfY29udGFpbmVyX2hlaWdodCA9IDUxMjsNCiAgICAgICAgdmFyIHA4X2xheW91dF9mcmFtZXMgPSAwOw0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF91cGRhdGVfbGF5b3V0KCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXMiKTsNCiAgICAgICAgICAgIHZhciBwOF9wbGF5YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9wbGF5YXJlYSIpOw0KICAgICAgICAgICAgdmFyIHA4X2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9jb250YWluZXIiKTsNCiAgICAgICAgICAgIHZhciBwOF9mcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9mcmFtZSIpOw0KICAgICAgICAgICAgdmFyIGNzaXplID0gNTEyOw0KICAgICAgICAgICAgdmFyIG1hcmdpbl90b3AgPSAwOw0KICAgICAgICAgICAgdmFyIG1hcmdpbl9sZWZ0ID0gMDsNCiAgICANCiAgICAgICAgICAgIC8vIHBhZ2UgZGlkbid0IGxvYWQgeWV0PyBmaXJzdCBjYWxsIHNob3VsZCBiZSBhZnRlciBwOF9mcmFtZSBpcyBjcmVhdGVkIHNvIHRoYXQgbGF5b3V0IGRvZXNuJ3QganVtcCBhcm91bmQuDQogICAgICAgICAgICBpZiAoIWNhbnZhcyB8fCAhcDhfcGxheWFyZWEgfHwgIXA4X2NvbnRhaW5lciB8fCAhcDhfZnJhbWUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gLTE7DQogICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9sYXlvdXQpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHA4X2xheW91dF9mcmFtZXMgKys7DQogICAgDQogICAgICAgICAgICAvLyBhc3N1bWVzIGZyYW1lIGRvZXNuJ3QgaGF2ZSBwYWRkaW5nDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBpc19mdWxsc2NyZWVuPShkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCk7DQogICAgICAgICAgICB2YXIgZnJhbWVfd2lkdGggPSBwOF9mcmFtZS5vZmZzZXRXaWR0aDsNCiAgICAgICAgICAgIHZhciBmcmFtZV9oZWlnaHQgPSBwOF9mcmFtZS5vZmZzZXRIZWlnaHQ7DQogICAgDQogICAgICAgICAgICBpZiAoaXNfZnVsbHNjcmVlbikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIHdpbmRvdw0KICAgICAgICAgICAgICAgIGZyYW1lX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICAgICAgICAgICAgZnJhbWVfaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAvLyBuZXZlciBsYXJnZXIgdGhhbiB3aW5kb3cgIC8vIChoYXBwZW5zIHdoZW4gYWRkcmVzcyBiYXIgaXMgZG93biBpbiBwb3J0cmFpZ2h0IG1vZGUgb24gcGhvbmUpDQogICAgICAgICAgICAgICAgZnJhbWVfd2lkdGggID0gTWF0aC5taW4oZnJhbWVfd2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoKTsNCiAgICAgICAgICAgICAgICBmcmFtZV9oZWlnaHQgPSBNYXRoLm1pbihmcmFtZV9oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCk7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBhcyBiaWcgYXMgd2lsbCBmaXQgaW4gYSBmcmFtZS4uDQogICAgICAgICAgICBjc2l6ZSA9ICBNYXRoLm1pbihmcmFtZV93aWR0aCxmcmFtZV9oZWlnaHQpOw0KICAgIA0KICAgICAgICAgICAgLy8gLi4gYnV0IG5ldmVyIG1vcmUgdGhhbiAyLzMgb2YgbG9uZ2VzdCBzaWRlIGZvciB0b3VjaCAoZS5nLiBsZWF2ZSBzcGFjZSBmb3IgY29udHJvbHMgb24gaVBhZCkNCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBsb25nZXN0X3NpZGUgPSBNYXRoLm1heCh3aW5kb3cuaW5uZXJXaWR0aCx3aW5kb3cuaW5uZXJIZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNzaXplID0gTWF0aC5taW4oY3NpemUsIGxvbmdlc3Rfc2lkZSAqIDIvMyk7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBwaXhlbCBwZXJmZWN0OiBxdWFudGl6ZSB0byBjbG9zZXN0IG11bHRpcGxlIG9mIDEyOA0KICAgICAgICAgICAgLy8gb25seSB3aGVuIGxhcmdlIGRpc3BsYXkgKGRlc2t0b3ApDQogICAgICAgICAgICBpZiAoZnJhbWVfd2lkdGggPj0gNTEyICYmIGZyYW1lX2hlaWdodCA+PSA1MTIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY3NpemUgPSAoY3NpemUrMSkgJiB+MHg3ZjsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIC8vIGNzaXplIHNob3VsZCBuZXZlciBiZSBoaWdoZXIgdGhhbiBwYXJlbnQgZnJhbWUNCiAgICAgICAgICAgIC8vIChvdGhlcndpc2Ugc3RyZXRjaGVkIGxhcmdlIHdoZW4gZnVsbHNjcmVlbiBhbmQgdGhlbiByZXR1cm4pDQogICAgICAgICAgICBpZiAoIWlzX2Z1bGxzY3JlZW4gJiYgcDhfZnJhbWUpIA0KICAgICAgICAgICAgICAgIGNzaXplID0gTWF0aC5taW4oY3NpemUsIGxhc3Rfd2luZG93ZWRfY29udGFpbmVyX2hlaWdodCk7IC8vIHA4X2ZyYW1lXzAgcGFyZW50DQogICAgICAgICAgICANCiAgICANCiAgICAgICAgICAgIGlmIChpc19mdWxsc2NyZWVuKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBjZW50ZXIgaG9yaXpvbnRhbGx5DQogICAgICAgICAgICAgICAgbWFyZ2luX2xlZnQgPSAoZnJhbWVfd2lkdGggLSBjc2l6ZSkvMjsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcnRyYWl0OiBrZWVwIGF0IHk9NDAgKGF2b2lkIHJvdW5kZWQgdG9wIGNvcm5lcnMgLyBjYW1lcmEgbnViIHRoaW5nIGV0Yy4pDQogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5fdG9wID0gTWF0aC5taW4oNDAsIGZyYW1lX2hlaWdodCAtIGNzaXplKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxhbmRzY2FwZTogcHV0IGEgbGl0dGxlIGFib3ZlIHZlcnRpY2FsIGNlbnRlcg0KICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luX3RvcCA9IChmcmFtZV9oZWlnaHQgLSBjc2l6ZSkvNDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICAvLyBub24tdG91Y2g6IGNlbnRlciB2ZXJ0aWNhbGx5DQogICAgICAgICAgICAgICAgICAgIG1hcmdpbl90b3AgPSAoZnJhbWVfaGVpZ2h0IC0gY3NpemUpLzI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgLy8gc2tpcCBpZiByZWxldmFudCBzdGF0ZSBoYXMgbm90IGNoYW5nZWQNCiAgICANCiAgICAgICAgICAgIHZhciB1cGRhdGVfaGFzaCA9IGNzaXplICsgbWFyZ2luX3RvcCAqIDEwMDAuMyArIG1hcmdpbl9sZWZ0ICogMC4wMDEgKyBmcmFtZV93aWR0aCAqIDMzMy4zMyArIGZyYW1lX2hlaWdodCAqIDc3Mi4xNTEzNDsNCiAgICAgICAgICAgIGlmIChpc19mdWxsc2NyZWVuKSB1cGRhdGVfaGFzaCArPSAwLjEyMzc7DQogICAgDQogICAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRoaW5ncyBjYW4gaGFwcGVuIGluIHRoZSBmaXJzdCBmZXcgc2Vjb25kcywgc28ganVzdCBrZWVwIHJlLWNhbGN1bGF0aW5nIGxheW91dC4gd2FzbSB2ZXJzaW9uIGJyZWFrcyBsYXlvdXQgb3RoZXJ3aXNlLg0KICAgICAgICAgICAgLy8gYWxzbzogYm9udXMgcmVmcmVzaCBhdCA1LCA4IHNlY29uZHMganVzdCBpbiBjYXNlIC5fLg0KICAgICAgICAgICAgaWYgKHA4X2xheW91dF9mcmFtZXMgPCAxODAgfHwgcDhfbGF5b3V0X2ZyYW1lcyA9PSA2MCo1IHx8IHA4X2xheW91dF9mcmFtZXMgPT0gNjAqOCApDQogICAgICAgICAgICAgICAgdXBkYXRlX2hhc2ggPSBwOF9sYXlvdXRfZnJhbWVzOw0KICAgIA0KICAgICAgICAgICAgaWYgKCFpc19mdWxsc2NyZWVuKSAvLyBmdWxsc2NyZWVuOiB1cGRhdGUgZXZlcnkgZnJhbWUgZm9yIHNhZmV0eS4gc2hvdWxkIGJlIGNoZWFwIQ0KICAgICAgICAgICAgaWYgKCFwOF90b3VjaF9kZXRlY3RlZCkgLy8gbW9iaWxlOiB1cGRhdGUgZXZlcnkgZnJhbWUgYmVjYXVzZSBub3RoaW5nIGNhbiBiZSB0cnVzdGVkDQogICAgICAgICAgICBpZiAocDhfdXBkYXRlX2xheW91dF9oYXNoID09IHVwZGF0ZV9oYXNoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coInA4X3VwZGF0ZV9sYXlvdXQoKTogc2tpcHBpbmciKTsNCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2xheW91dCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gdXBkYXRlX2hhc2g7DQogICAgDQogICAgICAgICAgICAvLyByZWNvcmQgdGhpcyBmb3IgcmV0dXJuaW5nIHRvIG9yaWdpbmFsIHNpemUgYWZ0ZXIgZnVsbHNjcmVlbiBwdXNoZXMgb3V0IGNvbnRhaW5lciBoZWlnaHQgKGFyZ2gpDQogICAgICAgICAgICBpZiAoIWlzX2Z1bGxzY3JlZW4gJiYgcDhfZnJhbWUpDQogICAgICAgICAgICAgICAgbGFzdF93aW5kb3dlZF9jb250YWluZXJfaGVpZ2h0ID0gcDhfZnJhbWUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm9mZnNldEhlaWdodDsNCiAgICAgICAgICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gbW9iaWxlIGluIHBvcnRyYWl0IG1vZGU6IHB1dCBzY3JlZW4gYXQgdG9wICh3IC8gYSBsaXR0bGUgZXh0cmEgc3BhY2UgZm9yIGZ1bGxzY3JlZW4gYnV0dG9uIGlmIG5lZWRlZCkNCiAgICAgICAgICAgIC8vIChkb24ndCBjYXJ0IHRvbyBhYm91dCBidXR0b25zIG92ZXJsYXBwaW5nIHNjcmVlbikNCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkNCiAgICAgICAgICAgICAgICBwOF9wbGF5YXJlYS5zdHlsZS5tYXJnaW5Ub3AgPSBwOF9hbGxvd19tb2JpbGVfbWVudSA/IDMyIDogODsNCiAgICAgICAgICAgIGVsc2UgaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIHA4X2lzX3J1bm5pbmcpIC8vIGxhbmRzY2FwZTogc2xpZ2h0bHkgYWJvdmUgdmVydGljYWwgY2VudGVyIChvbmx5IHJlbGV2YW50IGZvciBpUGFkIC8gaGlnaHJlcyBkZXZpY2VzKQ0KICAgICAgICAgICAgICAgIHA4X3BsYXlhcmVhLnN0eWxlLm1hcmdpblRvcCA9IChkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCAtIGNzaXplKSAvIDQ7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcDhfcGxheWFyZWEuc3R5bGUubWFyZ2luVG9wID0gIiI7DQogICAgDQogICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBjc2l6ZTsNCiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBjc2l6ZTsNCiAgICANCiAgICAgICAgICAgIC8vIHRvIGRvOiB0aGlzIHNob3VsZCBqdXN0IGhhcHBlbiBmcm9tIGNzcyBsYXlvdXQNCiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gbWFyZ2luX2xlZnQ7DQogICAgICAgICAgICBjYW52YXMuc3R5bGUubWFyZ2luVG9wID0gbWFyZ2luX3RvcDsNCiAgICANCiAgICAgICAgICAgIHA4X2NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGNzaXplOw0KICAgICAgICAgICAgcDhfY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGNzaXplOw0KICAgIA0KICAgICAgICAgICAgLy8gc2V0IG1lbnUgYnV0dG9ucyBwb3NpdGlvbiB0byBib3R0b20gcmlnaHQNCiAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X21lbnVfYnV0dG9ucyIpOw0KICAgICAgICAgICAgZWwuc3R5bGUubWFyZ2luVG9wID0gY3NpemUgLSBlbC5vZmZzZXRIZWlnaHQ7DQogICAgDQogICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQgJiYgcDhfaXNfcnVubmluZykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyB0dXJuIG9mZiBwb2ludGVyIGV2ZW50cyB0byBwcmV2ZW50IGRvdWJsZS10YXAgem9vbSBldGMgKHdvcmtzIG9uIEFuZHJvaWQpDQogICAgICAgICAgICAgICAgLy8gZG9uJ3Qgd2FudCB0aGlzIGZvciBkZXNrdG9wIGJlY2F1c2UgYnJlYWtzIG1vdXNlIGlucHV0ICYgY2xpY2stdG8tZm9jdXMgd2hlbiB1c2luZyBjb2RvX3RleHRhcmVhDQogICAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7DQogICAgDQogICAgICAgICAgICAgICAgcDhfY29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICIwcHgiOw0KICAgIA0KICAgICAgICAgICAgICAgIC8vIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIHRvdWNoIGV2ZW50IGhhbmRsaW5nDQogICAgICAgICAgICAgICAgdmFyIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgICAgICAgICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCiAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGgubWluKHcsaCkgLyAxMjsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAociA+IDQwKSByID0gNDA7DQogICAgDQogICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udHJvbHNfcmlnaHRfcGFuZWwiKTsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gdy1yKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gaC1yKjc7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSByKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcio3Ow0KICAgICAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoInNyYyIpICE9IHA4X2dmeF9kYXRbImNvbnRyb2xzX3JpZ2h0X3BhbmVsIl0pIC8vIG9wdGltaXNhdGlvbjogYXZvaWQgcmVsb2FkPyAoYnJvd3NlciBzaG91bGQgaGFuZGxlIHRob3VnaCkNCiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCJzcmMiLCBwOF9nZnhfZGF0WyJjb250cm9sc19yaWdodF9wYW5lbCJdKTsNCiAgICANCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250cm9sc19sZWZ0X3BhbmVsIik7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9IDA7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gaC1yKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSByKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcio2Ow0KICAgICAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoInNyYyIpICE9IHA4X2dmeF9kYXRbImNvbnRyb2xzX2xlZnRfcGFuZWwiXSkgLy8gb3B0aW1pc2F0aW9uOiBhdm9pZCByZWxvYWQ/IChicm93c2VyIHNob3VsZCBoYW5kbGUgdGhvdWdoKQ0KICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoInNyYyIsIHA4X2dmeF9kYXRbImNvbnRyb2xzX2xlZnRfcGFuZWwiXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIGNhcnQgKGNvbW1lbnRlZDsgd2FzIGEgZmFpbGVkIGF0dGVtcHQgdG8gcHJldmVudCBzY3JvbGwtb24tZHJhZyBvbiBzb21lIGJyb3dzZXJzKQ0KICAgICAgICAgICAgICAgIC8vIHA4X2ZyYW1lLnNjcm9sbEludG9WaWV3KHRydWUpOw0KICAgIA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19nZngiKS5zdHlsZS5kaXNwbGF5PSJ0YWJsZSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvdWNoX2NvbnRyb2xzX2JhY2tncm91bmQiKS5zdHlsZS5kaXNwbGF5PSJ0YWJsZSI7DQogICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19nZngiKS5zdHlsZS5kaXNwbGF5PSJub25lIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG91Y2hfY29udHJvbHNfYmFja2dyb3VuZCIpLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgaWYgKCFwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHA4X3BsYXlhcmVhLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgICAgIHA4X2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5PSJmbGV4IjsNCiAgICAgICAgICAgICAgICBwOF9jb250YWluZXIuc3R5bGUubWFyZ2luVG9wPSJhdXRvIjsNCiAgICANCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9zdGFydF9idXR0b24iKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnN0eWxlLmRpc3BsYXk9ImZsZXgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9sYXlvdXQpOw0KICAgICAgICB9DQogICAgDQogICAgDQogICAgICAgIHZhciBwOF90b3VjaF9kZXRlY3RlZCA9IGZhbHNlOw0KICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHA4X3RvdWNoX2RldGVjdGVkID0gdHJ1ZTsNCiAgICANCiAgICAgICAgICAgIC8vIGhpZGUgY29kb190ZXh0YXJlYSAtLSBjbGlwYm9hcmQgc3VwcG9ydCBvbiBtb2JpbGUgaXMgbm90IGZlYXNpYmxlDQogICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RvX3RleHRhcmVhIik7DQogICAgICAgICAgICBpZiAoZWwgJiYgZWwuc3R5bGUuZGlzcGxheSAhPSAibm9uZSIpew0KICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICB9LCAge3Bhc3NpdmU6IHRydWV9KTsNCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocGljbzhfYXVkaW9fY29udGV4dCkgDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgcGljbzhfYXVkaW9fY29udGV4dC5yZXN1bWUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIqKiBwaWNvOF9hdWRpb19jb250ZXh0LnJlc3VtZSgpIGZhaWxlZCIpOw0KICAgICAgICAgICAgICAgIH0JDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgdmFyIHdlYkF1ZGlvQVBJID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IHx8IHdpbmRvdy5tb3pBdWRpb0NvbnRleHQgfHwgd2luZG93Lm9BdWRpb0NvbnRleHQgfHwgd2luZG93Lm1zQXVkaW9Db250ZXh0OwkJCQ0KICAgICAgICAgICAgaWYgKHdlYkF1ZGlvQVBJKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBpY284X2F1ZGlvX2NvbnRleHQgPSBuZXcgd2ViQXVkaW9BUEk7DQogICAgDQogICAgICAgICAgICAgICAgLy8gd2FrZSB1cCBpT1MNCiAgICAgICAgICAgICAgICBpZiAocGljbzhfYXVkaW9fY29udGV4dCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtbXlfc291cmNlX3NmeCA9IHBpY284X2F1ZGlvX2NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBkdW1teV9zb3VyY2Vfc2Z4LmJ1ZmZlciA9IHBpY284X2F1ZGlvX2NvbnRleHQuY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTsgLy8gZHVtbXkNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bW15X3NvdXJjZV9zZnguY29ubmVjdChwaWNvOF9hdWRpb19jb250ZXh0LmRlc3RpbmF0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bW15X3NvdXJjZV9zZnguc3RhcnQoMSwgMC4yNSk7IC8vIGdpdmVzIEludmFsaWRTdGF0ZUVycm9yIC0tIHdoeT8gaGFzbid0IGJlZW4gcGxheWVkIGJlZm9yZSANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vZHVtbXlfc291cmNlX3NmeC5ub3RlT24oMCk7IC8vIGRlbGV0ZW1lDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiKiogZHVtbXlfc291cmNlX3NmeC5zdGFydCgxLCAwLjI1KSBmYWlsZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9jbG9zZV9jYXJ0KCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8ganVzdCByZWxvYWQgcGFnZSEgdXNlZCBmb3IgdG91Y2ggYnV0dG9ucyAtLSBoYXJkIHRvIHJvbGwgYmFjayBzdGF0ZSANCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gIiI7IC8vIHRyaWdnZXJzIHJlbG9hZA0KICAgICAgICB9DQogICAgDQogICAgICAgIHZhciBwOF9pc19ydW5uaW5nID0gZmFsc2U7DQogICAgICAgIHZhciBwOF9zY3JpcHQgPSBudWxsOw0KICAgICAgICB2YXIgTW9kdWxlID0gbnVsbDsNCiAgICAgICAgZnVuY3Rpb24gcDhfcnVuX2NhcnQoKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocDhfaXNfcnVubmluZykgcmV0dXJuOw0KICAgICAgICAgICAgcDhfaXNfcnVubmluZyA9IHRydWU7DQogICAgDQogICAgICAgICAgICAvLyB0b3VjaDogaGlkZSBldmVyeXRoaW5nIGV4Y2VwdCBwOF9mcmFtZV8wDQogICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keV8wIik7DQogICAgICAgICAgICAgICAgZWwyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X2ZyYW1lXzAiKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwgJiYgZWwyKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBjcmVhdGUgYXVkaW8gY29udGV4dCBhbmQgd2FrZSBpdCB1cCAoZm9yIGlPUyAtLSBuZWVkcyBoYXBwZW4gaW5zaWRlIHRvdWNoIGV2ZW50KQkJDQogICAgICAgICAgICBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpOw0KICAgIA0KICAgICAgICAgICAgLy8gc2hvdyB0b3VjaCBlbGVtZW50cw0KICAgICAgICAgICAgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncDhfY29udHJvbGxlcl9hcmVhJyk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIGVsc1tpXS5zdHlsZS5kaXNwbGF5PSIiOw0KICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gaW5zdGFsbCB0b3VjaCBldmVudHMuIFRoZXNlIGFsc28gc2VydmUgdG8gYmxvY2sgc2Nyb2xsaW5nIC8gcGluY2hpbmcgLyB6b29taW5nIG9uIHBob25lcyB3aGVuIHA4X2lzX3J1bm5pbmcNCiAgICAgICAgICAgICAgICAvLyBtb3ZlZCBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBjYWxscyBpbnRvIHBpY284X2J1dHRvbnNfZXZlbnQoKSAod2FudCB0byBsZXQgdG9wIGJ1dHRvbnMgcGFzcyB0aHJvdWdoKQ0KICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMCk7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMSk7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLCAgIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMik7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gbG9hZCBhbmQgcnVuIHNjcmlwdA0KICAgICAgICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgICAgICAgICAgcDhfc2NyaXB0ID0gZTsNCiAgICAgICAgICAgIGUub25sb2FkID0gZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBzaG93IGNhbnZhcyAvIG1lbnUgYnV0dG9ucyBvbmx5IGFmdGVyIGxvYWRpbmcNCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9wbGF5YXJlYSIpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheT0idGFibGUiOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocDhfdXBkYXRlX2xheW91dF9oYXNoKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICAgICAgICAgIHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCA9IC03NzsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHA4X2J1dHRvbnNfaGFzaCkgIT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgICAgICAgICBwOF9idXR0b25zX2hhc2ggPSAtMzM7DQogICAgDQogICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlLnR5cGUgPSAiYXBwbGljYXRpb24vamF2YXNjcmlwdCI7DQogICAgICAgICAgICBlLnNyYyA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL1VHUy1Bc3NldHNAYzFmMjZkZTQ3NmY5OTgzNjVmZDM5NWMwYzRmNDUwN2FkOTNlMmFiMC9pbnRvcnVpbnMuanMiOw0KICAgICAgICAgICAgZS5pZCA9ICJlX3NjcmlwdCI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSk7IC8vIGxvYWQgYW5kIHJ1bg0KICAgIA0KICAgICAgICAgICAgLy8gaGlkZSBzdGFydCBidXR0b24gYW5kIHNob3cgY2FudmFzIC8gbWVudSBidXR0b25zLiBoaWRlIHN0YXJ0IGJ1dHRvbg0KICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicDhfc3RhcnRfYnV0dG9uIik7DQogICAgICAgICAgICBpZiAoZWwpIGVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgIA0KICAgICAgICAgICAgLy8gYWRkICNwbGF5aW5nIGZvciB0b3VjaHNjcmVlbiBkZXZpY2VzIChhbGxvd3MgYmFjayBidXR0b24gdG8gY2xvc2UpDQogICAgICAgICAgICAvLyBYIGJ1dHRvbiBjYW4gYWxzbyBiZSB1c2VkIHRvIHRyaWdnZXIgdGhpcyANCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICIjcGxheWluZyI7DQogICAgICAgICAgICAgICAgd2luZG93Lm9uaGFzaGNoYW5nZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaC5zZWFyY2goInBsYXlpbmciKSA8IDApDQogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgLy8gaW5zdGFsbCBkcmFnJmRyb3AgbGlzdGVuZXJzDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXMiKTsNCiAgICAgICAgICAgICAgICBpZiAoY2FudmFzKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIGRyYWdvdmVyLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGRyYWdvdmVyLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBkcmFnc3RvcCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIG5vcCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHA4X2Ryb3BfZmlsZSwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgICAgICANCiAgICAgICAgICAgIC8vIEdhbWVwYWQgY29kZQ0KICAgICAgICANCiAgICAgICAgdmFyIFA4X0JVVFRPTl9PID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHgxMH07DQogICAgICAgIHZhciBQOF9CVVRUT05fWCA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4MjB9Ow0KICAgICAgICB2YXIgUDhfRFBBRF9MRUZUID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHgxfTsNCiAgICAgICAgdmFyIFA4X0RQQURfUklHSFQgPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDJ9Ow0KICAgICAgICB2YXIgUDhfRFBBRF9VUCA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4NH07DQogICAgICAgIHZhciBQOF9EUEFEX0RPV04gPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDh9Ow0KICAgICAgICB2YXIgUDhfTUVOVSA9IHthY3Rpb246J21lbnUnfTsNCiAgICAgICAgdmFyIFA4X05PX0FDVElPTiA9IHthY3Rpb246J25vbmUnfTsNCiAgICANCiAgICAgICAgdmFyIFA4X0JVVFRPTl9NQVBQSU5HID0gWw0KICAgICAgICAgICAgLy8gcmVmOiBodHRwczovL3czYy5naXRodWIuaW8vZ2FtZXBhZC8jcmVtYXBwaW5nDQogICAgICAgICAgICBQOF9CVVRUT05fTywgICAgICAgICAgLy8gQm90dG9tIGZhY2UgYnV0dG9uDQogICAgICAgICAgICBQOF9CVVRUT05fWCwgICAgICAgICAgLy8gUmlnaHQgZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X0JVVFRPTl9YLCAgICAgICAgICAvLyBMZWZ0IGZhY2UgYnV0dG9uDQogICAgICAgICAgICBQOF9CVVRUT05fTywgICAgICAgICAgLy8gVG9wIGZhY2UgYnV0dG9uDQogICAgICAgICAgICBQOF9OT19BQ1RJT04sICAgICAgICAgLy8gTmVhciBsZWZ0IHNob3VsZGVyIGJ1dHRvbiAoTDEpDQogICAgICAgICAgICBQOF9OT19BQ1RJT04sICAgICAgICAgLy8gTmVhciByaWdodCBzaG91bGRlciBidXR0b24gKFIxKQ0KICAgICAgICAgICAgUDhfTk9fQUNUSU9OLCAgICAgICAgIC8vIEZhciBsZWZ0IHNob3VsZGVyIGJ1dHRvbiAoTDIpDQogICAgICAgICAgICBQOF9OT19BQ1RJT04sICAgICAgICAgLy8gRmFyIHJpZ2h0IHNob3VsZGVyIGJ1dHRvbiAoUjIpDQogICAgICAgICAgICBQOF9NRU5VLCAgICAgICAgICAgICAgLy8gTGVmdCBhdXhpbGlhcnkgYnV0dG9uIChzZWxlY3QpDQogICAgICAgICAgICBQOF9NRU5VLCAgICAgICAgICAgICAgLy8gUmlnaHQgYXV4aWxpYXJ5IGJ1dHRvbiAoc3RhcnQpDQogICAgICAgICAgICBQOF9OT19BQ1RJT04sICAgICAgICAgLy8gTGVmdCBzdGljayBidXR0b24NCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBSaWdodCBzdGljayBidXR0b24NCiAgICAgICAgICAgIFA4X0RQQURfVVAsICAgICAgICAgICAvLyBEcGFkIHVwDQogICAgICAgICAgICBQOF9EUEFEX0RPV04sICAgICAgICAgLy8gRHBhZCBkb3duDQogICAgICAgICAgICBQOF9EUEFEX0xFRlQsICAgICAgICAgLy8gRHBhZCBsZWZ0DQogICAgICAgICAgICBQOF9EUEFEX1JJR0hULCAgICAgICAgLy8gRHBhZCByaWdodA0KICAgICAgICBdOw0KICAgIA0KICAgICAgICAvLyBUcmFjayB3aGljaCBwbGF5ZXIgaXMgY29udHJvbGxlciBieSBlYWNoIGdhbWVwYWQuIEdhbWVwYWQgaW5kZXggaSBjb250cm9scyB0aGUNCiAgICAgICAgLy8gcGxheWVyIHdpdGggaW5kZXggcGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tpXS4gR2FtZXBhZHMgd2l0aCBudWxsIHBsYXllciBhcmUNCiAgICAgICAgLy8gY3VycmVudGx5IHVuYXNzaWduZWQgLSB0aGV5IGdldCBhc3NpZ25lZCB0byBhIHBsYXllciB3aGVuIGEgYnV0dG9uIGlzIHByZXNzZWQuDQogICAgICAgIHZhciBwaWNvOF9nYW1lcGFkc19tYXBwaW5nID0gW107DQogICAgDQogICAgICAgIGZ1bmN0aW9uIHA4X3VuYXNzaWduX2dhbWVwYWQoZ2FtZXBhZF9pbmRleCkgew0KICAgICAgICAgICAgaWYgKHBpY284X2dhbWVwYWRzX21hcHBpbmdbZ2FtZXBhZF9pbmRleF0gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHBpY284X2J1dHRvbnNbcGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tnYW1lcGFkX2luZGV4XV0gPSAwOw0KICAgICAgICAgICAgcGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tnYW1lcGFkX2luZGV4XSA9IG51bGw7DQogICAgICAgIH0NCiAgICANCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfZmlyc3RfcGxheWVyX3dpdGhvdXRfZ2FtZXBhZChtYXhfcGxheWVycykgew0KICAgICAgICAgICAgdmFyIGFsbG9jYXRlZF9wbGF5ZXJzID0gcGljbzhfZ2FtZXBhZHNfbWFwcGluZy5maWx0ZXIoZnVuY3Rpb24oeCkgeyByZXR1cm4geCAhPSBudWxsOyB9KTsNCiAgICAgICAgICAgIHZhciBzb3J0ZWRfcGxheWVycyA9IEFycmF5LmZyb20oYWxsb2NhdGVkX3BsYXllcnMpLnNvcnQoKTsNCiAgICAgICAgICAgIGZvciAodmFyIGRlc2lyZWQgPSAwOyBkZXNpcmVkIDwgc29ydGVkX3BsYXllcnMubGVuZ3RoICYmIGRlc2lyZWQgPCBtYXhfcGxheWVyczsgKytkZXNpcmVkKSB7DQogICAgICAgICAgICAgICAgaWYgKGRlc2lyZWQgIT0gc29ydGVkX3BsYXllcnNbZGVzaXJlZF0pIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2lyZWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHNvcnRlZF9wbGF5ZXJzLmxlbmd0aCA8IG1heF9wbGF5ZXJzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNvcnRlZF9wbGF5ZXJzLmxlbmd0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgDQogICAgICAgIGZ1bmN0aW9uIHA4X2Fzc2lnbl9nYW1lcGFkX3RvX3BsYXllcihnYW1lcGFkX2luZGV4LCBwbGF5ZXJfaW5kZXgpIHsNCiAgICAgICAgICAgIHA4X3VuYXNzaWduX2dhbWVwYWQoZ2FtZXBhZF9pbmRleCk7DQogICAgICAgICAgICBwaWNvOF9nYW1lcGFkc19tYXBwaW5nW2dhbWVwYWRfaW5kZXhdID0gcGxheWVyX2luZGV4Ow0KICAgICAgICB9DQogICAgDQogICAgDQogICAgDQogICAgICAgIGZ1bmN0aW9uIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ2FtZXBhZCwgYXhpc190aHJlc2hvbGQsIGJ1dHRvbl90aHJlc2hvbGQpIHsNCiAgICAgICAgICAgIC8vIEdpdmVuIGEgZ2FtZXBhZCBvYmplY3QsIHJldHVybjoNCiAgICAgICAgICAgIC8vIHsNCiAgICAgICAgICAgIC8vICAgICBidXR0b25fc3RhdGU6IHRoZSBiaW5hcnkgZW5jb2RlZCBQaWNvIDggYnV0dG9uIHN0YXRlDQogICAgICAgICAgICAvLyAgICAgbWVudV9idXR0b246IHRydWUgaWYgYW55IG1lbnUtbWFwcGVkIGJ1dHRvbiB3YXMgcHJlc3NlZA0KICAgICAgICAgICAgLy8gICAgIGFueV9idXR0b246IHRydWUgaWYgYW55IGJ1dHRvbiB3YXMgcHJlc3NlZCwgaW5jbHVkaW5nIGQtcGFkDQogICAgICAgICAgICAvLyAgICAgICAgIGJ1dHRvbnMgYW5kIHVubWFwcGVkIGJ1dHRvbnMNCiAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgIGlmICghZ2FtZXBhZCB8fCAhZ2FtZXBhZC5heGVzIHx8ICFnYW1lcGFkLmJ1dHRvbnMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICBidXR0b25fc3RhdGU6IDAsDQogICAgICAgICAgICAgICAgICAgIG1lbnVfYnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgYW55X2J1dHRvbjogZmFsc2UNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gYnV0dG9uX3N0YXRlX2Zyb21fYXhpcyhheGlzLCBsb3dfc3RhdGUsIGhpZ2hfc3RhdGUsIGRlZmF1bHRfc3RhdGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoYXhpcyAmJiBheGlzIDwgLWF4aXNfdGhyZXNob2xkKSByZXR1cm4gbG93X3N0YXRlOw0KICAgICAgICAgICAgICAgIGlmIChheGlzICYmIGF4aXMgPiBheGlzX3RocmVzaG9sZCkgcmV0dXJuIGhpZ2hfc3RhdGU7DQogICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRfc3RhdGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgYXhlc19hY3Rpb25zID0gWw0KICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZV9mcm9tX2F4aXMoZ2FtZXBhZC5heGVzWzBdLCBQOF9EUEFEX0xFRlQsIFA4X0RQQURfUklHSFQsIFA4X05PX0FDVElPTiksDQogICAgICAgICAgICAgICAgYnV0dG9uX3N0YXRlX2Zyb21fYXhpcyhnYW1lcGFkLmF4ZXNbMV0sIFA4X0RQQURfVVAsIFA4X0RQQURfRE9XTiwgUDhfTk9fQUNUSU9OKSwNCiAgICAgICAgICAgIF07DQogICAgDQogICAgICAgICAgICB2YXIgYnV0dG9uX2FjdGlvbnMgPSBnYW1lcGFkLmJ1dHRvbnMubWFwKGZ1bmN0aW9uIChidXR0b24sIGluZGV4KSB7DQogICAgICAgICAgICAgICAgdmFyIHByZXNzZWQgPSBidXR0b24udmFsdWUgPiBidXR0b25fdGhyZXNob2xkIHx8IGJ1dHRvbi5wcmVzc2VkOw0KICAgICAgICAgICAgICAgIGlmICghcHJlc3NlZCkgcmV0dXJuIFA4X05PX0FDVElPTjsNCiAgICAgICAgICAgICAgICByZXR1cm4gUDhfQlVUVE9OX01BUFBJTkdbaW5kZXhdIHx8IFA4X05PX0FDVElPTjsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgdmFyIGFsbF9hY3Rpb25zID0gYXhlc19hY3Rpb25zLmNvbmNhdChidXR0b25fYWN0aW9ucyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBtZW51X2J1dHRvbiA9IGJ1dHRvbl9hY3Rpb25zLnNvbWUoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYWN0aW9uLmFjdGlvbiA9PSAnbWVudSc7IH0pOw0KICAgICAgICAgICAgdmFyIGJ1dHRvbl9zdGF0ZSA9IChhbGxfYWN0aW9ucw0KICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuYWN0aW9uID09ICdidXR0b24nOyB9KQ0KICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuY29kZTsgfSkNCiAgICAgICAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGNvZGUpIHsgcmV0dXJuIHJlc3VsdCB8IGNvZGU7IH0sIDApDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgdmFyIGFueV9idXR0b24gPSBnYW1lcGFkLmJ1dHRvbnMuc29tZShmdW5jdGlvbiAoYnV0dG9uKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbi52YWx1ZSA+IGJ1dHRvbl90aHJlc2hvbGQgfHwgYnV0dG9uLnByZXNzZWQ7DQogICAgICAgICAgICB9KTsNCiAgICANCiAgICAgICAgICAgIGFueV9idXR0b24gfD0gYnV0dG9uX3N0YXRlOyAvL2p3dzogaW5jbHVkZSBheGVzIDAsMSBhcyBtaWdodCBiZSBmaXJzdCBpbnRlbmRlZCBhY3Rpb24NCiAgICANCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgYnV0dG9uX3N0YXRlLA0KICAgICAgICAgICAgICAgIG1lbnVfYnV0dG9uLA0KICAgICAgICAgICAgICAgIGFueV9idXR0b24NCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICANCiAgICAgICAgLy8gand3OiBwaWNvLTggMC4yLjEgdmVyc2lvbiBmb3IgdW5tYXBwZWQgZ2FtZXBhZHMsIGZvbGxvd2luZyBwOF9jb252ZXJ0X3N0YW5kYXJkX2dhbWVwYWRfdG9fYnV0dG9uX3N0YXRlDQogICAgICAgIC8vIGF4ZXMgMCwxICYgYnV0dG9ucyAwLDEsMiwzIGFyZSByZWFzb25hYmx5IHNhZmUuIGRvbid0IHRyeSB0byByZWFkIGRwYWQuDQogICAgICAgIC8vIG1lbnUgYnV0dG9ucyBhcmUgdW5wcmVkaWN0YWJsZSwgYnV0IHVzZSA2Li44IGFueXdheSAoYmV0dGVyIHRvIGhhdmUgYSB3ZWlyZCBtZW51IGJ1dHRvbiB0aGFuIG5vbmUpDQogICAgDQogICAgICAgIGZ1bmN0aW9uIHA4X2NvbnZlcnRfdW5tYXBwZWRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ2FtZXBhZCwgYXhpc190aHJlc2hvbGQsIGJ1dHRvbl90aHJlc2hvbGQpIHsNCiAgICANCiAgICAgICAgICAgIGlmICghZ2FtZXBhZCB8fCAhZ2FtZXBhZC5heGVzIHx8ICFnYW1lcGFkLmJ1dHRvbnMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICBidXR0b25fc3RhdGU6IDAsDQogICAgICAgICAgICAgICAgICAgIG1lbnVfYnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgYW55X2J1dHRvbjogZmFsc2UNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgdmFyIGJ1dHRvbl9zdGF0ZSA9IDA7DQogICAgDQogICAgICAgICAgICBpZiAoZ2FtZXBhZC5heGVzWzBdICYmIGdhbWVwYWQuYXhlc1swXSA8IC1heGlzX3RocmVzaG9sZCkgYnV0dG9uX3N0YXRlIHw9IDB4MTsNCiAgICAgICAgICAgIGlmIChnYW1lcGFkLmF4ZXNbMF0gJiYgZ2FtZXBhZC5heGVzWzBdID4gYXhpc190aHJlc2hvbGQpICBidXR0b25fc3RhdGUgfD0gMHgyOw0KICAgICAgICAgICAgaWYgKGdhbWVwYWQuYXhlc1sxXSAmJiBnYW1lcGFkLmF4ZXNbMV0gPCAtYXhpc190aHJlc2hvbGQpIGJ1dHRvbl9zdGF0ZSB8PSAweDQ7DQogICAgICAgICAgICBpZiAoZ2FtZXBhZC5heGVzWzFdICYmIGdhbWVwYWQuYXhlc1sxXSA+IGF4aXNfdGhyZXNob2xkKSAgYnV0dG9uX3N0YXRlIHw9IDB4ODsNCiAgICANCiAgICAgICAgICAgIC8vIGJ1dHRvbnM6IGZpcnN0IDQgdGFrZW4gdG8gYmUgTy9YLCA2Li44IHRha2VuIHRvIGJlIG1lbnUgYnV0dG9uDQogICAgDQogICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgZ2FtZXBhZC5idXR0b25zLmxlbmd0aDsgaisrKQ0KICAgICAgICAgICAgaWYgKGdhbWVwYWQuYnV0dG9uc1tqXS52YWx1ZSA+IDAgfHwgZ2FtZXBhZC5idXR0b25zW2pdLnByZXNzZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGogPCA0KQ0KICAgICAgICAgICAgICAgICAgICBidXR0b25fc3RhdGUgfD0gKDB4MTAgPDwgKCgoaisxKS8yKSYxKSk7IC8vIDAgMSAxIDAgLS0gQSxYIC0+IE8sWCBvbiB4Ym94MzYwDQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaiA+PSA2ICYmIGogPD0gOCkNCiAgICAgICAgICAgICAgICAgICAgYnV0dG9uX3N0YXRlIHw9IDB4NDA7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICB2YXIgbWVudV9idXR0b24gPSBidXR0b25fc3RhdGUgJiAweDQwOw0KICAgIA0KICAgICAgICAgICAgdmFyIGFueV9idXR0b24gPSBnYW1lcGFkLmJ1dHRvbnMuc29tZShmdW5jdGlvbiAoYnV0dG9uKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbi52YWx1ZSA+IGJ1dHRvbl90aHJlc2hvbGQgfHwgYnV0dG9uLnByZXNzZWQ7DQogICAgICAgICAgICB9KTsNCiAgICANCiAgICAgICAgICAgIGFueV9idXR0b24gfD0gYnV0dG9uX3N0YXRlOyAvL2p3dzogaW5jbHVkZSBheGVzIDAsMSBhcyBtaWdodCBiZSBmaXJzdCBpbnRlbmRlZCBhY3Rpb24NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBidXR0b25fc3RhdGUsDQogICAgICAgICAgICAgICAgbWVudV9idXR0b24sDQogICAgICAgICAgICAgICAgYW55X2J1dHRvbg0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICANCiAgICAgICAgLy8gZ2FtZXBhZCAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0dhbWVwYWRfQVBJL1VzaW5nX3RoZV9HYW1lcGFkX0FQSQ0KICAgICAgICAvLyAoc2V0cyBiaXRzIGluIHBpY284X2J1dHRvbnNbXSkNCiAgICAgICAgZnVuY3Rpb24gcDhfdXBkYXRlX2dhbWVwYWRzKCkgew0KICAgICAgICAgICAgdmFyIGF4aXNfdGhyZXNob2xkID0gMC4zOw0KICAgICAgICAgICAgdmFyIGJ1dHRvbl90aHJlc2hvbGQgPSAwLjU7IC8vIFNob3VsZCBiZSB1bm5lY2Vzc2FyeSwgd2Ugc2hvdWxkIGJlIGFibGUgdG8gdHJ1c3QgLnByZXNzZWQNCiAgICAgICAgICAgIHZhciBtYXhfcGxheWVycyA9IDg7DQogICAgICAgICAgICB2YXIgZ3BzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCkgfHwgbmF2aWdhdG9yLndlYmtpdEdldEdhbWVwYWRzKCk7DQogICAgDQogICAgICAgICAgICBpZiAoIWdwcykgcmV0dXJuOw0KICAgIA0KICAgICAgICAgICAgLy8gSW4gQ2hyb21lLCBncHMgaXMgaXRlcmFibGUgYnV0IGl0J3Mgbm90IGFuIGFycmF5Lg0KICAgICAgICAgICAgZ3BzID0gQXJyYXkuZnJvbShncHMpOw0KICAgIA0KICAgICAgICAgICAgcGljbzhfZ2FtZXBhZHMuY291bnQgPSBncHMubGVuZ3RoOw0KICAgICAgICAgICAgd2hpbGUgKGdwcy5sZW5ndGggPiBwaWNvOF9nYW1lcGFkc19tYXBwaW5nLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHBpY284X2dhbWVwYWRzX21hcHBpbmcucHVzaChudWxsKTsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHZhciBtZW51X2J1dHRvbiA9IGZhbHNlOw0KICAgICAgICAgICAgdmFyIGdhbWVwYWRfc3RhdGVzID0gZ3BzLm1hcChmdW5jdGlvbiAoZ3ApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKGdwICYmIGdwLm1hcHBpbmcgPT0gInN0YW5kYXJkIikgPw0KICAgICAgICAgICAgICAgICAgICBwOF9jb252ZXJ0X3N0YW5kYXJkX2dhbWVwYWRfdG9fYnV0dG9uX3N0YXRlKGdwLCBheGlzX3RocmVzaG9sZCwgYnV0dG9uX3RocmVzaG9sZCkgOg0KICAgICAgICAgICAgICAgICAgICBwOF9jb252ZXJ0X3VubWFwcGVkX2dhbWVwYWRfdG9fYnV0dG9uX3N0YXRlKGdwLCBheGlzX3RocmVzaG9sZCwgYnV0dG9uX3RocmVzaG9sZCk7DQogICAgICAgICAgICB9KTsNCiAgICANCiAgICAgICAgICAgIC8vIFVuYXNzaWduIGRpc2Nvbm5lY3RlZCBnYW1lcGFkcy4NCiAgICAgICAgICAgIC8vIGdwcy5mb3JFYWNoKGZ1bmN0aW9uIChncCwgaSkgeyBpZiAoZ3AgJiYgIWdwLmNvbm5lY3RlZCkgeyBwOF91bmFzc2lnbl9nYW1lcGFkKGkpOyB9fSk7DQogICAgICAgICAgICBncHMuZm9yRWFjaChmdW5jdGlvbiAoZ3AsIGkpIHsgaWYgKCFncCB8fCAhZ3AuY29ubmVjdGVkKSB7IHA4X3VuYXNzaWduX2dhbWVwYWQoaSk7IH19KTsgLy8gaHR0cHM6Ly93d3cubGV4YWxvZmZsZS5jb20vYmJzLz9waWQ9ODcxMzIjcA0KICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gQXNzaWduIHVuYXNzaWduZWQgZ2FtZXBhZHMgd2hlbiBhbnkgYnV0dG9uIGlzIHByZXNzZWQuDQogICAgICAgICAgICBnYW1lcGFkX3N0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSwgaSkgew0KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5hbnlfYnV0dG9uICYmIHBpY284X2dhbWVwYWRzX21hcHBpbmdbaV0gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RfZnJlZV9wbGF5ZXIgPSBwOF9maXJzdF9wbGF5ZXJfd2l0aG91dF9nYW1lcGFkKG1heF9wbGF5ZXJzKTsNCiAgICAgICAgICAgICAgICAgICAgcDhfYXNzaWduX2dhbWVwYWRfdG9fcGxheWVyKGksIGZpcnN0X2ZyZWVfcGxheWVyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICANCiAgICAgICAgICAgIC8vIFVwZGF0ZSBwaWNvOF9idXR0b25zIGFycmF5Lg0KICAgICAgICAgICAgZ2FtZXBhZF9zdGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoZ2FtZXBhZF9zdGF0ZSwgaSkgew0KICAgICAgICAgICAgICAgIGlmIChwaWNvOF9nYW1lcGFkc19tYXBwaW5nW2ldICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgcGljbzhfYnV0dG9uc1twaWNvOF9nYW1lcGFkc19tYXBwaW5nW2ldXSA9IGdhbWVwYWRfc3RhdGUuYnV0dG9uX3N0YXRlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgLy8gVXBkYXRlIG1lbnUgYnV0dG9uLg0KICAgICAgICAgICAgLy8gUGljbyA4IG9ubHkgcmVjb2duaXNlcyB0aGUgbWVudSBidXR0b24gb24gdGhlIGZpcnN0IHBsYXllciwgc28gd2UNCiAgICAgICAgICAgIC8vIHByZXNzIGl0IHdoZW4gYW55IGdhbWVwYWQgaGFzIHByZXNzZWQgYSBidXR0b24gbWFwcGVkIHRvIG1lbnUuDQogICAgICAgICAgICBpZiAoZ2FtZXBhZF9zdGF0ZXMuc29tZShmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLm1lbnVfYnV0dG9uOyB9KSkgew0KICAgICAgICAgICAgICAgIHBpY284X2J1dHRvbnNbMF0gfD0gMHg0MDsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfZ2FtZXBhZHMpOw0KICAgICAgICB9DQogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfZ2FtZXBhZHMpOw0KICAgIA0KICAgICAgICAvLyBFbmQgb2YgZ2FtZXBhZCBjb2RlDQogICAgDQogICAgDQogICAgICAgIC8vIGtleSBibG9ja2VyLiBwcmV2ZW50IGJyb3dzZXIgb3BlcmF0aW9ucyB3aGlsZSBwbGF5aW5nIGNhcnQgc28gdGhhdCBQSUNPLTggY2FuIHVzZSB0aG9zZSBrZXlzIGUuZy4gY3Vyc29ycyB0byBzY3JvbGwsIGN0cmwtciB0byByZWxvYWQNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsDQogICAgICAgIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7DQogICAgICAgICAgICBpZiAoIXA4X2lzX3J1bm5pbmcpIHJldHVybjsNCiAgICANCiAgICAgICAgICAgIGlmIChwaWNvOF9zdGF0ZS5oYXNfZm9jdXMgPT0gMSkNCiAgICAgICAgICAgICAgICBpZiAoWzMyLCAzNywgMzgsIDM5LCA0MCwgNzcsIDgyLCA4MCwgOV0uaW5kZXhPZihldmVudC5rZXlDb2RlKSA+IC0xKSAgICAgICAvLyBibG9jayBvbmx5IGN1cnNvcnMsIE0gUiBQLCB0YWINCiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgIA0KICAgICAgICB9LHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgIA0KICAgICAgICAvLyB3aGVuIHVzaW5nIGNvZG9fdGV4dGFyZWEgdG8gZGV0ZXJtaW5lIGZvY3VzLCBuZWVkIHRvIGV4cGxpY2l0bHkgaGFuZCBmb2N1cyBiYWNrIHdoZW4gY2xpY2tpbmcgYSBwOF9tZW51X2J1dHRvbg0KICAgICAgICBmdW5jdGlvbiBwOF9naXZlX2ZvY3VzKCkNCiAgICAgICAgew0KICAgICAgICAgICAgZWwgPSAodHlwZW9mIGNvZG9fdGV4dGFyZWEgPT09ICd1bmRlZmluZWQnKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RvX3RleHRhcmVhIikgOiBjb2RvX3RleHRhcmVhOw0KICAgICAgICAgICAgaWYgKGVsKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGVsLmZvY3VzKCk7DQogICAgICAgICAgICAgICAgZWwuc2VsZWN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfcmVxdWVzdF9mdWxsc2NyZWVuKCkgew0KICAgIA0KICAgICAgICAgICAgdmFyIGlzX2Z1bGxzY3JlZW49KGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbiB8fCBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50KTsNCiAgICANCiAgICAgICAgICAgIGlmIChpc19mdWxsc2NyZWVuKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKSB7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9wbGF5YXJlYSIpOw0KICAgIA0KICAgICAgICAgICAgaWYgKCBlbC5yZXF1ZXN0RnVsbHNjcmVlbiApIHsNCiAgICAgICAgICAgICAgICBlbC5yZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICggZWwubW96UmVxdWVzdEZ1bGxTY3JlZW4gKSB7DQogICAgICAgICAgICAgICAgZWwubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGVsLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuICkgew0KICAgICAgICAgICAgICAgIGVsLndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCBFbGVtZW50LkFMTE9XX0tFWUJPQVJEX0lOUFVUICk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICANCiAgICA8L3NjcmlwdD4NCiAgICANCiAgICA8U1RZTEUgVFlQRT0idGV4dC9jc3MiPg0KICAgIDwhLS0NCiAgICAucDhfbWVudV9idXR0b257DQogICAgICAgIG9wYWNpdHk6MC4zOw0KICAgICAgICBwYWRkaW5nOjRweDsNCiAgICAgICAgZGlzcGxheTp0YWJsZTsNCiAgICAgICAgd2lkdGg6MjRweDsNCiAgICAgICAgaGVpZ2h0OjI0cHg7DQogICAgICAgIGZsb2F0OnJpZ2h0Ow0KICAgIH0NCiAgICANCiAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjUxMnB4KSB7DQogICAgICAgIC5wOF9tZW51X2J1dHRvbnsNCiAgICAgICAgICAgIHdpZHRoOjI0cHg7IG1hcmdpbi1sZWZ0OjhweDsgbWFyZ2luLWJvdHRvbTo4cHg7DQogICAgICAgIH0NCiAgICB9DQogICAgLnA4X21lbnVfYnV0dG9uOmhvdmVyew0KICAgICAgICBvcGFjaXR5OjEuMDsNCiAgICAgICAgY3Vyc29yOnBvaW50ZXI7DQogICAgfQ0KICAgIA0KICAgIGNhbnZhc3sNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZVNwZWVkOw0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogLXdlYmtpdC1vcHRpbWl6ZS1jb250cmFzdDsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZS1jb250cmFzdDsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7DQogICAgICAgIC1tcy1pbnRlcnBvbGF0aW9uLW1vZGU6IG5lYXJlc3QtbmVpZ2hib3I7DQogICAgICAgIGJvcmRlcjogMHB4Ow0KICAgICAgICBjdXJzb3I6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIA0KICAgIC5wOF9zdGFydF9idXR0b257DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogcGl4ZWxhdGVkOw0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IC1tb3otY3Jpc3AtZWRnZXM7DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogY3Jpc3AtZWRnZXM7DQogICAgICAgIGN1cnNvcjpwb2ludGVyOw0KICAgICAgICBiYWNrZ3JvdW5kOnVybCgiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFNZ0FBQURJQ0FJQUFBQWlPam5KQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQWlKSlJFRlVlRjd0MElFQUFBQUF3NkQ1VXgva2hWQmh3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdEQmd3SUFCQXdZTUdERHdNRERWbHdBQkJXY1NyUUFBQUFCSlJVNUVya0pnZ2c9PSIpOw0KICAgICAgICAtcmVwZWF0IGNlbnRlcjsNCiAgICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLXNpemU6Y292ZXI7IC1tb3otYmFja2dyb3VuZC1zaXplOmNvdmVyOyAtby1iYWNrZ3JvdW5kLXNpemU6Y292ZXI7IGJhY2tncm91bmQtc2l6ZTpjb3ZlcjsNCiAgICB9DQogICAgDQogICAgLmJ1dHRvbl9nZnh7DQogICAgICAgIHN0cm9rZS13aWR0aDoyOw0KICAgICAgICBzdHJva2U6ICNmZmZmZmY7DQogICAgICAgIHN0cm9rZS1vcGFjaXR5OjAuNDsNCiAgICAgICAgZmlsbC1vcGFjaXR5OjAuMjsNCiAgICAgICAgZmlsbDpibGFjazsNCiAgICB9DQogICAgDQogICAgLmJ1dHRvbl9nZnhfaWNvbnsNCiAgICAgICAgc3Ryb2tlLXdpZHRoOjM7DQogICAgICAgIHN0cm9rZTogIzkwOTA5MDsNCiAgICAgICAgc3Ryb2tlLW9wYWNpdHk6MC43Ow0KICAgICAgICBmaWxsOm5vbmU7DQogICAgfQ0KICAgIA0KICAgIC0tPg0KICAgIDwvU1RZTEU+DQogICAgDQogICAgPC9oZWFkPg0KICAgIA0KICAgIDxib2R5IHN0eWxlPSJwYWRkaW5nOjBweDsgbWFyZ2luOjBweDsgY29sb3I6I2NjYyI+DQogICAgPGRpdiBpZD0iYm9keV8wIj4gPCEtLSBoaWRlIHRoaXMgd2hlbiBwbGF5aW5nIGluIG1vYmlsZSAocDhfdG91Y2hfZGV0ZWN0ZWQpIHNvIHRoYXQgZWxlbWVudHMgZG9uJ3QgYWZmZWN0IGxheW91dCAtLT4NCiAgICANCiAgICANCiAgICA8IS0tIEFkZCBhbnkgY29udGVudCBhYm92ZSB0aGUgY2FydCBoZXJlIC0tPg0KICAgIA0KICAgIA0KICAgIDxkaXYgaWQ9InA4X2ZyYW1lXzAiIHN0eWxlPSJtYXgtd2lkdGg6ODAwcHg7IG1heC1oZWlnaHQ6ODAwcHg7IG1hcmdpbjphdXRvOyI+IDwhLS0gZG91YmxlIGZ1bmN0aW9uOiBsaW1pdCBzaXplLCBhbmQgZGlzcGxheSBvbmx5IHRoaXMgZGl2IGZvciB0b3VjaCBkZXZpY2VzIC0tPg0KICAgIDxkaXYgaWQ9InA4X2ZyYW1lIiBzdHlsZT0iZGlzcGxheTpmbGV4OyB3aWR0aDoxMDAlOyBtYXgtd2lkdGg6MTAwdnc7IGhlaWdodDoxMDB2dzsgbWF4LWhlaWdodDoxMDB2aDsgbWFyZ2luOmF1dG87Ij4NCiAgICANCiAgICAgICAgPGRpdiBpZD0icDhfbWVudV9idXR0b25zX3RvdWNoIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IHdpZHRoOjEwMCU7IHotaW5kZXg6MTA7IGxlZnQ6MHB4OyI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgaWQ9InA4Yl9mdWxsIiAgc3R5bGU9ImZsb2F0OmxlZnQ7bWFyZ2luLWxlZnQ6MTBweCIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBwOF9yZXF1ZXN0X2Z1bGxzY3JlZW4oKTsiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIGlkPSJwOGJfc291bmQiIHN0eWxlPSJmbG9hdDpsZWZ0O21hcmdpbi1sZWZ0OjEwcHgiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsgTW9kdWxlLnBpY284VG9nZ2xlU291bmQoKTsiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIGlkPSJwOGJfY2xvc2UiIHN0eWxlPSJmbG9hdDpyaWdodDsgbWFyZ2luLXJpZ2h0OjEwcHgiIG9uQ2xpY2s9InA4X2Nsb3NlX2NhcnQoKTsiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICANCiAgICAgICAgPGRpdiBpZD0icDhfY29udGFpbmVyIg0KICAgICAgICAgICAgc3R5bGU9Im1hcmdpbjphdXRvOyBkaXNwbGF5OnRhYmxlOyINCiAgICAgICAgICAgIG9uY2xpY2s9InA4X2NyZWF0ZV9hdWRpb19jb250ZXh0KCk7IHA4X3J1bl9jYXJ0KCk7Ij4NCiAgICANCiAgICAgICAgICAgIDxkaXYgaWQ9InA4X3N0YXJ0X2J1dHRvbiIgY2xhc3M9InA4X3N0YXJ0X2J1dHRvbiIgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBkaXNwbGF5OmZsZXg7Ij4NCiAgICAgICAgICAgICAgICA8aW1nIHdpZHRoPTgwIGhlaWdodD04MCBzdHlsZT0ibWFyZ2luOmF1dG87Ig0KICAgICAgICAgICAgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUZBQUFBQlFDQVlBQUFDT0VmS3RBQUFCcGtsRVFWUjQydTNhdTIzRFFCQ0VZVVhPWElHS2N1alFYVWdGdUEwWElLZ1c5MFE5b0VBZytMamQyN3ZkMlJzQ2YwNThnRURxaG9mUGorT0I2U01DQVFsSVFBSXlBaEtRZ0FSa0JBUURuTTZYU1JzQjcvMmUvdFNBMC8vMTJmQ0FLc1FYM250REE0b1JGd0JSSWMwQWl4RTM4QkFoVFFHTEVBc0JVU0ROQVhjUmhZRFJJWnNBUGxwOTlWRUNSb1hzRHBnTjBnMHdDNlE3SURwa0dFQlV5RzZBMCt2S0J0a2RNQnVrRzJBV1NIZEFkTWd3Z0tpUTRRRFJJTU1Db2tDR0I0d09DUVBZRlZLdzJjQUJOb2NVamw2d2dFMGdGYXNoUEtBWnBISjJUUU5ZQlZteFc2Y0RGRU5XRHY5cEFVc2hDVmdKU2NCS1NBSVNrRDloUGtUNEdrTkFNZHplcHlqOEt5ZTg1MkVCTGU1MUNaSEhXUUs0SmNUaEQxU2xjSFBFWVkvMGErQTBuNlNrR1pWNnc2V1pOYjNnNElkMWI3aHdnR2h3WVFCUjRkd0IwZUhjQUxQQWRRZk1CaGNPRUEwdURDQXFuRHNnT3B3YllCYTRwb0EvMzErclpZRnJCcmlGcHdHTUN0Y0VjQTlQQWhnZHpoeXdCSzhFRVFYT0ZGQ0N0d2FJQm1jR0tNV2JJNkxDbVFCcThSNmh3NWtBTWdJU2tJQUVKQ0FqSUFFSlNFQkdRSTl1a1Y3bFJuOW5EK2dBQUFBQVNVVk9SSzVDWUlJPSIvPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgDQogICAgICAgICAgICA8ZGl2IGlkPSJwOF9wbGF5YXJlYSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsgbWFyZ2luOmF1dG87DQogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgdXNlci1zZWxlY3Q6IG5vbmU7IC13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOw0KICAgICAgICAgICAgIj4NCiAgICANCiAgICAgICAgICAgICAgICA8ZGl2ICBpZD0idG91Y2hfY29udHJvbHNfYmFja2dyb3VuZCINCiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iIHBvaW50ZXItZXZlbnRzOm5vbmU7IGRpc3BsYXk6bm9uZTsgYmFja2dyb3VuZC1jb2xvcjojMDAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpmaXhlZDsgdG9wOjBweDsgbGVmdDowcHg7IGJvcmRlcjowOyB3aWR0aDoxMDB2dzsgaGVpZ2h0OjEwMHZoIj4NCiAgICAgICAgICAgICAgICAgICAgJm5ic3ANCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICANCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IHBvc2l0aW9uOnJlbGF0aXZlIj4NCiAgICAgICAgICAgICAgICAgICAgPCEtLSBwb2ludGVyLWV2ZW50cyB0dXJuZWQgb2ZmIGZvciBtb2JpbGUgaW4gcDhfdXBkYXRlX2xheW91dCBiZWNhdXNlIG5lZWQgZm9yIGRlc2t0b3AgbW91c2UgLS0+DQogICAgICAgICAgICAgICAgICAgIDxjYW52YXMgY2xhc3M9ImVtc2NyaXB0ZW4iIGlkPSJjYW52YXMiIG9uY29udGV4dG1lbnU9ImV2ZW50LnByZXZlbnREZWZhdWx0KCk7IiA+DQogICAgICAgICAgICAgICAgICAgIDwvY2FudmFzPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPXA4X21lbnVfYnV0dG9ucyBpZD0icDhfbWVudV9idXR0b25zIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjEyNXB4IiBpZD0icDhiX2NvbnRyb2xzIiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IE1vZHVsZS5waWNvOFRvZ2dsZUNvbnRyb2xNZW51KCk7Ij48L2Rpdj4JCQkJCQ0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjkwcHgiIGlkPSJwOGJfcGF1c2UiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgTW9kdWxlLnBpY284VG9nZ2xlUGF1c2VkKCk7IHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCA9IC0yMjsiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjU1cHgiIGlkPSJwOGJfc291bmQiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsgTW9kdWxlLnBpY284VG9nZ2xlU291bmQoKTsiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icDhfbWVudV9idXR0b24iIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjIwcHgiIGlkPSJwOGJfZnVsbCIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBwOF9yZXF1ZXN0X2Z1bGxzY3JlZW4oKTsiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICANCiAgICANCiAgICAgICAgICAgICAgICA8IS0tIGRpc3BsYXkgYWZ0ZXIgZmlyc3QgbGF5b3V0IHVwZGF0ZSAtLT4NCiAgICAgICAgICAgICAgICA8ZGl2ICBpZD0idG91Y2hfY29udHJvbHNfZ2Z4Ig0KICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSIgcG9pbnRlci1ldmVudHM6bm9uZTsgZGlzcGxheTp0YWJsZTsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmZpeGVkOyB0b3A6MHB4OyBsZWZ0OjBweDsgYm9yZGVyOjA7IHdpZHRoOjEwMHZ3OyBoZWlnaHQ6MTAwdmgiPg0KICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiIgaWQ9ImNvbnRyb2xzX3JpZ2h0X3BhbmVsIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IG9wYWNpdHk6MC41OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iIiBpZD0iY29udHJvbHNfbGVmdF9wYW5lbCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyAgb3BhY2l0eTowLjU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICA8L2Rpdj4gPCEtLSB0b3VjaF9jb250cm9sc19nZnggLS0+DQogICAgDQogICAgICAgICAgICAgICAgPCEtLSB1c2VkIGZvciBjbGlwYm9hcmQgYWNjZXNzICYga2V5Ym9hcmQgaW5wdXQ7IGRpc3BsYXllZCBhbmQgdXNlZCBieSBQSUNPLTggb25seSBvbmNlIG5lZWRlZC4gY2FuIGJlIHNhZmVseSByZW1vdmVkIGlmIGNsaXBib2FyZCAvIGtleSBwcmVzc2VzIG5vdCBuZWVkZWQuIC0tPg0KICAgICAgICAgICAgICAgIDwhLS0gKG5lZWRzIHRvIGJlIGluc2lkZSBwOF9wbGF5YXJlYSBzbyB0aGF0IGl0IHN0aWxsIHdvcmtzIHVuZGVyIENocm9tZSB3aGVuIGZ1bGxzY3JlZW5lZCkgLS0+DQogICAgICAgICAgICAgICAgPCEtLSAwLjIuNTogYWRkZWQgImRpc3BsYXk6bm9uZSI7IHBpY284LmpzIHNob3dzIG9uIGRlbWFuZCB0byBhdm9pZCBtYWMgb3N4IGFjY2VudCBjaGFyYWN0ZXIgc2VsZWN0b3IgLy8gaHR0cHM6Ly93d3cubGV4YWxvZmZsZS5jb20vYmJzLz90aWQ9NDc3NDMgLS0+DQogICAgDQogICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJjb2RvX3RleHRhcmVhIiBjbGFzcz0iZW1zY3JpcHRlbiIgc3R5bGU9ImRpc3BsYXk6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6LTk5OTlweDsgaGVpZ2h0OjBweDsgb3ZlcmZsb3c6aGlkZGVuIj48L3RleHRhcmVhPg0KICAgIA0KICAgICAgICAgICAgPC9kaXY+IDwhLS1wOF9wbGF5YXJlYSAtLT4NCiAgICANCiAgICAgICAgPC9kaXY+IDwhLS0gcDhfY29udGFpbmVyIC0tPg0KICAgIA0KICAgIDwvZGl2PiA8IS0tIHA4X2ZyYW1lIC0tPg0KICAgIDwvZGl2PiA8IS0tIHA4X2ZyYW1lXzAgc2l6ZSBsaW1pdCAtLT4NCiAgICANCiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgDQogICAgICAgIHA4X3VwZGF0ZV9sYXlvdXQoKTsNCiAgICAgICAgcDhfdXBkYXRlX2J1dHRvbl9pY29ucygpOw0KICAgIA0KICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KICAgICAgICBNb2R1bGUgPSB7fTsNCiAgICAgICAgTW9kdWxlLmNhbnZhcyA9IGNhbnZhczsNCiAgICANCiAgICAgICAgLy8gZnJvbSBAdWx0cmFicml0ZSdzIHNoZWxsOiB0ZXN0IGlmIGFuIEF1ZGlvQ29udGV4dCBjYW4gYmUgY3JlYXRlZCBvdXRzaWRlIG9mIGFuIGV2ZW50IGNhbGxiYWNrLg0KICAgICAgICAvLyBJZiBpdCBjYW4ndCBiZSBjcmVhdGVkLCB0aGVuIHJlcXVpcmUgcHJlc3NpbmcgdGhlIHN0YXJ0IGJ1dHRvbiB0byBydW4gdGhlIGNhcnRyaWRnZQ0KICAgIA0KICAgICAgICBpZiAocDhfYXV0b3BsYXkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB0ZW1wX2NvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7DQogICAgICAgICAgICB0ZW1wX2NvbnRleHQub25zdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHRlbXBfY29udGV4dC5zdGF0ZT09J3J1bm5pbmcnKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcDhfcnVuX2NhcnQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGVtcF9jb250ZXh0LmNsb3NlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICAvLyBwb2ludGVyIGxvY2sgcmVxdWVzdCBuZWVkcyB0byBiZSBpbnNpZGUgYSBjYW52YXMgaW50ZXJhY3Rpb24gZXZlbnQNCiAgICAgICAgLy8gcGljbzhfc3RhdGUucmVxdWVzdF9wb2ludGVyX2xvY2sgaXMgdHJ1ZSB3aGVuIDB4NWYyZCBiaXQgMCBhbmQgYml0IDIgYXJlIHNldCAtLSBwb2tlKDB4NWYyZCwweDUpIA0KICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghcDhfdG91Y2hfZGV0ZWN0ZWQpDQogICAgICAgICAgICAgICAgaWYgKHBpY284X3N0YXRlLnJlcXVlc3RfcG9pbnRlcl9sb2NrKQ0KICAgICAgICAgICAgICAgICAgICBjYW52YXMucmVxdWVzdFBvaW50ZXJMb2NrKCk7DQogICAgICAgIH0pOw0KICAgICAgICANCiAgICA8L3NjcmlwdD4NCiAgICANCiAgICANCiAgICANCiAgICA8IS0tIEFkZCBjb250ZW50IGJlbG93IHRoZSBjYXJ0IGhlcmUgLS0+DQogICAgDQogICAgDQogICAgDQogICAgDQogICAgPC9kaXY+IDwhLS0gYm9keV8wIC0tPg0KICAgIDwvYm9keT48L2h0bWw+DQogICAgDQogICAgPHNjcmlwdCBkZWZlciBzcmM9IiIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4NCiAgICANCg==";
