window.game = "DQo8IS0tIFVsdGltYXRlIEdhbWUgU3Rhc2ggZmlsZS0tPiANCjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPg0KDQoNCg0KPGh0bWw+PGhlYWQ+DQogICAgPHRpdGxlPlBJQ08tOCBDYXJ0cmlkZ2U8L3RpdGxlPg0KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIHVzZXItc2NhbGFibGU9bm8iPg0KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCiAgICANCiAgICAgICAgLy8gRGVmYXVsdCBzaGVsbCBmb3IgUElDTy04IDAuMi4yIChpbmNsdWRlcyBAd2VlYmxlJ3MgZ2FtZXBhZCBtb2QgMS4wKQ0KICAgICAgICAvLyBUaGlzIGZpbGUgaXMgYXZhaWxhYmxlIHVuZGVyIGEgQ0MwIGxpY2Vuc2UgaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL3NoYXJlLXlvdXItd29yay9wdWJsaWMtZG9tYWluL2NjMC8NCiAgICAgICAgLy8gKG5vdGU6ICJ0aGlzIGZpbGUiIGRvZXMgbm90IGluY2x1ZGUgYW55IGNhcnRyaWRnZSBvciBjYXJ0cmlkZ2UgYXJ0d29yayBpbmplY3RlZCBpbnRvIGEgZGVyaXZhdGl2ZSBodG1sIGZpbGUgd2hlbiB1c2luZyB0aGUgUElDTy04IGh0bWwgZXhwb3J0ZXIpDQogICAgDQogICAgICAgIC8vIG9wdGlvbnMNCiAgICANCiAgICAgICAgLy8gZnVsbHNjcmVlbiwgc291bmQsIGNsb3NlIGJ1dHRvbiBhdCB0b3Agd2hlbiBwbGF5aW5nIG9uIHRvdWNoc2NyZWVuDQogICAgICAgIHZhciBwOF9hbGxvd19tb2JpbGVfbWVudSA9IHRydWU7DQogICAgDQogICAgICAgIC8vIHA4X2F1dG9wbGF5IHRydWUgdG8gYm9vdCB0aGUgY2FydHJpZGdlIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgcGFnZSBsb2FkIHdoZW4gcG9zc2libGUNCiAgICAgICAgLy8gaWYgdGhlIGJyb3dzZXIgY2FuIG5vdCBjcmVhdGUgYW4gYXVkaW8gY29udGV4dCBvdXRzaWRlIG9mIGEgdXNlciBnZXN0dXJlIChlLmcuIG9uIGlPUyksIHA4X2F1dG9wbGF5IGhhcyBubyBlZmZlY3QNCiAgICAgICAgdmFyIHA4X2F1dG9wbGF5ID0gdHJ1ZTsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9zdGF0ZSBpcyBkZWZpbmVkLCBQSUNPLTggd2lsbCBzZXQgLmlzX3BhdXNlZCwgLnNvdW5kX3ZvbHVtZSBhbmQgLmZyYW1lX251bWJlciBlYWNoIGZyYW1lIA0KICAgICAgICAvLyAodXNlZCBmb3IgZGV0ZXJtaW5pbmcgYnV0dG9uIGljb25zKQ0KICAgICAgICB2YXIgcGljbzhfc3RhdGUgPSBbXTsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9idXR0b25zIGlzIGRlZmluZWQsIFBJQ08tOCByZWFkcyBlYWNoIGludCBhcyBhIGJpdGZpZWxkIGhvbGRpbmcgdGhhdCBwbGF5ZXIncyBidXR0b24gc3RhdGVzDQogICAgICAgIC8vIDB4MSBsZWZ0LCAweDIgcmlnaHQsIDB4NCB1cCwgMHg4IHJpZ2h0LCAweDEwIE8sIDB4MjAgWCwgMHg0MCBtZW51DQogICAgICAgIC8vICh1c2VkIGJ5IHA4X3VwZGF0ZV9nYW1lcGFkcykNCiAgICAgICAgdmFyIHBpY284X2J1dHRvbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07IC8vIG1heCA4IHBsYXllcnMNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9tb3VzZSBpcyBkZWZpbmVkLCBQSUNPLTggcmVhZHMgdGhlIDMgaW50ZWdlcnMgYXMgWCwgWSBhbmQgYSBiaXRmaWVsZCBmb3IgYnV0dG9uczogMHgxIExNQiwgMHgyIFJNQg0KICAgICAgICB2YXIgcGljbzhfbW91c2UgPSBbXTsNCiAgICANCiAgICAgICAgLy8gdXNlZCB0byBkaXNwbGF5IG51bWJlciBvZiBkZXRlY3RlZCBqb3lzdGlja3MNCiAgICAgICAgdmFyIHBpY284X2dhbWVwYWRzID0ge307DQogICAgICAgIHBpY284X2dhbWVwYWRzLmNvdW50ID0gMDsNCiAgICANCiAgICAgICAgLy8gV2hlbiBwaWNvOF9ncGlvIGlzIGRlZmluZWQsIHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gZ3BpbyBwaW5zIHdpbGwgcmVhZCBhbmQgd3JpdGUgdG8gdGhlc2UgdmFsdWVzDQogICAgICAgIHZhciBwaWNvOF9ncGlvID0gbmV3IEFycmF5KDEyOCk7DQogICAgDQogICAgICAgIC8vIFdoZW4gcGljbzhfYXVkaW9fY29udGV4dCBjb250ZXh0IGlzIGRlZmluZWQsIHRoZSBodG1sIHNoZWxsICh0aGlzIGZpbGUpIGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBhbmQgbWFuYWdpbmcgaXQuDQogICAgICAgIC8vIFRoaXMgbWFrZXMgc2F0aXNmeWluZyBicm93c2VyIHJlcXVpcmVtZW50cyBlYXNpZXIgLS0gZS5nLiBpbml0aWFsaXNpbmcgYXVkaW8gZnJvbSBhIHNob3J0IHNjcmlwdCBpbiByZXNwb25zZSB0byBhIHVzZXIgYWN0aW9uLg0KICAgICAgICAvLyBPdGhlcndpc2UgUElDTy04IHdpbGwgdHJ5IHRvIGNyZWF0ZSBhbmQgdXNlIGl0cyBvd24gY29udGV4dC4NCiAgICANCiAgICAgICAgdmFyIHBpY284X2F1ZGlvX2NvbnRleHQ7DQogICAgDQogICAgDQogICAgICAgIC8vIG1lbnUgYnV0dG9uIGFuZCBjb250cm9sbGVyIGdyYXBoaWNzDQogICAgICAgIHA4X2dmeF9kYXQ9ew0KICAgICAgICAgICAgICAgICJwOGJfcGF1c2UxIjogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFPVWxFUVZSSXgyTmdHUGJnLzhjWC8wRjQ2RnRBTTR2b2JnSFZMUm93QzZobTBZQmJRTEZGb3hhTTRGUTBkSFB5MEMxTmgyNk5OdWdCQUFuaXpOaU1mdmJHQUFBQUFFbEZUa1N1UW1DQyIsDQogICAgInA4Yl9jb250cm9scyI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFRMGxFUVZSSXgyTmdHQVhFZ1A4ZlgveW5CYWFwNFhCTGhxY0YxSXlmWVdRQnJaTHowTEVBbHpxcXhRRlZMY0FtVDNNTHFKcVRhVzdCNENxTGFGNGZqSUlCQndCTC9CMnZxdFBWSXdBQUFBQkpSVTVFcmtKZ2dnPT0iLA0KICAgICJwOGJfZnVsbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFOMGxFUVZSSXgyTmdHUExnLzhjWC8ybUo2V2NCclVKbTRDd2dPU2dHclFWRUI4V29CYU1XREdNTGhtNU9IbnFsNmRDdDBZWThBQUE5b1ptKzlaOXhRQUFBQUFCSlJVNUVya0pnZ2c9PSIsDQogICAgInA4Yl9wYXVzZTAiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFBS1VsRVFWUkl4Mk5nR0hiZy84Y1gvN0ZoY3RXTldqQnF3YWdGb3hhTVdqQnF3YWdGNUZrdzVBQUFQYUdadnNJVXRYVUFBQUFBU1VWT1JLNUNZSUk9IiwNCiAgICAicDhiX3NvdW5kMCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFOa2xFUVZSSXgyTmdHREhnLzhjWC81SHgwTEVBM2NDaFl3RXVnd2F2QmNSRzRxZ0ZveFlNWnd1R2ZrNGVmcVhwOEtuUkJqMEFBTXo3Y0xEbkc0RmVBQUFBQUVsRlRrU3VRbUNDIiwNCiAgICAicDhiX3NvdW5kMSI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFQVWxFUVZSSXgyTmdHREhnLzhjWC81SHgwTEVBM2NDaFl3RXVnd2haUUxRRHFHNEJzWkZJS01oR0xSaTFZQ2hiTVBSejh2QXJUWWRQalRib0FRQ1NWZ3BYVVdRQU1BQUFBQUJKUlU1RXJrSmdnZz09IiwNCiAgICAicDhiX2Nsb3NlIjoiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQVUwbEVRVlJJeDJOa29ERmdwSnNGL3orKytJOGl3UzlCa3VXNDlBK2NCY1JhUkVnZi9Td2cxU0ppMWRIZkFrSUc0RXlPT0lKeTRDd2cxaUpDaVdEVUF2SXRHTHFwYU9qbTVLRmZtZzc5R20zSXRpb0FsK21BR1ZZSVpVVUFBQUFBU1VWT1JLNUNZSUk9IiwNCiAgICANCiAgICAiY29udHJvbHNfbGVmdF9wYW5lbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU3dBQUFFc0NBWUFBQUI1Zlk1MUFBQUVJMGxFUVZSNDJ1M2RNVTdEUUJDRzBUamFtOURUY1A4anBFbWZzd1M1aUhCaEFzTHhldi9odlFZNnBHWHlaUlRRK25RQ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFIcWJIRUV0bCt2dDdoUytmTHkvbVhIQlFxeEVpLzZhSS9BaUZXOVNuQjJCV0RrREJBdEFzQURCQWhBc0FNRUNCQXRBc0FBRUN4QXNBTUVDRUN4QXNBQUVDMEN3T05KOHRZdnJYUkFzSW1LMTlqMElGc1BHU3JRUUxDSmlOVitldDd4QVQ3UVFMSWFOMWRyM29vVmdNV3lzUkF2QklpcFdvb1ZnRVJVcjBVS3dpSXFWYUNGWVJNVkt0QkFzb21JbFdnZ1dVYkVTTFFTTHFGaUpGb0pGVkt4RUM4RWlLbGFpaFdBUkZTdlJRckRZSlNTVmZoYUNCU0JZQUlJRkNCYkFIcG9qNEJsL3NjT0dCV0RENGxYOGl3RTJMQURCQWdRTFFMQUFCQXNRTEFEQkFoQXNRTEFBQkF0QXNBREJBaEFzQU1FQ0JBdEFzQUFFQ3hBc0FNRUNFQ3hBc0FBRUN4QXNBTUVDRUN4QXNNaDF1ZDd1VHNIWlZEY1p5Rm84WXQ1c1ZKNk55VUFhU05FeUl5bWFYd1plcElLZDRtd29RYkFGQzBDd0FNRUNFQ3dBd1FJRUMwQ3dBQVFMRUN3QXdRSVFMRUN3QUFRTFFMQUF3UUk0VUhNRTIvMTBRWnE3dXN5Qk9iQmhSUXdwbUJVYjFuQUR1UGJ1YVVEL3AyZXpNSCsxYWRtd2hvc1ZmQmN4YjJTQ0pWYUlsbUFoVm9pV1lJa1ZvaVZhZ2lWV2lKWmdpWlZZSVZxQ0pWYUlsbWdKbGxnaFdvSWxWaUJhZ2lWV2lKWm9DWlpZSVZxQ0pWWWdXb0lsVmlCYWdnVUlsbmMwc1BFTGxtZ2hWbUlsV0tLRldBbVdhSUZZQ1pab0lWWUlsbWdoVm9JbFdpQldnaVZhaUpWZ0lWcUlsV0NKRm9pVllJa1dZaVZZaUJaaUpWaWloVmlKMVhiTkVXeUwxbU1RUll2ZnZJR0psUTFybUUwTHpJb055eUJpRHJCaEFZSUZJRmlBWUFFSUZvQmdBWUlGSUZnQWdnVUlGb0JnQVFnV0lGZ0FnZ1VnV0lCZ0RjK05uMUQvdGRIOFl1cHdnWnk1cUc0eWtLSWxWbVpEc0Rqc2hTbGF6cVFxSDdwNzkzUTJDQmFBWUFHQ0JTQllBSUlGQ0JhQVlBRUlGaUJZQUlJRklGaUFZQUVJRm9CZ0FZSUZJRmdBZ2dVSUZvQmdBUWdXSUZnQWdnVWdXSUJnQVFnV3dFTnpCS3haUHViOUNKN1dqQTBMc0dGUlYrOU41K2pORGhzV2dHQUJnZ1VnV0FDQ3hXNTZmZ2p1QTNjRWl6OVovbld3UjBpV1A4UC9ZQ0ZZREJzdHNVS3dpSWlXV0NGWVJFUkxyQkFzSXFJbFZnZ1dFZEVTS3dTTGlHaUpGWUpGUkxURUNzRWlJbHBpaFdBUkVTMnhRckNJaUpaWUlWaEVSRXVzRUN3aW9pVldDQll4MFJJckJJdW9hSWtWcitZaEZIVFp0TUNHQlFnV2dHQUJDQllnV0FDQ0JTQllnR0FCQ0JhQVlBR0NCU0JZQUlJRkNCYmoydU9SOHM2QUViaGV4Z3NXWXJpM1NLaEtjemNYQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU1BMm4rZTBVTUR6aDN5VEFBQUFBRWxGVGtTdVFtQ0MiLA0KICAgIA0KICAgIA0KICAgICJjb250cm9sc19yaWdodF9wYW5lbCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU3dBQUFGZUNBWUFBQUEvbHlLL0FBQUtIa2xFUVZSNDJ1M2RBWkthV0JBR1lFM3R2ZkJtTUNmRG5HeldKTGhMSEhCR0J0N3JodStyU2lXYmJBazhwMys3VWVGMEFnQUFBQUFBQUFBQUFPQVF6cGFBek41dkRsT3NOd0lMaEpYUVN1SWZQL1lvWk1HY3hROUxnTEJ5ZkFJTFFHQUJBZ3RBWUFFSUxFQmdBUWdzQUlFRkNDd0FnUVVnc0FDQkJTQ3dBQVFXSUxBQUJCWXN0L2NMM0xtQTMvOWNjUlJGVFJxdVpJaWd5bEtzcmp3S0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFNWjB0QVh6MC92N2VMaTZxOC9uTkNnb3MyQ0tZbXR0dmwrRS91dzAyY1gvTTZ5M0lmbHB4Z1FWTHU2ZnVTY0M4SERJUDRmZjA4WFZod05Nd3VmM3EzejlxdnpQK2ZUVWdoMStQK2lIa0FQNExpNm1RYWlydFR6TzNUNTR0RUZSaHU1bVpyazl3d1lHRHFvMCtkczEwWFlJTGpoUlVqZ09JMkozMGV6cVJ2Y2RqQW1IMWR6ZXl1NktlQ0M3ZEZpUXQ1c01VOG1Nd2UvWWhWOWN4MWpodVFLZWhzd1JXQ0t2bTRHdlJDQzNJMFZVWWhUNkdsdk5hSUt5RUZpQ3NoQllJSzZFbHRLQnVBUW9yYXdZS3o5b0JheFdjdCt1WHJhR1BmMENoWXV1ZGg3R09rS2t6VUdUcmhwWk9GVFljQlkweDFoUjBBN3BXUUZGNU1ZRERGSlN4cGRCb2FEVmdwOTNWazNzSnptbWpkakY3NnJMYytabXEzZFh2SDhLYktDRjErblBuNXN2RFAxMkhYMU9tL3Y5ZnVraDNkNDYyMXBDMXUyb0Q3Y3Y0K3ZEdHdzY0plWi9CU09zTktidXIydWRWdHJxbFZ0VDdERHFYQlFsZjdhZHVvMVVvRlBzanJ6dm9ycGFGVmRHYk9Vd0VaSFBFdFllTVlkWFU2alpxWHpjcVFtaU45c0hIU09DRnNhUXB2TjBtU0lkVDlXb0tvM1V3RmtMRWtTVGFaV3RxaDZleEVJSyt1a2U5eHRhNDB6cEtsd3ZHd2MrMzJRZitOSDJWZlRNV1FzQlJKTU1YcTJ0OWJjWllDRjhya3JaMFVVWWVmV3A5T2ZrZTV0bCtobjRvSTBvVlNPbk9aZmpqcisvMC9ZeTZMc08rWFd1c1VhMXRRb3JBS2p3T3BocDVLblZaem1OQjdZTE0rQldVR3Z2c1BCWThMNDVlSWM3dWMvRnZBTnhQK0dkYUorZXdLT202MDIxOTIraGMxc1VhQ1N3cWp6c1Z0blZOdUZUWDB1dFZZM3NDaXl4ZHhOc2V0NVYxbnpPdWtjQmlienJIc0Y4Q0M2RVZjQ3hFWUlIQUVsZ0FBZ3RBWUFFQ0MwQmdBUWdzaU9kaUNRUVd4OUlKTElFRndzb3hDQ3hZVzhZTDA3bVluc0RpWUFVNStrSnZ4dEhxOG5BTUFoSXFoVld4cTJtNmdOL1hBOHNGL09DVERxS0FMbUVIY1YrYjZ3NmZEMGpaWWJrSlJhRDl6ZGlKNnJBb3BTdTh2V3VXTG10OFM3SURQQytRb29ObzNVaDFjaCtyM2tqVmlYZDRIaUJ0aGFKMHEvcVp0ZkZUQ1o5MFBKVUNvUSs0SHRYMnpUMEo0ZXNkVDFOd204MW9OR3dEcnNWN2hXMDN4a0VJV2lqUlF1dGhmNW9LMjIram45dUR3NDZGRVVKaXFyT3F0Ui9HUVVqdzZ2NFFXalhPRy9VQndzbzRDQXNLcHErOC9XTEJNV3l6RDlMaDljWkJTRFNTVEFSSXYrRzIycHBkblhFUTFpdmlOc2grckhwQ2ZnakVUUjU3RCtzT3VxeDFnNnRmVXRURDQvVFJnbXBQM2RWWjZWQXJKRTUvdnNmV2xicisweGYzNlhMNmVCV0Q2Mm4rS2dwVC8vOHAwbkZGWFcrQlJib3U2L2NQNFUzUVFEMmR2djdsNEc0NGxqZHJEVHZ0c3FKLzEyOG42OXc3ZHdVcnZmSjdtMzNUOVcyOE13aTZMTjBWS0NxOEdFQ1NzY1ZvYUUxQk42QnJCVFlxTXFGbEhTSFZHS016K0Y2bmFoU0V3cUdsNEt3ZEtEeHJCcXhaZ0wwQ1hCUld6bHVCMEJKV2dOQVNWaUMwaEJWUXIwQzlYVDhkVmo3K0FRbENxei9vR3ZUQ0NuSjJGNGZwdG81NjNLRFQwRmtDdFF0NWIxM0h4TzNJaklDd3M2Sk9IMXg3UENaZ3Z0dEsyNDNzNVRpQWhRVWZ2VHVKZXVOVm9GNXdoUnVySmtZL1FRV0M2NE5xWGRkTU55V29nRSs3bVh0NHRSdHZ1NTBKS1NmVFgrUXVzQnl5NnhyKzJFMzg4L2p2cnVmeitlY3JvWGo2KzdiMXM0K2YrWGJ4QW12L2hmSDZFK01IdWxqbk5RcVpib05OZEV2Q0Q0SGxoeDR2TmdMTFdHR3NBRUoyVWs3Y0F1RzdLVytOQTltQ3lvY1BnZkJCNWVzZFFQeWdjaHhBeE83RUpVcUFWTjJJaThBQllZdlpaWGFCRkYySEd4a1lFVUdub2JNRTFnNHJOK01VV3BDaXF6QUtuZHp1SElTVjBBS0VsZEFDWVlYUWdtQUZLS3lzR1NnOGF3ZXNWWERlcmwrMmhqNytBWVdLclhjZXhqcENwczVBa2EwYldqcFYySEFVTk1aWVU5QU42Rm9CUmVYRkFBNVRVTWFXUXFPaDFZQkEzZFdlaW5MTlk5Rmx3WXJkVmRUSDI4dTY3R2x0eU90SDl1NXErR08zMW1PZWI3SjNXdmQ5dngvTGlycUhkUWNpdk9KbjdTYTIzbTlkRmpxc0lOMVY5azVydzg1S2x3VVpYdW16ZEJRbDkxT1hoUTdydFlLNWYzemh1dlcyTW5SYWhUcXJzZXZEOHdBQzY0bkxsdU5ncHRDcUVGYmpkYjhvSVFnNmtrUWJoV3J1ajdFUUhkWnI0MkJYZXR1Uk9xMUtuZFdITHN0WWlNRDYyamg0cmJIeENLRVZJS3pHNjI4c2hPaWppTEhVV0lnTzY2VnhwS1lhblZhUXppclU4NERBaXR4ZGhmcXdZc25RQ2hoV1laOFhCRllvdDVwOU8xSm9SUTJyU004RFJPeXd3cDR6MldyZm9wOG5jaDRMSGRaejE2QmQzK3FkVnVReE1QcnpnY0JTSUFWREswbFlDU3dFMWt3QnB6aXh1MFpvSlFxcmRNOFBBcXQwSUx3bDJNZkZvWlV0ckp4NFIyRHR3SkxReXRoWmdjQTZZR2dKS3hCWUtVSkxXSUhBU2hGYXdnb0VWb3JRRWxZZ3NGS0VsckFDZ1pVbXRJUVZDS3p3cGtaQ1FHQ0ZEYXZ6UUdpQndBb2ZWbzhqb2RBQ2dSVTZySVFXQ0t4VVlTVzBZT2VCbGVtcUFLOThkQ0ZyYUxsS0F3SnJ1cURma2hYeXk1K3p5dHhwdVdvREFtdmFaWTlobFRpMExzb0lab0lnZWlHdnRZOVpycFh1bXU3b3NPWjFlKzJza25kYW5WSkNZTTBIUXh0d24xYi9ibUQwMEhMQ0hZSDF2SURmZ2hidVpsOWt6dEJwT2VFT1Q4SWhVdkdXMnArSTU0cWN2MEtIOWJsdUtKWm16NTFWOUU1cnRQNmRNa0pnemJzT3YxK09FbFpCUSt2eThId0FFVWVSbzIvZk9JZ09LOGxZR09GS29iVTdMZU1ndkZnd3d3dDhmK1N1b3RiKy9GcjNZZE9ObjBZSVdLeFJSNkFhKzJVY3hFaTRmQ3hzU3hSbzdURXd5bmc0V20vaklFUjdwZmVkUHQwVk9xd1VYVmFtVzNHVjZMUjBWeEQwRlQ5cko3SGxmdXV1MEdHdDEyWDFheFptbHM2cVZLYzFXbC9kRmF6eHlyL0cyK3g3NlNMV1BJN1J4MGgwVjdCQ1FiVnJmUzVyVDBXNVltRGRQM2ZsY2pLZ3FJN3hZZ0JNakMwK2dXMU5RVGVnYXdVMktqS2haUjBoMVJpak0vaGVwMm9VaE1LaHBlQ3NIU2c4YXdhc1dZQzlBbHdVVnM1YmdkQVNWb0RRRWxZZ3RJUVZVSzlBdlYwL0hWWSsvZ0VKUXFzLzZCcjB3Z3B5ZGhlSDZiYU9ldHlnMDlCWkFyVUxlVzlkeDlCVkdRRmh4MFdkUHJqMmVFekFmTGVWdGh2WnkzRUFDd3MrZW5jeWRGU0NDZ1JYM0xGcVl2UVRWQ0M0UHFqV2RjMTBVNElLK0xTYnVZZFh1L0cyMjVtUWNqS2R3emhiZ3VVQk12eXhtL2puOGQ5ZHorZnp6MWRDOGZiYlplYXgvdnE3MitPK2VTWVFXTHpjZVkxQ3B0dGdFOTJTOEFPQnhaSXU3UFVuUnZjRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDd3dML2N2QkloMDkraEpBQUFBQUJKUlU1RXJrSmdnZz09IiwNCiAgICANCiAgICAgICAgfTsNCiAgICANCiAgICANCiAgICAgICAgLy8gYWRkZWQgMC4yLjE6IHdvcmstYXJvdW5kIGZvciBpT1MvU2FmYXJpIHJ1bm5pbmcgZnJvbSBhbiBpRnJhbWUgKGUuZy4gZnJvbSBpdGNoLmlvIHBhZ2UpOg0KICAgICAgICAvLyB0b3VjaCBldmVudHMgb25seSByZWdpc3RlciBhZnRlciBhZGRpbmcgZHVtbXkgbGlzdGVuZXJzIG9uIGRvY3VtZW50Lg0KICAgIA0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywge30pOw0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB7fSk7DQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywge30pOw0KICAgIA0KICAgIA0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyBwaWNvLTggMC4yLjI6IGFsbG93IGRyb3BwaW5nIGZpbGVzDQogICAgICAgIHZhciBwOF9kcm9wcGVkX2NhcnQgPSBudWxsOw0KICAgICAgICB2YXIgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSAiIjsNCiAgICAgICAgZnVuY3Rpb24gcDhfZHJvcF9maWxlKGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJAQCBkcm9wcGluZyBmaWxlLi4uIik7DQogICAgICAgIA0KICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICANCiAgICAgICAgICAgIGlmIChlLmRhdGFUcmFuc2ZlciAmJiBlLmRhdGFUcmFuc2Zlci5maWxlcyAmJiBlLmRhdGFUcmFuc2Zlci5maWxlc1swXSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyByZWFkIGZyb20gZmlsZQ0KICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHA4X2Ryb3BwZWRfY2FydF9uYW1lID0gJ3VudGl0bGVkLnA4JzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5uYW1lICE9PSAndW5kZWZpbmVkJykgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5uYW1lOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuZGF0YVRyYW5zZmVyLmZpbGVzWzBdLmZpbGVOYW1lICE9PSAndW5kZWZpbmVkJykgcDhfZHJvcHBlZF9jYXJ0X25hbWUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1swXS5maWxlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgcDhfZHJvcHBlZF9jYXJ0ID0gcmVhZGVyLnJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YTppbWFnZS9wbmc7YmFzZTY0DQogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29kb19jb21tYW5kID0gOTsgLy8gcmVhZCBkaXJlY3RseSBmcm9tIHA4X2Ryb3BwZWRfY2FydCB3aXRoIGxpYmI2NCBkZWNvZGVyDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChlLmRhdGFUcmFuc2Zlci5maWxlc1swXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gcmVhZCBmcm9tIHVybCAob3IgZGF0YSB1cmwpDQogICAgICAgICAgICAgICAgdHh0ID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnVGV4dCcpOw0KICAgICAgICAgICAgICAgIGlmICh0eHQpew0KICAgICAgICAgICAgICAgICAgICBwOF9kcm9wcGVkX2NhcnRfbmFtZSA9ICJ1bnRpdGxlZC5wOC5wbmciOw0KICAgICAgICAgICAgICAgICAgICBwOF9kcm9wcGVkX2NhcnQgPSB0eHQ7DQogICAgICAgICAgICAgICAgICAgIGNvZG9fY29tbWFuZCA9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIG5vcChldnQpIHsNCiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGRyYWdvdmVyKGV2dCkgew0KICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBNb2R1bGUucGljbzhEcmFnT3ZlcigpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGRyYWdzdG9wKGV2dCkgew0KICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBNb2R1bGUucGljbzhEcmFnU3RvcCgpOw0KICAgICAgICB9DQogICAgDQogICAgICAgIC8vIGRvd25sb2FkIChwaWNvLTggMC4yLjRkIHdlYiBleHBvcnRzIGNhbiBzYXZlIGEgLndhdiBmaWxlKQ0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZF9icm93c2VyX2ZpbGUoZmlsZW5hbWUsIGNvbnRlbnRzKQ0KICAgICAgICB7DQogICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgaWYgKGZpbGVuYW1lLnN1YnN0cihmaWxlbmFtZS5sZW5ndGggLSA3KSA9PSAiLnA4LnBuZyIpDQogICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnRzKSk7DQogICAgICAgICAgZWxzZSBpZiAoZmlsZW5hbWUuc3Vic3RyKGZpbGVuYW1lLmxlbmd0aCAtIDQpID09ICIud2F2IikNCiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnZGF0YTphdWRpby94LXdhdjtiYXNlNjQsJyArIGVuY29kZVVSSUNvbXBvbmVudChjb250ZW50cykpOw0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChjb250ZW50cykpOw0KICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVuYW1lKTsNCiAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTsNCiAgICAgICAgICBlbGVtZW50LmNsaWNrKCk7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTsNCiAgICAgICAgfQ0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIA0KICAgIA0KICAgICAgICB2YXIgcDhfYnV0dG9uc19oYXNoID0gLTE7DQogICAgICAgIGZ1bmN0aW9uIHA4X3VwZGF0ZV9idXR0b25faWNvbnMoKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBidXR0b25zIG9ubHkgYXBwZWFyIHdoZW4gcnVubmluZw0KICAgICAgICAgICAgaWYgKCFwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgaXNfZnVsbHNjcmVlbj0oZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBoYXNoIGJhc2VkIG9uOiBwaWNvOF9zdGF0ZS5zb3VuZF92b2x1bWUgIHBpY284X3N0YXRlLmlzX3BhdXNlZCBib3R0b21fbWFyZ2luIGxlZnQgaXNfZnVsbHNjcmVlbiBwOF90b3VjaF9kZXRlY3RlZA0KICAgICAgICAgICAgdmFyIGhhc2ggPSAwOw0KICAgICAgICAgICAgaGFzaCA9IHBpY284X3N0YXRlLnNvdW5kX3ZvbHVtZTsNCiAgICAgICAgICAgIGlmIChwaWNvOF9zdGF0ZS5pc19wYXVzZWQpIGhhc2ggKz0gMHgxMDA7DQogICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpICAgICBoYXNoICs9IDB4MjAwOw0KICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pICAgICAgICAgaGFzaCArPSAweDQwMDsNCiAgICANCiAgICAgICAgICAgIGlmIChwOF9idXR0b25zX2hhc2ggPT0gaGFzaCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2J1dHRvbl9pY29ucyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwOF9idXR0b25zX2hhc2ggPSBoYXNoOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIkBAIHVwZGF0aW5nIGJ1dHRvbiBpY29ucyIpOw0KICAgIA0KICAgICAgICAgICAgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncDhfbWVudV9idXR0b24nKTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWwgPSBlbHNbaV07DQogICAgICAgICAgICAgICAgaW5kZXggPSBlbC5pZDsJCQkNCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gJ3A4Yl9zb3VuZCcpIGluZGV4ICs9IChwaWNvOF9zdGF0ZS5zb3VuZF92b2x1bWUgPT0gMCA/ICIwIiA6ICIxIik7IC8vIDEgaWYgdW5kZWZpbmVkDQogICAgICAgICAgICAgICAgaWYgKGluZGV4ID09ICdwOGJfcGF1c2UnKSBpbmRleCArPSAocGljbzhfc3RhdGUuaXNfcGF1c2VkID4gMCA/ICIxIiA6ICIwIik7ICAgICAvLyAwIGlmIHVuZGVmaW5lZA0KICAgIA0KICAgICAgICAgICAgICAgIG5ld19zdHIgPSAnPGltZyB3aWR0aD0yNCBoZWlnaHQ9MjQgc3R5bGU9InBvaW50ZXItZXZlbnRzOm5vbmUiIHNyYz0iJytwOF9nZnhfZGF0W2luZGV4XSsnIj4nOw0KICAgICAgICAgICAgICAgIGlmIChlbC5pbm5lckhUTUwgIT0gbmV3X3N0cikNCiAgICAgICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gbmV3X3N0cjsNCiAgICANCiAgICANCiAgICANCiAgICANCiAgICAgICAgICAgICAgICAvLyBoaWRlIGFsbCBidXR0b25zIGZvciB0b3VjaCBtb2RlIChjYW4gcGF1c2Ugd2l0aCBtZW51IGJ1dHRvbnMpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIGlzX3Zpc2libGUgPSBwOF9pc19ydW5uaW5nOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmICgoIXA4X3RvdWNoX2RldGVjdGVkIHx8ICFwOF9hbGxvd19tb2JpbGVfbWVudSkgJiYgZWwucGFyZW50RWxlbWVudC5pZCA9PSAicDhfbWVudV9idXR0b25zX3RvdWNoIikNCiAgICAgICAgICAgICAgICAgICAgaXNfdmlzaWJsZSA9IGZhbHNlOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBlbC5wYXJlbnRFbGVtZW50LmlkID09ICJwOF9tZW51X2J1dHRvbnMiKQ0KICAgICAgICAgICAgICAgICAgICBpc192aXNpYmxlID0gZmFsc2U7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pIA0KICAgICAgICAgICAgICAgICAgICBpc192aXNpYmxlID0gZmFsc2U7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKGlzX3Zpc2libGUpDQogICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXk9IiI7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5PSJub25lIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShwOF91cGRhdGVfYnV0dG9uX2ljb25zKTsNCiAgICAgICAgfQ0KICAgIA0KICAgIA0KICAgIA0KICAgICAgICBmdW5jdGlvbiBhYnMoeCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIHggPCAwID8gLXggOiB4Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBzdGVwIDAgZG93biAxIGRyYWcgMiB1cCAobm90IHVzZWQpDQogICAgICAgIGZ1bmN0aW9uIHBpY284X2J1dHRvbnNfZXZlbnQoZSwgc3RlcCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFwOF9pc19ydW5uaW5nKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICAgICAgcGljbzhfYnV0dG9uc1swXSA9IDA7DQogICAgDQogICAgICAgICAgICBpZiAoc3RlcCA9PSAyICYmIHR5cGVvZihwaWNvOF9tb3VzZSkgIT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBpY284X21vdXNlWzJdID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG51bSA9IDA7DQogICAgICAgICAgICBpZiAoZS50b3VjaGVzKSBudW0gPSBlLnRvdWNoZXMubGVuZ3RoOw0KICAgIA0KICAgICAgICAgICAgaWYgKG51bSA9PSAwICYmIHR5cGVvZihwaWNvOF9tb3VzZSkgIT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vICBubyBhY3RpdmUgdG91Y2hlczogcmVsZWFzZSBtb3VzZSBidXR0b24gZnJvbSBhbnl3aGVyZSBvbiBwYWdlLiAobWF5YmUgcmVkdW5kYW50PyBidXQganVzdCBpbiBjYXNlKQ0KICAgICAgICAgICAgICAgIHBpY284X21vdXNlWzJdID0gMDsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbaV07DQogICAgICAgICAgICAgICAgdmFyIHggPSB0b3VjaC5jbGllbnRYOw0KICAgICAgICAgICAgICAgIHZhciB5ID0gdG91Y2guY2xpZW50WTsNCiAgICAgICAgICAgICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICAgICAgICAgIHZhciBoID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgIA0KICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5taW4odyxoKSAvIDEyOw0KICAgICAgICAgICAgICAgIGlmIChyID4gNDApIHIgPSA0MDsNCiAgICANCiAgICAgICAgICAgICAgICAvLyBtb3VzZSAoMC4xLjEyZCkNCiAgICANCiAgICAgICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHBpY284X21vdXNlKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICAgICAgaWYgKGNhbnZhcykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlY3QudG9wLCByZWN0LnJpZ2h0LCByZWN0LmJvdHRvbSwgcmVjdC5sZWZ0LCB4LCB5KTsNCiAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHggPj0gcmVjdC5sZWZ0ICYmIHggPCByZWN0LnJpZ2h0ICYmIHkgPj0gcmVjdC50b3AgJiYgeSA8IHJlY3QuYm90dG9tKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBwaWNvOF9tb3VzZSA9IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh4IC0gcmVjdC5sZWZ0KSAqIDEyOCAvIChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcigoeSAtIHJlY3QudG9wKSAqIDEyOCAvIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCA8IDIgPyAxIDogMA0KICAgICAgICAgICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybjsgLy8gY29tbWVudGVkIC0tIGJsb2NrcyBvdmVybGFwcGluZyBidXR0b25zDQogICAgICAgICAgICAgICAgICAgIH1lbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBpY284X21vdXNlWzJdID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICANCiAgICANCiAgICAgICAgICAgICAgICAvLyBidXR0b25zDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgYiA9IDA7DQogICAgDQogICAgICAgICAgICAgICAgaWYgKHkgPCBoIC0gcio4KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gbm8gY29udHJvbGxlciBidXR0b25zIHVwIGhlcmU7IGluY2x1ZGVzIGNhbnZhcyBhbmQgbWVudSBidXR0b25zIGF0IHRvcCBpbiB0b3VjaCBtb2RlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKCh5IDwgaCAtIHIqNikgJiYgeSA+IChoIC0gcio4KSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVudSBidXR0b246IGhhbGYgYXMgaGlnaCBhcyBYIE8gYnV0dG9uDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJldGNoIGFjcm9zcyByaWdodC1oYW5kIGhhbGYgYWJvdmUgWCBPIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ID4gdyAtIHIqMykgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8PSAweDQwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHggPCB3LzIgJiYgeCA8IHIqNikNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RpY2sNCiAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2sgPSAweGY7IC8vIGRwYWQNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjeCA9IDAgKyByKjM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3kgPSBoIC0gciozOw0KICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgZGVhZHpvbmUgPSByLzM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHggPSB4IC0gY3g7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHkgPSB5IC0gY3k7DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzKGR4KSA+IGFicyhkeSkgKiAwLjYpIC8vIGhvcml6b250YWwgDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR4IDwgLWRlYWR6b25lKSBiIHw9IDB4MTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHggPiBkZWFkem9uZSkgYiB8PSAweDI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzKGR5KSA+IGFicyhkeCkgKiAwLjYpIC8vIHZlcnRpY2FsDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR5IDwgLWRlYWR6b25lKSBiIHw9IDB4NDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHkgPiBkZWFkem9uZSkgYiB8PSAweDg7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+IHcgLSByKjYpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dHRvbjsgZGlhZ29uYWwgc3BsaXQgZnJvbSBib3R0b20gcmlnaHQgY29ybmVyDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgbWFzayA9IDB4MzA7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIG9mIFtYXSwgW09dDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIChoLXkpID4gKHcteCkgKiAwLjgpIGIgfD0gMHgxMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKHcteCkgPiAoaC15KSAqIDAuOCkgYiB8PSAweDIwOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgICAgIHBpY284X2J1dHRvbnNbMF0gfD0gYjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgDQogICAgICAgIC8vIHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCBpcyB1c2VkIHRvIGRlY2lkZSB3aGVuIHRvIHVwZGF0ZSBsYXlvdXQgKGV4cGVuc2l2ZSBlc3BlY2lhbGx5IHdoZW4gcGFydCBvZiBhIGhlYXZ5IHBhZ2UpDQogICAgICAgIHZhciBwOF91cGRhdGVfbGF5b3V0X2hhc2ggPSAtMTsNCiAgICAgICAgdmFyIGxhc3Rfd2luZG93ZWRfY29udGFpbmVyX2hlaWdodCA9IDUxMjsNCiAgICAgICAgdmFyIHA4X2xheW91dF9mcmFtZXMgPSAwOw0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF91cGRhdGVfbGF5b3V0KCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjYW52YXMiKTsNCiAgICAgICAgICAgIHZhciBwOF9wbGF5YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9wbGF5YXJlYSIpOw0KICAgICAgICAgICAgdmFyIHA4X2NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9jb250YWluZXIiKTsNCiAgICAgICAgICAgIHZhciBwOF9mcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9mcmFtZSIpOw0KICAgICAgICAgICAgdmFyIGNzaXplID0gNTEyOw0KICAgICAgICAgICAgdmFyIG1hcmdpbl90b3AgPSAwOw0KICAgICAgICAgICAgdmFyIG1hcmdpbl9sZWZ0ID0gMDsNCiAgICANCiAgICAgICAgICAgIC8vIHBhZ2UgZGlkbid0IGxvYWQgeWV0PyBmaXJzdCBjYWxsIHNob3VsZCBiZSBhZnRlciBwOF9mcmFtZSBpcyBjcmVhdGVkIHNvIHRoYXQgbGF5b3V0IGRvZXNuJ3QganVtcCBhcm91bmQuDQogICAgICAgICAgICBpZiAoIWNhbnZhcyB8fCAhcDhfcGxheWFyZWEgfHwgIXA4X2NvbnRhaW5lciB8fCAhcDhfZnJhbWUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gLTE7DQogICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9sYXlvdXQpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHA4X2xheW91dF9mcmFtZXMgKys7DQogICAgDQogICAgICAgICAgICAvLyBhc3N1bWVzIGZyYW1lIGRvZXNuJ3QgaGF2ZSBwYWRkaW5nDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBpc19mdWxsc2NyZWVuPShkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCk7DQogICAgICAgICAgICB2YXIgZnJhbWVfd2lkdGggPSBwOF9mcmFtZS5vZmZzZXRXaWR0aDsNCiAgICAgICAgICAgIHZhciBmcmFtZV9oZWlnaHQgPSBwOF9mcmFtZS5vZmZzZXRIZWlnaHQ7DQogICAgDQogICAgICAgICAgICBpZiAoaXNfZnVsbHNjcmVlbikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIHdpbmRvdw0KICAgICAgICAgICAgICAgIGZyYW1lX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7DQogICAgICAgICAgICAgICAgZnJhbWVfaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAvLyBuZXZlciBsYXJnZXIgdGhhbiB3aW5kb3cgIC8vIChoYXBwZW5zIHdoZW4gYWRkcmVzcyBiYXIgaXMgZG93biBpbiBwb3J0cmFpZ2h0IG1vZGUgb24gcGhvbmUpDQogICAgICAgICAgICAgICAgZnJhbWVfd2lkdGggID0gTWF0aC5taW4oZnJhbWVfd2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoKTsNCiAgICAgICAgICAgICAgICBmcmFtZV9oZWlnaHQgPSBNYXRoLm1pbihmcmFtZV9oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCk7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBhcyBiaWcgYXMgd2lsbCBmaXQgaW4gYSBmcmFtZS4uDQogICAgICAgICAgICBjc2l6ZSA9ICBNYXRoLm1pbihmcmFtZV93aWR0aCxmcmFtZV9oZWlnaHQpOw0KICAgIA0KICAgICAgICAgICAgLy8gLi4gYnV0IG5ldmVyIG1vcmUgdGhhbiAyLzMgb2YgbG9uZ2VzdCBzaWRlIGZvciB0b3VjaCAoZS5nLiBsZWF2ZSBzcGFjZSBmb3IgY29udHJvbHMgb24gaVBhZCkNCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBsb25nZXN0X3NpZGUgPSBNYXRoLm1heCh3aW5kb3cuaW5uZXJXaWR0aCx3aW5kb3cuaW5uZXJIZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNzaXplID0gTWF0aC5taW4oY3NpemUsIGxvbmdlc3Rfc2lkZSAqIDIvMyk7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBwaXhlbCBwZXJmZWN0OiBxdWFudGl6ZSB0byBjbG9zZXN0IG11bHRpcGxlIG9mIDEyOA0KICAgICAgICAgICAgLy8gb25seSB3aGVuIGxhcmdlIGRpc3BsYXkgKGRlc2t0b3ApDQogICAgICAgICAgICBpZiAoZnJhbWVfd2lkdGggPj0gNTEyICYmIGZyYW1lX2hlaWdodCA+PSA1MTIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY3NpemUgPSAoY3NpemUrMSkgJiB+MHg3ZjsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIC8vIGNzaXplIHNob3VsZCBuZXZlciBiZSBoaWdoZXIgdGhhbiBwYXJlbnQgZnJhbWUNCiAgICAgICAgICAgIC8vIChvdGhlcndpc2Ugc3RyZXRjaGVkIGxhcmdlIHdoZW4gZnVsbHNjcmVlbiBhbmQgdGhlbiByZXR1cm4pDQogICAgICAgICAgICBpZiAoIWlzX2Z1bGxzY3JlZW4gJiYgcDhfZnJhbWUpIA0KICAgICAgICAgICAgICAgIGNzaXplID0gTWF0aC5taW4oY3NpemUsIGxhc3Rfd2luZG93ZWRfY29udGFpbmVyX2hlaWdodCk7IC8vIHA4X2ZyYW1lXzAgcGFyZW50DQogICAgICAgICAgICANCiAgICANCiAgICAgICAgICAgIGlmIChpc19mdWxsc2NyZWVuKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBjZW50ZXIgaG9yaXpvbnRhbGx5DQogICAgICAgICAgICAgICAgbWFyZ2luX2xlZnQgPSAoZnJhbWVfd2lkdGggLSBjc2l6ZSkvMjsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcnRyYWl0OiBrZWVwIGF0IHk9NDAgKGF2b2lkIHJvdW5kZWQgdG9wIGNvcm5lcnMgLyBjYW1lcmEgbnViIHRoaW5nIGV0Yy4pDQogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5fdG9wID0gTWF0aC5taW4oNDAsIGZyYW1lX2hlaWdodCAtIGNzaXplKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxhbmRzY2FwZTogcHV0IGEgbGl0dGxlIGFib3ZlIHZlcnRpY2FsIGNlbnRlcg0KICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luX3RvcCA9IChmcmFtZV9oZWlnaHQgLSBjc2l6ZSkvNDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICAvLyBub24tdG91Y2g6IGNlbnRlciB2ZXJ0aWNhbGx5DQogICAgICAgICAgICAgICAgICAgIG1hcmdpbl90b3AgPSAoZnJhbWVfaGVpZ2h0IC0gY3NpemUpLzI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgLy8gc2tpcCBpZiByZWxldmFudCBzdGF0ZSBoYXMgbm90IGNoYW5nZWQNCiAgICANCiAgICAgICAgICAgIHZhciB1cGRhdGVfaGFzaCA9IGNzaXplICsgbWFyZ2luX3RvcCAqIDEwMDAuMyArIG1hcmdpbl9sZWZ0ICogMC4wMDEgKyBmcmFtZV93aWR0aCAqIDMzMy4zMyArIGZyYW1lX2hlaWdodCAqIDc3Mi4xNTEzNDsNCiAgICAgICAgICAgIGlmIChpc19mdWxsc2NyZWVuKSB1cGRhdGVfaGFzaCArPSAwLjEyMzc7DQogICAgDQogICAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRoaW5ncyBjYW4gaGFwcGVuIGluIHRoZSBmaXJzdCBmZXcgc2Vjb25kcywgc28ganVzdCBrZWVwIHJlLWNhbGN1bGF0aW5nIGxheW91dC4gd2FzbSB2ZXJzaW9uIGJyZWFrcyBsYXlvdXQgb3RoZXJ3aXNlLg0KICAgICAgICAgICAgLy8gYWxzbzogYm9udXMgcmVmcmVzaCBhdCA1LCA4IHNlY29uZHMganVzdCBpbiBjYXNlIC5fLg0KICAgICAgICAgICAgaWYgKHA4X2xheW91dF9mcmFtZXMgPCAxODAgfHwgcDhfbGF5b3V0X2ZyYW1lcyA9PSA2MCo1IHx8IHA4X2xheW91dF9mcmFtZXMgPT0gNjAqOCApDQogICAgICAgICAgICAgICAgdXBkYXRlX2hhc2ggPSBwOF9sYXlvdXRfZnJhbWVzOw0KICAgIA0KICAgICAgICAgICAgaWYgKCFpc19mdWxsc2NyZWVuKSAvLyBmdWxsc2NyZWVuOiB1cGRhdGUgZXZlcnkgZnJhbWUgZm9yIHNhZmV0eS4gc2hvdWxkIGJlIGNoZWFwIQ0KICAgICAgICAgICAgaWYgKCFwOF90b3VjaF9kZXRlY3RlZCkgLy8gbW9iaWxlOiB1cGRhdGUgZXZlcnkgZnJhbWUgYmVjYXVzZSBub3RoaW5nIGNhbiBiZSB0cnVzdGVkDQogICAgICAgICAgICBpZiAocDhfdXBkYXRlX2xheW91dF9oYXNoID09IHVwZGF0ZV9oYXNoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coInA4X3VwZGF0ZV9sYXlvdXQoKTogc2tpcHBpbmciKTsNCiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocDhfdXBkYXRlX2xheW91dCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gdXBkYXRlX2hhc2g7DQogICAgDQogICAgICAgICAgICAvLyByZWNvcmQgdGhpcyBmb3IgcmV0dXJuaW5nIHRvIG9yaWdpbmFsIHNpemUgYWZ0ZXIgZnVsbHNjcmVlbiBwdXNoZXMgb3V0IGNvbnRhaW5lciBoZWlnaHQgKGFyZ2gpDQogICAgICAgICAgICBpZiAoIWlzX2Z1bGxzY3JlZW4gJiYgcDhfZnJhbWUpDQogICAgICAgICAgICAgICAgbGFzdF93aW5kb3dlZF9jb250YWluZXJfaGVpZ2h0ID0gcDhfZnJhbWUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm9mZnNldEhlaWdodDsNCiAgICAgICAgICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gbW9iaWxlIGluIHBvcnRyYWl0IG1vZGU6IHB1dCBzY3JlZW4gYXQgdG9wICh3IC8gYSBsaXR0bGUgZXh0cmEgc3BhY2UgZm9yIGZ1bGxzY3JlZW4gYnV0dG9uIGlmIG5lZWRlZCkNCiAgICAgICAgICAgIC8vIChkb24ndCBjYXJ0IHRvbyBhYm91dCBidXR0b25zIG92ZXJsYXBwaW5nIHNjcmVlbikNCiAgICAgICAgICAgIGlmIChwOF90b3VjaF9kZXRlY3RlZCAmJiBwOF9pc19ydW5uaW5nICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkNCiAgICAgICAgICAgICAgICBwOF9wbGF5YXJlYS5zdHlsZS5tYXJnaW5Ub3AgPSBwOF9hbGxvd19tb2JpbGVfbWVudSA/IDMyIDogODsNCiAgICAgICAgICAgIGVsc2UgaWYgKHA4X3RvdWNoX2RldGVjdGVkICYmIHA4X2lzX3J1bm5pbmcpIC8vIGxhbmRzY2FwZTogc2xpZ2h0bHkgYWJvdmUgdmVydGljYWwgY2VudGVyIChvbmx5IHJlbGV2YW50IGZvciBpUGFkIC8gaGlnaHJlcyBkZXZpY2VzKQ0KICAgICAgICAgICAgICAgIHA4X3BsYXlhcmVhLnN0eWxlLm1hcmdpblRvcCA9IChkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCAtIGNzaXplKSAvIDQ7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcDhfcGxheWFyZWEuc3R5bGUubWFyZ2luVG9wID0gIiI7DQogICAgDQogICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBjc2l6ZTsNCiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBjc2l6ZTsNCiAgICANCiAgICAgICAgICAgIC8vIHRvIGRvOiB0aGlzIHNob3VsZCBqdXN0IGhhcHBlbiBmcm9tIGNzcyBsYXlvdXQNCiAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gbWFyZ2luX2xlZnQ7DQogICAgICAgICAgICBjYW52YXMuc3R5bGUubWFyZ2luVG9wID0gbWFyZ2luX3RvcDsNCiAgICANCiAgICAgICAgICAgIHA4X2NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGNzaXplOw0KICAgICAgICAgICAgcDhfY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGNzaXplOw0KICAgIA0KICAgICAgICAgICAgLy8gc2V0IG1lbnUgYnV0dG9ucyBwb3NpdGlvbiB0byBib3R0b20gcmlnaHQNCiAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X21lbnVfYnV0dG9ucyIpOw0KICAgICAgICAgICAgZWwuc3R5bGUubWFyZ2luVG9wID0gY3NpemUgLSBlbC5vZmZzZXRIZWlnaHQ7DQogICAgDQogICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQgJiYgcDhfaXNfcnVubmluZykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyB0dXJuIG9mZiBwb2ludGVyIGV2ZW50cyB0byBwcmV2ZW50IGRvdWJsZS10YXAgem9vbSBldGMgKHdvcmtzIG9uIEFuZHJvaWQpDQogICAgICAgICAgICAgICAgLy8gZG9uJ3Qgd2FudCB0aGlzIGZvciBkZXNrdG9wIGJlY2F1c2UgYnJlYWtzIG1vdXNlIGlucHV0ICYgY2xpY2stdG8tZm9jdXMgd2hlbiB1c2luZyBjb2RvX3RleHRhcmVhDQogICAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7DQogICAgDQogICAgICAgICAgICAgICAgcDhfY29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICIwcHgiOw0KICAgIA0KICAgICAgICAgICAgICAgIC8vIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIHRvdWNoIGV2ZW50IGhhbmRsaW5nDQogICAgICAgICAgICAgICAgdmFyIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDsNCiAgICAgICAgICAgICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDsNCiAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGgubWluKHcsaCkgLyAxMjsNCiAgICANCiAgICAgICAgICAgICAgICBpZiAociA+IDQwKSByID0gNDA7DQogICAgDQogICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udHJvbHNfcmlnaHRfcGFuZWwiKTsNCiAgICAgICAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gdy1yKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gaC1yKjc7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSByKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcio3Ow0KICAgICAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoInNyYyIpICE9IHA4X2dmeF9kYXRbImNvbnRyb2xzX3JpZ2h0X3BhbmVsIl0pIC8vIG9wdGltaXNhdGlvbjogYXZvaWQgcmVsb2FkPyAoYnJvd3NlciBzaG91bGQgaGFuZGxlIHRob3VnaCkNCiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCJzcmMiLCBwOF9nZnhfZGF0WyJjb250cm9sc19yaWdodF9wYW5lbCJdKTsNCiAgICANCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb250cm9sc19sZWZ0X3BhbmVsIik7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9IDA7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gaC1yKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSByKjY7DQogICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcio2Ow0KICAgICAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoInNyYyIpICE9IHA4X2dmeF9kYXRbImNvbnRyb2xzX2xlZnRfcGFuZWwiXSkgLy8gb3B0aW1pc2F0aW9uOiBhdm9pZCByZWxvYWQ/IChicm93c2VyIHNob3VsZCBoYW5kbGUgdGhvdWdoKQ0KICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoInNyYyIsIHA4X2dmeF9kYXRbImNvbnRyb2xzX2xlZnRfcGFuZWwiXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIGNhcnQgKGNvbW1lbnRlZDsgd2FzIGEgZmFpbGVkIGF0dGVtcHQgdG8gcHJldmVudCBzY3JvbGwtb24tZHJhZyBvbiBzb21lIGJyb3dzZXJzKQ0KICAgICAgICAgICAgICAgIC8vIHA4X2ZyYW1lLnNjcm9sbEludG9WaWV3KHRydWUpOw0KICAgIA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19nZngiKS5zdHlsZS5kaXNwbGF5PSJ0YWJsZSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRvdWNoX2NvbnRyb2xzX2JhY2tncm91bmQiKS5zdHlsZS5kaXNwbGF5PSJ0YWJsZSI7DQogICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b3VjaF9jb250cm9sc19nZngiKS5zdHlsZS5kaXNwbGF5PSJub25lIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG91Y2hfY29udHJvbHNfYmFja2dyb3VuZCIpLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgaWYgKCFwOF9pc19ydW5uaW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHA4X3BsYXlhcmVhLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgICAgIHA4X2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5PSJmbGV4IjsNCiAgICAgICAgICAgICAgICBwOF9jb250YWluZXIuc3R5bGUubWFyZ2luVG9wPSJhdXRvIjsNCiAgICANCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9zdGFydF9idXR0b24iKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnN0eWxlLmRpc3BsYXk9ImZsZXgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9sYXlvdXQpOw0KICAgICAgICB9DQogICAgDQogICAgDQogICAgICAgIHZhciBwOF90b3VjaF9kZXRlY3RlZCA9IGZhbHNlOw0KICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHA4X3RvdWNoX2RldGVjdGVkID0gdHJ1ZTsNCiAgICANCiAgICAgICAgICAgIC8vIGhpZGUgY29kb190ZXh0YXJlYSAtLSBjbGlwYm9hcmQgc3VwcG9ydCBvbiBtb2JpbGUgaXMgbm90IGZlYXNpYmxlDQogICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RvX3RleHRhcmVhIik7DQogICAgICAgICAgICBpZiAoZWwgJiYgZWwuc3R5bGUuZGlzcGxheSAhPSAibm9uZSIpew0KICAgICAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICB9LCAge3Bhc3NpdmU6IHRydWV9KTsNCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocGljbzhfYXVkaW9fY29udGV4dCkgDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgcGljbzhfYXVkaW9fY29udGV4dC5yZXN1bWUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIqKiBwaWNvOF9hdWRpb19jb250ZXh0LnJlc3VtZSgpIGZhaWxlZCIpOw0KICAgICAgICAgICAgICAgIH0JDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgdmFyIHdlYkF1ZGlvQVBJID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IHx8IHdpbmRvdy5tb3pBdWRpb0NvbnRleHQgfHwgd2luZG93Lm9BdWRpb0NvbnRleHQgfHwgd2luZG93Lm1zQXVkaW9Db250ZXh0OwkJCQ0KICAgICAgICAgICAgaWYgKHdlYkF1ZGlvQVBJKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBpY284X2F1ZGlvX2NvbnRleHQgPSBuZXcgd2ViQXVkaW9BUEk7DQogICAgDQogICAgICAgICAgICAgICAgLy8gd2FrZSB1cCBpT1MNCiAgICAgICAgICAgICAgICBpZiAocGljbzhfYXVkaW9fY29udGV4dCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtbXlfc291cmNlX3NmeCA9IHBpY284X2F1ZGlvX2NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBkdW1teV9zb3VyY2Vfc2Z4LmJ1ZmZlciA9IHBpY284X2F1ZGlvX2NvbnRleHQuY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTsgLy8gZHVtbXkNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bW15X3NvdXJjZV9zZnguY29ubmVjdChwaWNvOF9hdWRpb19jb250ZXh0LmRlc3RpbmF0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bW15X3NvdXJjZV9zZnguc3RhcnQoMSwgMC4yNSk7IC8vIGdpdmVzIEludmFsaWRTdGF0ZUVycm9yIC0tIHdoeT8gaGFzbid0IGJlZW4gcGxheWVkIGJlZm9yZSANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vZHVtbXlfc291cmNlX3NmeC5ub3RlT24oMCk7IC8vIGRlbGV0ZW1lDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiKiogZHVtbXlfc291cmNlX3NmeC5zdGFydCgxLCAwLjI1KSBmYWlsZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9jbG9zZV9jYXJ0KCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8ganVzdCByZWxvYWQgcGFnZSEgdXNlZCBmb3IgdG91Y2ggYnV0dG9ucyAtLSBoYXJkIHRvIHJvbGwgYmFjayBzdGF0ZSANCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gIiI7IC8vIHRyaWdnZXJzIHJlbG9hZA0KICAgICAgICB9DQogICAgDQogICAgICAgIHZhciBwOF9pc19ydW5uaW5nID0gZmFsc2U7DQogICAgICAgIHZhciBwOF9zY3JpcHQgPSBudWxsOw0KICAgICAgICB2YXIgTW9kdWxlID0gbnVsbDsNCiAgICAgICAgZnVuY3Rpb24gcDhfcnVuX2NhcnQoKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocDhfaXNfcnVubmluZykgcmV0dXJuOw0KICAgICAgICAgICAgcDhfaXNfcnVubmluZyA9IHRydWU7DQogICAgDQogICAgICAgICAgICAvLyB0b3VjaDogaGlkZSBldmVyeXRoaW5nIGV4Y2VwdCBwOF9mcmFtZV8wDQogICAgICAgICAgICBpZiAocDhfdG91Y2hfZGV0ZWN0ZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keV8wIik7DQogICAgICAgICAgICAgICAgZWwyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X2ZyYW1lXzAiKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwgJiYgZWwyKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBjcmVhdGUgYXVkaW8gY29udGV4dCBhbmQgd2FrZSBpdCB1cCAoZm9yIGlPUyAtLSBuZWVkcyBoYXBwZW4gaW5zaWRlIHRvdWNoIGV2ZW50KQkJDQogICAgICAgICAgICBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpOw0KICAgIA0KICAgICAgICAgICAgLy8gc2hvdyB0b3VjaCBlbGVtZW50cw0KICAgICAgICAgICAgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncDhfY29udHJvbGxlcl9hcmVhJyk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIGVsc1tpXS5zdHlsZS5kaXNwbGF5PSIiOw0KICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gaW5zdGFsbCB0b3VjaCBldmVudHMuIFRoZXNlIGFsc28gc2VydmUgdG8gYmxvY2sgc2Nyb2xsaW5nIC8gcGluY2hpbmcgLyB6b29taW5nIG9uIHBob25lcyB3aGVuIHA4X2lzX3J1bm5pbmcNCiAgICAgICAgICAgICAgICAvLyBtb3ZlZCBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBjYWxscyBpbnRvIHBpY284X2J1dHRvbnNfZXZlbnQoKSAod2FudCB0byBsZXQgdG9wIGJ1dHRvbnMgcGFzcyB0aHJvdWdoKQ0KICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMCk7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMSk7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLCAgIGZ1bmN0aW9uKGV2ZW50KXsgcGljbzhfYnV0dG9uc19ldmVudChldmVudCwgMik7IH0sIHtwYXNzaXZlOiBmYWxzZX0pOw0KICAgIA0KICAgIA0KICAgICAgICAgICAgLy8gbG9hZCBhbmQgcnVuIHNjcmlwdA0KICAgICAgICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgICAgICAgICAgcDhfc2NyaXB0ID0gZTsNCiAgICAgICAgICAgIGUub25sb2FkID0gZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBzaG93IGNhbnZhcyAvIG1lbnUgYnV0dG9ucyBvbmx5IGFmdGVyIGxvYWRpbmcNCiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9wbGF5YXJlYSIpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheT0idGFibGUiOw0KICAgIA0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocDhfdXBkYXRlX2xheW91dF9oYXNoKSAhPT0gJ3VuZGVmaW5lZCcpDQogICAgICAgICAgICAgICAgICAgIHA4X3VwZGF0ZV9sYXlvdXRfaGFzaCA9IC03NzsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHA4X2J1dHRvbnNfaGFzaCkgIT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgICAgICAgICBwOF9idXR0b25zX2hhc2ggPSAtMzM7DQogICAgDQogICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlLnR5cGUgPSAiYXBwbGljYXRpb24vamF2YXNjcmlwdCI7DQogICAgICAgICAgICBlLnNyYyA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL1VHUy1Bc3NldHNAMDIwODc4MDI1YmUyMjQ4NWU2OWMzNWRmNmNjNjg4ZGRmYmE1NGIxYy9taW1pYy5qcyI7DQogICAgICAgICAgICBlLmlkID0gImVfc2NyaXB0IjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTsgLy8gbG9hZCBhbmQgcnVuDQogICAgDQogICAgICAgICAgICAvLyBoaWRlIHN0YXJ0IGJ1dHRvbiBhbmQgc2hvdyBjYW52YXMgLyBtZW51IGJ1dHRvbnMuIGhpZGUgc3RhcnQgYnV0dG9uDQogICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwOF9zdGFydF9idXR0b24iKTsNCiAgICAgICAgICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheT0ibm9uZSI7DQogICAgDQogICAgICAgICAgICAvLyBhZGQgI3BsYXlpbmcgZm9yIHRvdWNoc2NyZWVuIGRldmljZXMgKGFsbG93cyBiYWNrIGJ1dHRvbiB0byBjbG9zZSkNCiAgICAgICAgICAgIC8vIFggYnV0dG9uIGNhbiBhbHNvIGJlIHVzZWQgdG8gdHJpZ2dlciB0aGlzIA0KICAgICAgICAgICAgaWYgKHA4X3RvdWNoX2RldGVjdGVkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gIiNwbGF5aW5nIjsNCiAgICAgICAgICAgICAgICB3aW5kb3cub25oYXNoY2hhbmdlID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNlYXJjaCgicGxheWluZyIpIDwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAvLyBpbnN0YWxsIGRyYWcmZHJvcCBsaXN0ZW5lcnMNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIpOw0KICAgICAgICAgICAgICAgIGlmIChjYW52YXMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgZHJhZ292ZXIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZHJhZ292ZXIsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGRyYWdzdG9wLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgbm9wLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgcDhfZHJvcF9maWxlLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgDQogICAgICAgIA0KICAgICAgICAgICAgLy8gR2FtZXBhZCBjb2RlDQogICAgICAgIA0KICAgICAgICB2YXIgUDhfQlVUVE9OX08gPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDEwfTsNCiAgICAgICAgdmFyIFA4X0JVVFRPTl9YID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHgyMH07DQogICAgICAgIHZhciBQOF9EUEFEX0xFRlQgPSB7YWN0aW9uOididXR0b24nLCBjb2RlOiAweDF9Ow0KICAgICAgICB2YXIgUDhfRFBBRF9SSUdIVCA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4Mn07DQogICAgICAgIHZhciBQOF9EUEFEX1VQID0ge2FjdGlvbjonYnV0dG9uJywgY29kZTogMHg0fTsNCiAgICAgICAgdmFyIFA4X0RQQURfRE9XTiA9IHthY3Rpb246J2J1dHRvbicsIGNvZGU6IDB4OH07DQogICAgICAgIHZhciBQOF9NRU5VID0ge2FjdGlvbjonbWVudSd9Ow0KICAgICAgICB2YXIgUDhfTk9fQUNUSU9OID0ge2FjdGlvbjonbm9uZSd9Ow0KICAgIA0KICAgICAgICB2YXIgUDhfQlVUVE9OX01BUFBJTkcgPSBbDQogICAgICAgICAgICAvLyByZWY6IGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9nYW1lcGFkLyNyZW1hcHBpbmcNCiAgICAgICAgICAgIFA4X0JVVFRPTl9PLCAgICAgICAgICAvLyBCb3R0b20gZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X0JVVFRPTl9YLCAgICAgICAgICAvLyBSaWdodCBmYWNlIGJ1dHRvbg0KICAgICAgICAgICAgUDhfQlVUVE9OX1gsICAgICAgICAgIC8vIExlZnQgZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X0JVVFRPTl9PLCAgICAgICAgICAvLyBUb3AgZmFjZSBidXR0b24NCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBOZWFyIGxlZnQgc2hvdWxkZXIgYnV0dG9uIChMMSkNCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBOZWFyIHJpZ2h0IHNob3VsZGVyIGJ1dHRvbiAoUjEpDQogICAgICAgICAgICBQOF9OT19BQ1RJT04sICAgICAgICAgLy8gRmFyIGxlZnQgc2hvdWxkZXIgYnV0dG9uIChMMikNCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBGYXIgcmlnaHQgc2hvdWxkZXIgYnV0dG9uIChSMikNCiAgICAgICAgICAgIFA4X01FTlUsICAgICAgICAgICAgICAvLyBMZWZ0IGF1eGlsaWFyeSBidXR0b24gKHNlbGVjdCkNCiAgICAgICAgICAgIFA4X01FTlUsICAgICAgICAgICAgICAvLyBSaWdodCBhdXhpbGlhcnkgYnV0dG9uIChzdGFydCkNCiAgICAgICAgICAgIFA4X05PX0FDVElPTiwgICAgICAgICAvLyBMZWZ0IHN0aWNrIGJ1dHRvbg0KICAgICAgICAgICAgUDhfTk9fQUNUSU9OLCAgICAgICAgIC8vIFJpZ2h0IHN0aWNrIGJ1dHRvbg0KICAgICAgICAgICAgUDhfRFBBRF9VUCwgICAgICAgICAgIC8vIERwYWQgdXANCiAgICAgICAgICAgIFA4X0RQQURfRE9XTiwgICAgICAgICAvLyBEcGFkIGRvd24NCiAgICAgICAgICAgIFA4X0RQQURfTEVGVCwgICAgICAgICAvLyBEcGFkIGxlZnQNCiAgICAgICAgICAgIFA4X0RQQURfUklHSFQsICAgICAgICAvLyBEcGFkIHJpZ2h0DQogICAgICAgIF07DQogICAgDQogICAgICAgIC8vIFRyYWNrIHdoaWNoIHBsYXllciBpcyBjb250cm9sbGVyIGJ5IGVhY2ggZ2FtZXBhZC4gR2FtZXBhZCBpbmRleCBpIGNvbnRyb2xzIHRoZQ0KICAgICAgICAvLyBwbGF5ZXIgd2l0aCBpbmRleCBwaWNvOF9nYW1lcGFkc19tYXBwaW5nW2ldLiBHYW1lcGFkcyB3aXRoIG51bGwgcGxheWVyIGFyZQ0KICAgICAgICAvLyBjdXJyZW50bHkgdW5hc3NpZ25lZCAtIHRoZXkgZ2V0IGFzc2lnbmVkIHRvIGEgcGxheWVyIHdoZW4gYSBidXR0b24gaXMgcHJlc3NlZC4NCiAgICAgICAgdmFyIHBpY284X2dhbWVwYWRzX21hcHBpbmcgPSBbXTsNCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfdW5hc3NpZ25fZ2FtZXBhZChnYW1lcGFkX2luZGV4KSB7DQogICAgICAgICAgICBpZiAocGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tnYW1lcGFkX2luZGV4XSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcGljbzhfYnV0dG9uc1twaWNvOF9nYW1lcGFkc19tYXBwaW5nW2dhbWVwYWRfaW5kZXhdXSA9IDA7DQogICAgICAgICAgICBwaWNvOF9nYW1lcGFkc19tYXBwaW5nW2dhbWVwYWRfaW5kZXhdID0gbnVsbDsNCiAgICAgICAgfQ0KICAgIA0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9maXJzdF9wbGF5ZXJfd2l0aG91dF9nYW1lcGFkKG1heF9wbGF5ZXJzKSB7DQogICAgICAgICAgICB2YXIgYWxsb2NhdGVkX3BsYXllcnMgPSBwaWNvOF9nYW1lcGFkc19tYXBwaW5nLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9IG51bGw7IH0pOw0KICAgICAgICAgICAgdmFyIHNvcnRlZF9wbGF5ZXJzID0gQXJyYXkuZnJvbShhbGxvY2F0ZWRfcGxheWVycykuc29ydCgpOw0KICAgICAgICAgICAgZm9yICh2YXIgZGVzaXJlZCA9IDA7IGRlc2lyZWQgPCBzb3J0ZWRfcGxheWVycy5sZW5ndGggJiYgZGVzaXJlZCA8IG1heF9wbGF5ZXJzOyArK2Rlc2lyZWQpIHsNCiAgICAgICAgICAgICAgICBpZiAoZGVzaXJlZCAhPSBzb3J0ZWRfcGxheWVyc1tkZXNpcmVkXSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzaXJlZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc29ydGVkX3BsYXllcnMubGVuZ3RoIDwgbWF4X3BsYXllcnMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc29ydGVkX3BsYXllcnMubGVuZ3RoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfYXNzaWduX2dhbWVwYWRfdG9fcGxheWVyKGdhbWVwYWRfaW5kZXgsIHBsYXllcl9pbmRleCkgew0KICAgICAgICAgICAgcDhfdW5hc3NpZ25fZ2FtZXBhZChnYW1lcGFkX2luZGV4KTsNCiAgICAgICAgICAgIHBpY284X2dhbWVwYWRzX21hcHBpbmdbZ2FtZXBhZF9pbmRleF0gPSBwbGF5ZXJfaW5kZXg7DQogICAgICAgIH0NCiAgICANCiAgICANCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfY29udmVydF9zdGFuZGFyZF9nYW1lcGFkX3RvX2J1dHRvbl9zdGF0ZShnYW1lcGFkLCBheGlzX3RocmVzaG9sZCwgYnV0dG9uX3RocmVzaG9sZCkgew0KICAgICAgICAgICAgLy8gR2l2ZW4gYSBnYW1lcGFkIG9iamVjdCwgcmV0dXJuOg0KICAgICAgICAgICAgLy8gew0KICAgICAgICAgICAgLy8gICAgIGJ1dHRvbl9zdGF0ZTogdGhlIGJpbmFyeSBlbmNvZGVkIFBpY28gOCBidXR0b24gc3RhdGUNCiAgICAgICAgICAgIC8vICAgICBtZW51X2J1dHRvbjogdHJ1ZSBpZiBhbnkgbWVudS1tYXBwZWQgYnV0dG9uIHdhcyBwcmVzc2VkDQogICAgICAgICAgICAvLyAgICAgYW55X2J1dHRvbjogdHJ1ZSBpZiBhbnkgYnV0dG9uIHdhcyBwcmVzc2VkLCBpbmNsdWRpbmcgZC1wYWQNCiAgICAgICAgICAgIC8vICAgICAgICAgYnV0dG9ucyBhbmQgdW5tYXBwZWQgYnV0dG9ucw0KICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgaWYgKCFnYW1lcGFkIHx8ICFnYW1lcGFkLmF4ZXMgfHwgIWdhbWVwYWQuYnV0dG9ucykgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZTogMCwNCiAgICAgICAgICAgICAgICAgICAgbWVudV9idXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBhbnlfYnV0dG9uOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBidXR0b25fc3RhdGVfZnJvbV9heGlzKGF4aXMsIGxvd19zdGF0ZSwgaGlnaF9zdGF0ZSwgZGVmYXVsdF9zdGF0ZSkgew0KICAgICAgICAgICAgICAgIGlmIChheGlzICYmIGF4aXMgPCAtYXhpc190aHJlc2hvbGQpIHJldHVybiBsb3dfc3RhdGU7DQogICAgICAgICAgICAgICAgaWYgKGF4aXMgJiYgYXhpcyA+IGF4aXNfdGhyZXNob2xkKSByZXR1cm4gaGlnaF9zdGF0ZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdF9zdGF0ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBheGVzX2FjdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgYnV0dG9uX3N0YXRlX2Zyb21fYXhpcyhnYW1lcGFkLmF4ZXNbMF0sIFA4X0RQQURfTEVGVCwgUDhfRFBBRF9SSUdIVCwgUDhfTk9fQUNUSU9OKSwNCiAgICAgICAgICAgICAgICBidXR0b25fc3RhdGVfZnJvbV9heGlzKGdhbWVwYWQuYXhlc1sxXSwgUDhfRFBBRF9VUCwgUDhfRFBBRF9ET1dOLCBQOF9OT19BQ1RJT04pLA0KICAgICAgICAgICAgXTsNCiAgICANCiAgICAgICAgICAgIHZhciBidXR0b25fYWN0aW9ucyA9IGdhbWVwYWQuYnV0dG9ucy5tYXAoZnVuY3Rpb24gKGJ1dHRvbiwgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICB2YXIgcHJlc3NlZCA9IGJ1dHRvbi52YWx1ZSA+IGJ1dHRvbl90aHJlc2hvbGQgfHwgYnV0dG9uLnByZXNzZWQ7DQogICAgICAgICAgICAgICAgaWYgKCFwcmVzc2VkKSByZXR1cm4gUDhfTk9fQUNUSU9OOw0KICAgICAgICAgICAgICAgIHJldHVybiBQOF9CVVRUT05fTUFQUElOR1tpbmRleF0gfHwgUDhfTk9fQUNUSU9OOw0KICAgICAgICAgICAgfSk7DQogICAgDQogICAgICAgICAgICB2YXIgYWxsX2FjdGlvbnMgPSBheGVzX2FjdGlvbnMuY29uY2F0KGJ1dHRvbl9hY3Rpb25zKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG1lbnVfYnV0dG9uID0gYnV0dG9uX2FjdGlvbnMuc29tZShmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBhY3Rpb24uYWN0aW9uID09ICdtZW51JzsgfSk7DQogICAgICAgICAgICB2YXIgYnV0dG9uX3N0YXRlID0gKGFsbF9hY3Rpb25zDQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5hY3Rpb24gPT0gJ2J1dHRvbic7IH0pDQogICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5jb2RlOyB9KQ0KICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgY29kZSkgeyByZXR1cm4gcmVzdWx0IHwgY29kZTsgfSwgMCkNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICB2YXIgYW55X2J1dHRvbiA9IGdhbWVwYWQuYnV0dG9ucy5zb21lKGZ1bmN0aW9uIChidXR0b24pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uLnZhbHVlID4gYnV0dG9uX3RocmVzaG9sZCB8fCBidXR0b24ucHJlc3NlZDsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgYW55X2J1dHRvbiB8PSBidXR0b25fc3RhdGU7IC8vand3OiBpbmNsdWRlIGF4ZXMgMCwxIGFzIG1pZ2h0IGJlIGZpcnN0IGludGVuZGVkIGFjdGlvbg0KICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBidXR0b25fc3RhdGUsDQogICAgICAgICAgICAgICAgbWVudV9idXR0b24sDQogICAgICAgICAgICAgICAgYW55X2J1dHRvbg0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICAvLyBqd3c6IHBpY28tOCAwLjIuMSB2ZXJzaW9uIGZvciB1bm1hcHBlZCBnYW1lcGFkcywgZm9sbG93aW5nIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUNCiAgICAgICAgLy8gYXhlcyAwLDEgJiBidXR0b25zIDAsMSwyLDMgYXJlIHJlYXNvbmFibHkgc2FmZS4gZG9uJ3QgdHJ5IHRvIHJlYWQgZHBhZC4NCiAgICAgICAgLy8gbWVudSBidXR0b25zIGFyZSB1bnByZWRpY3RhYmxlLCBidXQgdXNlIDYuLjggYW55d2F5IChiZXR0ZXIgdG8gaGF2ZSBhIHdlaXJkIG1lbnUgYnV0dG9uIHRoYW4gbm9uZSkNCiAgICANCiAgICAgICAgZnVuY3Rpb24gcDhfY29udmVydF91bm1hcHBlZF9nYW1lcGFkX3RvX2J1dHRvbl9zdGF0ZShnYW1lcGFkLCBheGlzX3RocmVzaG9sZCwgYnV0dG9uX3RocmVzaG9sZCkgew0KICAgIA0KICAgICAgICAgICAgaWYgKCFnYW1lcGFkIHx8ICFnYW1lcGFkLmF4ZXMgfHwgIWdhbWVwYWQuYnV0dG9ucykgew0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZTogMCwNCiAgICAgICAgICAgICAgICAgICAgbWVudV9idXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBhbnlfYnV0dG9uOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICB2YXIgYnV0dG9uX3N0YXRlID0gMDsNCiAgICANCiAgICAgICAgICAgIGlmIChnYW1lcGFkLmF4ZXNbMF0gJiYgZ2FtZXBhZC5heGVzWzBdIDwgLWF4aXNfdGhyZXNob2xkKSBidXR0b25fc3RhdGUgfD0gMHgxOw0KICAgICAgICAgICAgaWYgKGdhbWVwYWQuYXhlc1swXSAmJiBnYW1lcGFkLmF4ZXNbMF0gPiBheGlzX3RocmVzaG9sZCkgIGJ1dHRvbl9zdGF0ZSB8PSAweDI7DQogICAgICAgICAgICBpZiAoZ2FtZXBhZC5heGVzWzFdICYmIGdhbWVwYWQuYXhlc1sxXSA8IC1heGlzX3RocmVzaG9sZCkgYnV0dG9uX3N0YXRlIHw9IDB4NDsNCiAgICAgICAgICAgIGlmIChnYW1lcGFkLmF4ZXNbMV0gJiYgZ2FtZXBhZC5heGVzWzFdID4gYXhpc190aHJlc2hvbGQpICBidXR0b25fc3RhdGUgfD0gMHg4Ow0KICAgIA0KICAgICAgICAgICAgLy8gYnV0dG9uczogZmlyc3QgNCB0YWtlbiB0byBiZSBPL1gsIDYuLjggdGFrZW4gdG8gYmUgbWVudSBidXR0b24NCiAgICANCiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBnYW1lcGFkLmJ1dHRvbnMubGVuZ3RoOyBqKyspDQogICAgICAgICAgICBpZiAoZ2FtZXBhZC5idXR0b25zW2pdLnZhbHVlID4gMCB8fCBnYW1lcGFkLmJ1dHRvbnNbal0ucHJlc3NlZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoaiA8IDQpDQogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZSB8PSAoMHgxMCA8PCAoKChqKzEpLzIpJjEpKTsgLy8gMCAxIDEgMCAtLSBBLFggLT4gTyxYIG9uIHhib3gzNjANCiAgICAgICAgICAgICAgICBlbHNlIGlmIChqID49IDYgJiYgaiA8PSA4KQ0KICAgICAgICAgICAgICAgICAgICBidXR0b25fc3RhdGUgfD0gMHg0MDsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHZhciBtZW51X2J1dHRvbiA9IGJ1dHRvbl9zdGF0ZSAmIDB4NDA7DQogICAgDQogICAgICAgICAgICB2YXIgYW55X2J1dHRvbiA9IGdhbWVwYWQuYnV0dG9ucy5zb21lKGZ1bmN0aW9uIChidXR0b24pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uLnZhbHVlID4gYnV0dG9uX3RocmVzaG9sZCB8fCBidXR0b24ucHJlc3NlZDsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgYW55X2J1dHRvbiB8PSBidXR0b25fc3RhdGU7IC8vand3OiBpbmNsdWRlIGF4ZXMgMCwxIGFzIG1pZ2h0IGJlIGZpcnN0IGludGVuZGVkIGFjdGlvbg0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIGJ1dHRvbl9zdGF0ZSwNCiAgICAgICAgICAgICAgICBtZW51X2J1dHRvbiwNCiAgICAgICAgICAgICAgICBhbnlfYnV0dG9uDQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgDQogICAgICAgIA0KICAgICAgICAvLyBnYW1lcGFkICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2FtZXBhZF9BUEkvVXNpbmdfdGhlX0dhbWVwYWRfQVBJDQogICAgICAgIC8vIChzZXRzIGJpdHMgaW4gcGljbzhfYnV0dG9uc1tdKQ0KICAgICAgICBmdW5jdGlvbiBwOF91cGRhdGVfZ2FtZXBhZHMoKSB7DQogICAgICAgICAgICB2YXIgYXhpc190aHJlc2hvbGQgPSAwLjM7DQogICAgICAgICAgICB2YXIgYnV0dG9uX3RocmVzaG9sZCA9IDAuNTsgLy8gU2hvdWxkIGJlIHVubmVjZXNzYXJ5LCB3ZSBzaG91bGQgYmUgYWJsZSB0byB0cnVzdCAucHJlc3NlZA0KICAgICAgICAgICAgdmFyIG1heF9wbGF5ZXJzID0gODsNCiAgICAgICAgICAgIHZhciBncHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKTsNCiAgICANCiAgICAgICAgICAgIGlmICghZ3BzKSByZXR1cm47DQogICAgDQogICAgICAgICAgICAvLyBJbiBDaHJvbWUsIGdwcyBpcyBpdGVyYWJsZSBidXQgaXQncyBub3QgYW4gYXJyYXkuDQogICAgICAgICAgICBncHMgPSBBcnJheS5mcm9tKGdwcyk7DQogICAgDQogICAgICAgICAgICBwaWNvOF9nYW1lcGFkcy5jb3VudCA9IGdwcy5sZW5ndGg7DQogICAgICAgICAgICB3aGlsZSAoZ3BzLmxlbmd0aCA+IHBpY284X2dhbWVwYWRzX21hcHBpbmcubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgcGljbzhfZ2FtZXBhZHNfbWFwcGluZy5wdXNoKG51bGwpOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgdmFyIG1lbnVfYnV0dG9uID0gZmFsc2U7DQogICAgICAgICAgICB2YXIgZ2FtZXBhZF9zdGF0ZXMgPSBncHMubWFwKGZ1bmN0aW9uIChncCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAoZ3AgJiYgZ3AubWFwcGluZyA9PSAic3RhbmRhcmQiKSA/DQogICAgICAgICAgICAgICAgICAgIHA4X2NvbnZlcnRfc3RhbmRhcmRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ3AsIGF4aXNfdGhyZXNob2xkLCBidXR0b25fdGhyZXNob2xkKSA6DQogICAgICAgICAgICAgICAgICAgIHA4X2NvbnZlcnRfdW5tYXBwZWRfZ2FtZXBhZF90b19idXR0b25fc3RhdGUoZ3AsIGF4aXNfdGhyZXNob2xkLCBidXR0b25fdGhyZXNob2xkKTsNCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgLy8gVW5hc3NpZ24gZGlzY29ubmVjdGVkIGdhbWVwYWRzLg0KICAgICAgICAgICAgLy8gZ3BzLmZvckVhY2goZnVuY3Rpb24gKGdwLCBpKSB7IGlmIChncCAmJiAhZ3AuY29ubmVjdGVkKSB7IHA4X3VuYXNzaWduX2dhbWVwYWQoaSk7IH19KTsNCiAgICAgICAgICAgIGdwcy5mb3JFYWNoKGZ1bmN0aW9uIChncCwgaSkgeyBpZiAoIWdwIHx8ICFncC5jb25uZWN0ZWQpIHsgcDhfdW5hc3NpZ25fZ2FtZXBhZChpKTsgfX0pOyAvLyBodHRwczovL3d3dy5sZXhhbG9mZmxlLmNvbS9iYnMvP3BpZD04NzEzMiNwDQogICAgDQogICAgDQogICAgICAgICAgICAvLyBBc3NpZ24gdW5hc3NpZ25lZCBnYW1lcGFkcyB3aGVuIGFueSBidXR0b24gaXMgcHJlc3NlZC4NCiAgICAgICAgICAgIGdhbWVwYWRfc3RhdGVzLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKHN0YXRlLmFueV9idXR0b24gJiYgcGljbzhfZ2FtZXBhZHNfbWFwcGluZ1tpXSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdF9mcmVlX3BsYXllciA9IHA4X2ZpcnN0X3BsYXllcl93aXRob3V0X2dhbWVwYWQobWF4X3BsYXllcnMpOw0KICAgICAgICAgICAgICAgICAgICBwOF9hc3NpZ25fZ2FtZXBhZF90b19wbGF5ZXIoaSwgZmlyc3RfZnJlZV9wbGF5ZXIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgIA0KICAgICAgICAgICAgLy8gVXBkYXRlIHBpY284X2J1dHRvbnMgYXJyYXkuDQogICAgICAgICAgICBnYW1lcGFkX3N0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChnYW1lcGFkX3N0YXRlLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKHBpY284X2dhbWVwYWRzX21hcHBpbmdbaV0gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBwaWNvOF9idXR0b25zW3BpY284X2dhbWVwYWRzX21hcHBpbmdbaV1dID0gZ2FtZXBhZF9zdGF0ZS5idXR0b25fc3RhdGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgDQogICAgICAgICAgICAvLyBVcGRhdGUgbWVudSBidXR0b24uDQogICAgICAgICAgICAvLyBQaWNvIDggb25seSByZWNvZ25pc2VzIHRoZSBtZW51IGJ1dHRvbiBvbiB0aGUgZmlyc3QgcGxheWVyLCBzbyB3ZQ0KICAgICAgICAgICAgLy8gcHJlc3MgaXQgd2hlbiBhbnkgZ2FtZXBhZCBoYXMgcHJlc3NlZCBhIGJ1dHRvbiBtYXBwZWQgdG8gbWVudS4NCiAgICAgICAgICAgIGlmIChnYW1lcGFkX3N0YXRlcy5zb21lKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUubWVudV9idXR0b247IH0pKSB7DQogICAgICAgICAgICAgICAgcGljbzhfYnV0dG9uc1swXSB8PSAweDQwOw0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9nYW1lcGFkcyk7DQogICAgICAgIH0NCiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHA4X3VwZGF0ZV9nYW1lcGFkcyk7DQogICAgDQogICAgICAgIC8vIEVuZCBvZiBnYW1lcGFkIGNvZGUNCiAgICANCiAgICANCiAgICAgICAgLy8ga2V5IGJsb2NrZXIuIHByZXZlbnQgYnJvd3NlciBvcGVyYXRpb25zIHdoaWxlIHBsYXlpbmcgY2FydCBzbyB0aGF0IFBJQ08tOCBjYW4gdXNlIHRob3NlIGtleXMgZS5nLiBjdXJzb3JzIHRvIHNjcm9sbCwgY3RybC1yIHRvIHJlbG9hZA0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywNCiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsNCiAgICAgICAgICAgIGlmICghcDhfaXNfcnVubmluZykgcmV0dXJuOw0KICAgIA0KICAgICAgICAgICAgaWYgKHBpY284X3N0YXRlLmhhc19mb2N1cyA9PSAxKQ0KICAgICAgICAgICAgICAgIGlmIChbMzIsIDM3LCAzOCwgMzksIDQwLCA3NywgODIsIDgwLCA5XS5pbmRleE9mKGV2ZW50LmtleUNvZGUpID4gLTEpICAgICAgIC8vIGJsb2NrIG9ubHkgY3Vyc29ycywgTSBSIFAsIHRhYg0KICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgDQogICAgICAgIH0se3Bhc3NpdmU6IGZhbHNlfSk7DQogICAgDQogICAgICAgIC8vIHdoZW4gdXNpbmcgY29kb190ZXh0YXJlYSB0byBkZXRlcm1pbmUgZm9jdXMsIG5lZWQgdG8gZXhwbGljaXRseSBoYW5kIGZvY3VzIGJhY2sgd2hlbiBjbGlja2luZyBhIHA4X21lbnVfYnV0dG9uDQogICAgICAgIGZ1bmN0aW9uIHA4X2dpdmVfZm9jdXMoKQ0KICAgICAgICB7DQogICAgICAgICAgICBlbCA9ICh0eXBlb2YgY29kb190ZXh0YXJlYSA9PT0gJ3VuZGVmaW5lZCcpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvZG9fdGV4dGFyZWEiKSA6IGNvZG9fdGV4dGFyZWE7DQogICAgICAgICAgICBpZiAoZWwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWwuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICBlbC5zZWxlY3QoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgICAgICBmdW5jdGlvbiBwOF9yZXF1ZXN0X2Z1bGxzY3JlZW4oKSB7DQogICAgDQogICAgICAgICAgICB2YXIgaXNfZnVsbHNjcmVlbj0oZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuIHx8IGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpOw0KICAgIA0KICAgICAgICAgICAgaWYgKGlzX2Z1bGxzY3JlZW4pDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInA4X3BsYXlhcmVhIik7DQogICAgDQogICAgICAgICAgICBpZiAoIGVsLnJlcXVlc3RGdWxsc2NyZWVuICkgew0KICAgICAgICAgICAgICAgIGVsLnJlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKCBlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbiApIHsNCiAgICAgICAgICAgICAgICBlbC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICggZWwud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4gKSB7DQogICAgICAgICAgICAgICAgZWwud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4oIEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQgKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIA0KICAgIDwvc2NyaXB0Pg0KICAgIA0KICAgIDxTVFlMRSBUWVBFPSJ0ZXh0L2NzcyI+DQogICAgPCEtLQ0KICAgIC5wOF9tZW51X2J1dHRvbnsNCiAgICAgICAgb3BhY2l0eTowLjM7DQogICAgICAgIHBhZGRpbmc6NHB4Ow0KICAgICAgICBkaXNwbGF5OnRhYmxlOw0KICAgICAgICB3aWR0aDoyNHB4Ow0KICAgICAgICBoZWlnaHQ6MjRweDsNCiAgICAgICAgZmxvYXQ6cmlnaHQ7DQogICAgfQ0KICAgIA0KICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NTEycHgpIHsNCiAgICAgICAgLnA4X21lbnVfYnV0dG9uew0KICAgICAgICAgICAgd2lkdGg6MjRweDsgbWFyZ2luLWxlZnQ6OHB4OyBtYXJnaW4tYm90dG9tOjhweDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAucDhfbWVudV9idXR0b246aG92ZXJ7DQogICAgICAgIG9wYWNpdHk6MS4wOw0KICAgICAgICBjdXJzb3I6cG9pbnRlcjsNCiAgICB9DQogICAgDQogICAgY2FudmFzew0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IG9wdGltaXplU3BlZWQ7DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiAtd2Via2l0LW9wdGltaXplLWNvbnRyYXN0Ow0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IG9wdGltaXplLWNvbnRyYXN0Ow0KICAgICAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDsNCiAgICAgICAgLW1zLWludGVycG9sYXRpb24tbW9kZTogbmVhcmVzdC1uZWlnaGJvcjsNCiAgICAgICAgYm9yZGVyOiAwcHg7DQogICAgICAgIGN1cnNvcjogbm9uZTsNCiAgICB9DQogICAgDQogICAgDQogICAgLnA4X3N0YXJ0X2J1dHRvbnsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBwaXhlbGF0ZWQ7DQogICAgICAgIGltYWdlLXJlbmRlcmluZzogLW1vei1jcmlzcC1lZGdlczsNCiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBjcmlzcC1lZGdlczsNCiAgICAgICAgY3Vyc29yOnBvaW50ZXI7DQogICAgICAgIGJhY2tncm91bmQ6dXJsKCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU1nQUFBRElDQUlBQUFBaU9qbkpBQUFBQkdkQlRVRUFBTEdQQy94aEJRQUFBaUpKUkVGVWVGN3QwSUVBQUFBQXc2RDVVeC9raFZCaHdJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0RCZ3dJQUJBd1lNR0REd01ERFZsd0FCQldjU3JRQUFBQUJKUlU1RXJrSmdnZz09Iik7DQogICAgICAgIC1yZXBlYXQgY2VudGVyOw0KICAgICAgICAtd2Via2l0LWJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgLW1vei1iYWNrZ3JvdW5kLXNpemU6Y292ZXI7IC1vLWJhY2tncm91bmQtc2l6ZTpjb3ZlcjsgYmFja2dyb3VuZC1zaXplOmNvdmVyOw0KICAgIH0NCiAgICANCiAgICAuYnV0dG9uX2dmeHsNCiAgICAgICAgc3Ryb2tlLXdpZHRoOjI7DQogICAgICAgIHN0cm9rZTogI2ZmZmZmZjsNCiAgICAgICAgc3Ryb2tlLW9wYWNpdHk6MC40Ow0KICAgICAgICBmaWxsLW9wYWNpdHk6MC4yOw0KICAgICAgICBmaWxsOmJsYWNrOw0KICAgIH0NCiAgICANCiAgICAuYnV0dG9uX2dmeF9pY29uew0KICAgICAgICBzdHJva2Utd2lkdGg6MzsNCiAgICAgICAgc3Ryb2tlOiAjOTA5MDkwOw0KICAgICAgICBzdHJva2Utb3BhY2l0eTowLjc7DQogICAgICAgIGZpbGw6bm9uZTsNCiAgICB9DQogICAgDQogICAgLS0+DQogICAgPC9TVFlMRT4NCiAgICANCiAgICA8L2hlYWQ+DQogICAgDQogICAgPGJvZHkgc3R5bGU9InBhZGRpbmc6MHB4OyBtYXJnaW46MHB4OyBjb2xvcjojY2NjIj4NCiAgICA8ZGl2IGlkPSJib2R5XzAiPiA8IS0tIGhpZGUgdGhpcyB3aGVuIHBsYXlpbmcgaW4gbW9iaWxlIChwOF90b3VjaF9kZXRlY3RlZCkgc28gdGhhdCBlbGVtZW50cyBkb24ndCBhZmZlY3QgbGF5b3V0IC0tPg0KICAgIA0KICAgIA0KICAgIDwhLS0gQWRkIGFueSBjb250ZW50IGFib3ZlIHRoZSBjYXJ0IGhlcmUgLS0+DQogICAgDQogICAgDQogICAgPGRpdiBpZD0icDhfZnJhbWVfMCIgc3R5bGU9Im1heC13aWR0aDo4MDBweDsgbWF4LWhlaWdodDo4MDBweDsgbWFyZ2luOmF1dG87Ij4gPCEtLSBkb3VibGUgZnVuY3Rpb246IGxpbWl0IHNpemUsIGFuZCBkaXNwbGF5IG9ubHkgdGhpcyBkaXYgZm9yIHRvdWNoIGRldmljZXMgLS0+DQogICAgPGRpdiBpZD0icDhfZnJhbWUiIHN0eWxlPSJkaXNwbGF5OmZsZXg7IHdpZHRoOjEwMCU7IG1heC13aWR0aDoxMDB2dzsgaGVpZ2h0OjEwMHZ3OyBtYXgtaGVpZ2h0OjEwMHZoOyBtYXJnaW46YXV0bzsiPg0KICAgIA0KICAgICAgICA8ZGl2IGlkPSJwOF9tZW51X2J1dHRvbnNfdG91Y2giIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgd2lkdGg6MTAwJTsgei1pbmRleDoxMDsgbGVmdDowcHg7Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InA4X21lbnVfYnV0dG9uIiBpZD0icDhiX2Z1bGwiICBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW4tbGVmdDoxMHB4IiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IHA4X3JlcXVlc3RfZnVsbHNjcmVlbigpOyI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgaWQ9InA4Yl9zb3VuZCIgc3R5bGU9ImZsb2F0OmxlZnQ7bWFyZ2luLWxlZnQ6MTBweCIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpOyBNb2R1bGUucGljbzhUb2dnbGVTb3VuZCgpOyI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgaWQ9InA4Yl9jbG9zZSIgc3R5bGU9ImZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweCIgb25DbGljaz0icDhfY2xvc2VfY2FydCgpOyI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIA0KICAgICAgICA8ZGl2IGlkPSJwOF9jb250YWluZXIiDQogICAgICAgICAgICBzdHlsZT0ibWFyZ2luOmF1dG87IGRpc3BsYXk6dGFibGU7Ig0KICAgICAgICAgICAgb25jbGljaz0icDhfY3JlYXRlX2F1ZGlvX2NvbnRleHQoKTsgcDhfcnVuX2NhcnQoKTsiPg0KICAgIA0KICAgICAgICAgICAgPGRpdiBpZD0icDhfc3RhcnRfYnV0dG9uIiBjbGFzcz0icDhfc3RhcnRfYnV0dG9uIiBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGRpc3BsYXk6ZmxleDsiPg0KICAgICAgICAgICAgICAgIDxpbWcgd2lkdGg9ODAgaGVpZ2h0PTgwIHN0eWxlPSJtYXJnaW46YXV0bzsiDQogICAgICAgICAgICBzcmM9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRkFBQUFCUUNBWUFBQUNPRWZLdEFBQUJwa2xFUVZSNDJ1M2F1MjNEUUJDRVlVWE9YSUdLY3VqUVhVZ0Z1QTBYSUtnVzkwUTlvRUFnK0xqZDI3dmQyUnNDZjA1OGdFRHFob2ZQaitPQjZTTUNBUWxJUUFJeUFoS1FnQVJrQkFRRG5NNlhTUnNCNy8yZS90U0EwLy8xMmZDQUtzUVgzbnREQTRvUkZ3QlJJYzBBaXhFMzhCQWhUUUdMRUFzQlVTRE5BWGNSaFlEUklac0FQbHA5OVZFQ1JvWHNEcGdOMGcwd0M2UTdJRHBrR0VCVXlHNkEwK3ZLQnRrZE1CdWtHMkFXU0hkQWRNZ3dnS2lRNFFEUklNTUNva0NHQjR3T0NRUFlGVkt3MmNBQk5vY1VqbDZ3Z0UwZ0Zhc2hQS0FacEhKMlRRTllCVm14VzZjREZFTldEdjlwQVVzaENWZ0pTY0JLU0FJU2tEOWhQa1Q0R2tOQU1kemVweWo4S3llODUyRUJMZTUxQ1pISFdRSzRKY1RoRDFTbGNIUEVZWS8wYStBMG42U2tHWlY2dzZXWk5iM2c0SWQxYjdod2dHaHdZUUJSNGR3QjBlSGNBTFBBZFFmTUJoY09FQTB1RENBcW5Ec2dPcHdiWUJhNHBvQS8zMStyWllGckJyaUZwd0dNQ3RjRWNBOVBBaGdkemh5d0JLOEVFUVhPRkZDQ3R3YUlCbWNHS01XYkk2TENtUUJxOFI2aHc1a0FNZ0lTa0lBRUpDQWpJQUVKU0VCR1FJOXVrVjdsUm45bkQrZ0FBQUFBU1VWT1JLNUNZSUk9Ii8+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICANCiAgICAgICAgICAgIDxkaXYgaWQ9InA4X3BsYXlhcmVhIiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW46YXV0bzsNCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOyAtbW96LXVzZXItc2VsZWN0OiBub25lOyB1c2VyLXNlbGVjdDogbm9uZTsgLXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7DQogICAgICAgICAgICAiPg0KICAgIA0KICAgICAgICAgICAgICAgIDxkaXYgIGlkPSJ0b3VjaF9jb250cm9sc19iYWNrZ3JvdW5kIg0KICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSIgcG9pbnRlci1ldmVudHM6bm9uZTsgZGlzcGxheTpub25lOyBiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmZpeGVkOyB0b3A6MHB4OyBsZWZ0OjBweDsgYm9yZGVyOjA7IHdpZHRoOjEwMHZ3OyBoZWlnaHQ6MTAwdmgiPg0KICAgICAgICAgICAgICAgICAgICAmbmJzcA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgIA0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgcG9zaXRpb246cmVsYXRpdmUiPg0KICAgICAgICAgICAgICAgICAgICA8IS0tIHBvaW50ZXItZXZlbnRzIHR1cm5lZCBvZmYgZm9yIG1vYmlsZSBpbiBwOF91cGRhdGVfbGF5b3V0IGJlY2F1c2UgbmVlZCBmb3IgZGVza3RvcCBtb3VzZSAtLT4NCiAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBjbGFzcz0iZW1zY3JpcHRlbiIgaWQ9ImNhbnZhcyIgb25jb250ZXh0bWVudT0iZXZlbnQucHJldmVudERlZmF1bHQoKTsiID4NCiAgICAgICAgICAgICAgICAgICAgPC9jYW52YXM+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9cDhfbWVudV9idXR0b25zIGlkPSJwOF9tZW51X2J1dHRvbnMiIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MTI1cHgiIGlkPSJwOGJfY29udHJvbHMiIG9uQ2xpY2s9InA4X2dpdmVfZm9jdXMoKTsgTW9kdWxlLnBpY284VG9nZ2xlQ29udHJvbE1lbnUoKTsiPjwvZGl2PgkJCQkJDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206OTBweCIgaWQ9InA4Yl9wYXVzZSIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBNb2R1bGUucGljbzhUb2dnbGVQYXVzZWQoKTsgcDhfdXBkYXRlX2xheW91dF9oYXNoID0gLTIyOyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206NTVweCIgaWQ9InA4Yl9zb3VuZCIgb25DbGljaz0icDhfZ2l2ZV9mb2N1cygpOyBwOF9jcmVhdGVfYXVkaW9fY29udGV4dCgpOyBNb2R1bGUucGljbzhUb2dnbGVTb3VuZCgpOyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwOF9tZW51X2J1dHRvbiIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MjBweCIgaWQ9InA4Yl9mdWxsIiBvbkNsaWNrPSJwOF9naXZlX2ZvY3VzKCk7IHA4X3JlcXVlc3RfZnVsbHNjcmVlbigpOyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgIA0KICAgIA0KICAgICAgICAgICAgICAgIDwhLS0gZGlzcGxheSBhZnRlciBmaXJzdCBsYXlvdXQgdXBkYXRlIC0tPg0KICAgICAgICAgICAgICAgIDxkaXYgIGlkPSJ0b3VjaF9jb250cm9sc19nZngiDQogICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IiBwb2ludGVyLWV2ZW50czpub25lOyBkaXNwbGF5OnRhYmxlOyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7IHRvcDowcHg7IGxlZnQ6MHB4OyBib3JkZXI6MDsgd2lkdGg6MTAwdnc7IGhlaWdodDoxMDB2aCI+DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iIiBpZD0iY29udHJvbHNfcmlnaHRfcGFuZWwiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgb3BhY2l0eTowLjU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIiIGlkPSJjb250cm9sc19sZWZ0X3BhbmVsIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7ICBvcGFjaXR5OjAuNTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIDwvZGl2PiA8IS0tIHRvdWNoX2NvbnRyb2xzX2dmeCAtLT4NCiAgICANCiAgICAgICAgICAgICAgICA8IS0tIHVzZWQgZm9yIGNsaXBib2FyZCBhY2Nlc3MgJiBrZXlib2FyZCBpbnB1dDsgZGlzcGxheWVkIGFuZCB1c2VkIGJ5IFBJQ08tOCBvbmx5IG9uY2UgbmVlZGVkLiBjYW4gYmUgc2FmZWx5IHJlbW92ZWQgaWYgY2xpcGJvYXJkIC8ga2V5IHByZXNzZXMgbm90IG5lZWRlZC4gLS0+DQogICAgICAgICAgICAgICAgPCEtLSAobmVlZHMgdG8gYmUgaW5zaWRlIHA4X3BsYXlhcmVhIHNvIHRoYXQgaXQgc3RpbGwgd29ya3MgdW5kZXIgQ2hyb21lIHdoZW4gZnVsbHNjcmVlbmVkKSAtLT4NCiAgICAgICAgICAgICAgICA8IS0tIDAuMi41OiBhZGRlZCAiZGlzcGxheTpub25lIjsgcGljbzguanMgc2hvd3Mgb24gZGVtYW5kIHRvIGF2b2lkIG1hYyBvc3ggYWNjZW50IGNoYXJhY3RlciBzZWxlY3RvciAvLyBodHRwczovL3d3dy5sZXhhbG9mZmxlLmNvbS9iYnMvP3RpZD00Nzc0MyAtLT4NCiAgICANCiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImNvZG9fdGV4dGFyZWEiIGNsYXNzPSJlbXNjcmlwdGVuIiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDotOTk5OXB4OyBoZWlnaHQ6MHB4OyBvdmVyZmxvdzpoaWRkZW4iPjwvdGV4dGFyZWE+DQogICAgDQogICAgICAgICAgICA8L2Rpdj4gPCEtLXA4X3BsYXlhcmVhIC0tPg0KICAgIA0KICAgICAgICA8L2Rpdj4gPCEtLSBwOF9jb250YWluZXIgLS0+DQogICAgDQogICAgPC9kaXY+IDwhLS0gcDhfZnJhbWUgLS0+DQogICAgPC9kaXY+IDwhLS0gcDhfZnJhbWVfMCBzaXplIGxpbWl0IC0tPg0KICAgIA0KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCiAgICANCiAgICAgICAgcDhfdXBkYXRlX2xheW91dCgpOw0KICAgICAgICBwOF91cGRhdGVfYnV0dG9uX2ljb25zKCk7DQogICAgDQogICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7DQogICAgICAgIE1vZHVsZSA9IHt9Ow0KICAgICAgICBNb2R1bGUuY2FudmFzID0gY2FudmFzOw0KICAgIA0KICAgICAgICAvLyBmcm9tIEB1bHRyYWJyaXRlJ3Mgc2hlbGw6IHRlc3QgaWYgYW4gQXVkaW9Db250ZXh0IGNhbiBiZSBjcmVhdGVkIG91dHNpZGUgb2YgYW4gZXZlbnQgY2FsbGJhY2suDQogICAgICAgIC8vIElmIGl0IGNhbid0IGJlIGNyZWF0ZWQsIHRoZW4gcmVxdWlyZSBwcmVzc2luZyB0aGUgc3RhcnQgYnV0dG9uIHRvIHJ1biB0aGUgY2FydHJpZGdlDQogICAgDQogICAgICAgIGlmIChwOF9hdXRvcGxheSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRlbXBfY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTsNCiAgICAgICAgICAgIHRlbXBfY29udGV4dC5vbnN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAodGVtcF9jb250ZXh0LnN0YXRlPT0ncnVubmluZycpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBwOF9ydW5fY2FydCgpOw0KICAgICAgICAgICAgICAgICAgICB0ZW1wX2NvbnRleHQuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgDQogICAgICAgIC8vIHBvaW50ZXIgbG9jayByZXF1ZXN0IG5lZWRzIHRvIGJlIGluc2lkZSBhIGNhbnZhcyBpbnRlcmFjdGlvbiBldmVudA0KICAgICAgICAvLyBwaWNvOF9zdGF0ZS5yZXF1ZXN0X3BvaW50ZXJfbG9jayBpcyB0cnVlIHdoZW4gMHg1ZjJkIGJpdCAwIGFuZCBiaXQgMiBhcmUgc2V0IC0tIHBva2UoMHg1ZjJkLDB4NSkgDQogICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFwOF90b3VjaF9kZXRlY3RlZCkNCiAgICAgICAgICAgICAgICBpZiAocGljbzhfc3RhdGUucmVxdWVzdF9wb2ludGVyX2xvY2spDQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKTsNCiAgICAgICAgfSk7DQogICAgICAgIA0KICAgIDwvc2NyaXB0Pg0KICAgIA0KICAgIA0KICAgIA0KICAgIDwhLS0gQWRkIGNvbnRlbnQgYmVsb3cgdGhlIGNhcnQgaGVyZSAtLT4NCiAgICANCiAgICANCiAgICANCiAgICANCiAgICA8L2Rpdj4gPCEtLSBib2R5XzAgLS0+DQogICAgPC9ib2R5PjwvaHRtbD4NCiAgICANCiAgICA8c2NyaXB0IGRlZmVyIHNyYz0iIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0Pg0KICAgIA0K";
