window.game = "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8YmFzZSBocmVmID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9mYXJhbG9uZy9hbGxAbWFpbi9ibG9ja3kvIj4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPHNjcmlwdD4KCi8vIGxvYWQgY3JhenkKKCgpID0+IHsKICB3aW5kb3cuQ3JhenlnYW1lcyA9IHdpbmRvdy5DcmF6eWdhbWVzIHx8IHt9OwogIHdpbmRvdy5DcmF6eVNESyA9IHdpbmRvdy5DcmF6eVNESyB8fCB7fTsKCiAKICB3aW5kb3cuQ3JhenlnYW1lcy5pbml0ID0gKG9wdGlvbnMpID0+IHsKICAgIGNvbnNvbGUubG9nKCJbU2hpbV0gQ3JhenlnYW1lcy5pbml0IGNhbGxlZCB3aXRoIG9wdGlvbnM6Iiwgb3B0aW9ucyk7CgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGNvbnN0IGZha2VJbml0ID0gewogICAgICAgIGdhbWVMaW5rOiAiaHR0cHM6Ly93d3cuY3JhenlnYW1lcy5jb20vZ2FtZS9ibG9ja3ktZGVtb2xpdGlvbi1kZXJieSIsCiAgICAgICAgdXNlckluZm86IHsKICAgICAgICAgIGNvdW50cnlDb2RlOiAiVVMiLAogICAgICAgICAgbG9jYWxlOiAiZW4tVVMiLAogICAgICAgICAgZGV2aWNlOiB7IHR5cGU6ICJkZXNrdG9wIiB9LAogICAgICAgICAgb3M6IHsgbmFtZTogIldpbmRvd3MiLCB2ZXJzaW9uOiAiMTAiIH0sCiAgICAgICAgICBicm93c2VyOiB7IG5hbWU6ICJDaHJvbWUiLCB2ZXJzaW9uOiAiMTQwLjAuMC4wIiB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgd2luZG93LnVuaXR5R2FtZUluc3RhbmNlPy5TZW5kTWVzc2FnZSgiQ3JhenlTREsiLCAiSW5pdENhbGxiYWNrIiwgSlNPTi5zdHJpbmdpZnkoZmFrZUluaXQpKTsKCiAgICAgIAogICAgICB3aW5kb3cudW5pdHlHYW1lSW5zdGFuY2U/LlNlbmRNZXNzYWdlKCJDcmF6eVNESyIsICJBZGJsb2NrTm90RGV0ZWN0ZWQiLCB1bmRlZmluZWQpOwoKICAgICAgY29uc29sZS5sb2coIltTaGltXSBJbml0Q2FsbGJhY2sgKyBBZGJsb2NrTm90RGV0ZWN0ZWQgc2VudCB0byBVbml0eSIpOwogICAgfSwgMjAwKTsKICB9OwoKCiAgd2luZG93LkNyYXp5Z2FtZXMucmVxdWVzdEFkID0gKGFkVHlwZSkgPT4gewogICAgY29uc29sZS5sb2coIltTaGltXSBDcmF6eWdhbWVzLnJlcXVlc3RBZCBjYWxsZWQgd2l0aCB0eXBlOiIsIGFkVHlwZSk7CgkKCQoJd2luZG93LnRyZSgpCgogICAgCiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgY29uc29sZS5sb2coIltTaGltXSBTZW5kaW5nIEFkRXZlbnQgLT4gYWRTdGFydGVkIik7CiAgICAgIHdpbmRvdy51bml0eUdhbWVJbnN0YW5jZT8uU2VuZE1lc3NhZ2UoIkNyYXp5U0RLIiwgIkFkRXZlbnQiLCAiYWRTdGFydGVkIik7CiAgICB9LCAyMDApOwoKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBjb25zb2xlLmxvZygiW1NoaW1dIFNlbmRpbmcgQWRFdmVudCAtPiBhZEZpbmlzaGVkIik7CiAgICAgIHdpbmRvdy51bml0eUdhbWVJbnN0YW5jZT8uU2VuZE1lc3NhZ2UoIkNyYXp5U0RLIiwgIkFkRXZlbnQiLCAiYWRGaW5pc2hlZCIpOwogICAgfSwgMjAwMCk7CgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGlmIChhZFR5cGUgPT09ICJyZXdhcmRlZCIpIHsKICAgICAgICBjb25zb2xlLmxvZygiW1NoaW1dIFNlbmRpbmcgQWRFdmVudCAtPiBhZENvbXBsZXRlZCAocmV3YXJkIGdyYW50ZWQpIik7CiAgICAgICAgd2luZG93LnVuaXR5R2FtZUluc3RhbmNlPy5TZW5kTWVzc2FnZSgiQ3JhenlTREsiLCAiQWRFdmVudCIsICJhZENvbXBsZXRlZCIpOwogICAgICB9CiAgICB9LCAyMjAwKTsKCiAgICAKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBjb25zb2xlLmxvZygiW1NoaW1dIFNlbmRpbmcgQWRFdmVudCAtPiBhZEVycm9yIChyZXF1ZXN0ZWQgdG9vIHNvb24pIik7CiAgICAgIHdpbmRvdy51bml0eUdhbWVJbnN0YW5jZT8uU2VuZE1lc3NhZ2UoIkNyYXp5U0RLIiwgIkFkRXZlbnQiLCAiYWRFcnJvciIpOwogICAgfSwgMTAwKTsgCiAgfTsKCiAKICB3aW5kb3cuQ3JhenlTREsuaW5pdCA9IChvcHRpb25zKSA9PiB3aW5kb3cuQ3JhenlnYW1lcy5pbml0KG9wdGlvbnMpOwogIHdpbmRvdy5DcmF6eVNESy5yZXF1ZXN0QWQgPSAodHlwZSkgPT4gd2luZG93LkNyYXp5Z2FtZXMucmVxdWVzdEFkKHR5cGUpOwoKICBjb25zb2xlLmxvZygiW1NoaW1dIEZha2UgQ3JhenlHYW1lcyBTREsgaW5zdGFsbGVkIik7Cn0pKCk7Cjwvc2NyaXB0PgoKCgoKCgoKCgoKCgoKCiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7IG1hcmdpbjogMDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZC1jb2xvcjogIzIzMUYyMDsgfQogICAgICAgICN1bml0eS1jb250YWluZXIgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDB2aDsgcG9zaXRpb246IHJlbGF0aXZlOyB9CiAgICAgICAgY2FudmFzIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogYmxvY2s7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGlkPSJ1bml0eS1jb250YWluZXIiPgogICAgICAgIDxjYW52YXMgaWQ9InVuaXR5LWNhbnZhcyI+PC9jYW52YXM+CiAgICA8L2Rpdj4KCgo8c2NyaXB0PnZhciBqc0xvYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpCmpzTG9hZGVyLnNyYyA9ICJVbml0eUxvYWRlci12My1jby5qcyI7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoanNMb2FkZXIpPC9zY3JpcHQ+CiAgICAKICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIAogICAgICAgIDxzY3JpcHQgc3JjID0gImpzemlwLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQ+ICAgIAoJCiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbmRDb21iaW5lWmlwKGJpblVybHMpIHsKICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKGJpblVybHMubWFwKHVybCA9PiBmZXRjaCh1cmwpKSk7CiAgICBjb25zdCBidWZmZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwocmVzcG9uc2VzLm1hcChyZXMgPT4gcmVzLmFycmF5QnVmZmVyKCkpKTsKICAgIGxldCB0b3RhbExlbmd0aCA9IGJ1ZmZlcnMucmVkdWNlKChhY2MsIGJ1ZikgPT4gYWNjICsgYnVmLmJ5dGVMZW5ndGgsIDApOwogICAgbGV0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpOwogICAgbGV0IG9mZnNldCA9IDA7CiAgICBmb3IgKGxldCBidWYgb2YgYnVmZmVycykgewogICAgICAgIGNvbWJpbmVkLnNldChuZXcgVWludDhBcnJheShidWYpLCBvZmZzZXQpOwogICAgICAgIG9mZnNldCArPSBidWYuYnl0ZUxlbmd0aDsKICAgIH0KICAgIHJldHVybiBjb21iaW5lZDsKfQoKYXN5bmMgZnVuY3Rpb24gdW56aXBXZWJwRnJvbUV4dGVybmFsQmlucyhiaW5VcmxzKSB7CiAgICBjb25zdCBibG9iVXJscyA9IHt9OwogICAgY29uc3QgYnl0ZXMgPSBhd2FpdCBmZXRjaEFuZENvbWJpbmVaaXAoYmluVXJscyk7CiAgICBjb25zdCB6aXAgPSBhd2FpdCBKU1ppcC5sb2FkQXN5bmMoYnl0ZXMpOwogICAgZm9yIChjb25zdCBbZmlsZW5hbWUsIGZpbGVdIG9mIE9iamVjdC5lbnRyaWVzKHppcC5maWxlcykpIHsKICAgICAgICBpZiAoIWZpbGUuZGlyKSB7CiAgICAgICAgICAgIGxldCBtaW1lID0gJyc7CiAgICAgICAgICAgIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLmpzJykgfHwgZmlsZW5hbWUuZW5kc1dpdGgoJy5tanMnKSkgewogICAgICAgICAgICAgICAgbWltZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuY3NzJykpIHsKICAgICAgICAgICAgICAgIG1pbWUgPSAndGV4dC9jc3MnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcuaHRtbCcpKSB7CiAgICAgICAgICAgICAgICBtaW1lID0gJ3RleHQvaHRtbCc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuaW5jbHVkZXMoJ2YwM2UyMGQ5MjE5ZGQyMmY2N2I2ZjRiZDMzYWRiZGE1JykpIHsKICAgICAgICAgICAgICAgIG1pbWUgPSAnYXBwbGljYXRpb24vd2FzbSc7CiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGVsc2UgaWYgKGZpbGVuYW1lLmluY2x1ZGVzKCdmZWRiYzUzODg0NmUzYjBkZjQ5NDA2MmFmM2NhNDM3ZicpKSB7CiAgICAgICAgICAgICAgICBtaW1lID0gJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcucG5nJykpIHsKICAgICAgICAgICAgICAgIG1pbWUgPSAnaW1hZ2UvcG5nJzsKICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLmpwZycpIHx8IGZpbGVuYW1lLmVuZHNXaXRoKCcuanBlZycpKSB7CiAgICAgICAgICAgICAgICBtaW1lID0gJ2ltYWdlL2pwZWcnOwogICAgICAgICAgICB9CgkJCWVsc2UgaWYgKGZpbGVuYW1lLmVuZHNXaXRoKCcud2FzbScpICkgewogICAgICAgICAgICAgICAgbWltZSA9ICdhcHBsaWNhdGlvbi93YXNtJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCByYXdCbG9iID0gYXdhaXQgZmlsZS5hc3luYygiYmxvYiIpOwogICAgICAgICAgICBjb25zdCBibG9iID0gbWltZSA/IG5ldyBCbG9iKFtyYXdCbG9iXSwgeyB0eXBlOiBtaW1lIH0pIDogcmF3QmxvYjsKICAgICAgICAgICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFeHRyYWN0ZWQ6IiwgZmlsZW5hbWUpOwogICAgICAgICAgICBibG9iVXJsc1tmaWxlbmFtZV0gPSBibG9iVXJsOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBibG9iVXJsczsKfQoKbGV0IGJsb2JVcmxzcyA9ICIiOwpsZXQgYmluUGFydHMgPSBbCiAgInBhcl8xLmJpbiIsCiAgInBhcl8yLmJpbiIKXTsKCnVuemlwV2VicEZyb21FeHRlcm5hbEJpbnMoYmluUGFydHMpLnRoZW4oYmxvYlVybHMgPT4gewoKICAgIGJsb2JVcmxzcyA9IGJsb2JVcmxzOwogICAgY29uc3QgT1JJR0lOQUxfQ1JFQVRFX0VMRU1FTlQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50OwogICAgY29uc3QgT1JJR0lOQUxfU0VUX0FUVFJJQlVURSA9IEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZTsKCiAgICAKICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbih0YWdOYW1lKSB7CiAgICAgICAgY29uc3QgZWwgPSBPUklHSU5BTF9DUkVBVEVfRUxFTUVOVC5jYWxsKHRoaXMsIHRhZ05hbWUpOwoKICAgICAgICBpZiAodGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2NyaXB0JykgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWwsICdzcmMnLCB7CiAgICAgICAgICAgICAgICBzZXQobmV3U3JjKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBleHRyYWN0RmlsZW5hbWUobmV3U3JjKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IGJsb2JVcmxzc1tmaWxlbmFtZV07CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwoZWwsICdzcmMnLCByZXBsYWNlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgT1JJR0lOQUxfU0VUX0FUVFJJQlVURS5jYWxsKGVsLCAnc3JjJywgbmV3U3JjKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0KCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlbDsKICAgIH07CgogICAgCiAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmIG5hbWUgPT09ICdzcmMnKSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZXh0cmFjdEZpbGVuYW1lKHZhbHVlKTsKICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBibG9iVXJsc3NbZmlsZW5hbWVdOwogICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQpIHsKICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIE9SSUdJTkFMX1NFVF9BVFRSSUJVVEUuY2FsbCh0aGlzLCBuYW1lLCByZXBsYWNlbWVudCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBPUklHSU5BTF9TRVRfQVRUUklCVVRFLmNhbGwodGhpcywgbmFtZSwgdmFsdWUpOwogICAgfTsKCiAgICBmdW5jdGlvbiBleHRyYWN0RmlsZW5hbWUodXJsKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBVUkwodXJsLCBsb2NhdGlvbi5ocmVmKS5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpOwogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICByZXR1cm4gdXJsLnNwbGl0KCcvJykucG9wKCk7IAogICAgICAgIH0KICAgIH0KCgpjb25zdCBpbWFnZVNyY0Rlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEltYWdlLnByb3RvdHlwZSwgJ3NyYycpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoSW1hZ2UucHJvdG90eXBlLCAnc3JjJywgewogIHNldCh2YWx1ZSkgewogICAgY29uc3QgbmV3VVJMID0gcmV3cml0ZVVSTCh2YWx1ZSk7CiAgICBpbWFnZVNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsKICB9LAogIGdldDogaW1hZ2VTcmNEZXNjcmlwdG9yLmdldCwKICBjb25maWd1cmFibGU6IHRydWUsCiAgZW51bWVyYWJsZTogdHJ1ZSwKfSk7CgoKY29uc3Qgc2NyaXB0U3JjRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSFRNTFNjcmlwdEVsZW1lbnQucHJvdG90eXBlLCAnc3JjJyk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MU2NyaXB0RWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7CiAgc2V0KHZhbHVlKSB7CiAgICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHZhbHVlKTsKICAgIHNjcmlwdFNyY0Rlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsKICB9LAogIGdldDogc2NyaXB0U3JjRGVzY3JpcHRvci5nZXQsCiAgY29uZmlndXJhYmxlOiB0cnVlLAogIGVudW1lcmFibGU6IHRydWUsCn0pOwoKCmNvbnN0IGxpbmtIcmVmRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSFRNTExpbmtFbGVtZW50LnByb3RvdHlwZSwgJ2hyZWYnKTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxMaW5rRWxlbWVudC5wcm90b3R5cGUsICdocmVmJywgewogIHNldCh2YWx1ZSkgewogICAgY29uc3QgbmV3VVJMID0gcmV3cml0ZVVSTCh2YWx1ZSk7CiAgICBsaW5rSHJlZkRlc2NyaXB0b3Iuc2V0LmNhbGwodGhpcywgbmV3VVJMKTsKICB9LAogIGdldDogbGlua0hyZWZEZXNjcmlwdG9yLmdldCwKICBjb25maWd1cmFibGU6IHRydWUsCiAgZW51bWVyYWJsZTogdHJ1ZSwKfSk7CgoKY29uc3QgbWVkaWFTcmNEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyYycpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7CiAgc2V0KHZhbHVlKSB7CiAgICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHZhbHVlKTsKICAgIG1lZGlhU3JjRGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLCBuZXdVUkwpOwogIH0sCiAgZ2V0OiBtZWRpYVNyY0Rlc2NyaXB0b3IuZ2V0LAogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICBlbnVtZXJhYmxlOiB0cnVlLAp9KTsKCi8vIGZldGNoCmNvbnN0IG9yaWdpbmFsRmV0Y2ggPSB3aW5kb3cuZmV0Y2g7CndpbmRvdy5mZXRjaCA9IGZ1bmN0aW9uKHJlc291cmNlLCBpbml0KSB7CgogIGlmICh0eXBlb2YgcmVzb3VyY2UgPT09ICJzdHJpbmciKSB7CiAgLy9jb25zb2xlLmxvZyhyZXNvdXJjZSkKICAgIHJlc291cmNlID0gcmV3cml0ZVVSTChyZXNvdXJjZSk7CiAgfSBlbHNlIGlmIChyZXNvdXJjZSBpbnN0YW5jZW9mIFJlcXVlc3QpIHsKICAgIHJlc291cmNlID0gbmV3IFJlcXVlc3QocmV3cml0ZVVSTChyZXNvdXJjZS51cmwpLCByZXNvdXJjZSk7CiAgfQogIHJldHVybiBvcmlnaW5hbEZldGNoLmNhbGwodGhpcywgcmVzb3VyY2UsIGluaXQpOwp9OwoKLy8gWE1MSHR0cFJlcXVlc3QKY29uc3Qgb3JpZ2luYWxPcGVuID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47ClhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIC4uLnJlc3QpIHsKICBjb25zdCBuZXdVUkwgPSByZXdyaXRlVVJMKHVybCk7CiAgcmV0dXJuIG9yaWdpbmFsT3Blbi5jYWxsKHRoaXMsIG1ldGhvZCwgbmV3VVJMLCAuLi5yZXN0KTsKfTsKCgpjb25zdCBPcmlnaW5hbEF1ZGlvID0gd2luZG93LkF1ZGlvOwp3aW5kb3cuQXVkaW8gPSBmdW5jdGlvbihzcmMpIHsKICBjb25zdCBhdWRpbyA9IG5ldyBPcmlnaW5hbEF1ZGlvKCk7CiAgaWYgKHNyYykgewogICAgYXVkaW8uc3JjID0gcmV3cml0ZVVSTChzcmMpOwogIH0KICByZXR1cm4gYXVkaW87Cn07CndpbmRvdy5BdWRpby5wcm90b3R5cGUgPSBPcmlnaW5hbEF1ZGlvLnByb3RvdHlwZTsKCgpmdW5jdGlvbiByZXdyaXRlVVJMKG9yaWdpbmFsKSB7CiAgdmFyIHRyaW1tZWQgPSBvcmlnaW5hbC5zcGxpdCgiLyIpLnBvcCgpOwogIC8vY29uc29sZS5sb2codHJpbW1lZCkKICBpZiAodHJpbW1lZC5pbmNsdWRlcygiPyIpKSB0cmltbWVkID0gdHJpbW1lZC5zcGxpdCgiPyIpWzBdCiAgcmV0dXJuIGJsb2JVcmxzc1t0cmltbWVkXSB8fCBvcmlnaW5hbDsKfQoKCiAgICAgICAKICAgICAgICBjb25zdCBidWlsZFNldHRpbmdzID0gewogICAgICAgICAgICAiY29tcGFueU5hbWUiOiAiR2Ftb25hdXQuY29tIiwKICAgICAgICAgICAgInByb2R1Y3ROYW1lIjogIkJsb2NreSBEZW1vbGl0aW9uIiwKICAgICAgICAgICAgInByb2R1Y3RWZXJzaW9uIjogIjIuMDAiLAogICAgICAgICAgICAiZGF0YVVybCI6ICI1YmVmNDc3OWI5M2M3OGU0NTQxNTU5YjZlMDA3Y2U1Mi51bml0eXdlYiIsCiAgICAgICAgICAgICJ3YXNtQ29kZVVybCI6ICJmMDNlMjBkOTIxOWRkMjJmNjdiNmY0YmQzM2FkYmRhNS51bml0eXdlYiIsCiAgICAgICAgICAgICJ3YXNtRnJhbWV3b3JrVXJsIjogImZlZGJjNTM4ODQ2ZTNiMGRmNDk0MDYyYWYzY2E0MzdmLnVuaXR5d2ViIiwKICAgICAgICAgICAgImdyYXBoaWNzQVBJIjogWyJXZWJHTCAyLjAiLCJXZWJHTCAxLjAiXSwKICAgICAgICAgICAgIndlYmdsQ29udGV4dEF0dHJpYnV0ZXMiOiB7InByZXNlcnZlRHJhd2luZ0J1ZmZlciI6IGZhbHNlfSwKICAgICAgICAgICAgInNwbGFzaFNjcmVlblN0eWxlIjogIkRhcmsiLAogICAgICAgICAgICAiYmFja2dyb3VuZENvbG9yIjogIiMyMzFGMjAiLAogICAgICAgICAgICAiY2FjaGVDb250cm9sIjogeyJkZWZhdWx0IjogIm11c3QtcmV2YWxpZGF0ZSJ9LAogICAgICAgICAgICAiZGV2ZWxvcG1lbnRCdWlsZCI6IGZhbHNlLAogICAgICAgICAgICAibXVsdGl0aHJlYWRpbmciOiBmYWxzZSwKICAgICAgICAgICAgInVuaXR5VmVyc2lvbiI6ICIyMDE5LjIuOGYxIgogICAgICAgIH07CmNvbnN0IGJ1aWxkQmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShidWlsZFNldHRpbmdzKV0sIHt0eXBlOiAnYXBwbGljYXRpb24vanNvbid9KTsKY29uc3QgYnVpbGRVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJ1aWxkQmxvYik7CiAgICAgICAgCiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVuaXR5LWNhbnZhcyIpOwoKICAgICAgICBVbml0eUxvYWRlci5pbnN0YW50aWF0ZSgKICAgICAgICAgICAgInVuaXR5LWNvbnRhaW5lciIsCiAgICAgICAgICAgIGJ1aWxkVXJsLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBvblByb2dyZXNzOiAodW5pdHlJbnN0YW5jZSwgcHJvZ3Jlc3MpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTG9hZGluZyBwcm9ncmVzczoiLCBwcm9ncmVzcyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICApOwp9KTsKICAgIDwvc2NyaXB0PgogICAgCiAgICAKCgk8c2NyaXB0PgoJCgk8L3NjcmlwdD4KCjwvYm9keT4KPC9odG1sPgo=";
